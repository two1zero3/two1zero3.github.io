function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var La=Object.defineProperty;var Ra=(_,o,b)=>o in _?La(_,o,{enumerable:!0,configurable:!0,writable:!0,value:b}):_[o]=b;var kt=(_,o,b)=>(Ra(_,typeof o!="symbol"?o+"":o,b),b);(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const M of document.querySelectorAll('link[rel="modulepreload"]'))t(M);new MutationObserver(M=>{for(const j of M)if(j.type==="childList")for(const h of j.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&t(h)}).observe(document,{childList:!0,subtree:!0});function b(M){const j={};return M.integrity&&(j.integrity=M.integrity),M.referrerPolicy&&(j.referrerPolicy=M.referrerPolicy),M.crossOrigin==="use-credentials"?j.credentials="include":M.crossOrigin==="anonymous"?j.credentials="omit":j.credentials="same-origin",j}function t(M){if(M.ep)return;M.ep=!0;const j=b(M);fetch(M.href,j)}})();const Ia="modulepreload",Da=function(_){return"/dist/"+_},Ds={},Fa=function(o,b,t){let M=Promise.resolve();if(b&&b.length>0){const j=document.getElementsByTagName("link");M=Promise.all(b.map(h=>{if(h=Da(h),h in Ds)return;Ds[h]=!0;const y=h.endsWith(".css"),l=y?'[rel="stylesheet"]':"";if(!!t)for(let m=j.length-1;m>=0;m--){const n=j[m];if(n.href===h&&(!y||n.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${l}`))return;const v=document.createElement("link");if(v.rel=y?"stylesheet":Ia,y||(v.as="script",v.crossOrigin=""),v.href=h,document.head.appendChild(v),y)return new Promise((m,n)=>{v.addEventListener("load",m),v.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${h}`)))})}))}return M.then(()=>o()).catch(j=>{const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=j,window.dispatchEvent(h),!h.defaultPrevented)throw j})};/*! Tweakpane 4.0.3 (c) 2016 cocopon, licensed under the MIT license. */function jt(_){return _==null}function ko(_){return _!==null&&typeof _=="object"}function _o(_){return _!==null&&typeof _=="object"}function Ua(_,o){if(_.length!==o.length)return!1;for(let b=0;b<_.length;b++)if(_[b]!==o[b])return!1;return!0}function Fr(_,o){return Array.from(new Set([...Object.keys(_),...Object.keys(o)])).reduce((t,M)=>{const j=_[M],h=o[M];return _o(j)&&_o(h)?Object.assign(Object.assign({},t),{[M]:Fr(j,h)}):Object.assign(Object.assign({},t),{[M]:M in o?h:j})},{})}function To(_){return ko(_)?"target"in _:!1}const Na={alreadydisposed:()=>"View has been already disposed",invalidparams:_=>`Invalid parameters for '${_.name}'`,nomatchingcontroller:_=>`No matching controller for '${_.key}'`,nomatchingview:_=>`No matching view for '${JSON.stringify(_.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:_=>`Not compatible with  plugin '${_.id}'`,propertynotfound:_=>`Property '${_.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Lt{static alreadyDisposed(){return new Lt({type:"alreadydisposed"})}static notBindable(){return new Lt({type:"notbindable"})}static notCompatible(o,b){return new Lt({type:"notcompatible",context:{id:`${o}.${b}`}})}static propertyNotFound(o){return new Lt({type:"propertynotfound",context:{name:o}})}static shouldNeverHappen(){return new Lt({type:"shouldneverhappen"})}constructor(o){var b;this.message=(b=Na[o.type](o.context))!==null&&b!==void 0?b:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=o.type}toString(){return this.message}}class Wn{constructor(o,b){this.obj_=o,this.key=b}static isBindable(o){return!(o===null||typeof o!="object"&&typeof o!="function")}read(){return this.obj_[this.key]}write(o){this.obj_[this.key]=o}writeProperty(o,b){const t=this.read();if(!Wn.isBindable(t))throw Lt.notBindable();if(!(o in t))throw Lt.propertyNotFound(o);t[o]=b}}class Ut{constructor(){this.observers_={}}on(o,b,t){var M;let j=this.observers_[o];return j||(j=this.observers_[o]=[]),j.push({handler:b,key:(M=t==null?void 0:t.key)!==null&&M!==void 0?M:b}),this}off(o,b){const t=this.observers_[o];return t&&(this.observers_[o]=t.filter(M=>M.key!==b)),this}emit(o,b){const t=this.observers_[o];t&&t.forEach(M=>{M.handler(b)})}}class Ba{constructor(o,b){var t;this.constraint_=b==null?void 0:b.constraint,this.equals_=(t=b==null?void 0:b.equals)!==null&&t!==void 0?t:(M,j)=>M===j,this.emitter=new Ut,this.rawValue_=o}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(o){this.setRawValue(o,{forceEmit:!1,last:!0})}setRawValue(o,b){const t=b??{forceEmit:!1,last:!0},M=this.constraint_?this.constraint_.constrain(o):o,j=this.rawValue_;this.equals_(j,M)&&!t.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=M,this.emitter.emit("change",{options:t,previousRawValue:j,rawValue:M,sender:this}))}}class Va{constructor(o){this.emitter=new Ut,this.value_=o}get rawValue(){return this.value_}set rawValue(o){this.setRawValue(o,{forceEmit:!1,last:!0})}setRawValue(o,b){const t=b??{forceEmit:!1,last:!0},M=this.value_;M===o&&!t.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=o,this.emitter.emit("change",{options:t,previousRawValue:M,rawValue:this.value_,sender:this}))}}class Ga{constructor(o){this.emitter=new Ut,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=o,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(o){this.emitter.emit("beforechange",Object.assign(Object.assign({},o),{sender:this}))}onValueChange_(o){this.emitter.emit("change",Object.assign(Object.assign({},o),{sender:this}))}}function Tt(_,o){const b=o==null?void 0:o.constraint,t=o==null?void 0:o.equals;return!b&&!t?new Va(_):new Ba(_,o)}function za(_){return[new Ga(_),(o,b)=>{_.setRawValue(o,b)}]}class lt{constructor(o){this.emitter=new Ut,this.valMap_=o;for(const b in this.valMap_)this.valMap_[b].emitter.on("change",()=>{this.emitter.emit("change",{key:b,sender:this})})}static createCore(o){return Object.keys(o).reduce((t,M)=>Object.assign(t,{[M]:Tt(o[M])}),{})}static fromObject(o){const b=this.createCore(o);return new lt(b)}get(o){return this.valMap_[o].rawValue}set(o,b){this.valMap_[o].rawValue=b}value(o){return this.valMap_[o]}}class jn{constructor(o){this.values=lt.fromObject({max:o.max,min:o.min})}constrain(o){const b=this.values.get("max"),t=this.values.get("min");return Math.min(Math.max(o,t),b)}}class Ha{constructor(o){this.values=lt.fromObject({max:o.max,min:o.min})}constrain(o){const b=this.values.get("max"),t=this.values.get("min");let M=o;return jt(t)||(M=Math.max(M,t)),jt(b)||(M=Math.min(M,b)),M}}class Wa{constructor(o,b=0){this.step=o,this.origin=b}constrain(o){const b=this.origin%this.step,t=Math.round((o-b)/this.step);return b+t*this.step}}class qa{constructor(o){this.text=o}evaluate(){return Number(this.text)}toString(){return this.text}}const Xa={"**":(_,o)=>Math.pow(_,o),"*":(_,o)=>_*o,"/":(_,o)=>_/o,"%":(_,o)=>_%o,"+":(_,o)=>_+o,"-":(_,o)=>_-o,"<<":(_,o)=>_<<o,">>":(_,o)=>_>>o,">>>":(_,o)=>_>>>o,"&":(_,o)=>_&o,"^":(_,o)=>_^o,"|":(_,o)=>_|o};class Ya{constructor(o,b,t){this.left=b,this.operator=o,this.right=t}evaluate(){const o=Xa[this.operator];if(!o)throw new Error(`unexpected binary operator: '${this.operator}`);return o(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Ka={"+":_=>_,"-":_=>-_,"~":_=>~_};class Za{constructor(o,b){this.operator=o,this.expression=b}evaluate(){const o=Ka[this.operator];if(!o)throw new Error(`unexpected unary operator: '${this.operator}`);return o(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Mo(_){return(o,b)=>{for(let t=0;t<_.length;t++){const M=_[t](o,b);if(M!=="")return M}return""}}function gn(_,o){var b;const t=_.substr(o).match(/^\s+/);return(b=t&&t[0])!==null&&b!==void 0?b:""}function Qa(_,o){const b=_.substr(o,1);return b.match(/^[1-9]$/)?b:""}function vn(_,o){var b;const t=_.substr(o).match(/^[0-9]+/);return(b=t&&t[0])!==null&&b!==void 0?b:""}function $a(_,o){const b=vn(_,o);if(b!=="")return b;const t=_.substr(o,1);if(o+=1,t!=="-"&&t!=="+")return"";const M=vn(_,o);return M===""?"":t+M}function Po(_,o){const b=_.substr(o,1);if(o+=1,b.toLowerCase()!=="e")return"";const t=$a(_,o);return t===""?"":b+t}function hi(_,o){const b=_.substr(o,1);if(b==="0")return b;const t=Qa(_,o);return o+=t.length,t===""?"":t+vn(_,o)}function Ja(_,o){const b=hi(_,o);if(o+=b.length,b==="")return"";const t=_.substr(o,1);if(o+=t.length,t!==".")return"";const M=vn(_,o);return o+=M.length,b+t+M+Po(_,o)}function el(_,o){const b=_.substr(o,1);if(o+=b.length,b!==".")return"";const t=vn(_,o);return o+=t.length,t===""?"":b+t+Po(_,o)}function tl(_,o){const b=hi(_,o);return o+=b.length,b===""?"":b+Po(_,o)}const rl=Mo([Ja,el,tl]);function nl(_,o){var b;const t=_.substr(o).match(/^[01]+/);return(b=t&&t[0])!==null&&b!==void 0?b:""}function ol(_,o){const b=_.substr(o,2);if(o+=b.length,b.toLowerCase()!=="0b")return"";const t=nl(_,o);return t===""?"":b+t}function sl(_,o){var b;const t=_.substr(o).match(/^[0-7]+/);return(b=t&&t[0])!==null&&b!==void 0?b:""}function il(_,o){const b=_.substr(o,2);if(o+=b.length,b.toLowerCase()!=="0o")return"";const t=sl(_,o);return t===""?"":b+t}function al(_,o){var b;const t=_.substr(o).match(/^[0-9a-f]+/i);return(b=t&&t[0])!==null&&b!==void 0?b:""}function ll(_,o){const b=_.substr(o,2);if(o+=b.length,b.toLowerCase()!=="0x")return"";const t=al(_,o);return t===""?"":b+t}const ul=Mo([ol,il,ll]),cl=Mo([ul,rl]);function dl(_,o){const b=cl(_,o);return o+=b.length,b===""?null:{evaluable:new qa(b),cursor:o}}function hl(_,o){const b=_.substr(o,1);if(o+=b.length,b!=="(")return null;const t=fi(_,o);if(!t)return null;o=t.cursor,o+=gn(_,o).length;const M=_.substr(o,1);return o+=M.length,M!==")"?null:{evaluable:t.evaluable,cursor:o}}function pl(_,o){var b;return(b=dl(_,o))!==null&&b!==void 0?b:hl(_,o)}function pi(_,o){const b=pl(_,o);if(b)return b;const t=_.substr(o,1);if(o+=t.length,t!=="+"&&t!=="-"&&t!=="~")return null;const M=pi(_,o);return M?(o=M.cursor,{cursor:o,evaluable:new Za(t,M.evaluable)}):null}function fl(_,o,b){b+=gn(o,b).length;const t=_.filter(M=>o.startsWith(M,b))[0];return t?(b+=t.length,b+=gn(o,b).length,{cursor:b,operator:t}):null}function ml(_,o){return(b,t)=>{const M=_(b,t);if(!M)return null;t=M.cursor;let j=M.evaluable;for(;;){const h=fl(o,b,t);if(!h)break;t=h.cursor;const y=_(b,t);if(!y)return null;t=y.cursor,j=new Ya(h.operator,j,y.evaluable)}return j?{cursor:t,evaluable:j}:null}}const yl=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((_,o)=>ml(_,o),pi);function fi(_,o){return o+=gn(_,o).length,yl(_,o)}function gl(_){const o=fi(_,0);return!o||o.cursor+gn(_,o.cursor).length!==_.length?null:o.evaluable}function jr(_){var o;const b=gl(_);return(o=b==null?void 0:b.evaluate())!==null&&o!==void 0?o:null}function mi(_){if(typeof _=="number")return _;if(typeof _=="string"){const o=jr(_);if(!jt(o))return o}return 0}function vl(_){return String(_)}function tr(_){return o=>o.toFixed(Math.max(Math.min(_,20),0))}function yt(_,o,b,t,M){const j=(_-o)/(b-o);return t+j*(M-t)}function Fs(_){return String(_.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Bt(_,o,b){return Math.min(Math.max(_,o),b)}function yi(_,o){return(_%o+o)%o}function bl(_,o){return jt(_.step)?Math.max(Fs(o),2):Fs(_.step)}function gi(_){var o;return(o=_.step)!==null&&o!==void 0?o:1}function vi(_,o){var b;const t=Math.abs((b=_.step)!==null&&b!==void 0?b:o);return t===0?.1:Math.pow(10,Math.floor(Math.log10(t))-1)}function bi(_,o){return jt(_.step)?null:new Wa(_.step,o)}function _i(_){return!jt(_.max)&&!jt(_.min)?new jn({max:_.max,min:_.min}):!jt(_.max)||!jt(_.min)?new Ha({max:_.max,min:_.min}):null}function wi(_,o){var b,t,M;return{formatter:(b=_.format)!==null&&b!==void 0?b:tr(bl(_,o)),keyScale:(t=_.keyScale)!==null&&t!==void 0?t:gi(_),pointerScale:(M=_.pointerScale)!==null&&M!==void 0?M:vi(_,o)}}function xi(_){return{format:_.optional.function,keyScale:_.optional.number,max:_.optional.number,min:_.optional.number,pointerScale:_.optional.number,step:_.optional.number}}function Oo(_){return{constraint:_.constraint,textProps:lt.fromObject(wi(_.params,_.initialValue))}}class Br{constructor(o){this.controller=o}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(o){this.controller.viewProps.set("disabled",o)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(o){this.controller.viewProps.set("hidden",o)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(o){return this.controller.importState(o)}exportState(){return this.controller.exportState()}}class Qn{constructor(o){this.target=o}}class Sn extends Qn{constructor(o,b,t){super(o),this.value=b,this.last=t??!0}}class _l extends Qn{constructor(o,b){super(o),this.expanded=b}}class wl extends Qn{constructor(o,b){super(o),this.index=b}}class xl extends Qn{constructor(o,b){super(o),this.native=b}}class bn extends Br{constructor(o){super(o),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Ut,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(o){this.controller.labelController.props.set("label",o)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(o){this.controller.tag=o}on(o,b){const t=b.bind(this);return this.emitter_.on(o,M=>{t(M)},{key:b}),this}off(o,b){return this.emitter_.off(o,b),this}refresh(){this.controller.value.fetch()}onValueChange_(o){const b=this.controller.value;this.emitter_.emit("change",new Sn(this,b.binding.target.read(),o.options.last))}}class jl{constructor(o,b){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=b,this.value_=o,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new Ut}get rawValue(){return this.value_.rawValue}set rawValue(o){this.value_.rawValue=o}setRawValue(o,b){this.value_.setRawValue(o,b)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(o){this.emitter.emit("beforechange",Object.assign(Object.assign({},o),{sender:this}))}onValueChange_(o){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},o),{sender:this}))}}function Sl(_){if(!("binding"in _))return!1;const o=_.binding;return To(o)&&"read"in o&&"write"in o}function El(_,o){const t=Object.keys(o).reduce((M,j)=>{if(M===void 0)return;const h=o[j],y=h(_[j]);return y.succeeded?Object.assign(Object.assign({},M),{[j]:y.value}):void 0},{});return t}function Cl(_,o){return _.reduce((b,t)=>{if(b===void 0)return;const M=o(t);if(!(!M.succeeded||M.value===void 0))return[...b,M.value]},[])}function kl(_){return _===null?!1:typeof _=="object"}function _r(_){return o=>b=>{if(!o&&b===void 0)return{succeeded:!1,value:void 0};if(o&&b===void 0)return{succeeded:!0,value:void 0};const t=_(b);return t!==void 0?{succeeded:!0,value:t}:{succeeded:!1,value:void 0}}}function Us(_){return{custom:o=>_r(o)(_),boolean:_r(o=>typeof o=="boolean"?o:void 0)(_),number:_r(o=>typeof o=="number"?o:void 0)(_),string:_r(o=>typeof o=="string"?o:void 0)(_),function:_r(o=>typeof o=="function"?o:void 0)(_),constant:o=>_r(b=>b===o?o:void 0)(_),raw:_r(o=>o)(_),object:o=>_r(b=>{if(kl(b))return El(b,o)})(_),array:o=>_r(b=>{if(Array.isArray(b))return Cl(b,o)})(_)}}const wo={optional:Us(!0),required:Us(!1)};function Pt(_,o){const b=o(wo),t=wo.required.object(b)(_);return t.succeeded?t.value:void 0}function nr(_,o,b,t){if(o&&!o(_))return!1;const M=Pt(_,b);return M?t(M):!1}function or(_,o){var b;return Fr((b=_==null?void 0:_())!==null&&b!==void 0?b:{},o)}function Dr(_){return"value"in _}function ji(_){if(!ko(_)||!("binding"in _))return!1;const o=_.binding;return To(o)}const mr="http://www.w3.org/2000/svg";function qn(_){_.offsetHeight}function Tl(_,o){const b=_.style.transition;_.style.transition="none",o(),_.style.transition=b}function Ao(_){return _.ontouchstart!==void 0}function Ml(){return globalThis}function Pl(){return Ml().document}function Ol(_){const o=_.ownerDocument.defaultView;return o&&"document"in o?_.getContext("2d",{willReadFrequently:!0}):null}const Al={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function $n(_,o){const b=_.createElementNS(mr,"svg");return b.innerHTML=Al[o],b}function Si(_,o,b){_.insertBefore(o,_.children[b])}function Lo(_){_.parentElement&&_.parentElement.removeChild(_)}function Ei(_){for(;_.children.length>0;)_.removeChild(_.children[0])}function Ll(_){for(;_.childNodes.length>0;)_.removeChild(_.childNodes[0])}function Ci(_){return _.relatedTarget?_.relatedTarget:"explicitOriginalTarget"in _?_.explicitOriginalTarget:null}function xr(_,o){_.emitter.on("change",b=>{o(b.rawValue)}),o(_.rawValue)}function yr(_,o,b){xr(_.value(o),b)}const Rl="tp";function pt(_){return(b,t)=>[Rl,"-",_,"v",b?`_${b}`:"",t?`-${t}`:""].join("")}const hn=pt("lbl");function Il(_,o){const b=_.createDocumentFragment();return o.split(`
`).map(M=>_.createTextNode(M)).forEach((M,j)=>{j>0&&b.appendChild(_.createElement("br")),b.appendChild(M)}),b}class ki{constructor(o,b){this.element=o.createElement("div"),this.element.classList.add(hn()),b.viewProps.bindClassModifiers(this.element);const t=o.createElement("div");t.classList.add(hn("l")),yr(b.props,"label",j=>{jt(j)?this.element.classList.add(hn(void 0,"nol")):(this.element.classList.remove(hn(void 0,"nol")),Ll(t),t.appendChild(Il(o,j)))}),this.element.appendChild(t),this.labelElement=t;const M=o.createElement("div");M.classList.add(hn("v")),this.element.appendChild(M),this.valueElement=M}}class Ti{constructor(o,b){this.props=b.props,this.valueController=b.valueController,this.viewProps=b.valueController.viewProps,this.view=new ki(o,{props:b.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(o){return nr(o,null,b=>({label:b.optional.string}),b=>(this.props.set("label",b.label),!0))}exportProps(){return or(null,{label:this.props.get("label")})}}function Dl(){return["veryfirst","first","last","verylast"]}const Ns=pt(""),Bs={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Jn{constructor(o){this.parent_=null,this.blade=o.blade,this.view=o.view,this.viewProps=o.viewProps;const b=this.view.element;this.blade.value("positions").emitter.on("change",()=>{Dl().forEach(t=>{b.classList.remove(Ns(void 0,Bs[t]))}),this.blade.get("positions").forEach(t=>{b.classList.add(Ns(void 0,Bs[t]))})}),this.viewProps.handleDispose(()=>{Lo(b)})}get parent(){return this.parent_}set parent(o){this.parent_=o,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(o){return nr(o,null,b=>({disabled:b.required.boolean,hidden:b.required.boolean}),b=>(this.viewProps.importState(b),!0))}exportState(){return or(null,Object.assign({},this.viewProps.exportState()))}}class Ur extends Jn{constructor(o,b){if(b.value!==b.valueController.value)throw Lt.shouldNeverHappen();const t=b.valueController.viewProps,M=new Ti(o,{blade:b.blade,props:b.props,valueController:b.valueController});super(Object.assign(Object.assign({},b),{view:new ki(o,{props:b.props,viewProps:t}),viewProps:t})),this.labelController=M,this.value=b.value,this.valueController=b.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(o){return nr(o,b=>{var t,M,j;return super.importState(b)&&this.labelController.importProps(b)&&((j=(M=(t=this.valueController).importProps)===null||M===void 0?void 0:M.call(t,o))!==null&&j!==void 0?j:!0)},b=>({value:b.optional.raw}),b=>(b.value&&(this.value.rawValue=b.value),!0))}exportState(){var o,b,t;return or(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(t=(b=(o=this.valueController).exportProps)===null||b===void 0?void 0:b.call(o))!==null&&t!==void 0?t:{}))}}function Vs(_){const o=Object.assign({},_);return delete o.value,o}class Mi extends Ur{constructor(o,b){super(o,b),this.tag=b.tag}importState(o){return nr(o,b=>super.importState(Vs(o)),b=>({tag:b.optional.string}),b=>(this.tag=b.tag,!0))}exportState(){return or(()=>Vs(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function Fl(_){return Dr(_)&&ji(_.value)}class Ul extends Mi{importState(o){return nr(o,b=>super.importState(b),b=>({binding:b.required.object({value:b.required.raw})}),b=>(this.value.binding.inject(b.binding.value),this.value.fetch(),!0))}}function Nl(_){return Dr(_)&&Sl(_.value)}function Pi(_,o){for(;_.length<o;)_.push(void 0)}function Bl(_){const o=[];return Pi(o,_),o}function Vl(_){const o=_.indexOf(void 0);return o<0?_:_.slice(0,o)}function Gl(_,o){const b=[...Vl(_),o];return b.length>_.length?b.splice(0,b.length-_.length):Pi(b,_.length),b}class zl{constructor(o){this.emitter=new Ut,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=o.binding,this.value_=Tt(Bl(o.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=o.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(o){this.value_.rawValue=o}setRawValue(o,b){this.value_.setRawValue(o,b)}fetch(){this.value_.rawValue=Gl(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(o){this.emitter.emit("beforechange",Object.assign(Object.assign({},o),{sender:this}))}onValueChange_(o){this.emitter.emit("change",Object.assign(Object.assign({},o),{sender:this}))}}function Hl(_){if(!("binding"in _))return!1;const o=_.binding;return To(o)&&"read"in o&&!("write"in o)}class Wl extends Mi{exportState(){return or(()=>super.exportState(),{binding:{readonly:!0}})}}function ql(_){return Dr(_)&&Hl(_.value)}class Xl extends Br{get label(){return this.controller.labelController.props.get("label")}set label(o){this.controller.labelController.props.set("label",o)}get title(){var o;return(o=this.controller.buttonController.props.get("title"))!==null&&o!==void 0?o:""}set title(o){this.controller.buttonController.props.set("title",o)}on(o,b){const t=b.bind(this);return this.controller.buttonController.emitter.on(o,j=>{t(new xl(this,j.nativeEvent))}),this}off(o,b){return this.controller.buttonController.emitter.off(o,b),this}}function Yl(_,o,b){b?_.classList.add(o):_.classList.remove(o)}function $r(_,o){return b=>{Yl(_,o,b)}}function Ro(_,o){xr(_,b=>{o.textContent=b??""})}const lo=pt("btn");class Kl{constructor(o,b){this.element=o.createElement("div"),this.element.classList.add(lo()),b.viewProps.bindClassModifiers(this.element);const t=o.createElement("button");t.classList.add(lo("b")),b.viewProps.bindDisabled(t),this.element.appendChild(t),this.buttonElement=t;const M=o.createElement("div");M.classList.add(lo("t")),Ro(b.props.value("title"),M),this.buttonElement.appendChild(M)}}class Zl{constructor(o,b){this.emitter=new Ut,this.onClick_=this.onClick_.bind(this),this.props=b.props,this.viewProps=b.viewProps,this.view=new Kl(o,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(o){return nr(o,null,b=>({title:b.optional.string}),b=>(this.props.set("title",b.title),!0))}exportProps(){return or(null,{title:this.props.get("title")})}onClick_(o){this.emitter.emit("click",{nativeEvent:o,sender:this})}}class Gs extends Jn{constructor(o,b){const t=new Zl(o,{props:b.buttonProps,viewProps:b.viewProps}),M=new Ti(o,{blade:b.blade,props:b.labelProps,valueController:t});super({blade:b.blade,view:M.view,viewProps:b.viewProps}),this.buttonController=t,this.labelController=M}importState(o){return nr(o,b=>super.importState(b)&&this.buttonController.importProps(b)&&this.labelController.importProps(b),()=>({}),()=>!0)}exportState(){return or(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class Oi{constructor(o){const[b,t]=o.split("-"),M=b.split(".");this.major=parseInt(M[0],10),this.minor=parseInt(M[1],10),this.patch=parseInt(M[2],10),this.prerelease=t??null}toString(){const o=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[o,this.prerelease].join("-"):o}}const Jr=new Oi("2.0.3");function Jt(_){return Object.assign({core:Jr},_)}const Ql=Jt({id:"button",type:"blade",accept(_){const o=Pt(_,b=>({title:b.required.string,view:b.required.constant("button"),label:b.optional.string}));return o?{params:o}:null},controller(_){return new Gs(_.document,{blade:_.blade,buttonProps:lt.fromObject({title:_.params.title}),labelProps:lt.fromObject({label:_.params.label}),viewProps:_.viewProps})},api(_){return _.controller instanceof Gs?new Xl(_.controller):null}});function $l(_,o){return _.addBlade(Object.assign(Object.assign({},o),{view:"button"}))}function Jl(_,o){return _.addBlade(Object.assign(Object.assign({},o),{view:"folder"}))}function eu(_,o){return _.addBlade(Object.assign(Object.assign({},o),{view:"tab"}))}function tu(_){return ko(_)?"refresh"in _&&typeof _.refresh=="function":!1}function ru(_,o){if(!Wn.isBindable(_))throw Lt.notBindable();return new Wn(_,o)}class nu{constructor(o,b){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=o,this.emitter_=new Ut,this.pool_=b,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(o=>this.pool_.createApi(o))}addBinding(o,b,t){const M=t??{},j=this.controller_.element.ownerDocument,h=this.pool_.createBinding(j,ru(o,b),M),y=this.pool_.createBindingApi(h);return this.add(y,M.index)}addFolder(o){return Jl(this,o)}addButton(o){return $l(this,o)}addTab(o){return eu(this,o)}add(o,b){const t=o.controller;return this.controller_.rack.add(t,b),o}remove(o){this.controller_.rack.remove(o.controller)}addBlade(o){const b=this.controller_.element.ownerDocument,t=this.pool_.createBlade(b,o),M=this.pool_.createApi(t);return this.add(M,o.index)}on(o,b){const t=b.bind(this);return this.emitter_.on(o,M=>{t(M)},{key:b}),this}off(o,b){return this.emitter_.off(o,b),this}refresh(){this.children.forEach(o=>{tu(o)&&o.refresh()})}onRackValueChange_(o){const b=o.bladeController,t=this.pool_.createApi(b),M=ji(b.value)?b.value.binding:null;this.emitter_.emit("change",new Sn(t,M?M.target.read():b.value.rawValue,o.options.last))}}class Io extends Br{constructor(o,b){super(o),this.rackApi_=new nu(o.rackController,b)}refresh(){this.rackApi_.refresh()}}class Do extends Jn{constructor(o){super({blade:o.blade,view:o.view,viewProps:o.rackController.viewProps}),this.rackController=o.rackController}importState(o){return nr(o,b=>super.importState(b),b=>({children:b.required.array(b.required.raw)}),b=>this.rackController.rack.children.every((t,M)=>t.importState(b.children[M])))}exportState(){return or(()=>super.exportState(),{children:this.rackController.rack.children.map(o=>o.exportState())})}}function xo(_){return"rackController"in _}class ou{constructor(o){this.emitter=new Ut,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=o}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(o){for(const b of this.allItems())if(o(b))return b;return null}includes(o){return this.cache_.has(o)}add(o,b){if(this.includes(o))throw Lt.shouldNeverHappen();const t=b!==void 0?b:this.items_.length;this.items_.splice(t,0,o),this.cache_.add(o);const M=this.extract_(o);M&&(M.emitter.on("add",this.onSubListAdd_),M.emitter.on("remove",this.onSubListRemove_),M.allItems().forEach(j=>{this.cache_.add(j)})),this.emitter.emit("add",{index:t,item:o,root:this,target:this})}remove(o){const b=this.items_.indexOf(o);if(b<0)return;this.items_.splice(b,1),this.cache_.delete(o);const t=this.extract_(o);t&&(t.allItems().forEach(M=>{this.cache_.delete(M)}),t.emitter.off("add",this.onSubListAdd_),t.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:b,item:o,root:this,target:this})}onSubListAdd_(o){this.cache_.add(o.item),this.emitter.emit("add",{index:o.index,item:o.item,root:this,target:o.target})}onSubListRemove_(o){this.cache_.delete(o.item),this.emitter.emit("remove",{index:o.index,item:o.item,root:this,target:o.target})}}function su(_,o){for(let b=0;b<_.length;b++){const t=_[b];if(Dr(t)&&t.value===o)return t}return null}function iu(_){return xo(_)?_.rackController.rack.bcSet_:null}class au{constructor(o){var b,t;this.emitter=new Ut,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(b=o.blade)!==null&&b!==void 0?b:null,(t=this.blade_)===null||t===void 0||t.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=o.viewProps,this.bcSet_=new ou(iu),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(o,b){var t;(t=o.parent)===null||t===void 0||t.remove(o),o.parent=this,this.bcSet_.add(o,b)}remove(o){o.parent=null,this.bcSet_.remove(o)}find(o){return this.bcSet_.allItems().filter(o)}onSetAdd_(o){this.updatePositions_();const b=o.target===o.root;if(this.emitter.emit("add",{bladeController:o.item,index:o.index,root:b,sender:this}),!b)return;const t=o.item;if(t.viewProps.emitter.on("change",this.onChildViewPropsChange_),t.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),t.viewProps.handleDispose(this.onChildDispose_),Dr(t))t.value.emitter.on("change",this.onChildValueChange_);else if(xo(t)){const M=t.rackController.rack;if(M){const j=M.emitter;j.on("layout",this.onRackLayout_),j.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(o){this.updatePositions_();const b=o.target===o.root;if(this.emitter.emit("remove",{bladeController:o.item,root:b,sender:this}),!b)return;const t=o.item;if(Dr(t))t.value.emitter.off("change",this.onChildValueChange_);else if(xo(t)){const M=t.rackController.rack;if(M){const j=M.emitter;j.off("layout",this.onRackLayout_),j.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const o=this.bcSet_.items.filter(M=>!M.viewProps.get("hidden")),b=o[0],t=o[o.length-1];this.bcSet_.items.forEach(M=>{const j=[];M===b&&(j.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&j.push("veryfirst")),M===t&&(j.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&j.push("verylast")),M.blade.set("positions",j)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(o){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(b=>b.viewProps.get("disposed")).forEach(b=>{this.bcSet_.remove(b)})}onChildValueChange_(o){const b=su(this.find(Dr),o.sender);if(!b)throw Lt.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:b,options:o.options,sender:this})}onRackLayout_(o){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(o){this.emitter.emit("valuechange",{bladeController:o.bladeController,options:o.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Fo{constructor(o){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=o.element,this.viewProps=o.viewProps;const b=new au({blade:o.root?void 0:o.blade,viewProps:o.viewProps});b.emitter.on("add",this.onRackAdd_),b.emitter.on("remove",this.onRackRemove_),this.rack=b,this.viewProps.handleDispose(()=>{for(let t=this.rack.children.length-1;t>=0;t--)this.rack.children[t].viewProps.set("disposed",!0)})}onRackAdd_(o){o.root&&Si(this.element,o.bladeController.view.element,o.index)}onRackRemove_(o){o.root&&Lo(o.bladeController.view.element)}}function en(){return new lt({positions:Tt([],{equals:Ua})})}class En extends lt{constructor(o){super(o)}static create(o){const b={completed:!0,expanded:o,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},t=lt.createCore(b);return new En(t)}get styleExpanded(){var o;return(o=this.get("temporaryExpanded"))!==null&&o!==void 0?o:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const o=this.get("expandedHeight");return this.get("shouldFixHeight")&&!jt(o)?`${o}px`:"auto"}bindExpandedClass(o,b){const t=()=>{this.styleExpanded?o.classList.add(b):o.classList.remove(b)};yr(this,"expanded",t),yr(this,"temporaryExpanded",t)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function lu(_,o){let b=0;return Tl(o,()=>{_.set("expandedHeight",null),_.set("temporaryExpanded",!0),qn(o),b=o.clientHeight,_.set("temporaryExpanded",null),qn(o)}),b}function zs(_,o){o.style.height=_.styleHeight}function Uo(_,o){_.value("expanded").emitter.on("beforechange",()=>{if(_.set("completed",!1),jt(_.get("expandedHeight"))){const b=lu(_,o);b>0&&_.set("expandedHeight",b)}_.set("shouldFixHeight",!0),qn(o)}),_.emitter.on("change",()=>{zs(_,o)}),zs(_,o),o.addEventListener("transitionend",b=>{b.propertyName==="height"&&_.cleanUpTransition()})}class Ai extends Io{constructor(o,b){super(o,b),this.emitter_=new Ut,this.controller.foldable.value("expanded").emitter.on("change",t=>{this.emitter_.emit("fold",new _l(this,t.sender.rawValue))}),this.rackApi_.on("change",t=>{this.emitter_.emit("change",t)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(o){this.controller.foldable.set("expanded",o)}get title(){return this.controller.props.get("title")}set title(o){this.controller.props.set("title",o)}get children(){return this.rackApi_.children}addBinding(o,b,t){return this.rackApi_.addBinding(o,b,t)}addFolder(o){return this.rackApi_.addFolder(o)}addButton(o){return this.rackApi_.addButton(o)}addTab(o){return this.rackApi_.addTab(o)}add(o,b){return this.rackApi_.add(o,b)}remove(o){this.rackApi_.remove(o)}addBlade(o){return this.rackApi_.addBlade(o)}on(o,b){const t=b.bind(this);return this.emitter_.on(o,M=>{t(M)},{key:b}),this}off(o,b){return this.emitter_.off(o,b),this}}const Li=pt("cnt");class uu{constructor(o,b){var t;this.className_=pt((t=b.viewName)!==null&&t!==void 0?t:"fld"),this.element=o.createElement("div"),this.element.classList.add(this.className_(),Li()),b.viewProps.bindClassModifiers(this.element),this.foldable_=b.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),yr(this.foldable_,"completed",$r(this.element,this.className_(void 0,"cpl")));const M=o.createElement("button");M.classList.add(this.className_("b")),yr(b.props,"title",d=>{jt(d)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),b.viewProps.bindDisabled(M),this.element.appendChild(M),this.buttonElement=M;const j=o.createElement("div");j.classList.add(this.className_("i")),this.element.appendChild(j);const h=o.createElement("div");h.classList.add(this.className_("t")),Ro(b.props.value("title"),h),this.buttonElement.appendChild(h),this.titleElement=h;const y=o.createElement("div");y.classList.add(this.className_("m")),this.buttonElement.appendChild(y);const l=o.createElement("div");l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}}class jo extends Do{constructor(o,b){var t;const M=En.create((t=b.expanded)!==null&&t!==void 0?t:!0),j=new uu(o,{foldable:M,props:b.props,viewName:b.root?"rot":void 0,viewProps:b.viewProps});super(Object.assign(Object.assign({},b),{rackController:new Fo({blade:b.blade,element:j.containerElement,root:b.root,viewProps:b.viewProps}),view:j})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=b.props,this.foldable=M,Uo(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(o){return nr(o,b=>super.importState(b),b=>({expanded:b.required.boolean,title:b.optional.string}),b=>(this.foldable.set("expanded",b.expanded),this.props.set("title",b.title),!0))}exportState(){return or(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const cu=Jt({id:"folder",type:"blade",accept(_){const o=Pt(_,b=>({title:b.required.string,view:b.required.constant("folder"),expanded:b.optional.boolean}));return o?{params:o}:null},controller(_){return new jo(_.document,{blade:_.blade,expanded:_.params.expanded,props:lt.fromObject({title:_.params.title}),viewProps:_.viewProps})},api(_){return _.controller instanceof jo?new Ai(_.controller,_.pool):null}}),du=pt("");function Hs(_,o){return $r(_,du(void 0,o))}class Er extends lt{constructor(o){var b;super(o),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=za(Tt(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(b=this.get("parent"))===null||b===void 0||b.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(o){var b,t,M;const j=o??{};return new Er(lt.createCore({disabled:(b=j.disabled)!==null&&b!==void 0?b:!1,disposed:!1,hidden:(t=j.hidden)!==null&&t!==void 0?t:!1,parent:(M=j.parent)!==null&&M!==void 0?M:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(o){xr(this.globalDisabled_,Hs(o,"disabled")),yr(this,"hidden",Hs(o,"hidden"))}bindDisabled(o){xr(this.globalDisabled_,b=>{o.disabled=b})}bindTabIndex(o){xr(this.globalDisabled_,b=>{o.tabIndex=b?-1:0})}handleDispose(o){this.value("disposed").emitter.on("change",b=>{b&&o()})}importState(o){this.set("disabled",o.disabled),this.set("hidden",o.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const o=this.get("parent");return(o?o.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(o){var b;const t=o.previousRawValue;t==null||t.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(b=this.get("parent"))===null||b===void 0||b.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const Ws=pt("tbp");class hu{constructor(o,b){this.element=o.createElement("div"),this.element.classList.add(Ws()),b.viewProps.bindClassModifiers(this.element);const t=o.createElement("div");t.classList.add(Ws("c")),this.element.appendChild(t),this.containerElement=t}}const pn=pt("tbi");class pu{constructor(o,b){this.element=o.createElement("div"),this.element.classList.add(pn()),b.viewProps.bindClassModifiers(this.element),yr(b.props,"selected",j=>{j?this.element.classList.add(pn(void 0,"sel")):this.element.classList.remove(pn(void 0,"sel"))});const t=o.createElement("button");t.classList.add(pn("b")),b.viewProps.bindDisabled(t),this.element.appendChild(t),this.buttonElement=t;const M=o.createElement("div");M.classList.add(pn("t")),Ro(b.props.value("title"),M),this.buttonElement.appendChild(M),this.titleElement=M}}class fu{constructor(o,b){this.emitter=new Ut,this.onClick_=this.onClick_.bind(this),this.props=b.props,this.viewProps=b.viewProps,this.view=new pu(o,{props:b.props,viewProps:b.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class So extends Do{constructor(o,b){const t=new hu(o,{viewProps:b.viewProps});super(Object.assign(Object.assign({},b),{rackController:new Fo({blade:b.blade,element:t.containerElement,viewProps:b.viewProps}),view:t})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new fu(o,{props:b.itemProps,viewProps:Er.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=b.props,yr(this.props,"selected",M=>{this.itemController.props.set("selected",M),this.viewProps.set("hidden",!M)})}get itemController(){return this.ic_}importState(o){return nr(o,b=>super.importState(b),b=>({selected:b.required.boolean,title:b.required.string}),b=>(this.ic_.props.set("selected",b.selected),this.ic_.props.set("title",b.title),!0))}exportState(){return or(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class mu extends Io{constructor(o,b){super(o,b),this.emitter_=new Ut,this.onSelect_=this.onSelect_.bind(this),this.pool_=b,this.rackApi_.on("change",t=>{this.emitter_.emit("change",t)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(o){const b=this.controller.view.element.ownerDocument,t=new So(b,{blade:en(),itemProps:lt.fromObject({selected:!1,title:o.title}),props:lt.fromObject({selected:!1}),viewProps:Er.create()}),M=this.pool_.createApi(t);return this.rackApi_.add(M,o.index)}removePage(o){this.rackApi_.remove(this.rackApi_.children[o])}on(o,b){const t=b.bind(this);return this.emitter_.on(o,M=>{t(M)},{key:b}),this}off(o,b){return this.emitter_.off(o,b),this}onSelect_(o){this.emitter_.emit("select",new wl(this,o.rawValue))}}class yu extends Io{get title(){var o;return(o=this.controller.itemController.props.get("title"))!==null&&o!==void 0?o:""}set title(o){this.controller.itemController.props.set("title",o)}get selected(){return this.controller.props.get("selected")}set selected(o){this.controller.props.set("selected",o)}get children(){return this.rackApi_.children}addButton(o){return this.rackApi_.addButton(o)}addFolder(o){return this.rackApi_.addFolder(o)}addTab(o){return this.rackApi_.addTab(o)}add(o,b){this.rackApi_.add(o,b)}remove(o){this.rackApi_.remove(o)}addBinding(o,b,t){return this.rackApi_.addBinding(o,b,t)}addBlade(o){return this.rackApi_.addBlade(o)}}const qs=-1;class gu{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Tt(!0),this.selectedIndex=Tt(qs),this.items_=[]}add(o,b){const t=b??this.items_.length;this.items_.splice(t,0,o),o.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(o){const b=this.items_.indexOf(o);b<0||(this.items_.splice(b,1),o.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=qs,this.empty.rawValue=!0;return}const o=this.items_.findIndex(b=>b.rawValue);o<0?(this.items_.forEach((b,t)=>{b.rawValue=t===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((b,t)=>{b.rawValue=t===o}),this.selectedIndex.rawValue=o),this.empty.rawValue=!1}onItemSelectedChange_(o){if(o.rawValue){const b=this.items_.findIndex(t=>t===o.sender);this.items_.forEach((t,M)=>{t.rawValue=M===b}),this.selectedIndex.rawValue=b}else this.keepSelection_()}}const fn=pt("tab");class vu{constructor(o,b){this.element=o.createElement("div"),this.element.classList.add(fn(),Li()),b.viewProps.bindClassModifiers(this.element),xr(b.empty,$r(this.element,fn(void 0,"nop")));const t=o.createElement("div");t.classList.add(fn("t")),this.element.appendChild(t),this.itemsElement=t;const M=o.createElement("div");M.classList.add(fn("i")),this.element.appendChild(M);const j=o.createElement("div");j.classList.add(fn("c")),this.element.appendChild(j),this.contentsElement=j}}class Xs extends Do{constructor(o,b){const t=new gu,M=new vu(o,{empty:t.empty,viewProps:b.viewProps});super({blade:b.blade,rackController:new Fo({blade:b.blade,element:M.contentsElement,viewProps:b.viewProps}),view:M}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const j=this.rackController.rack;j.emitter.on("add",this.onRackAdd_),j.emitter.on("remove",this.onRackRemove_),this.tab=t}add(o,b){this.rackController.rack.add(o,b)}remove(o){this.rackController.rack.remove(this.rackController.rack.children[o])}onRackAdd_(o){if(!o.root)return;const b=o.bladeController;Si(this.view.itemsElement,b.itemController.view.element,o.index),b.itemController.viewProps.set("parent",this.viewProps),this.tab.add(b.props.value("selected"))}onRackRemove_(o){if(!o.root)return;const b=o.bladeController;Lo(b.itemController.view.element),b.itemController.viewProps.set("parent",null),this.tab.remove(b.props.value("selected"))}}const Ri=Jt({id:"tab",type:"blade",accept(_){const o=Pt(_,b=>({pages:b.required.array(b.required.object({title:b.required.string})),view:b.required.constant("tab")}));return!o||o.pages.length===0?null:{params:o}},controller(_){const o=new Xs(_.document,{blade:_.blade,viewProps:_.viewProps});return _.params.pages.forEach(b=>{const t=new So(_.document,{blade:en(),itemProps:lt.fromObject({selected:!1,title:b.title}),props:lt.fromObject({selected:!1}),viewProps:Er.create()});o.add(t)}),o},api(_){return _.controller instanceof Xs?new mu(_.controller,_.pool):_.controller instanceof So?new yu(_.controller,_.pool):null}});function bu(_,o){const b=_.accept(o.params);if(!b)return null;const t=Pt(o.params,M=>({disabled:M.optional.boolean,hidden:M.optional.boolean}));return _.controller({blade:en(),document:o.document,params:Object.assign(Object.assign({},b.params),{disabled:t==null?void 0:t.disabled,hidden:t==null?void 0:t.hidden}),viewProps:Er.create({disabled:t==null?void 0:t.disabled,hidden:t==null?void 0:t.hidden})})}class No extends bn{get options(){return this.controller.valueController.props.get("options")}set options(o){this.controller.valueController.props.set("options",o)}}class _u{constructor(){this.disabled=!1,this.emitter=new Ut}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class wu{constructor(o,b){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=o,this.emitter=new Ut,this.interval_=b,this.setTimer_()}get disabled(){return this.disabled_}set disabled(o){this.disabled_=o,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const o=this.doc_.defaultView;o&&o.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const o=this.doc_.defaultView;o&&(this.timerId_=o.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Cn{constructor(o){this.constraints=o}constrain(o){return this.constraints.reduce((b,t)=>t.constrain(b),o)}}function Xn(_,o){if(_ instanceof o)return _;if(_ instanceof Cn){const b=_.constraints.reduce((t,M)=>t||(M instanceof o?M:null),null);if(b)return b}return null}class kn{constructor(o){this.values=lt.fromObject({options:o})}constrain(o){const b=this.values.get("options");return b.length===0||b.filter(M=>M.value===o).length>0?o:b[0].value}}function Tn(_){var o;const b=wo;if(Array.isArray(_))return(o=Pt({items:_},t=>({items:t.required.array(t.required.object({text:t.required.string,value:t.required.raw}))})))===null||o===void 0?void 0:o.items;if(typeof _=="object")return b.required.raw(_).value}function Bo(_){if(Array.isArray(_))return _;const o=[];return Object.keys(_).forEach(b=>{o.push({text:b,value:_[b]})}),o}function Vo(_){return jt(_)?null:new kn(Bo(_))}const uo=pt("lst");class xu{constructor(o,b){this.onValueChange_=this.onValueChange_.bind(this),this.props_=b.props,this.element=o.createElement("div"),this.element.classList.add(uo()),b.viewProps.bindClassModifiers(this.element);const t=o.createElement("select");t.classList.add(uo("s")),b.viewProps.bindDisabled(t),this.element.appendChild(t),this.selectElement=t;const M=o.createElement("div");M.classList.add(uo("m")),M.appendChild($n(o,"dropdown")),this.element.appendChild(M),b.value.emitter.on("change",this.onValueChange_),this.value_=b.value,yr(this.props_,"options",j=>{Ei(this.selectElement),j.forEach(h=>{const y=o.createElement("option");y.textContent=h.text,this.selectElement.appendChild(y)}),this.update_()})}update_(){const o=this.props_.get("options").map(b=>b.value);this.selectElement.selectedIndex=o.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class Rr{constructor(o,b){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=b.props,this.value=b.value,this.viewProps=b.viewProps,this.view=new xu(o,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(o){const b=o.currentTarget;this.value.rawValue=this.props.get("options")[b.selectedIndex].value}importProps(o){return nr(o,null,b=>({options:b.required.custom(Tn)}),b=>(this.props.set("options",Bo(b.options)),!0))}exportProps(){return or(null,{options:this.props.get("options")})}}const Ys=pt("pop");class ju{constructor(o,b){this.element=o.createElement("div"),this.element.classList.add(Ys()),b.viewProps.bindClassModifiers(this.element),xr(b.shows,$r(this.element,Ys(void 0,"v")))}}class Ii{constructor(o,b){this.shows=Tt(!1),this.viewProps=b.viewProps,this.view=new ju(o,{shows:this.shows,viewProps:this.viewProps})}}const Ks=pt("txt");class Su{constructor(o,b){this.onChange_=this.onChange_.bind(this),this.element=o.createElement("div"),this.element.classList.add(Ks()),b.viewProps.bindClassModifiers(this.element),this.props_=b.props,this.props_.emitter.on("change",this.onChange_);const t=o.createElement("input");t.classList.add(Ks("i")),t.type="text",b.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,b.value.emitter.on("change",this.onChange_),this.value_=b.value,this.refresh()}refresh(){const o=this.props_.get("formatter");this.inputElement.value=o(this.value_.rawValue)}onChange_(){this.refresh()}}class _n{constructor(o,b){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=b.parser,this.props=b.props,this.value=b.value,this.viewProps=b.viewProps,this.view=new Su(o,{props:b.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(o){const t=o.currentTarget.value,M=this.parser_(t);jt(M)||(this.value.rawValue=M),this.view.refresh()}}function Eu(_){return String(_)}function Di(_){return _==="false"?!1:!!_}function Zs(_){return Eu(_)}function Cu(_){return o=>_.reduce((b,t)=>b!==null?b:t(o),null)}const ku=tr(0);function Yn(_){return ku(_)+"%"}function Fi(_){return String(_)}function Eo(_){return _}function tn({primary:_,secondary:o,forward:b,backward:t}){let M=!1;function j(h){M||(M=!0,h(),M=!1)}_.emitter.on("change",h=>{j(()=>{o.setRawValue(b(_.rawValue,o.rawValue),h.options)})}),o.emitter.on("change",h=>{j(()=>{_.setRawValue(t(_.rawValue,o.rawValue),h.options)}),j(()=>{o.setRawValue(b(_.rawValue,o.rawValue),h.options)})}),j(()=>{o.setRawValue(b(_.rawValue,o.rawValue),{forceEmit:!1,last:!0})})}function er(_,o){const b=_*(o.altKey?.1:1)*(o.shiftKey?10:1);return o.upKey?+b:o.downKey?-b:0}function wn(_){return{altKey:_.altKey,downKey:_.key==="ArrowDown",shiftKey:_.shiftKey,upKey:_.key==="ArrowUp"}}function Sr(_){return{altKey:_.altKey,downKey:_.key==="ArrowLeft",shiftKey:_.shiftKey,upKey:_.key==="ArrowRight"}}function Tu(_){return _==="ArrowUp"||_==="ArrowDown"}function Ui(_){return Tu(_)||_==="ArrowLeft"||_==="ArrowRight"}function co(_,o){var b,t;const M=o.ownerDocument.defaultView,j=o.getBoundingClientRect();return{x:_.pageX-(((b=M&&M.scrollX)!==null&&b!==void 0?b:0)+j.left),y:_.pageY-(((t=M&&M.scrollY)!==null&&t!==void 0?t:0)+j.top)}}class Vr{constructor(o){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=o,this.emitter=new Ut,o.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),o.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),o.addEventListener("touchend",this.onTouchEnd_),o.addEventListener("mousedown",this.onMouseDown_)}computePosition_(o){const b=this.elem_.getBoundingClientRect();return{bounds:{width:b.width,height:b.height},point:o?{x:o.x,y:o.y}:null}}onMouseDown_(o){var b;o.preventDefault(),(b=o.currentTarget)===null||b===void 0||b.focus();const t=this.elem_.ownerDocument;t.addEventListener("mousemove",this.onDocumentMouseMove_),t.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:o.altKey,data:this.computePosition_(co(o,this.elem_)),sender:this,shiftKey:o.shiftKey})}onDocumentMouseMove_(o){this.emitter.emit("move",{altKey:o.altKey,data:this.computePosition_(co(o,this.elem_)),sender:this,shiftKey:o.shiftKey})}onDocumentMouseUp_(o){const b=this.elem_.ownerDocument;b.removeEventListener("mousemove",this.onDocumentMouseMove_),b.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:o.altKey,data:this.computePosition_(co(o,this.elem_)),sender:this,shiftKey:o.shiftKey})}onTouchStart_(o){o.preventDefault();const b=o.targetTouches.item(0),t=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:o.altKey,data:this.computePosition_(b?{x:b.clientX-t.left,y:b.clientY-t.top}:void 0),sender:this,shiftKey:o.shiftKey}),this.lastTouch_=b}onTouchMove_(o){const b=o.targetTouches.item(0),t=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:o.altKey,data:this.computePosition_(b?{x:b.clientX-t.left,y:b.clientY-t.top}:void 0),sender:this,shiftKey:o.shiftKey}),this.lastTouch_=b}onTouchEnd_(o){var b;const t=(b=o.targetTouches.item(0))!==null&&b!==void 0?b:this.lastTouch_,M=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:o.altKey,data:this.computePosition_(t?{x:t.clientX-M.left,y:t.clientY-M.top}:void 0),sender:this,shiftKey:o.shiftKey})}}const sr=pt("txt");class Mu{constructor(o,b){this.onChange_=this.onChange_.bind(this),this.props_=b.props,this.props_.emitter.on("change",this.onChange_),this.element=o.createElement("div"),this.element.classList.add(sr(),sr(void 0,"num")),b.arrayPosition&&this.element.classList.add(sr(void 0,b.arrayPosition)),b.viewProps.bindClassModifiers(this.element);const t=o.createElement("input");t.classList.add(sr("i")),t.type="text",b.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=b.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(sr()),this.inputElement.classList.add(sr("i"));const M=o.createElement("div");M.classList.add(sr("k")),this.element.appendChild(M),this.knobElement=M;const j=o.createElementNS(mr,"svg");j.classList.add(sr("g")),this.knobElement.appendChild(j);const h=o.createElementNS(mr,"path");h.classList.add(sr("gb")),j.appendChild(h),this.guideBodyElem_=h;const y=o.createElementNS(mr,"path");y.classList.add(sr("gh")),j.appendChild(y),this.guideHeadElem_=y;const l=o.createElement("div");l.classList.add(pt("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,b.value.emitter.on("change",this.onChange_),this.value=b.value,this.refresh()}onDraggingChange_(o){if(o.rawValue===null){this.element.classList.remove(sr(void 0,"drg"));return}this.element.classList.add(sr(void 0,"drg"));const b=o.rawValue/this.props_.get("pointerScale"),t=b+(b>0?-1:b<0?1:0),M=Bt(-t,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${t+M},0 L${t},4 L${t+M},8`,`M ${b},-1 L${b},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${b},4`);const j=this.props_.get("formatter");this.tooltipElem_.textContent=j(this.value.rawValue),this.tooltipElem_.style.left=`${b}px`}refresh(){const o=this.props_.get("formatter");this.inputElement.value=o(this.value.rawValue)}onChange_(){this.refresh()}}class Mn{constructor(o,b){var t;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=b.parser,this.props=b.props,this.sliderProps_=(t=b.sliderProps)!==null&&t!==void 0?t:null,this.value=b.value,this.viewProps=b.viewProps,this.dragging_=Tt(null),this.view=new Mu(o,{arrayPosition:b.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const M=new Vr(this.view.knobElement);M.emitter.on("down",this.onPointerDown_),M.emitter.on("move",this.onPointerMove_),M.emitter.on("up",this.onPointerUp_)}constrainValue_(o){var b,t;const M=(b=this.sliderProps_)===null||b===void 0?void 0:b.get("min"),j=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("max");let h=o;return M!==void 0&&(h=Math.max(h,M)),j!==void 0&&(h=Math.min(h,j)),h}onInputChange_(o){const t=o.currentTarget.value,M=this.parser_(t);jt(M)||(this.value.rawValue=this.constrainValue_(M)),this.view.refresh()}onInputKeyDown_(o){const b=er(this.props.get("keyScale"),wn(o));b!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+b),{forceEmit:!1,last:!1})}onInputKeyUp_(o){er(this.props.get("keyScale"),wn(o))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(o){if(!o.point)return null;const b=o.point.x-o.bounds.width/2;return this.constrainValue_(this.originRawValue_+b*this.props.get("pointerScale"))}onPointerMove_(o){const b=this.computeDraggingValue_(o.data);b!==null&&(this.value.setRawValue(b,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(o){const b=this.computeDraggingValue_(o.data);b!==null&&(this.value.setRawValue(b,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const ho=pt("sld");class Pu{constructor(o,b){this.onChange_=this.onChange_.bind(this),this.props_=b.props,this.props_.emitter.on("change",this.onChange_),this.element=o.createElement("div"),this.element.classList.add(ho()),b.viewProps.bindClassModifiers(this.element);const t=o.createElement("div");t.classList.add(ho("t")),b.viewProps.bindTabIndex(t),this.element.appendChild(t),this.trackElement=t;const M=o.createElement("div");M.classList.add(ho("k")),this.trackElement.appendChild(M),this.knobElement=M,b.value.emitter.on("change",this.onChange_),this.value=b.value,this.update_()}update_(){const o=Bt(yt(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${o}%`}onChange_(){this.update_()}}class Ou{constructor(o,b){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=b.value,this.viewProps=b.viewProps,this.props=b.props,this.view=new Pu(o,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vr(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(o,b){o.point&&this.value.setRawValue(yt(Bt(o.point.x,0,o.bounds.width),0,o.bounds.width,this.props.get("min"),this.props.get("max")),b)}onPointerDownOrMove_(o){this.handlePointerEvent_(o.data,{forceEmit:!1,last:!1})}onPointerUp_(o){this.handlePointerEvent_(o.data,{forceEmit:!0,last:!0})}onKeyDown_(o){const b=er(this.props.get("keyScale"),Sr(o));b!==0&&this.value.setRawValue(this.value.rawValue+b,{forceEmit:!1,last:!1})}onKeyUp_(o){er(this.props.get("keyScale"),Sr(o))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const po=pt("sldtxt");class Au{constructor(o,b){this.element=o.createElement("div"),this.element.classList.add(po());const t=o.createElement("div");t.classList.add(po("s")),this.sliderView_=b.sliderView,t.appendChild(this.sliderView_.element),this.element.appendChild(t);const M=o.createElement("div");M.classList.add(po("t")),this.textView_=b.textView,M.appendChild(this.textView_.element),this.element.appendChild(M)}}class Kn{constructor(o,b){this.value=b.value,this.viewProps=b.viewProps,this.sliderC_=new Ou(o,{props:b.sliderProps,value:b.value,viewProps:this.viewProps}),this.textC_=new Mn(o,{parser:b.parser,props:b.textProps,sliderProps:b.sliderProps,value:b.value,viewProps:b.viewProps}),this.view=new Au(o,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(o){return nr(o,null,b=>({max:b.required.number,min:b.required.number}),b=>{const t=this.sliderC_.props;return t.set("max",b.max),t.set("min",b.min),!0})}exportProps(){const o=this.sliderC_.props;return or(null,{max:o.get("max"),min:o.get("min")})}}function Ni(_){return{sliderProps:new lt({keyScale:_.keyScale,max:_.max,min:_.min}),textProps:new lt({formatter:Tt(_.formatter),keyScale:_.keyScale,pointerScale:Tt(_.pointerScale)})}}const Lu={containerUnitSize:"cnt-usz"};function Bi(_){return`--${Lu[_]}`}function xn(_){return xi(_)}function Ar(_){if(_o(_))return Pt(_,xn)}function wr(_,o){if(!_)return;const b=[],t=bi(_,o);t&&b.push(t);const M=_i(_);return M&&b.push(M),new Cn(b)}function Ru(_){return _?_.major===Jr.major:!1}function Vi(_){if(_==="inline"||_==="popup")return _}function Pn(_,o){_.write(o)}const Nn=pt("ckb");class Iu{constructor(o,b){this.onValueChange_=this.onValueChange_.bind(this),this.element=o.createElement("div"),this.element.classList.add(Nn()),b.viewProps.bindClassModifiers(this.element);const t=o.createElement("label");t.classList.add(Nn("l")),this.element.appendChild(t),this.labelElement=t;const M=o.createElement("input");M.classList.add(Nn("i")),M.type="checkbox",this.labelElement.appendChild(M),this.inputElement=M,b.viewProps.bindDisabled(this.inputElement);const j=o.createElement("div");j.classList.add(Nn("w")),this.labelElement.appendChild(j);const h=$n(o,"check");j.appendChild(h),b.value.emitter.on("change",this.onValueChange_),this.value=b.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Du{constructor(o,b){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=b.value,this.viewProps=b.viewProps,this.view=new Iu(o,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(o){const b=o.currentTarget;this.value.rawValue=b.checked,o.preventDefault(),o.stopPropagation()}onLabelMouseDown_(o){o.preventDefault()}}function Fu(_){const o=[],b=Vo(_.options);return b&&o.push(b),new Cn(o)}const Uu=Jt({id:"input-bool",type:"input",accept:(_,o)=>{if(typeof _!="boolean")return null;const b=Pt(o,t=>({options:t.optional.custom(Tn),readonly:t.optional.constant(!1)}));return b?{initialValue:_,params:b}:null},binding:{reader:_=>Di,constraint:_=>Fu(_.params),writer:_=>Pn},controller:_=>{const o=_.document,b=_.value,t=_.constraint,M=t&&Xn(t,kn);return M?new Rr(o,{props:new lt({options:M.values.value("options")}),value:b,viewProps:_.viewProps}):new Du(o,{value:b,viewProps:_.viewProps})},api(_){return typeof _.controller.value.rawValue!="boolean"?null:_.controller.valueController instanceof Rr?new No(_.controller):null}}),Ir=pt("col");class Nu{constructor(o,b){this.element=o.createElement("div"),this.element.classList.add(Ir()),b.foldable.bindExpandedClass(this.element,Ir(void 0,"expanded")),yr(b.foldable,"completed",$r(this.element,Ir(void 0,"cpl")));const t=o.createElement("div");t.classList.add(Ir("h")),this.element.appendChild(t);const M=o.createElement("div");M.classList.add(Ir("s")),t.appendChild(M),this.swatchElement=M;const j=o.createElement("div");if(j.classList.add(Ir("t")),t.appendChild(j),this.textElement=j,b.pickerLayout==="inline"){const h=o.createElement("div");h.classList.add(Ir("p")),this.element.appendChild(h),this.pickerElement=h}else this.pickerElement=null}}function Bu(_,o,b){const t=Bt(_/255,0,1),M=Bt(o/255,0,1),j=Bt(b/255,0,1),h=Math.max(t,M,j),y=Math.min(t,M,j),l=h-y;let d=0,v=0;const m=(y+h)/2;return l!==0&&(v=l/(1-Math.abs(h+y-1)),t===h?d=(M-j)/l:M===h?d=2+(j-t)/l:d=4+(t-M)/l,d=d/6+(d<0?1:0)),[d*360,v*100,m*100]}function Vu(_,o,b){const t=(_%360+360)%360,M=Bt(o/100,0,1),j=Bt(b/100,0,1),h=(1-Math.abs(2*j-1))*M,y=h*(1-Math.abs(t/60%2-1)),l=j-h/2;let d,v,m;return t>=0&&t<60?[d,v,m]=[h,y,0]:t>=60&&t<120?[d,v,m]=[y,h,0]:t>=120&&t<180?[d,v,m]=[0,h,y]:t>=180&&t<240?[d,v,m]=[0,y,h]:t>=240&&t<300?[d,v,m]=[y,0,h]:[d,v,m]=[h,0,y],[(d+l)*255,(v+l)*255,(m+l)*255]}function Gu(_,o,b){const t=Bt(_/255,0,1),M=Bt(o/255,0,1),j=Bt(b/255,0,1),h=Math.max(t,M,j),y=Math.min(t,M,j),l=h-y;let d;l===0?d=0:h===t?d=60*(((M-j)/l%6+6)%6):h===M?d=60*((j-t)/l+2):d=60*((t-M)/l+4);const v=h===0?0:l/h,m=h;return[d,v*100,m*100]}function Gi(_,o,b){const t=yi(_,360),M=Bt(o/100,0,1),j=Bt(b/100,0,1),h=j*M,y=h*(1-Math.abs(t/60%2-1)),l=j-h;let d,v,m;return t>=0&&t<60?[d,v,m]=[h,y,0]:t>=60&&t<120?[d,v,m]=[y,h,0]:t>=120&&t<180?[d,v,m]=[0,h,y]:t>=180&&t<240?[d,v,m]=[0,y,h]:t>=240&&t<300?[d,v,m]=[y,0,h]:[d,v,m]=[h,0,y],[(d+l)*255,(v+l)*255,(m+l)*255]}function zu(_,o,b){const t=b+o*(100-Math.abs(2*b-100))/200;return[_,t!==0?o*(100-Math.abs(2*b-100))/t:0,b+o*(100-Math.abs(2*b-100))/(2*100)]}function Hu(_,o,b){const t=100-Math.abs(b*(200-o)/100-100);return[_,t!==0?o*b/t:0,b*(200-o)/(2*100)]}function gr(_){return[_[0],_[1],_[2]]}function eo(_,o){return[_[0],_[1],_[2],o]}const Wu={hsl:{hsl:(_,o,b)=>[_,o,b],hsv:zu,rgb:Vu},hsv:{hsl:Hu,hsv:(_,o,b)=>[_,o,b],rgb:Gi},rgb:{hsl:Bu,hsv:Gu,rgb:(_,o,b)=>[_,o,b]}};function Qr(_,o){return[o==="float"?1:_==="rgb"?255:360,o==="float"?1:_==="rgb"?255:100,o==="float"?1:_==="rgb"?255:100]}function qu(_,o){return _===o?o:yi(_,o)}function zi(_,o,b){var t;const M=Qr(o,b);return[o==="rgb"?Bt(_[0],0,M[0]):qu(_[0],M[0]),Bt(_[1],0,M[1]),Bt(_[2],0,M[2]),Bt((t=_[3])!==null&&t!==void 0?t:1,0,1)]}function Qs(_,o,b,t){const M=Qr(o,b),j=Qr(o,t);return _.map((h,y)=>h/M[y]*j[y])}function Hi(_,o,b){const t=Qs(_,o.mode,o.type,"int"),M=Wu[o.mode][b.mode](...t);return Qs(M,b.mode,"int",b.type)}class ft{static black(){return new ft([0,0,0],"rgb")}constructor(o,b){this.type="int",this.mode=b,this.comps_=zi(o,b,this.type)}getComponents(o){return eo(Hi(gr(this.comps_),{mode:this.mode,type:this.type},{mode:o??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const o=this.getComponents("rgb");return{r:o[0],g:o[1],b:o[2],a:o[3]}}}const Mr=pt("colp");class Xu{constructor(o,b){this.alphaViews_=null,this.element=o.createElement("div"),this.element.classList.add(Mr()),b.viewProps.bindClassModifiers(this.element);const t=o.createElement("div");t.classList.add(Mr("hsv"));const M=o.createElement("div");M.classList.add(Mr("sv")),this.svPaletteView_=b.svPaletteView,M.appendChild(this.svPaletteView_.element),t.appendChild(M);const j=o.createElement("div");j.classList.add(Mr("h")),this.hPaletteView_=b.hPaletteView,j.appendChild(this.hPaletteView_.element),t.appendChild(j),this.element.appendChild(t);const h=o.createElement("div");if(h.classList.add(Mr("rgb")),this.textsView_=b.textsView,h.appendChild(this.textsView_.element),this.element.appendChild(h),b.alphaViews){this.alphaViews_={palette:b.alphaViews.palette,text:b.alphaViews.text};const y=o.createElement("div");y.classList.add(Mr("a"));const l=o.createElement("div");l.classList.add(Mr("ap")),l.appendChild(this.alphaViews_.palette.element),y.appendChild(l);const d=o.createElement("div");d.classList.add(Mr("at")),d.appendChild(this.alphaViews_.text.element),y.appendChild(d),this.element.appendChild(y)}}get allFocusableElements(){const o=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(b=>b.inputElement)];return this.alphaViews_&&o.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),o}}function Yu(_){return _==="int"?"int":_==="float"?"float":void 0}function Go(_){return Pt(_,o=>({color:o.optional.object({alpha:o.optional.boolean,type:o.optional.custom(Yu)}),expanded:o.optional.boolean,picker:o.optional.custom(Vi),readonly:o.optional.constant(!1)}))}function Nr(_){return _?.1:1}function Wi(_){var o;return(o=_.color)===null||o===void 0?void 0:o.type}class zo{constructor(o,b){this.type="float",this.mode=b,this.comps_=zi(o,b,this.type)}getComponents(o){return eo(Hi(gr(this.comps_),{mode:this.mode,type:this.type},{mode:o??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const o=this.getComponents("rgb");return{r:o[0],g:o[1],b:o[2],a:o[3]}}}const Ku={int:(_,o)=>new ft(_,o),float:(_,o)=>new zo(_,o)};function Ho(_,o,b){return Ku[b](_,o)}function Zu(_){return _.type==="float"}function Qu(_){return _.type==="int"}function $u(_){const o=_.getComponents(),b=Qr(_.mode,"int");return new ft([Math.round(yt(o[0],0,1,0,b[0])),Math.round(yt(o[1],0,1,0,b[1])),Math.round(yt(o[2],0,1,0,b[2])),o[3]],_.mode)}function Ju(_){const o=_.getComponents(),b=Qr(_.mode,"int");return new zo([yt(o[0],0,b[0],0,1),yt(o[1],0,b[1],0,1),yt(o[2],0,b[2],0,1),o[3]],_.mode)}function $t(_,o){if(_.type===o)return _;if(Qu(_)&&o==="float")return Ju(_);if(Zu(_)&&o==="int")return $u(_);throw Lt.shouldNeverHappen()}function ec(_,o){return _.alpha===o.alpha&&_.mode===o.mode&&_.notation===o.notation&&_.type===o.type}function ir(_,o){const b=_.match(/^(.+)%$/);return Math.min(b?parseFloat(b[1])*.01*o:parseFloat(_),o)}const tc={deg:_=>_,grad:_=>_*360/400,rad:_=>_*360/(2*Math.PI),turn:_=>_*360};function qi(_){const o=_.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!o)return parseFloat(_);const b=parseFloat(o[1]),t=o[2];return tc[t](b)}function Xi(_){const o=_.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!o)return null;const b=[ir(o[1],255),ir(o[2],255),ir(o[3],255)];return isNaN(b[0])||isNaN(b[1])||isNaN(b[2])?null:b}function rc(_){const o=Xi(_);return o?new ft(o,"rgb"):null}function Yi(_){const o=_.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!o)return null;const b=[ir(o[1],255),ir(o[2],255),ir(o[3],255),ir(o[4],1)];return isNaN(b[0])||isNaN(b[1])||isNaN(b[2])||isNaN(b[3])?null:b}function nc(_){const o=Yi(_);return o?new ft(o,"rgb"):null}function Ki(_){const o=_.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!o)return null;const b=[qi(o[1]),ir(o[2],100),ir(o[3],100)];return isNaN(b[0])||isNaN(b[1])||isNaN(b[2])?null:b}function oc(_){const o=Ki(_);return o?new ft(o,"hsl"):null}function Zi(_){const o=_.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!o)return null;const b=[qi(o[1]),ir(o[2],100),ir(o[3],100),ir(o[4],1)];return isNaN(b[0])||isNaN(b[1])||isNaN(b[2])||isNaN(b[3])?null:b}function sc(_){const o=Zi(_);return o?new ft(o,"hsl"):null}function Qi(_){const o=_.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(o)return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)];const b=_.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:null}function ic(_){const o=Qi(_);return o?new ft(o,"rgb"):null}function $i(_){const o=_.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(o)return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16),yt(parseInt(o[4]+o[4],16),0,255,0,1)];const b=_.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),yt(parseInt(b[4],16),0,255,0,1)]:null}function ac(_){const o=$i(_);return o?new ft(o,"rgb"):null}function Ji(_){const o=_.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!o)return null;const b=[parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3])];return isNaN(b[0])||isNaN(b[1])||isNaN(b[2])?null:b}function $s(_){return o=>{const b=Ji(o);return b?Ho(b,"rgb",_):null}}function ea(_){const o=_.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!o)return null;const b=[parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]),parseFloat(o[4])];return isNaN(b[0])||isNaN(b[1])||isNaN(b[2])||isNaN(b[3])?null:b}function Js(_){return o=>{const b=ea(o);return b?Ho(b,"rgb",_):null}}const lc=[{parser:Qi,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:$i,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Xi,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Yi,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Ki,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Zi,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Ji,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:ea,result:{alpha:!0,mode:"rgb",notation:"object"}}];function uc(_){return lc.reduce((o,{parser:b,result:t})=>o||(b(_)?t:null),null)}function cc(_,o="int"){const b=uc(_);return b?b.notation==="hex"&&o!=="float"?Object.assign(Object.assign({},b),{type:"int"}):b.notation==="func"?Object.assign(Object.assign({},b),{type:o}):null:null}function On(_){const o=[ic,ac,rc,nc,oc,sc];_==="int"&&o.push($s("int"),Js("int")),_==="float"&&o.push($s("float"),Js("float"));const b=Cu(o);return t=>{const M=b(t);return M?$t(M,_):null}}function dc(_){const o=On("int");if(typeof _!="string")return ft.black();const b=o(_);return b??ft.black()}function ta(_){const o=Bt(Math.floor(_),0,255).toString(16);return o.length===1?`0${o}`:o}function Wo(_,o="#"){const b=gr(_.getComponents("rgb")).map(ta).join("");return`${o}${b}`}function qo(_,o="#"){const b=_.getComponents("rgb"),t=[b[0],b[1],b[2],b[3]*255].map(ta).join("");return`${o}${t}`}function ra(_){const o=tr(0),b=$t(_,"int");return`rgb(${gr(b.getComponents("rgb")).map(M=>o(M)).join(", ")})`}function zn(_){const o=tr(2),b=tr(0);return`rgba(${$t(_,"int").getComponents("rgb").map((j,h)=>(h===3?o:b)(j)).join(", ")})`}function hc(_){const o=[tr(0),Yn,Yn],b=$t(_,"int");return`hsl(${gr(b.getComponents("hsl")).map((M,j)=>o[j](M)).join(", ")})`}function pc(_){const o=[tr(0),Yn,Yn,tr(2)];return`hsla(${$t(_,"int").getComponents("hsl").map((M,j)=>o[j](M)).join(", ")})`}function na(_,o){const b=tr(o==="float"?2:0),t=["r","g","b"],M=$t(_,o);return`{${gr(M.getComponents("rgb")).map((h,y)=>`${t[y]}: ${b(h)}`).join(", ")}}`}function fc(_){return o=>na(o,_)}function oa(_,o){const b=tr(2),t=tr(o==="float"?2:0),M=["r","g","b","a"];return`{${$t(_,o).getComponents("rgb").map((y,l)=>{const d=l===3?b:t;return`${M[l]}: ${d(y)}`}).join(", ")}}`}function mc(_){return o=>oa(o,_)}const yc=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Wo},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:qo},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:ra},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:zn},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:hc},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:pc},...["int","float"].reduce((_,o)=>[..._,{format:{alpha:!1,mode:"rgb",notation:"object",type:o},stringifier:fc(o)},{format:{alpha:!0,mode:"rgb",notation:"object",type:o},stringifier:mc(o)}],[])];function sa(_){return yc.reduce((o,b)=>o||(ec(b.format,_)?b.stringifier:null),null)}const mn=pt("apl");class gc{constructor(o,b){this.onValueChange_=this.onValueChange_.bind(this),this.value=b.value,this.value.emitter.on("change",this.onValueChange_),this.element=o.createElement("div"),this.element.classList.add(mn()),b.viewProps.bindClassModifiers(this.element),b.viewProps.bindTabIndex(this.element);const t=o.createElement("div");t.classList.add(mn("b")),this.element.appendChild(t);const M=o.createElement("div");M.classList.add(mn("c")),t.appendChild(M),this.colorElem_=M;const j=o.createElement("div");j.classList.add(mn("m")),this.element.appendChild(j),this.markerElem_=j;const h=o.createElement("div");h.classList.add(mn("p")),this.markerElem_.appendChild(h),this.previewElem_=h,this.update_()}update_(){const o=this.value.rawValue,b=o.getComponents("rgb"),t=new ft([b[0],b[1],b[2],0],"rgb"),M=new ft([b[0],b[1],b[2],255],"rgb"),j=["to right",zn(t),zn(M)];this.colorElem_.style.background=`linear-gradient(${j.join(",")})`,this.previewElem_.style.backgroundColor=zn(o);const h=yt(b[3],0,1,0,100);this.markerElem_.style.left=`${h}%`}onValueChange_(){this.update_()}}class vc{constructor(o,b){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=b.value,this.viewProps=b.viewProps,this.view=new gc(o,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vr(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(o,b){if(!o.point)return;const t=o.point.x/o.bounds.width,M=this.value.rawValue,[j,h,y]=M.getComponents("hsv");this.value.setRawValue(new ft([j,h,y,t],"hsv"),b)}onPointerDown_(o){this.handlePointerEvent_(o.data,{forceEmit:!1,last:!1})}onPointerMove_(o){this.handlePointerEvent_(o.data,{forceEmit:!1,last:!1})}onPointerUp_(o){this.handlePointerEvent_(o.data,{forceEmit:!0,last:!0})}onKeyDown_(o){const b=er(Nr(!0),Sr(o));if(b===0)return;const t=this.value.rawValue,[M,j,h,y]=t.getComponents("hsv");this.value.setRawValue(new ft([M,j,h,y+b],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(o){er(Nr(!0),Sr(o))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const qr=pt("coltxt");function bc(_){const o=_.createElement("select"),b=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return o.appendChild(b.reduce((t,M)=>{const j=_.createElement("option");return j.textContent=M.text,j.value=M.value,t.appendChild(j),t},_.createDocumentFragment())),o}class _c{constructor(o,b){this.element=o.createElement("div"),this.element.classList.add(qr()),b.viewProps.bindClassModifiers(this.element);const t=o.createElement("div");t.classList.add(qr("m")),this.modeElem_=bc(o),this.modeElem_.classList.add(qr("ms")),t.appendChild(this.modeSelectElement),b.viewProps.bindDisabled(this.modeElem_);const M=o.createElement("div");M.classList.add(qr("mm")),M.appendChild($n(o,"dropdown")),t.appendChild(M),this.element.appendChild(t);const j=o.createElement("div");j.classList.add(qr("w")),this.element.appendChild(j),this.inputsElem_=j,this.inputViews_=b.inputViews,this.applyInputViews_(),xr(b.mode,h=>{this.modeElem_.value=h})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(o){this.inputViews_=o,this.applyInputViews_()}applyInputViews_(){Ei(this.inputsElem_);const o=this.element.ownerDocument;this.inputViews_.forEach(b=>{const t=o.createElement("div");t.classList.add(qr("c")),t.appendChild(b.element),this.inputsElem_.appendChild(t)})}}function wc(_){return tr(_==="float"?2:0)}function xc(_,o,b){const t=Qr(_,o)[b];return new jn({min:0,max:t})}function jc(_,o,b){return new Mn(_,{arrayPosition:b===0?"fst":b===2?"lst":"mid",parser:o.parser,props:lt.fromObject({formatter:wc(o.colorType),keyScale:Nr(!1),pointerScale:o.colorType==="float"?.01:1}),value:Tt(0,{constraint:xc(o.colorMode,o.colorType,b)}),viewProps:o.viewProps})}function Sc(_,o){const b={colorMode:o.colorMode,colorType:o.colorType,parser:jr,viewProps:o.viewProps};return[0,1,2].map(t=>{const M=jc(_,b,t);return tn({primary:o.value,secondary:M.value,forward(j){return $t(j,o.colorType).getComponents(o.colorMode)[t]},backward(j,h){const y=o.colorMode,d=$t(j,o.colorType).getComponents(y);d[t]=h;const v=Ho(eo(gr(d),d[3]),y,o.colorType);return $t(v,"int")}}),M})}function Ec(_,o){const b=new _n(_,{parser:On("int"),props:lt.fromObject({formatter:Wo}),value:Tt(ft.black()),viewProps:o.viewProps});return tn({primary:o.value,secondary:b.value,forward:t=>new ft(gr(t.getComponents()),t.mode),backward:(t,M)=>new ft(eo(gr(M.getComponents(t.mode)),t.getComponents()[3]),t.mode)}),[b]}function Cc(_){return _!=="hex"}class kc{constructor(o,b){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=b.colorType,this.value=b.value,this.viewProps=b.viewProps,this.colorMode=Tt(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(o),this.view=new _c(o,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(o){const b=this.colorMode.rawValue;return Cc(b)?Sc(o,{colorMode:b,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):Ec(o,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(o){const b=o.currentTarget;this.colorMode.rawValue=b.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(t=>t.view)}}const fo=pt("hpl");class Tc{constructor(o,b){this.onValueChange_=this.onValueChange_.bind(this),this.value=b.value,this.value.emitter.on("change",this.onValueChange_),this.element=o.createElement("div"),this.element.classList.add(fo()),b.viewProps.bindClassModifiers(this.element),b.viewProps.bindTabIndex(this.element);const t=o.createElement("div");t.classList.add(fo("c")),this.element.appendChild(t);const M=o.createElement("div");M.classList.add(fo("m")),this.element.appendChild(M),this.markerElem_=M,this.update_()}update_(){const o=this.value.rawValue,[b]=o.getComponents("hsv");this.markerElem_.style.backgroundColor=ra(new ft([b,100,100],"hsv"));const t=yt(b,0,360,0,100);this.markerElem_.style.left=`${t}%`}onValueChange_(){this.update_()}}class Mc{constructor(o,b){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=b.value,this.viewProps=b.viewProps,this.view=new Tc(o,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vr(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(o,b){if(!o.point)return;const t=yt(Bt(o.point.x,0,o.bounds.width),0,o.bounds.width,0,360),M=this.value.rawValue,[,j,h,y]=M.getComponents("hsv");this.value.setRawValue(new ft([t,j,h,y],"hsv"),b)}onPointerDown_(o){this.handlePointerEvent_(o.data,{forceEmit:!1,last:!1})}onPointerMove_(o){this.handlePointerEvent_(o.data,{forceEmit:!1,last:!1})}onPointerUp_(o){this.handlePointerEvent_(o.data,{forceEmit:!0,last:!0})}onKeyDown_(o){const b=er(Nr(!1),Sr(o));if(b===0)return;const t=this.value.rawValue,[M,j,h,y]=t.getComponents("hsv");this.value.setRawValue(new ft([M+b,j,h,y],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(o){er(Nr(!1),Sr(o))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const mo=pt("svp"),ei=64;class Pc{constructor(o,b){this.onValueChange_=this.onValueChange_.bind(this),this.value=b.value,this.value.emitter.on("change",this.onValueChange_),this.element=o.createElement("div"),this.element.classList.add(mo()),b.viewProps.bindClassModifiers(this.element),b.viewProps.bindTabIndex(this.element);const t=o.createElement("canvas");t.height=ei,t.width=ei,t.classList.add(mo("c")),this.element.appendChild(t),this.canvasElement=t;const M=o.createElement("div");M.classList.add(mo("m")),this.element.appendChild(M),this.markerElem_=M,this.update_()}update_(){const o=Ol(this.canvasElement);if(!o)return;const t=this.value.rawValue.getComponents("hsv"),M=this.canvasElement.width,j=this.canvasElement.height,h=o.getImageData(0,0,M,j),y=h.data;for(let v=0;v<j;v++)for(let m=0;m<M;m++){const n=yt(m,0,M,0,100),i=yt(v,0,j,100,0),s=Gi(t[0],n,i),a=(v*M+m)*4;y[a]=s[0],y[a+1]=s[1],y[a+2]=s[2],y[a+3]=255}o.putImageData(h,0,0);const l=yt(t[1],0,100,0,100);this.markerElem_.style.left=`${l}%`;const d=yt(t[2],0,100,100,0);this.markerElem_.style.top=`${d}%`}onValueChange_(){this.update_()}}class Oc{constructor(o,b){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=b.value,this.viewProps=b.viewProps,this.view=new Pc(o,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vr(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(o,b){if(!o.point)return;const t=yt(o.point.x,0,o.bounds.width,0,100),M=yt(o.point.y,0,o.bounds.height,100,0),[j,,,h]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new ft([j,t,M,h],"hsv"),b)}onPointerDown_(o){this.handlePointerEvent_(o.data,{forceEmit:!1,last:!1})}onPointerMove_(o){this.handlePointerEvent_(o.data,{forceEmit:!1,last:!1})}onPointerUp_(o){this.handlePointerEvent_(o.data,{forceEmit:!0,last:!0})}onKeyDown_(o){Ui(o.key)&&o.preventDefault();const[b,t,M,j]=this.value.rawValue.getComponents("hsv"),h=Nr(!1),y=er(h,Sr(o)),l=er(h,wn(o));y===0&&l===0||this.value.setRawValue(new ft([b,t+y,M+l,j],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(o){const b=Nr(!1),t=er(b,Sr(o)),M=er(b,wn(o));t===0&&M===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Ac{constructor(o,b){this.value=b.value,this.viewProps=b.viewProps,this.hPaletteC_=new Mc(o,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Oc(o,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=b.supportsAlpha?{palette:new vc(o,{value:this.value,viewProps:this.viewProps}),text:new Mn(o,{parser:jr,props:lt.fromObject({pointerScale:.01,keyScale:.1,formatter:tr(2)}),value:Tt(0,{constraint:new jn({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&tn({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.getComponents()[3],backward:(t,M)=>{const j=t.getComponents();return j[3]=M,new ft(j,t.mode)}}),this.textsC_=new kc(o,{colorType:b.colorType,value:this.value,viewProps:this.viewProps}),this.view=new Xu(o,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:b.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const yo=pt("colsw");class Lc{constructor(o,b){this.onValueChange_=this.onValueChange_.bind(this),b.value.emitter.on("change",this.onValueChange_),this.value=b.value,this.element=o.createElement("div"),this.element.classList.add(yo()),b.viewProps.bindClassModifiers(this.element);const t=o.createElement("div");t.classList.add(yo("sw")),this.element.appendChild(t),this.swatchElem_=t;const M=o.createElement("button");M.classList.add(yo("b")),b.viewProps.bindDisabled(M),this.element.appendChild(M),this.buttonElement=M,this.update_()}update_(){const o=this.value.rawValue;this.swatchElem_.style.backgroundColor=qo(o)}onValueChange_(){this.update_()}}class Rc{constructor(o,b){this.value=b.value,this.viewProps=b.viewProps,this.view=new Lc(o,{value:this.value,viewProps:this.viewProps})}}class Xo{constructor(o,b){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=b.value,this.viewProps=b.viewProps,this.foldable_=En.create(b.expanded),this.swatchC_=new Rc(o,{value:this.value,viewProps:this.viewProps});const t=this.swatchC_.view.buttonElement;t.addEventListener("blur",this.onButtonBlur_),t.addEventListener("click",this.onButtonClick_),this.textC_=new _n(o,{parser:b.parser,props:lt.fromObject({formatter:b.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Nu(o,{foldable:this.foldable_,pickerLayout:b.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=b.pickerLayout==="popup"?new Ii(o,{viewProps:this.viewProps}):null;const M=new Ac(o,{colorType:b.colorType,supportsAlpha:b.supportsAlpha,value:this.value,viewProps:this.viewProps});M.view.allFocusableElements.forEach(j=>{j.addEventListener("blur",this.onPopupChildBlur_),j.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=M,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(M.view.element),tn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:j=>j,backward:(j,h)=>h})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Uo(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(o){if(!this.popC_)return;const b=this.view.element,t=o.relatedTarget;(!t||!b.contains(t))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(o){if(!this.popC_)return;const b=this.popC_.view.element,t=Ci(o);t&&b.contains(t)||t&&t===this.swatchC_.view.buttonElement&&!Ao(b.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(o){this.popC_?o.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&o.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function Ic(_){return gr(_.getComponents("rgb")).reduce((o,b)=>o<<8|Math.floor(b)&255,0)}function Dc(_){return _.getComponents("rgb").reduce((o,b,t)=>{const M=Math.floor(t===3?b*255:b)&255;return o<<8|M},0)>>>0}function Fc(_){return new ft([_>>16&255,_>>8&255,_&255],"rgb")}function Uc(_){return new ft([_>>24&255,_>>16&255,_>>8&255,yt(_&255,0,255,0,1)],"rgb")}function Nc(_){return typeof _!="number"?ft.black():Fc(_)}function Bc(_){return typeof _!="number"?ft.black():Uc(_)}function Hn(_,o){return typeof _!="object"||jt(_)?!1:o in _&&typeof _[o]=="number"}function ia(_){return Hn(_,"r")&&Hn(_,"g")&&Hn(_,"b")}function aa(_){return ia(_)&&Hn(_,"a")}function la(_){return ia(_)}function Yo(_,o){if(_.mode!==o.mode||_.type!==o.type)return!1;const b=_.getComponents(),t=o.getComponents();for(let M=0;M<b.length;M++)if(b[M]!==t[M])return!1;return!0}function ti(_){return"a"in _?[_.r,_.g,_.b,_.a]:[_.r,_.g,_.b]}function Vc(_){const o=sa(_);return o?(b,t)=>{Pn(b,o(t))}:null}function Gc(_){const o=_?Dc:Ic;return(b,t)=>{Pn(b,o(t))}}function zc(_,o,b){const M=$t(o,b).toRgbaObject();_.writeProperty("r",M.r),_.writeProperty("g",M.g),_.writeProperty("b",M.b),_.writeProperty("a",M.a)}function Hc(_,o,b){const M=$t(o,b).toRgbaObject();_.writeProperty("r",M.r),_.writeProperty("g",M.g),_.writeProperty("b",M.b)}function Wc(_,o){return(b,t)=>{_?zc(b,t,o):Hc(b,t,o)}}function qc(_){var o;return!!(!((o=_==null?void 0:_.color)===null||o===void 0)&&o.alpha)}function Xc(_){return _?o=>qo(o,"0x"):o=>Wo(o,"0x")}function Yc(_){return"color"in _||_.view==="color"}const Kc=Jt({id:"input-color-number",type:"input",accept:(_,o)=>{if(typeof _!="number"||!Yc(o))return null;const b=Go(o);return b?{initialValue:_,params:Object.assign(Object.assign({},b),{supportsAlpha:qc(o)})}:null},binding:{reader:_=>_.params.supportsAlpha?Bc:Nc,equals:Yo,writer:_=>Gc(_.params.supportsAlpha)},controller:_=>{var o,b;return new Xo(_.document,{colorType:"int",expanded:(o=_.params.expanded)!==null&&o!==void 0?o:!1,formatter:Xc(_.params.supportsAlpha),parser:On("int"),pickerLayout:(b=_.params.picker)!==null&&b!==void 0?b:"popup",supportsAlpha:_.params.supportsAlpha,value:_.value,viewProps:_.viewProps})}});function Zc(_,o){if(!la(_))return $t(ft.black(),o);if(o==="int"){const b=ti(_);return new ft(b,"rgb")}if(o==="float"){const b=ti(_);return new zo(b,"rgb")}return $t(ft.black(),"int")}function Qc(_){return aa(_)}function $c(_){return o=>{const b=Zc(o,_);return $t(b,"int")}}function Jc(_,o){return b=>_?oa(b,o):na(b,o)}const ed=Jt({id:"input-color-object",type:"input",accept:(_,o)=>{var b;if(!la(_))return null;const t=Go(o);return t?{initialValue:_,params:Object.assign(Object.assign({},t),{colorType:(b=Wi(o))!==null&&b!==void 0?b:"int"})}:null},binding:{reader:_=>$c(_.params.colorType),equals:Yo,writer:_=>Wc(Qc(_.initialValue),_.params.colorType)},controller:_=>{var o,b;const t=aa(_.initialValue);return new Xo(_.document,{colorType:_.params.colorType,expanded:(o=_.params.expanded)!==null&&o!==void 0?o:!1,formatter:Jc(t,_.params.colorType),parser:On("int"),pickerLayout:(b=_.params.picker)!==null&&b!==void 0?b:"popup",supportsAlpha:t,value:_.value,viewProps:_.viewProps})}}),td=Jt({id:"input-color-string",type:"input",accept:(_,o)=>{if(typeof _!="string"||o.view==="text")return null;const b=cc(_,Wi(o));if(!b)return null;const t=sa(b);if(!t)return null;const M=Go(o);return M?{initialValue:_,params:Object.assign(Object.assign({},M),{format:b,stringifier:t})}:null},binding:{reader:()=>dc,equals:Yo,writer:_=>{const o=Vc(_.params.format);if(!o)throw Lt.notBindable();return o}},controller:_=>{var o,b;return new Xo(_.document,{colorType:_.params.format.type,expanded:(o=_.params.expanded)!==null&&o!==void 0?o:!1,formatter:_.params.stringifier,parser:On("int"),pickerLayout:(b=_.params.picker)!==null&&b!==void 0?b:"popup",supportsAlpha:_.params.format.alpha,value:_.value,viewProps:_.viewProps})}});class Ko{constructor(o){this.components=o.components,this.asm_=o.assembly}constrain(o){const b=this.asm_.toComponents(o).map((t,M)=>{var j,h;return(h=(j=this.components[M])===null||j===void 0?void 0:j.constrain(t))!==null&&h!==void 0?h:t});return this.asm_.fromComponents(b)}}const ri=pt("pndtxt");class rd{constructor(o,b){this.textViews=b.textViews,this.element=o.createElement("div"),this.element.classList.add(ri()),this.textViews.forEach(t=>{const M=o.createElement("div");M.classList.add(ri("a")),M.appendChild(t.element),this.element.appendChild(M)})}}function nd(_,o,b){return new Mn(_,{arrayPosition:b===0?"fst":b===o.axes.length-1?"lst":"mid",parser:o.parser,props:o.axes[b].textProps,value:Tt(0,{constraint:o.axes[b].constraint}),viewProps:o.viewProps})}class Zo{constructor(o,b){this.value=b.value,this.viewProps=b.viewProps,this.acs_=b.axes.map((t,M)=>nd(o,b,M)),this.acs_.forEach((t,M)=>{tn({primary:this.value,secondary:t.value,forward:j=>b.assembly.toComponents(j)[M],backward:(j,h)=>{const y=b.assembly.toComponents(j);return y[M]=h,b.assembly.fromComponents(y)}})}),this.view=new rd(o,{textViews:this.acs_.map(t=>t.view)})}get textControllers(){return this.acs_}}class od extends bn{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(o){this.controller.valueController.sliderController.props.set("max",o)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(o){this.controller.valueController.sliderController.props.set("min",o)}}function sd(_,o){const b=[],t=bi(_,o);t&&b.push(t);const M=_i(_);M&&b.push(M);const j=Vo(_.options);return j&&b.push(j),new Cn(b)}const id=Jt({id:"input-number",type:"input",accept:(_,o)=>{if(typeof _!="number")return null;const b=Pt(o,t=>Object.assign(Object.assign({},xi(t)),{options:t.optional.custom(Tn),readonly:t.optional.constant(!1)}));return b?{initialValue:_,params:b}:null},binding:{reader:_=>mi,constraint:_=>sd(_.params,_.initialValue),writer:_=>Pn},controller:_=>{const o=_.value,b=_.constraint,t=b&&Xn(b,kn);if(t)return new Rr(_.document,{props:new lt({options:t.values.value("options")}),value:o,viewProps:_.viewProps});const M=wi(_.params,o.rawValue),j=b&&Xn(b,jn);return j?new Kn(_.document,Object.assign(Object.assign({},Ni(Object.assign(Object.assign({},M),{keyScale:Tt(M.keyScale),max:j.values.value("max"),min:j.values.value("min")}))),{parser:jr,value:o,viewProps:_.viewProps})):new Mn(_.document,{parser:jr,props:lt.fromObject(M),value:o,viewProps:_.viewProps})},api(_){return typeof _.controller.value.rawValue!="number"?null:_.controller.valueController instanceof Kn?new od(_.controller):_.controller.valueController instanceof Rr?new No(_.controller):null}});class Lr{constructor(o=0,b=0){this.x=o,this.y=b}getComponents(){return[this.x,this.y]}static isObject(o){if(jt(o))return!1;const b=o.x,t=o.y;return!(typeof b!="number"||typeof t!="number")}static equals(o,b){return o.x===b.x&&o.y===b.y}toObject(){return{x:this.x,y:this.y}}}const ua={toComponents:_=>_.getComponents(),fromComponents:_=>new Lr(..._)},Xr=pt("p2d");class ad{constructor(o,b){this.element=o.createElement("div"),this.element.classList.add(Xr()),b.viewProps.bindClassModifiers(this.element),xr(b.expanded,$r(this.element,Xr(void 0,"expanded")));const t=o.createElement("div");t.classList.add(Xr("h")),this.element.appendChild(t);const M=o.createElement("button");M.classList.add(Xr("b")),M.appendChild($n(o,"p2dpad")),b.viewProps.bindDisabled(M),t.appendChild(M),this.buttonElement=M;const j=o.createElement("div");if(j.classList.add(Xr("t")),t.appendChild(j),this.textElement=j,b.pickerLayout==="inline"){const h=o.createElement("div");h.classList.add(Xr("p")),this.element.appendChild(h),this.pickerElement=h}else this.pickerElement=null}}const Pr=pt("p2dp");class ld{constructor(o,b){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=b.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=o.createElement("div"),this.element.classList.add(Pr()),b.layout==="popup"&&this.element.classList.add(Pr(void 0,"p")),b.viewProps.bindClassModifiers(this.element);const t=o.createElement("div");t.classList.add(Pr("p")),b.viewProps.bindTabIndex(t),this.element.appendChild(t),this.padElement=t;const M=o.createElementNS(mr,"svg");M.classList.add(Pr("g")),this.padElement.appendChild(M),this.svgElem_=M;const j=o.createElementNS(mr,"line");j.classList.add(Pr("ax")),j.setAttributeNS(null,"x1","0"),j.setAttributeNS(null,"y1","50%"),j.setAttributeNS(null,"x2","100%"),j.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(j);const h=o.createElementNS(mr,"line");h.classList.add(Pr("ax")),h.setAttributeNS(null,"x1","50%"),h.setAttributeNS(null,"y1","0"),h.setAttributeNS(null,"x2","50%"),h.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(h);const y=o.createElementNS(mr,"line");y.classList.add(Pr("l")),y.setAttributeNS(null,"x1","50%"),y.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(y),this.lineElem_=y;const l=o.createElement("div");l.classList.add(Pr("m")),this.padElement.appendChild(l),this.markerElem_=l,b.value.emitter.on("change",this.onValueChange_),this.value=b.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[o,b]=this.value.rawValue.getComponents(),t=this.props_.get("max"),M=yt(o,-t,+t,0,100),j=yt(b,-t,+t,0,100),h=this.props_.get("invertsY")?100-j:j;this.lineElem_.setAttributeNS(null,"x2",`${M}%`),this.lineElem_.setAttributeNS(null,"y2",`${h}%`),this.markerElem_.style.left=`${M}%`,this.markerElem_.style.top=`${h}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function ni(_,o,b){return[er(o[0],Sr(_)),er(o[1],wn(_))*(b?1:-1)]}class ud{constructor(o,b){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=b.props,this.value=b.value,this.viewProps=b.viewProps,this.view=new ld(o,{layout:b.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vr(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(o,b){if(!o.point)return;const t=this.props.get("max"),M=yt(o.point.x,0,o.bounds.width,-t,+t),j=yt(this.props.get("invertsY")?o.bounds.height-o.point.y:o.point.y,0,o.bounds.height,-t,+t);this.value.setRawValue(new Lr(M,j),b)}onPointerDown_(o){this.handlePointerEvent_(o.data,{forceEmit:!1,last:!1})}onPointerMove_(o){this.handlePointerEvent_(o.data,{forceEmit:!1,last:!1})}onPointerUp_(o){this.handlePointerEvent_(o.data,{forceEmit:!0,last:!0})}onPadKeyDown_(o){Ui(o.key)&&o.preventDefault();const[b,t]=ni(o,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));b===0&&t===0||this.value.setRawValue(new Lr(this.value.rawValue.x+b,this.value.rawValue.y+t),{forceEmit:!1,last:!1})}onPadKeyUp_(o){const[b,t]=ni(o,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));b===0&&t===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class cd{constructor(o,b){var t,M;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=b.value,this.viewProps=b.viewProps,this.foldable_=En.create(b.expanded),this.popC_=b.pickerLayout==="popup"?new Ii(o,{viewProps:this.viewProps}):null;const j=new ud(o,{layout:b.pickerLayout,props:new lt({invertsY:Tt(b.invertsY),max:Tt(b.max),xKeyScale:b.axes[0].textProps.value("keyScale"),yKeyScale:b.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});j.view.allFocusableElements.forEach(h=>{h.addEventListener("blur",this.onPopupChildBlur_),h.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=j,this.textC_=new Zo(o,{assembly:ua,axes:b.axes,parser:b.parser,value:this.value,viewProps:this.viewProps}),this.view=new ad(o,{expanded:this.foldable_.value("expanded"),pickerLayout:b.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(t=this.view.buttonElement)===null||t===void 0||t.addEventListener("blur",this.onPadButtonBlur_),(M=this.view.buttonElement)===null||M===void 0||M.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),tn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:h=>h,backward:(h,y)=>y})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Uo(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(o){if(!this.popC_)return;const b=this.view.element,t=o.relatedTarget;(!t||!b.contains(t))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(o){if(!this.popC_)return;const b=this.popC_.view.element,t=Ci(o);t&&b.contains(t)||t&&t===this.view.buttonElement&&!Ao(b.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(o){this.popC_?o.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&o.key==="Escape"&&this.view.buttonElement.focus()}}function dd(_){return Lr.isObject(_)?new Lr(_.x,_.y):new Lr}function hd(_,o){_.writeProperty("x",o.x),_.writeProperty("y",o.y)}function pd(_,o){return new Ko({assembly:ua,components:[wr(Object.assign(Object.assign({},_),_.x),o.x),wr(Object.assign(Object.assign({},_),_.y),o.y)]})}function oi(_,o){var b,t;if(!jt(_.min)||!jt(_.max))return Math.max(Math.abs((b=_.min)!==null&&b!==void 0?b:0),Math.abs((t=_.max)!==null&&t!==void 0?t:0));const M=gi(_);return Math.max(Math.abs(M)*10,Math.abs(o)*10)}function fd(_,o){var b,t;const M=oi(Fr(_,(b=_.x)!==null&&b!==void 0?b:{}),o.x),j=oi(Fr(_,(t=_.y)!==null&&t!==void 0?t:{}),o.y);return Math.max(M,j)}function md(_){if(!("y"in _))return!1;const o=_.y;return o&&"inverted"in o?!!o.inverted:!1}const yd=Jt({id:"input-point2d",type:"input",accept:(_,o)=>{if(!Lr.isObject(_))return null;const b=Pt(o,t=>Object.assign(Object.assign({},xn(t)),{expanded:t.optional.boolean,picker:t.optional.custom(Vi),readonly:t.optional.constant(!1),x:t.optional.custom(Ar),y:t.optional.object(Object.assign(Object.assign({},xn(t)),{inverted:t.optional.boolean}))}));return b?{initialValue:_,params:b}:null},binding:{reader:()=>dd,constraint:_=>pd(_.params,_.initialValue),equals:Lr.equals,writer:()=>hd},controller:_=>{var o,b;const t=_.document,M=_.value,j=_.constraint,h=[_.params.x,_.params.y];return new cd(t,{axes:M.rawValue.getComponents().map((y,l)=>{var d;return Oo({constraint:j.components[l],initialValue:y,params:Fr(_.params,(d=h[l])!==null&&d!==void 0?d:{})})}),expanded:(o=_.params.expanded)!==null&&o!==void 0?o:!1,invertsY:md(_.params),max:fd(_.params,M.rawValue),parser:jr,pickerLayout:(b=_.params.picker)!==null&&b!==void 0?b:"popup",value:M,viewProps:_.viewProps})}});class Kr{constructor(o=0,b=0,t=0){this.x=o,this.y=b,this.z=t}getComponents(){return[this.x,this.y,this.z]}static isObject(o){if(jt(o))return!1;const b=o.x,t=o.y,M=o.z;return!(typeof b!="number"||typeof t!="number"||typeof M!="number")}static equals(o,b){return o.x===b.x&&o.y===b.y&&o.z===b.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const ca={toComponents:_=>_.getComponents(),fromComponents:_=>new Kr(..._)};function gd(_){return Kr.isObject(_)?new Kr(_.x,_.y,_.z):new Kr}function vd(_,o){_.writeProperty("x",o.x),_.writeProperty("y",o.y),_.writeProperty("z",o.z)}function bd(_,o){return new Ko({assembly:ca,components:[wr(Object.assign(Object.assign({},_),_.x),o.x),wr(Object.assign(Object.assign({},_),_.y),o.y),wr(Object.assign(Object.assign({},_),_.z),o.z)]})}const _d=Jt({id:"input-point3d",type:"input",accept:(_,o)=>{if(!Kr.isObject(_))return null;const b=Pt(o,t=>Object.assign(Object.assign({},xn(t)),{readonly:t.optional.constant(!1),x:t.optional.custom(Ar),y:t.optional.custom(Ar),z:t.optional.custom(Ar)}));return b?{initialValue:_,params:b}:null},binding:{reader:_=>gd,constraint:_=>bd(_.params,_.initialValue),equals:Kr.equals,writer:_=>vd},controller:_=>{const o=_.value,b=_.constraint,t=[_.params.x,_.params.y,_.params.z];return new Zo(_.document,{assembly:ca,axes:o.rawValue.getComponents().map((M,j)=>{var h;return Oo({constraint:b.components[j],initialValue:M,params:Fr(_.params,(h=t[j])!==null&&h!==void 0?h:{})})}),parser:jr,value:o,viewProps:_.viewProps})}});class Zr{constructor(o=0,b=0,t=0,M=0){this.x=o,this.y=b,this.z=t,this.w=M}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(o){if(jt(o))return!1;const b=o.x,t=o.y,M=o.z,j=o.w;return!(typeof b!="number"||typeof t!="number"||typeof M!="number"||typeof j!="number")}static equals(o,b){return o.x===b.x&&o.y===b.y&&o.z===b.z&&o.w===b.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const da={toComponents:_=>_.getComponents(),fromComponents:_=>new Zr(..._)};function wd(_){return Zr.isObject(_)?new Zr(_.x,_.y,_.z,_.w):new Zr}function xd(_,o){_.writeProperty("x",o.x),_.writeProperty("y",o.y),_.writeProperty("z",o.z),_.writeProperty("w",o.w)}function jd(_,o){return new Ko({assembly:da,components:[wr(Object.assign(Object.assign({},_),_.x),o.x),wr(Object.assign(Object.assign({},_),_.y),o.y),wr(Object.assign(Object.assign({},_),_.z),o.z),wr(Object.assign(Object.assign({},_),_.w),o.w)]})}const Sd=Jt({id:"input-point4d",type:"input",accept:(_,o)=>{if(!Zr.isObject(_))return null;const b=Pt(o,t=>Object.assign(Object.assign({},xn(t)),{readonly:t.optional.constant(!1),w:t.optional.custom(Ar),x:t.optional.custom(Ar),y:t.optional.custom(Ar),z:t.optional.custom(Ar)}));return b?{initialValue:_,params:b}:null},binding:{reader:_=>wd,constraint:_=>jd(_.params,_.initialValue),equals:Zr.equals,writer:_=>xd},controller:_=>{const o=_.value,b=_.constraint,t=[_.params.x,_.params.y,_.params.z,_.params.w];return new Zo(_.document,{assembly:da,axes:o.rawValue.getComponents().map((M,j)=>{var h;return Oo({constraint:b.components[j],initialValue:M,params:Fr(_.params,(h=t[j])!==null&&h!==void 0?h:{})})}),parser:jr,value:o,viewProps:_.viewProps})}});function Ed(_){const o=[],b=Vo(_.options);return b&&o.push(b),new Cn(o)}const Cd=Jt({id:"input-string",type:"input",accept:(_,o)=>{if(typeof _!="string")return null;const b=Pt(o,t=>({readonly:t.optional.constant(!1),options:t.optional.custom(Tn)}));return b?{initialValue:_,params:b}:null},binding:{reader:_=>Fi,constraint:_=>Ed(_.params),writer:_=>Pn},controller:_=>{const o=_.document,b=_.value,t=_.constraint,M=t&&Xn(t,kn);return M?new Rr(o,{props:new lt({options:M.values.value("options")}),value:b,viewProps:_.viewProps}):new _n(o,{parser:j=>j,props:lt.fromObject({formatter:Eo}),value:b,viewProps:_.viewProps})},api(_){return typeof _.controller.value.rawValue!="string"?null:_.controller.valueController instanceof Rr?new No(_.controller):null}}),An={monitor:{defaultInterval:200,defaultRows:3}},si=pt("mll");class kd{constructor(o,b){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=b.formatter,this.element=o.createElement("div"),this.element.classList.add(si()),b.viewProps.bindClassModifiers(this.element);const t=o.createElement("textarea");t.classList.add(si("i")),t.style.height=`calc(var(${Bi("containerUnitSize")}) * ${b.rows})`,t.readOnly=!0,b.viewProps.bindDisabled(t),this.element.appendChild(t),this.textareaElem_=t,b.value.emitter.on("change",this.onValueUpdate_),this.value=b.value,this.update_()}update_(){const o=this.textareaElem_,b=o.scrollTop===o.scrollHeight-o.clientHeight,t=[];this.value.rawValue.forEach(M=>{M!==void 0&&t.push(this.formatter_(M))}),o.textContent=t.join(`
`),b&&(o.scrollTop=o.scrollHeight)}onValueUpdate_(){this.update_()}}class Qo{constructor(o,b){this.value=b.value,this.viewProps=b.viewProps,this.view=new kd(o,{formatter:b.formatter,rows:b.rows,value:this.value,viewProps:this.viewProps})}}const ii=pt("sgl");class Td{constructor(o,b){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=b.formatter,this.element=o.createElement("div"),this.element.classList.add(ii()),b.viewProps.bindClassModifiers(this.element);const t=o.createElement("input");t.classList.add(ii("i")),t.readOnly=!0,t.type="text",b.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,b.value.emitter.on("change",this.onValueUpdate_),this.value=b.value,this.update_()}update_(){const o=this.value.rawValue,b=o[o.length-1];this.inputElement.value=b!==void 0?this.formatter_(b):""}onValueUpdate_(){this.update_()}}class $o{constructor(o,b){this.value=b.value,this.viewProps=b.viewProps,this.view=new Td(o,{formatter:b.formatter,value:this.value,viewProps:this.viewProps})}}const Md=Jt({id:"monitor-bool",type:"monitor",accept:(_,o)=>{if(typeof _!="boolean")return null;const b=Pt(o,t=>({readonly:t.required.constant(!0),rows:t.optional.number}));return b?{initialValue:_,params:b}:null},binding:{reader:_=>Di},controller:_=>{var o;return _.value.rawValue.length===1?new $o(_.document,{formatter:Zs,value:_.value,viewProps:_.viewProps}):new Qo(_.document,{formatter:Zs,rows:(o=_.params.rows)!==null&&o!==void 0?o:An.monitor.defaultRows,value:_.value,viewProps:_.viewProps})}});class Pd extends bn{get max(){return this.controller.valueController.props.get("max")}set max(o){this.controller.valueController.props.set("max",o)}get min(){return this.controller.valueController.props.get("min")}set min(o){this.controller.valueController.props.set("min",o)}}const Or=pt("grl");class Od{constructor(o,b){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=o.createElement("div"),this.element.classList.add(Or()),b.viewProps.bindClassModifiers(this.element),this.formatter_=b.formatter,this.props_=b.props,this.cursor_=b.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const t=o.createElementNS(mr,"svg");t.classList.add(Or("g")),t.style.height=`calc(var(${Bi("containerUnitSize")}) * ${b.rows})`,this.element.appendChild(t),this.svgElem_=t;const M=o.createElementNS(mr,"polyline");this.svgElem_.appendChild(M),this.lineElem_=M;const j=o.createElement("div");j.classList.add(Or("t"),pt("tt")()),this.element.appendChild(j),this.tooltipElem_=j,b.value.emitter.on("change",this.onValueUpdate_),this.value=b.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:o,clientHeight:b}=this.element,t=this.value.rawValue.length-1,M=this.props_.get("min"),j=this.props_.get("max"),h=[];this.value.rawValue.forEach((m,n)=>{if(m===void 0)return;const i=yt(n,0,t,0,o),s=yt(m,M,j,b,0);h.push([i,s].join(","))}),this.lineElem_.setAttributeNS(null,"points",h.join(" "));const y=this.tooltipElem_,l=this.value.rawValue[this.cursor_.rawValue];if(l===void 0){y.classList.remove(Or("t","a"));return}const d=yt(this.cursor_.rawValue,0,t,0,o),v=yt(l,M,j,b,0);y.style.left=`${d}px`,y.style.top=`${v}px`,y.textContent=`${this.formatter_(l)}`,y.classList.contains(Or("t","a"))||(y.classList.add(Or("t","a"),Or("t","in")),qn(y),y.classList.remove(Or("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class ha{constructor(o,b){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=b.props,this.value=b.value,this.viewProps=b.viewProps,this.cursor_=Tt(-1),this.view=new Od(o,{cursor:this.cursor_,formatter:b.formatter,rows:b.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!Ao(o))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const t=new Vr(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}}importProps(o){return nr(o,null,b=>({max:b.required.number,min:b.required.number}),b=>(this.props.set("max",b.max),this.props.set("min",b.min),!0))}exportProps(){return or(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(o){const{clientWidth:b}=this.view.element;this.cursor_.rawValue=Math.floor(yt(o.offsetX,0,b,0,this.value.rawValue.length))}onGraphPointerDown_(o){this.onGraphPointerMove_(o)}onGraphPointerMove_(o){if(!o.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(yt(o.data.point.x,0,o.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Co(_){return jt(_.format)?tr(2):_.format}function Ad(_){var o;return _.value.rawValue.length===1?new $o(_.document,{formatter:Co(_.params),value:_.value,viewProps:_.viewProps}):new Qo(_.document,{formatter:Co(_.params),rows:(o=_.params.rows)!==null&&o!==void 0?o:An.monitor.defaultRows,value:_.value,viewProps:_.viewProps})}function Ld(_){var o,b,t;return new ha(_.document,{formatter:Co(_.params),rows:(o=_.params.rows)!==null&&o!==void 0?o:An.monitor.defaultRows,props:lt.fromObject({max:(b=_.params.max)!==null&&b!==void 0?b:100,min:(t=_.params.min)!==null&&t!==void 0?t:0}),value:_.value,viewProps:_.viewProps})}function ai(_){return _.view==="graph"}const Rd=Jt({id:"monitor-number",type:"monitor",accept:(_,o)=>{if(typeof _!="number")return null;const b=Pt(o,t=>({format:t.optional.function,max:t.optional.number,min:t.optional.number,readonly:t.required.constant(!0),rows:t.optional.number,view:t.optional.string}));return b?{initialValue:_,params:b}:null},binding:{defaultBufferSize:_=>ai(_)?64:1,reader:_=>mi},controller:_=>ai(_.params)?Ld(_):Ad(_),api:_=>_.controller.valueController instanceof ha?new Pd(_.controller):null}),Id=Jt({id:"monitor-string",type:"monitor",accept:(_,o)=>{if(typeof _!="string")return null;const b=Pt(o,t=>({multiline:t.optional.boolean,readonly:t.required.constant(!0),rows:t.optional.number}));return b?{initialValue:_,params:b}:null},binding:{reader:_=>Fi},controller:_=>{var o;const b=_.value;return b.rawValue.length>1||_.params.multiline?new Qo(_.document,{formatter:Eo,rows:(o=_.params.rows)!==null&&o!==void 0?o:An.monitor.defaultRows,value:b,viewProps:_.viewProps}):new $o(_.document,{formatter:Eo,value:b,viewProps:_.viewProps})}});class Dd{constructor(){this.map_=new Map}get(o){var b;return(b=this.map_.get(o))!==null&&b!==void 0?b:null}has(o){return this.map_.has(o)}add(o,b){return this.map_.set(o,b),o.viewProps.handleDispose(()=>{this.map_.delete(o)}),b}}class Fd{constructor(o){this.target=o.target,this.reader_=o.reader,this.writer_=o.writer}read(){return this.reader_(this.target.read())}write(o){this.writer_(this.target,o)}inject(o){this.write(this.reader_(o))}}function Ud(_,o){var b;const t=_.accept(o.target.read(),o.params);if(jt(t))return null;const M={target:o.target,initialValue:t.initialValue,params:t.params},j=Pt(o.params,m=>({disabled:m.optional.boolean,hidden:m.optional.boolean,label:m.optional.string,tag:m.optional.string})),h=_.binding.reader(M),y=_.binding.constraint?_.binding.constraint(M):void 0,l=new Fd({reader:h,target:o.target,writer:_.binding.writer(M)}),d=new jl(Tt(h(t.initialValue),{constraint:y,equals:_.binding.equals}),l),v=_.controller({constraint:y,document:o.document,initialValue:t.initialValue,params:t.params,value:d,viewProps:Er.create({disabled:j==null?void 0:j.disabled,hidden:j==null?void 0:j.hidden})});return new Ul(o.document,{blade:en(),props:lt.fromObject({label:"label"in o.params?(b=j==null?void 0:j.label)!==null&&b!==void 0?b:null:o.target.key}),tag:j==null?void 0:j.tag,value:d,valueController:v})}class Nd{constructor(o){this.target=o.target,this.reader_=o.reader}read(){return this.reader_(this.target.read())}}function Bd(_,o){return o===0?new _u:new wu(_,o??An.monitor.defaultInterval)}function Vd(_,o){var b,t,M;const j=_.accept(o.target.read(),o.params);if(jt(j))return null;const h={target:o.target,initialValue:j.initialValue,params:j.params},y=Pt(o.params,n=>({bufferSize:n.optional.number,disabled:n.optional.boolean,hidden:n.optional.boolean,interval:n.optional.number,label:n.optional.string})),l=_.binding.reader(h),d=(t=(b=y==null?void 0:y.bufferSize)!==null&&b!==void 0?b:_.binding.defaultBufferSize&&_.binding.defaultBufferSize(j.params))!==null&&t!==void 0?t:1,v=new zl({binding:new Nd({reader:l,target:o.target}),bufferSize:d,ticker:Bd(o.document,y==null?void 0:y.interval)}),m=_.controller({document:o.document,params:j.params,value:v,viewProps:Er.create({disabled:y==null?void 0:y.disabled,hidden:y==null?void 0:y.hidden})});return m.viewProps.bindDisabled(v.ticker),m.viewProps.handleDispose(()=>{v.ticker.dispose()}),new Wl(o.document,{blade:en(),props:lt.fromObject({label:"label"in o.params?(M=y==null?void 0:y.label)!==null&&M!==void 0?M:null:o.target.key}),value:v,valueController:m})}class Gd{constructor(o){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=o}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(o,b){if(!Ru(b.core))throw Lt.notCompatible(o,b.id);b.type==="blade"?this.pluginsMap_.blades.unshift(b):b.type==="input"?this.pluginsMap_.inputs.unshift(b):b.type==="monitor"&&this.pluginsMap_.monitors.unshift(b)}createInput_(o,b,t){return this.pluginsMap_.inputs.reduce((M,j)=>M??Ud(j,{document:o,target:b,params:t}),null)}createMonitor_(o,b,t){return this.pluginsMap_.monitors.reduce((M,j)=>M??Vd(j,{document:o,params:t,target:b}),null)}createBinding(o,b,t){const M=b.read();if(jt(M))throw new Lt({context:{key:b.key},type:"nomatchingcontroller"});const j=this.createInput_(o,b,t);if(j)return j;const h=this.createMonitor_(o,b,t);if(h)return h;throw new Lt({context:{key:b.key},type:"nomatchingcontroller"})}createBlade(o,b){const t=this.pluginsMap_.blades.reduce((M,j)=>M??bu(j,{document:o,params:b}),null);if(!t)throw new Lt({type:"nomatchingview",context:{params:b}});return t}createInputBindingApi_(o){const b=this.pluginsMap_.inputs.reduce((t,M)=>{var j,h;return t||((h=(j=M.api)===null||j===void 0?void 0:j.call(M,{controller:o}))!==null&&h!==void 0?h:null)},null);return this.apiCache_.add(o,b??new bn(o))}createMonitorBindingApi_(o){const b=this.pluginsMap_.monitors.reduce((t,M)=>{var j,h;return t||((h=(j=M.api)===null||j===void 0?void 0:j.call(M,{controller:o}))!==null&&h!==void 0?h:null)},null);return this.apiCache_.add(o,b??new bn(o))}createBindingApi(o){if(this.apiCache_.has(o))return this.apiCache_.get(o);if(Nl(o))return this.createInputBindingApi_(o);if(ql(o))return this.createMonitorBindingApi_(o);throw Lt.shouldNeverHappen()}createApi(o){if(this.apiCache_.has(o))return this.apiCache_.get(o);if(Fl(o))return this.createBindingApi(o);const b=this.pluginsMap_.blades.reduce((t,M)=>t??M.api({controller:o,pool:this}),null);if(!b)throw Lt.shouldNeverHappen();return this.apiCache_.add(o,b)}}const zd=new Dd;function Hd(){const _=new Gd(zd);return[yd,_d,Sd,Cd,id,td,ed,Kc,Uu,Md,Id,Rd,Ql,cu,Ri].forEach(o=>{_.register("core",o)}),_}class Wd extends Br{constructor(o){super(o),this.emitter_=new Ut,this.controller.value.emitter.on("change",b=>{this.emitter_.emit("change",new Sn(this,b.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(o){this.controller.labelController.props.set("label",o)}get options(){return this.controller.valueController.props.get("options")}set options(o){this.controller.valueController.props.set("options",o)}get value(){return this.controller.value.rawValue}set value(o){this.controller.value.rawValue=o}on(o,b){const t=b.bind(this);return this.emitter_.on(o,M=>{t(M)},{key:b}),this}off(o,b){return this.emitter_.off(o,b),this}}class qd extends Br{}class Xd extends Br{constructor(o){super(o),this.emitter_=new Ut,this.controller.value.emitter.on("change",b=>{this.emitter_.emit("change",new Sn(this,b.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(o){this.controller.labelController.props.set("label",o)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(o){this.controller.valueController.sliderController.props.set("max",o)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(o){this.controller.valueController.sliderController.props.set("min",o)}get value(){return this.controller.value.rawValue}set value(o){this.controller.value.rawValue=o}on(o,b){const t=b.bind(this);return this.emitter_.on(o,M=>{t(M)},{key:b}),this}off(o,b){return this.emitter_.off(o,b),this}}class Yd extends Br{constructor(o){super(o),this.emitter_=new Ut,this.controller.value.emitter.on("change",b=>{this.emitter_.emit("change",new Sn(this,b.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(o){this.controller.labelController.props.set("label",o)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(o){this.controller.valueController.props.set("formatter",o)}get value(){return this.controller.value.rawValue}set value(o){this.controller.value.rawValue=o}on(o,b){const t=b.bind(this);return this.emitter_.on(o,M=>{t(M)},{key:b}),this}off(o,b){return this.emitter_.off(o,b),this}}const Kd=function(){return{id:"list",type:"blade",core:Jr,accept(_){const o=Pt(_,b=>({options:b.required.custom(Tn),value:b.required.raw,view:b.required.constant("list"),label:b.optional.string}));return o?{params:o}:null},controller(_){const o=new kn(Bo(_.params.options)),b=Tt(_.params.value,{constraint:o}),t=new Rr(_.document,{props:new lt({options:o.values.value("options")}),value:b,viewProps:_.viewProps});return new Ur(_.document,{blade:_.blade,props:lt.fromObject({label:_.params.label}),value:b,valueController:t})},api(_){return!(_.controller instanceof Ur)||!(_.controller.valueController instanceof Rr)?null:new Wd(_.controller)}}}();class Zd extends Ai{constructor(o,b){super(o,b)}get element(){return this.controller.view.element}}class Qd extends jo{constructor(o,b){super(o,{expanded:b.expanded,blade:b.blade,props:b.props,root:!0,viewProps:b.viewProps})}}const li=pt("spr");class $d{constructor(o,b){this.element=o.createElement("div"),this.element.classList.add(li()),b.viewProps.bindClassModifiers(this.element);const t=o.createElement("hr");t.classList.add(li("r")),this.element.appendChild(t)}}class ui extends Jn{constructor(o,b){super(Object.assign(Object.assign({},b),{view:new $d(o,{viewProps:b.viewProps})}))}}const Jd={id:"separator",type:"blade",core:Jr,accept(_){const o=Pt(_,b=>({view:b.required.constant("separator")}));return o?{params:o}:null},controller(_){return new ui(_.document,{blade:_.blade,viewProps:_.viewProps})},api(_){return _.controller instanceof ui?new qd(_.controller):null}},eh={id:"slider",type:"blade",core:Jr,accept(_){const o=Pt(_,b=>({max:b.required.number,min:b.required.number,view:b.required.constant("slider"),format:b.optional.function,label:b.optional.string,value:b.optional.number}));return o?{params:o}:null},controller(_){var o,b;const t=(o=_.params.value)!==null&&o!==void 0?o:0,M=new jn({max:_.params.max,min:_.params.min}),j=Tt(t,{constraint:M}),h=new Kn(_.document,Object.assign(Object.assign({},Ni({formatter:(b=_.params.format)!==null&&b!==void 0?b:vl,keyScale:Tt(1),max:M.values.value("max"),min:M.values.value("min"),pointerScale:vi(_.params,t)})),{parser:jr,value:j,viewProps:_.viewProps}));return new Ur(_.document,{blade:_.blade,props:lt.fromObject({label:_.params.label}),value:j,valueController:h})},api(_){return!(_.controller instanceof Ur)||!(_.controller.valueController instanceof Kn)?null:new Xd(_.controller)}},th=function(){return{id:"text",type:"blade",core:Jr,accept(_){const o=Pt(_,b=>({parse:b.required.function,value:b.required.raw,view:b.required.constant("text"),format:b.optional.function,label:b.optional.string}));return o?{params:o}:null},controller(_){var o;const b=Tt(_.params.value),t=new _n(_.document,{parser:_.params.parse,props:lt.fromObject({formatter:(o=_.params.format)!==null&&o!==void 0?o:M=>String(M)}),value:b,viewProps:_.viewProps});return new Ur(_.document,{blade:_.blade,props:lt.fromObject({label:_.params.label}),value:b,valueController:t})},api(_){return!(_.controller instanceof Ur)||!(_.controller.valueController instanceof _n)?null:new Yd(_.controller)}}}();function rh(_){const o=_.createElement("div");return o.classList.add(pt("dfw")()),_.body&&_.body.appendChild(o),o}function nh(_,o,b){if(_.querySelector(`style[data-tp-style=${o}]`))return;const t=_.createElement("style");t.dataset.tpStyle=o,t.textContent=b,_.head.appendChild(t)}class oh extends Zd{constructor(o){var b,t;const M=o??{},j=(b=M.document)!==null&&b!==void 0?b:Pl(),h=Hd(),y=new Qd(j,{expanded:M.expanded,blade:en(),props:lt.fromObject({title:M.title}),viewProps:Er.create()});super(y,h),this.pool_=h,this.containerElem_=(t=M.container)!==null&&t!==void 0?t:rh(j),this.containerElem_.appendChild(this.element),this.doc_=j,this.usesDefaultWrapper_=!M.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw Lt.alreadyDisposed();return this.doc_}dispose(){const o=this.containerElem_;if(!o)throw Lt.alreadyDisposed();if(this.usesDefaultWrapper_){const b=o.parentElement;b&&b.removeChild(o)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(o){o.css&&nh(this.document,`plugin-${o.id}`,o.css),("plugin"in o?[o.plugin]:"plugins"in o?o.plugins:[]).forEach(t=>{this.pool_.register(o.id,t)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[Kd,Jd,eh,Ri,th]})}}new Oi("4.0.3");const sh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAtAAAAABCAIAAAB4yA5oAAAABGdBTUEAALGPC/xhBQAACklpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAAEiJnVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/stRzjPAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAJcEhZcwAACxMAAAsTAQCanBgAAAEmSURBVEiJjZRRjgMhDEMfw97/xB2yH9VkDU7arVAUOyagKfEICECiJ+/fMlk8vHfwlaX1UeYr9csarl3mG48mGX1j8tl2Nd1WdStvWDLA/Rx0S9SkIx2uqhoCPQ+TsVfDqsrrMwgIBn/rAuCCAfNh3lGTucNL+LnDIyqcBqdBF1z7rTJqohfuZIe44xWWrWg0nifk7DAGkaVsq4l3UPI/kJ1B8tIwPFcX6XxC31rpFmXVR7y0kG6gP5PH27+bc9+jsAg3mCU9aYYsmbSEFwS8HnhL6RYbUNnaZVFBtQplDlcIUdbfahDHg+sGyaPC0gsOp7hMMytBMqNxjQE/e3U0pvB1sLuJde+g2ZujOB/NVy+gOe74F7zP14Xcx11D55+KLDUlBH4Bq11ED2ADDosAAAAASUVORK5CYII=";function ih(_,o){o.loadImage(sh,b=>{b.loadPixels();for(let t=0;t<b.pixels.length;t+=4)_.push(o.color(b.pixels[t],b.pixels[t+1],b.pixels[t+2]))},b=>{console.error("Oops!",b)})}class ah{constructor(o){kt(this,"gridWidth");kt(this,"gridHeight");kt(this,"elements",[]);kt(this,"mask");this.gridWidth=40,this.gridHeight=40,this.mask=o}update(o,b,t,M,j,h,y){this.calculateGrid(o,b,t),this.calculateElementsSize(o,M,j,h,y)}draw(o){o.push(),this.elements.forEach(b=>{b.update(o),b.draw(o)});for(let b=0;b<o.width;b+=this.gridWidth);o.pop()}calculateGrid(o,b,t){this.gridWidth=o.width/b,this.gridHeight=o.height/t}calculateElementsSize(o,b,t,M,j){let h=0;this.elements=[];for(let y=0;y<o.width;y+=this.gridWidth)for(let l=0;l<o.height;l+=this.gridHeight){let d=h++,v=o.round(l/this.gridHeight),m=o.round(y/this.gridWidth),n=new lh(o,b,d,t,v,m,M,j[v%j.length]);n.position=o.createVector(y,l),n.gridWidth=this.gridWidth,n.gridHeight=this.gridHeight,this.elements.push(n)}}calculateSpectrumValues(o){return 0}}class lh{constructor(o,b,t,M,j,h,y,l){kt(this,"position");kt(this,"color");kt(this,"texture");kt(this,"currentTexture");kt(this,"gridWidth");kt(this,"gridHeight");kt(this,"index");kt(this,"mask");kt(this,"offsetX",0);kt(this,"offsetY",0);kt(this,"i");kt(this,"j");kt(this,"waveform");kt(this,"waveformOffset");kt(this,"columnSplits");kt(this,"sizeX");kt(this,"sizeY");this.color=o.color(255,0,0),this.position=o.createVector(0,0),this.texture=b,this.mask=M,this.index=t,this.columnSplits=y,this.waveform=l,this.i=j,this.j=h,this.gridWidth=40,this.gridHeight=40,this.currentTexture=this.texture[0],this.waveformOffset=0,this.sizeX=1,this.sizeY=1}update(o){this.currentTexture=this.texture[this.columnSplits%this.texture.length],this.sizeX=o.sin(o.frameCount*.01+this.j*o.PI/4),this.sizeY=o.sin(o.frameCount*.01+this.j*o.PI/4),this.sizeX=o.map(this.sizeX,-1,1,.5,1),this.sizeY=o.map(this.sizeY,-1,1,.1,1),this.waveformOffset=o.sin(o.frameCount*this.waveform*3e-4+this.index*.01)*this.waveform*.4}draw(o){o.push(),o.noStroke(),this.index%2==0?o.fill(255,0,0):o.fill(0,0,255),o.rectMode(o.CENTER),o.ellipseMode(o.CENTER),o.imageMode(o.CENTER),o.translate(this.position.x+this.gridWidth/2+this.offsetX,this.position.y+this.gridHeight/2),o.translate(this.waveformOffset,0),o.rotate(o.sin(o.frameCount*.02+this.index*.3)),o.image(this.currentTexture,0,0,this.sizeX*this.gridWidth,this.sizeY*this.gridWidth),o.image(this.mask,0,0,this.gridWidth,this.gridHeight),o.arc(0,0,this.sizeX*this.gridWidth,this.sizeY*this.gridWidth,0,o.PI),o.pop(),o.push(),o.fill(255,255,255),o.translate(this.waveformOffset,0),o.text("|",this.position.x,this.position.y),o.pop()}}class uh{constructor(o,b,t){kt(this,"gridWidth");kt(this,"gridHeight");kt(this,"gridPoints");this.gridWidth=0,this.gridHeight=0,this.gridPoints=[],this.calculateGrid(o,b,t)}calculateGrid(o,b,t){this.gridWidth=t.width/o,this.gridHeight=t.height/b,this.gridPoints=[];for(let M=0;M<o;M++)for(let j=0;j<b;j++)this.gridPoints.push(t.createVector(M*this.gridWidth,j*this.gridHeight))}draw(o){o.push();for(let b=0;b<this.gridPoints.length;b++){let t=this.gridPoints[b];o.ellipse(t.x,t.y,10,10)}o.pop()}}var Bn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ch(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}function Vn(_){throw new Error('Could not dynamically require "'+_+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pa={exports:{}};/*! p5.js v1.9.1 February 29, 2024 */(function(_,o){(function(b){_.exports=b()})(function(){var b;return function t(M,j,h){function y(v,m){if(!j[v]){if(!M[v]){var n=typeof Vn=="function"&&Vn;if(!m&&n)return n(v,!0);if(l)return l(v,!0);throw(m=new Error("Cannot find module '"+v+"'")).code="MODULE_NOT_FOUND",m}n=j[v]={exports:{}},M[v][0].call(n.exports,function(i){return y(M[v][1][i]||i)},n,n.exports,t,M,j,h)}return j[v].exports}for(var l=typeof Vn=="function"&&Vn,d=0;d<h.length;d++)y(h[d]);return y}({1:[function(t,M,j){j.byteLength=function(a){var a=n(a),s=a[0],a=a[1];return 3*(s+a)/4-a},j.toByteArray=function(i){var s,a,r=n(i),c=r[0],r=r[1],u=new l(function(S,P){return 3*(S+P)/4-P}(c,r)),p=0,g=0<r?c-4:c;for(a=0;a<g;a+=4)s=y[i.charCodeAt(a)]<<18|y[i.charCodeAt(a+1)]<<12|y[i.charCodeAt(a+2)]<<6|y[i.charCodeAt(a+3)],u[p++]=s>>16&255,u[p++]=s>>8&255,u[p++]=255&s;return r===2&&(s=y[i.charCodeAt(a)]<<2|y[i.charCodeAt(a+1)]>>4,u[p++]=255&s),r===1&&(s=y[i.charCodeAt(a)]<<10|y[i.charCodeAt(a+1)]<<4|y[i.charCodeAt(a+2)]>>2,u[p++]=s>>8&255,u[p++]=255&s),u},j.fromByteArray=function(i){for(var s,a=i.length,c=a%3,r=[],u=0,p=a-c;u<p;u+=16383)r.push(function(g,S,P){for(var E,T=[],O=S;O<P;O+=3)E=(g[O]<<16&16711680)+(g[O+1]<<8&65280)+(255&g[O+2]),T.push(function(R){return h[R>>18&63]+h[R>>12&63]+h[R>>6&63]+h[63&R]}(E));return T.join("")}(i,u,p<u+16383?p:u+16383));return c==1?(s=i[a-1],r.push(h[s>>2]+h[s<<4&63]+"==")):c==2&&(s=(i[a-2]<<8)+i[a-1],r.push(h[s>>10]+h[s>>4&63]+h[s<<2&63]+"=")),r.join("")};for(var h=[],y=[],l=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=0,m=d.length;v<m;++v)h[v]=d[v],y[d.charCodeAt(v)]=v;function n(i){var s=i.length;if(0<s%4)throw new Error("Invalid string. Length must be a multiple of 4");return i=i.indexOf("="),s=(i=i===-1?s:i)===s?0:4-i%4,[i,s]}y[45]=62,y[95]=63},{}],2:[function(t,M,j){},{}],3:[function(t,M,j){},{}],4:[function(t,M,j){(function(n){var y=t("base64-js"),l=t("ieee754"),d=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,v=(j.Buffer=n,j.SlowBuffer=function(x){return+x!=x&&(x=0),n.alloc(+x)},j.INSPECT_MAX_BYTES=50,2147483647);function m(x){if(v<x)throw new RangeError('The value "'+x+'" is invalid for option "size"');return x=new Uint8Array(x),Object.setPrototypeOf(x,n.prototype),x}function n(x,I,B){if(typeof x!="number")return i(x,I,B);if(typeof I=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return a(x)}function i(x,I,B){if(typeof x=="string"){var W=x,$=I;if(n.isEncoding($=typeof $=="string"&&$!==""?$:"utf8"))return te=0|u(W,$),ie=m(te),ie=(W=ie.write(W,$))!==te?ie.slice(0,W):ie;throw new TypeError("Unknown encoding: "+$)}if(ArrayBuffer.isView(x))return c(x);if(x!=null){if(K(x,ArrayBuffer)||x&&K(x.buffer,ArrayBuffer)){var te=x,W=I,ie=B;if(W<0||te.byteLength<W)throw new RangeError('"offset" is outside of buffer bounds');if(te.byteLength<W+(ie||0))throw new RangeError('"length" is outside of buffer bounds');return te=W===void 0&&ie===void 0?new Uint8Array(te):ie===void 0?new Uint8Array(te,W):new Uint8Array(te,W,ie),Object.setPrototypeOf(te,n.prototype),te}if(typeof x=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if($=x.valueOf&&x.valueOf(),$!=null&&$!==x)return n.from($,I,B);var de=function(se){{var he,ce;if(n.isBuffer(se))return he=0|r(se.length),(ce=m(he)).length!==0&&se.copy(ce,0,0,he),ce}if(se.length!==void 0)return typeof se.length!="number"||Z(se.length)?m(0):c(se);if(se.type==="Buffer"&&Array.isArray(se.data))return c(se.data)}(x);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof x[Symbol.toPrimitive]=="function")return n.from(x[Symbol.toPrimitive]("string"),I,B)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}function s(x){if(typeof x!="number")throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function a(x){return s(x),m(x<0?0:0|r(x))}function c(x){for(var I=x.length<0?0:0|r(x.length),B=m(I),W=0;W<I;W+=1)B[W]=255&x[W];return B}function r(x){if(v<=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return 0|x}function u(x,I){if(n.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||K(x,ArrayBuffer))return x.byteLength;if(typeof x!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);var B=x.length,W=2<arguments.length&&arguments[2]===!0;if(!W&&B===0)return 0;for(var $=!1;;)switch(I){case"ascii":case"latin1":case"binary":return B;case"utf8":case"utf-8":return X(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*B;case"hex":return B>>>1;case"base64":return H(x).length;default:if($)return W?-1:X(x).length;I=(""+I).toLowerCase(),$=!0}}function p(x,I,B){var W,$=!1;if((I=I===void 0||I<0?0:I)>this.length||(B=B===void 0||B>this.length?this.length:B)<=0||(B>>>=0)<=(I>>>=0))return"";for(x=x||"utf8";;)switch(x){case"hex":var te=this,ye=I,ie=B,ce=te.length;(!ie||ie<0||ce<ie)&&(ie=ce);for(var de="",se=ye=!ye||ye<0?0:ye;se<ie;++se)de+=oe[te[se]];return de;case"utf8":case"utf-8":return O(this,I,B);case"ascii":var he=this,ce=I,ee=B,ue="";ee=Math.min(he.length,ee);for(var me=ce;me<ee;++me)ue+=String.fromCharCode(127&he[me]);return ue;case"latin1":case"binary":var je=this,ye=I,be=B,Se="";be=Math.min(je.length,be);for(var Fe=ye;Fe<be;++Fe)Se+=String.fromCharCode(je[Fe]);return Se;case"base64":return Me=this,W=B,(Ze=I)===0&&W===Me.length?y.fromByteArray(Me):y.fromByteArray(Me.slice(Ze,W));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var Me=I,Ze=B,Ge=this.slice(Me,Ze),ze="",qe=0;qe<Ge.length;qe+=2)ze+=String.fromCharCode(Ge[qe]+256*Ge[qe+1]);return ze;default:if($)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),$=!0}}function g(x,I,B){var W=x[I];x[I]=x[B],x[B]=W}function S(x,I,B,W,$){if(x.length===0)return-1;if(typeof B=="string"?(W=B,B=0):2147483647<B?B=2147483647:B<-2147483648&&(B=-2147483648),(B=(B=Z(B=+B)?$?0:x.length-1:B)<0?x.length+B:B)>=x.length){if($)return-1;B=x.length-1}else if(B<0){if(!$)return-1;B=0}if(typeof I=="string"&&(I=n.from(I,W)),n.isBuffer(I))return I.length===0?-1:P(x,I,B,W,$);if(typeof I=="number")return I&=255,typeof Uint8Array.prototype.indexOf=="function"?($?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(x,I,B):P(x,[I],B,W,$);throw new TypeError("val must be string, number or Buffer")}function P(x,I,B,W,$){var te=1,ie=x.length,de=I.length;if(W!==void 0&&((W=String(W).toLowerCase())==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(x.length<2||I.length<2)return-1;ie/=te=2,de/=2,B/=2}function se(me,je){return te===1?me[je]:me.readUInt16BE(je*te)}if($)for(var he=-1,ce=B;ce<ie;ce++)if(se(x,ce)===se(I,he===-1?0:ce-he)){if(ce-(he=he===-1?ce:he)+1===de)return he*te}else he!==-1&&(ce-=ce-he),he=-1;else for(ce=B=ie<B+de?ie-de:B;0<=ce;ce--){for(var ee=!0,ue=0;ue<de;ue++)if(se(x,ce+ue)!==se(I,ue)){ee=!1;break}if(ee)return ce}return-1}function E(x,I,B,W){return G(function($){for(var te=[],ie=0;ie<$.length;++ie)te.push(255&$.charCodeAt(ie));return te}(I),x,B,W)}function T(x,I,B,W){return G(function($,te){for(var ie,de,se=[],he=0;he<$.length&&!((te-=2)<0);++he)de=$.charCodeAt(he),ie=de>>8,de=de%256,se.push(de),se.push(ie);return se}(I,x.length-B),x,B,W)}function O(x,I,B){B=Math.min(x.length,B);for(var W=[],$=I;$<B;){var te,ie,de,se,he=x[$],ce=null,ee=239<he?4:223<he?3:191<he?2:1;if($+ee<=B)switch(ee){case 1:he<128&&(ce=he);break;case 2:(192&(te=x[$+1]))==128&&127<(se=(31&he)<<6|63&te)&&(ce=se);break;case 3:te=x[$+1],ie=x[$+2],(192&te)==128&&(192&ie)==128&&2047<(se=(15&he)<<12|(63&te)<<6|63&ie)&&(se<55296||57343<se)&&(ce=se);break;case 4:te=x[$+1],ie=x[$+2],de=x[$+3],(192&te)==128&&(192&ie)==128&&(192&de)==128&&65535<(se=(15&he)<<18|(63&te)<<12|(63&ie)<<6|63&de)&&se<1114112&&(ce=se)}ce===null?(ce=65533,ee=1):65535<ce&&(ce-=65536,W.push(ce>>>10&1023|55296),ce=56320|1023&ce),W.push(ce),$+=ee}var ue=W,me=ue.length;if(me<=R)return String.fromCharCode.apply(String,ue);for(var je="",ye=0;ye<me;)je+=String.fromCharCode.apply(String,ue.slice(ye,ye+=R));return je}j.kMaxLength=v,(n.TYPED_ARRAY_SUPPORT=function(){try{var x=new Uint8Array(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,Uint8Array.prototype),Object.setPrototypeOf(x,I),x.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192,n.from=i,Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array),n.alloc=function(x,I,B){return I=I,B=B,s(x=x),!(x<=0)&&I!==void 0?typeof B=="string"?m(x).fill(I,B):m(x).fill(I):m(x)},n.allocUnsafe=a,n.allocUnsafeSlow=a,n.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==n.prototype},n.compare=function(x,I){if(K(x,Uint8Array)&&(x=n.from(x,x.offset,x.byteLength)),K(I,Uint8Array)&&(I=n.from(I,I.offset,I.byteLength)),!n.isBuffer(x)||!n.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===I)return 0;for(var B=x.length,W=I.length,$=0,te=Math.min(B,W);$<te;++$)if(x[$]!==I[$]){B=x[$],W=I[$];break}return B<W?-1:W<B?1:0},n.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(x,I){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return n.alloc(0);if(I===void 0)for($=I=0;$<x.length;++$)I+=x[$].length;for(var B=n.allocUnsafe(I),W=0,$=0;$<x.length;++$){var te=x[$];if(K(te,Uint8Array)&&(te=n.from(te)),!n.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(B,W),W+=te.length}return B},n.byteLength=u,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var x=this.length;if(x%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var I=0;I<x;I+=2)g(this,I,I+1);return this},n.prototype.swap32=function(){var x=this.length;if(x%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var I=0;I<x;I+=4)g(this,I,I+3),g(this,I+1,I+2);return this},n.prototype.swap64=function(){var x=this.length;if(x%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var I=0;I<x;I+=8)g(this,I,I+7),g(this,I+1,I+6),g(this,I+2,I+5),g(this,I+3,I+4);return this},n.prototype.toLocaleString=n.prototype.toString=function(){var x=this.length;return x===0?"":arguments.length===0?O(this,0,x):p.apply(this,arguments)},n.prototype.equals=function(x){if(n.isBuffer(x))return this===x||n.compare(this,x)===0;throw new TypeError("Argument must be a Buffer")},n.prototype.inspect=function(){var I="",x=j.INSPECT_MAX_BYTES,I=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim();return this.length>x&&(I+=" ... "),"<Buffer "+I+">"},d&&(n.prototype[d]=n.prototype.inspect),n.prototype.compare=function(x,I,B,W,$){if(K(x,Uint8Array)&&(x=n.from(x,x.offset,x.byteLength)),!n.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(B===void 0&&(B=x?x.length:0),W===void 0&&(W=0),$===void 0&&($=this.length),(I=I===void 0?0:I)<0||B>x.length||W<0||$>this.length)throw new RangeError("out of range index");if($<=W&&B<=I)return 0;if($<=W)return-1;if(B<=I)return 1;if(this===x)return 0;for(var te=($>>>=0)-(W>>>=0),ie=(B>>>=0)-(I>>>=0),de=Math.min(te,ie),se=this.slice(W,$),he=x.slice(I,B),ce=0;ce<de;++ce)if(se[ce]!==he[ce]){te=se[ce],ie=he[ce];break}return te<ie?-1:ie<te?1:0},n.prototype.includes=function(x,I,B){return this.indexOf(x,I,B)!==-1},n.prototype.indexOf=function(x,I,B){return S(this,x,I,B,!0)},n.prototype.lastIndexOf=function(x,I,B){return S(this,x,I,B,!1)},n.prototype.write=function(x,I,B,W){if(I===void 0)W="utf8",B=this.length,I=0;else if(B===void 0&&typeof I=="string")W=I,B=this.length,I=0;else{if(!isFinite(I))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");I>>>=0,isFinite(B)?(B>>>=0,W===void 0&&(W="utf8")):(W=B,B=void 0)}var $=this.length-I;if((B===void 0||$<B)&&(B=$),0<x.length&&(B<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");W=W||"utf8";for(var te,ie,de,se=!1;;)switch(W){case"hex":var he=this,ce=x,ee=I,ue=B,me=(ee=Number(ee)||0,he.length-ee);(!ue||me<(ue=Number(ue)))&&(ue=me),(me=ce.length)/2<ue&&(ue=me/2);for(var je=0;je<ue;++je){var ye=parseInt(ce.substr(2*je,2),16);if(Z(ye))return je;he[ee+je]=ye}return je;case"utf8":case"utf-8":return me=I,de=B,G(X(x,(ie=this).length-me),ie,me,de);case"ascii":return E(this,x,I,B);case"latin1":case"binary":return E(this,x,I,B);case"base64":return ie=this,de=I,te=B,G(H(x),ie,de,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,x,I,B);default:if(se)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),se=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function k(x,I,B){if(x%1!=0||x<0)throw new RangeError("offset is not uint");if(B<x+I)throw new RangeError("Trying to access beyond buffer length")}function D(x,I,B,W,$,te){if(!n.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if($<I||I<te)throw new RangeError('"value" argument is out of bounds');if(B+W>x.length)throw new RangeError("Index out of range")}function L(x,I,B,W){if(B+W>x.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("Index out of range")}function U(x,I,B,W,$){return I=+I,B>>>=0,$||L(x,0,B,4),l.write(x,I,B,W,23,4),B+4}function F(x,I,B,W,$){return I=+I,B>>>=0,$||L(x,0,B,8),l.write(x,I,B,W,52,8),B+8}n.prototype.slice=function(x,I){var B=this.length,B=((x=~~x)<0?(x+=B)<0&&(x=0):B<x&&(x=B),(I=I===void 0?B:~~I)<0?(I+=B)<0&&(I=0):B<I&&(I=B),I<x&&(I=x),this.subarray(x,I));return Object.setPrototypeOf(B,n.prototype),B},n.prototype.readUIntLE=function(x,I,B){x>>>=0,I>>>=0,B||k(x,I,this.length);for(var W=this[x],$=1,te=0;++te<I&&($*=256);)W+=this[x+te]*$;return W},n.prototype.readUIntBE=function(x,I,B){x>>>=0,I>>>=0,B||k(x,I,this.length);for(var W=this[x+--I],$=1;0<I&&($*=256);)W+=this[x+--I]*$;return W},n.prototype.readUInt8=function(x,I){return x>>>=0,I||k(x,1,this.length),this[x]},n.prototype.readUInt16LE=function(x,I){return x>>>=0,I||k(x,2,this.length),this[x]|this[x+1]<<8},n.prototype.readUInt16BE=function(x,I){return x>>>=0,I||k(x,2,this.length),this[x]<<8|this[x+1]},n.prototype.readUInt32LE=function(x,I){return x>>>=0,I||k(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+16777216*this[x+3]},n.prototype.readUInt32BE=function(x,I){return x>>>=0,I||k(x,4,this.length),16777216*this[x]+(this[x+1]<<16|this[x+2]<<8|this[x+3])},n.prototype.readIntLE=function(x,I,B){x>>>=0,I>>>=0,B||k(x,I,this.length);for(var W=this[x],$=1,te=0;++te<I&&($*=256);)W+=this[x+te]*$;return($*=128)<=W&&(W-=Math.pow(2,8*I)),W},n.prototype.readIntBE=function(x,I,B){x>>>=0,I>>>=0,B||k(x,I,this.length);for(var W=I,$=1,te=this[x+--W];0<W&&($*=256);)te+=this[x+--W]*$;return($*=128)<=te&&(te-=Math.pow(2,8*I)),te},n.prototype.readInt8=function(x,I){return x>>>=0,I||k(x,1,this.length),128&this[x]?-1*(255-this[x]+1):this[x]},n.prototype.readInt16LE=function(x,I){return x>>>=0,I||k(x,2,this.length),I=this[x]|this[x+1]<<8,32768&I?4294901760|I:I},n.prototype.readInt16BE=function(x,I){return x>>>=0,I||k(x,2,this.length),I=this[x+1]|this[x]<<8,32768&I?4294901760|I:I},n.prototype.readInt32LE=function(x,I){return x>>>=0,I||k(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},n.prototype.readInt32BE=function(x,I){return x>>>=0,I||k(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},n.prototype.readFloatLE=function(x,I){return x>>>=0,I||k(x,4,this.length),l.read(this,x,!0,23,4)},n.prototype.readFloatBE=function(x,I){return x>>>=0,I||k(x,4,this.length),l.read(this,x,!1,23,4)},n.prototype.readDoubleLE=function(x,I){return x>>>=0,I||k(x,8,this.length),l.read(this,x,!0,52,8)},n.prototype.readDoubleBE=function(x,I){return x>>>=0,I||k(x,8,this.length),l.read(this,x,!1,52,8)},n.prototype.writeUIntLE=function(x,I,B,W){x=+x,I>>>=0,B>>>=0,W||D(this,x,I,B,Math.pow(2,8*B)-1,0);var $=1,te=0;for(this[I]=255&x;++te<B&&($*=256);)this[I+te]=x/$&255;return I+B},n.prototype.writeUIntBE=function(x,I,B,W){x=+x,I>>>=0,B>>>=0,W||D(this,x,I,B,Math.pow(2,8*B)-1,0);var $=B-1,te=1;for(this[I+$]=255&x;0<=--$&&(te*=256);)this[I+$]=x/te&255;return I+B},n.prototype.writeUInt8=function(x,I,B){return x=+x,I>>>=0,B||D(this,x,I,1,255,0),this[I]=255&x,I+1},n.prototype.writeUInt16LE=function(x,I,B){return x=+x,I>>>=0,B||D(this,x,I,2,65535,0),this[I]=255&x,this[I+1]=x>>>8,I+2},n.prototype.writeUInt16BE=function(x,I,B){return x=+x,I>>>=0,B||D(this,x,I,2,65535,0),this[I]=x>>>8,this[I+1]=255&x,I+2},n.prototype.writeUInt32LE=function(x,I,B){return x=+x,I>>>=0,B||D(this,x,I,4,4294967295,0),this[I+3]=x>>>24,this[I+2]=x>>>16,this[I+1]=x>>>8,this[I]=255&x,I+4},n.prototype.writeUInt32BE=function(x,I,B){return x=+x,I>>>=0,B||D(this,x,I,4,4294967295,0),this[I]=x>>>24,this[I+1]=x>>>16,this[I+2]=x>>>8,this[I+3]=255&x,I+4},n.prototype.writeIntLE=function(x,I,B,W){x=+x,I>>>=0,W||D(this,x,I,B,(W=Math.pow(2,8*B-1))-1,-W);var $=0,te=1,ie=0;for(this[I]=255&x;++$<B&&(te*=256);)x<0&&ie===0&&this[I+$-1]!==0&&(ie=1),this[I+$]=(x/te>>0)-ie&255;return I+B},n.prototype.writeIntBE=function(x,I,B,W){x=+x,I>>>=0,W||D(this,x,I,B,(W=Math.pow(2,8*B-1))-1,-W);var $=B-1,te=1,ie=0;for(this[I+$]=255&x;0<=--$&&(te*=256);)x<0&&ie===0&&this[I+$+1]!==0&&(ie=1),this[I+$]=(x/te>>0)-ie&255;return I+B},n.prototype.writeInt8=function(x,I,B){return x=+x,I>>>=0,B||D(this,x,I,1,127,-128),this[I]=255&(x=x<0?255+x+1:x),I+1},n.prototype.writeInt16LE=function(x,I,B){return x=+x,I>>>=0,B||D(this,x,I,2,32767,-32768),this[I]=255&x,this[I+1]=x>>>8,I+2},n.prototype.writeInt16BE=function(x,I,B){return x=+x,I>>>=0,B||D(this,x,I,2,32767,-32768),this[I]=x>>>8,this[I+1]=255&x,I+2},n.prototype.writeInt32LE=function(x,I,B){return x=+x,I>>>=0,B||D(this,x,I,4,2147483647,-2147483648),this[I]=255&x,this[I+1]=x>>>8,this[I+2]=x>>>16,this[I+3]=x>>>24,I+4},n.prototype.writeInt32BE=function(x,I,B){return x=+x,I>>>=0,B||D(this,x,I,4,2147483647,-2147483648),this[I]=(x=x<0?4294967295+x+1:x)>>>24,this[I+1]=x>>>16,this[I+2]=x>>>8,this[I+3]=255&x,I+4},n.prototype.writeFloatLE=function(x,I,B){return U(this,x,I,!0,B)},n.prototype.writeFloatBE=function(x,I,B){return U(this,x,I,!1,B)},n.prototype.writeDoubleLE=function(x,I,B){return F(this,x,I,!0,B)},n.prototype.writeDoubleBE=function(x,I,B){return F(this,x,I,!1,B)},n.prototype.copy=function(x,I,B,W){if(!n.isBuffer(x))throw new TypeError("argument should be a Buffer");if(B=B||0,W||W===0||(W=this.length),I>=x.length&&(I=x.length),(W=0<W&&W<B?B:W)===B||x.length===0||this.length===0)return 0;if((I=I||0)<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length);var $=(W=x.length-I<W-B?x.length-I+B:W)-B;if(this===x&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(I,B,W);else if(this===x&&B<I&&I<W)for(var te=$-1;0<=te;--te)x[te+I]=this[te+B];else Uint8Array.prototype.set.call(x,this.subarray(B,W),I);return $},n.prototype.fill=function(x,I,B,W){if(typeof x=="string"){if(typeof I=="string"?(W=I,I=0,B=this.length):typeof B=="string"&&(W=B,B=this.length),W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!n.isEncoding(W))throw new TypeError("Unknown encoding: "+W);var $;x.length===1&&($=x.charCodeAt(0),(W==="utf8"&&$<128||W==="latin1")&&(x=$))}else typeof x=="number"?x&=255:typeof x=="boolean"&&(x=Number(x));if(I<0||this.length<I||this.length<B)throw new RangeError("Out of range index");var te;if(!(B<=I))if(I>>>=0,B=B===void 0?this.length:B>>>0,typeof(x=x||0)=="number")for(te=I;te<B;++te)this[te]=x;else{var ie=n.isBuffer(x)?x:n.from(x,W),de=ie.length;if(de===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(te=0;te<B-I;++te)this[te+I]=ie[te%de]}return this};var V=/[^+/0-9A-Za-z-_]/g;function X(x,I){I=I||1/0;for(var B,W=x.length,$=null,te=[],ie=0;ie<W;++ie){if(55295<(B=x.charCodeAt(ie))&&B<57344){if(!$){if(56319<B){-1<(I-=3)&&te.push(239,191,189);continue}if(ie+1===W){-1<(I-=3)&&te.push(239,191,189);continue}$=B;continue}if(B<56320){-1<(I-=3)&&te.push(239,191,189),$=B;continue}B=65536+($-55296<<10|B-56320)}else $&&-1<(I-=3)&&te.push(239,191,189);if($=null,B<128){if(--I<0)break;te.push(B)}else if(B<2048){if((I-=2)<0)break;te.push(B>>6|192,63&B|128)}else if(B<65536){if((I-=3)<0)break;te.push(B>>12|224,B>>6&63|128,63&B|128)}else{if(!(B<1114112))throw new Error("Invalid code point");if((I-=4)<0)break;te.push(B>>18|240,B>>12&63|128,B>>6&63|128,63&B|128)}}return te}function H(x){return y.toByteArray(function(I){if((I=(I=I.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;I.length%4!=0;)I+="=";return I}(x))}function G(x,I,B,W){for(var $=0;$<W&&!($+B>=I.length||$>=x.length);++$)I[$+B]=x[$];return $}function K(x,I){return x instanceof I||x!=null&&x.constructor!=null&&x.constructor.name!=null&&x.constructor.name===I.name}function Z(x){return x!=x}var oe=function(){for(var x="0123456789abcdef",I=new Array(256),B=0;B<16;++B)for(var W=16*B,$=0;$<16;++$)I[W+$]=x[B]+x[$];return I}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:251}],5:[function(t,M,j){M.exports=function(h){if(typeof h!="function")throw TypeError(String(h)+" is not a function");return h}},{}],6:[function(t,M,j){var h=t("../internals/is-object");M.exports=function(y){if(h(y)||y===null)return y;throw TypeError("Can't set "+String(y)+" as a prototype")}},{"../internals/is-object":75}],7:[function(l,M,j){var h=l("../internals/well-known-symbol"),y=l("../internals/object-create"),l=l("../internals/object-define-property"),d=h("unscopables"),v=Array.prototype;v[d]==null&&l.f(v,d,{configurable:!0,value:y(null)}),M.exports=function(m){v[d][m]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],8:[function(t,M,j){var h=t("../internals/string-multibyte").charAt;M.exports=function(y,l,d){return l+(d?h(y,l).length:1)}},{"../internals/string-multibyte":124}],9:[function(t,M,j){M.exports=function(h,y,l){if(h instanceof y)return h;throw TypeError("Incorrect "+(l?l+" ":"")+"invocation")}},{}],10:[function(t,M,j){var h=t("../internals/is-object");M.exports=function(y){if(h(y))return y;throw TypeError(String(y)+" is not an object")}},{"../internals/is-object":75}],11:[function(t,M,j){M.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(L,M,j){function h(F){return m(F)&&n(U,i(F))}var y,l=L("../internals/array-buffer-native"),d=L("../internals/descriptors"),v=L("../internals/global"),m=L("../internals/is-object"),n=L("../internals/has"),i=L("../internals/classof"),s=L("../internals/create-non-enumerable-property"),a=L("../internals/redefine"),c=L("../internals/object-define-property").f,r=L("../internals/object-get-prototype-of"),u=L("../internals/object-set-prototype-of"),R=L("../internals/well-known-symbol"),L=L("../internals/uid"),p=v.Int8Array,g=p&&p.prototype,S=v.Uint8ClampedArray,S=S&&S.prototype,P=p&&r(p),E=g&&r(g),T=Object.prototype,O=T.isPrototypeOf,R=R("toStringTag"),k=L("TYPED_ARRAY_TAG"),D=l&&!!u&&i(v.opera)!=="Opera",L=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(y in U)v[y]||(D=!1);if((!D||typeof P!="function"||P===Function.prototype)&&(P=function(){throw TypeError("Incorrect invocation")},D))for(y in U)v[y]&&u(v[y],P);if((!D||!E||E===T)&&(E=P.prototype,D))for(y in U)v[y]&&u(v[y].prototype,E);if(D&&r(S)!==E&&u(S,E),d&&!n(E,R))for(y in L=!0,c(E,R,{get:function(){return m(this)?this[k]:void 0}}),U)v[y]&&s(v[y],k,y);M.exports={NATIVE_ARRAY_BUFFER_VIEWS:D,TYPED_ARRAY_TAG:L&&k,aTypedArray:function(F){if(h(F))return F;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(F){if(u){if(O.call(P,F))return F}else for(var V in U)if(n(U,y)&&(V=v[V],V&&(F===V||O.call(V,F))))return F;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(F,V,X){if(d){if(X)for(var H in U)H=v[H],H&&n(H.prototype,F)&&delete H.prototype[F];E[F]&&!X||a(E,F,!X&&D&&g[F]||V)}},exportTypedArrayStaticMethod:function(F,V,X){var H,G;if(d){if(u){if(X)for(H in U)(G=v[H])&&n(G,F)&&delete G[F];if(P[F]&&!X)return;try{return a(P,F,!X&&D&&p[F]||V)}catch{}}for(H in U)!(G=v[H])||G[F]&&!X||a(G,F,V)}},isView:function(F){return F=i(F),F==="DataView"||n(U,F)},isTypedArray:h,TypedArray:P,TypedArrayPrototype:E}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/uid":146,"../internals/well-known-symbol":149}],13:[function(B,M,j){function h(ee){return[255&ee]}function y(ee){return[255&ee,ee>>8&255]}function l(ee){return[255&ee,ee>>8&255,ee>>16&255,ee>>24&255]}function d(ee){return ee[3]<<24|ee[2]<<16|ee[1]<<8|ee[0]}function v(ee){return te(ee,23,4)}function m(ee){return te(ee,52,8)}function n(ee,ue){L(ee[K],ue,{get:function(){return V(this)[ue]}})}function i(Se,ue,be,je){if(be=T(be),Se=V(Se),be+ue>Se.byteLength)throw $(Z);var ye=V(Se.buffer).bytes,be=be+Se.byteOffset,Se=ye.slice(be,be+ue);return je?Se:Se.reverse()}function s(ee,ue,me,je,ye,be){if(me=T(me),ee=V(ee),me+ue>ee.byteLength)throw $(Z);for(var Se=V(ee.buffer).bytes,Fe=me+ee.byteOffset,Me=je(+ye),Ze=0;Ze<ue;Ze++)Se[Fe+Ze]=Me[be?Ze:ue-Ze-1]}var a=B("../internals/global"),c=B("../internals/descriptors"),r=B("../internals/array-buffer-native"),u=B("../internals/create-non-enumerable-property"),p=B("../internals/redefine-all"),g=B("../internals/fails"),S=B("../internals/an-instance"),P=B("../internals/to-integer"),E=B("../internals/to-length"),T=B("../internals/to-index"),O=B("../internals/ieee754"),R=B("../internals/object-get-prototype-of"),k=B("../internals/object-set-prototype-of"),D=B("../internals/object-get-own-property-names").f,L=B("../internals/object-define-property").f,U=B("../internals/array-fill"),F=B("../internals/set-to-string-tag"),B=B("../internals/internal-state"),V=B.get,X=B.set,H="ArrayBuffer",G="DataView",K="prototype",Z="Wrong index",oe=a[H],x=oe,I=a[G],B=I&&I[K],W=Object.prototype,$=a.RangeError,te=O.pack,ie=O.unpack;if(r){if(!g(function(){oe(1)})||!g(function(){new oe(-1)})||g(function(){return new oe,new oe(1.5),new oe(NaN),oe.name!=H})){for(var de,a=(x=function(me){return S(this,x),new oe(T(me))})[K]=oe[K],se=D(oe),he=0;se.length>he;)(de=se[he++])in x||u(x,de,oe[de]);a.constructor=x}k&&R(B)!==W&&k(B,W);var O=new I(new x(2)),ce=B.setInt8;O.setInt8(0,2147483648),O.setInt8(1,2147483649),!O.getInt8(0)&&O.getInt8(1)||p(B,{setInt8:function(ue,me){ce.call(this,ue,me<<24>>24)},setUint8:function(ue,me){ce.call(this,ue,me<<24>>24)}},{unsafe:!0})}else x=function(ee){S(this,x,H),ee=T(ee),X(this,{bytes:U.call(new Array(ee),0),byteLength:ee}),c||(this.byteLength=ee)},I=function(ee,ye,me){S(this,I,G),S(ee,x,G);var je=V(ee).byteLength,ye=P(ye);if(ye<0||je<ye)throw $("Wrong offset");if(je<ye+(me=me===void 0?je-ye:E(me)))throw $("Wrong length");X(this,{buffer:ee,byteLength:me,byteOffset:ye}),c||(this.buffer=ee,this.byteLength=me,this.byteOffset=ye)},c&&(n(x,"byteLength"),n(I,"buffer"),n(I,"byteLength"),n(I,"byteOffset")),p(I[K],{getInt8:function(ee){return i(this,1,ee)[0]<<24>>24},getUint8:function(ee){return i(this,1,ee)[0]},getInt16:function(ee){return ee=i(this,2,ee,1<arguments.length?arguments[1]:void 0),(ee[1]<<8|ee[0])<<16>>16},getUint16:function(ee){return ee=i(this,2,ee,1<arguments.length?arguments[1]:void 0),ee[1]<<8|ee[0]},getInt32:function(ee){return d(i(this,4,ee,1<arguments.length?arguments[1]:void 0))},getUint32:function(ee){return d(i(this,4,ee,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(ee){return ie(i(this,4,ee,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(ee){return ie(i(this,8,ee,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(ee,ue){s(this,1,ee,h,ue)},setUint8:function(ee,ue){s(this,1,ee,h,ue)},setInt16:function(ee,ue){s(this,2,ee,y,ue,2<arguments.length?arguments[2]:void 0)},setUint16:function(ee,ue){s(this,2,ee,y,ue,2<arguments.length?arguments[2]:void 0)},setInt32:function(ee,ue){s(this,4,ee,l,ue,2<arguments.length?arguments[2]:void 0)},setUint32:function(ee,ue){s(this,4,ee,l,ue,2<arguments.length?arguments[2]:void 0)},setFloat32:function(ee,ue){s(this,4,ee,v,ue,2<arguments.length?arguments[2]:void 0)},setFloat64:function(ee,ue){s(this,8,ee,m,ue,2<arguments.length?arguments[2]:void 0)}});F(x,H),F(I,G),M.exports={ArrayBuffer:x,DataView:I}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/to-index":134,"../internals/to-integer":136,"../internals/to-length":137}],14:[function(t,M,j){var h=t("../internals/to-object"),y=t("../internals/to-absolute-index"),l=t("../internals/to-length"),d=Math.min;M.exports=[].copyWithin||function(c,m){var n=h(this),i=l(n.length),s=y(c,i),a=y(m,i),c=2<arguments.length?arguments[2]:void 0,r=d((c===void 0?i:y(c,i))-a,i-s),u=1;for(a<s&&s<a+r&&(u=-1,a+=r-1,s+=r-1);0<r--;)a in n?n[s]=n[a]:delete n[s],s+=u,a+=u;return n}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],15:[function(t,M,j){var h=t("../internals/to-object"),y=t("../internals/to-absolute-index"),l=t("../internals/to-length");M.exports=function(d){for(var v=h(this),m=l(v.length),i=arguments.length,n=y(1<i?arguments[1]:void 0,m),i=2<i?arguments[2]:void 0,s=i===void 0?m:y(i,m);n<s;)v[n++]=d;return v}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],16:[function(l,M,j){var h=l("../internals/array-iteration").forEach,y=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),y=y("forEach"),l=l("forEach");M.exports=y&&l?[].forEach:function(d){return h(this,d,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,M,j){var h=t("../internals/function-bind-context"),y=t("../internals/to-object"),l=t("../internals/call-with-safe-iteration-closing"),d=t("../internals/is-array-iterator-method"),v=t("../internals/to-length"),m=t("../internals/create-property"),n=t("../internals/get-iterator-method");M.exports=function(S){var s,a,c,r,u,p,g=y(S),S=typeof this=="function"?this:Array,P=arguments.length,E=1<P?arguments[1]:void 0,T=E!==void 0,O=n(g),R=0;if(T&&(E=h(E,2<P?arguments[2]:void 0,2)),O==null||S==Array&&d(O))for(a=new S(s=v(g.length));R<s;R++)p=T?E(g[R],R):g[R],m(a,R,p);else for(u=(r=O.call(g)).next,a=new S;!(c=u.call(r)).done;R++)p=T?l(r,E,[c.value,R],!0):c.value,m(a,R,p);return a.length=R,a}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],18:[function(t,M,j){function h(v){return function(m,n,i){var s,a=y(m),c=l(a.length),r=d(i,c);if(v&&n!=n){for(;r<c;)if((s=a[r++])!=s)return!0}else for(;r<c;r++)if((v||r in a)&&a[r]===n)return v||r||0;return!v&&-1}}var y=t("../internals/to-indexed-object"),l=t("../internals/to-length"),d=t("../internals/to-absolute-index");M.exports={includes:h(!0),indexOf:h(!1)}},{"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137}],19:[function(t,M,j){function h(i){var s=i==1,a=i==2,c=i==3,r=i==4,u=i==6,p=i==5||u;return function(g,S,P,E){for(var T,O,R=d(g),k=l(R),D=y(S,P,3),L=v(k.length),U=0,S=E||m,F=s?S(g,L):a?S(g,0):void 0;U<L;U++)if((p||U in k)&&(O=D(T=k[U],U,R),i)){if(s)F[U]=O;else if(O)switch(i){case 3:return!0;case 5:return T;case 6:return U;case 2:n.call(F,T)}else if(r)return!1}return u?-1:c||r?r:F}}var y=t("../internals/function-bind-context"),l=t("../internals/indexed-object"),d=t("../internals/to-object"),v=t("../internals/to-length"),m=t("../internals/array-species-create"),n=[].push;M.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],20:[function(i,M,j){var h=i("../internals/to-indexed-object"),y=i("../internals/to-integer"),l=i("../internals/to-length"),n=i("../internals/array-method-is-strict"),i=i("../internals/array-method-uses-to-length"),d=Math.min,v=[].lastIndexOf,m=!!v&&1/[1].lastIndexOf(1,-0)<0,n=n("lastIndexOf"),i=i("indexOf",{ACCESSORS:!0,1:0});M.exports=m||!n||!i?function(s){if(m)return v.apply(this,arguments)||0;var a=h(this),c=l(a.length),r=c-1;for((r=1<arguments.length?d(r,y(arguments[1])):r)<0&&(r=c+r);0<=r;r--)if(r in a&&a[r]===s)return r||0;return-1}:v},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":135,"../internals/to-integer":136,"../internals/to-length":137}],21:[function(t,M,j){var h=t("../internals/fails"),y=t("../internals/well-known-symbol"),l=t("../internals/engine-v8-version"),d=y("species");M.exports=function(v){return 51<=l||!h(function(){var m=[];return(m.constructor={})[d]=function(){return{foo:1}},m[v](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":149}],22:[function(t,M,j){var h=t("../internals/fails");M.exports=function(y,l){var d=[][y];return!!d&&h(function(){d.call(null,l||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(t,M,j){function h(n){throw n}var y=t("../internals/descriptors"),l=t("../internals/fails"),d=t("../internals/has"),v=Object.defineProperty,m={};M.exports=function(n,i){var s,a,c,r;return d(m,n)?m[n]:(s=[][n],a=!!d(i=i||{},"ACCESSORS")&&i.ACCESSORS,c=d(i,0)?i[0]:h,r=d(i,1)?i[1]:void 0,m[n]=!!s&&!l(function(){if(a&&!y)return!0;var u={length:-1};a?v(u,1,{enumerable:!0,get:h}):u[1]=1,s.call(u,c,r)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(t,M,j){function h(m){return function(n,i,s,a){y(i);var c=l(n),r=d(c),u=v(c.length),p=m?u-1:0,g=m?-1:1;if(s<2)for(;;){if(p in r){a=r[p],p+=g;break}if(p+=g,m?p<0:u<=p)throw TypeError("Reduce of empty array with no initial value")}for(;m?0<=p:p<u;p+=g)p in r&&(a=i(a,r[p],p,c));return a}}var y=t("../internals/a-function"),l=t("../internals/to-object"),d=t("../internals/indexed-object"),v=t("../internals/to-length");M.exports={left:h(!1),right:h(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],25:[function(t,M,j){var h=t("../internals/is-object"),y=t("../internals/is-array"),l=t("../internals/well-known-symbol")("species");M.exports=function(d,v){var m;return new((m=y(d)&&(typeof(m=d.constructor)=="function"&&(m===Array||y(m.prototype))||h(m)&&(m=m[l])===null)?void 0:m)===void 0?Array:m)(v===0?0:v)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":149}],26:[function(t,M,j){var h=t("../internals/an-object");M.exports=function(y,l,d,v){try{return v?l(h(d)[0],d[1]):l(d)}catch(m){throw v=y.return,v!==void 0&&h(v.call(y)),m}}},{"../internals/an-object":10}],27:[function(t,M,j){var h=t("../internals/well-known-symbol")("iterator"),y=!1;try{var l=0,d={next:function(){return{done:!!l++}},return:function(){y=!0}};d[h]=function(){return this},Array.from(d,function(){throw 2})}catch{}M.exports=function(v,m){if(!m&&!y)return!1;var n=!1;try{var i={};i[h]=function(){return{next:function(){return{done:n=!0}}}},v(i)}catch{}return n}},{"../internals/well-known-symbol":149}],28:[function(t,M,j){var h={}.toString;M.exports=function(y){return h.call(y).slice(8,-1)}},{}],29:[function(t,M,j){var h=t("../internals/to-string-tag-support"),y=t("../internals/classof-raw"),l=t("../internals/well-known-symbol")("toStringTag"),d=y(function(){return arguments}())=="Arguments";M.exports=h?y:function(v){var m;return v===void 0?"Undefined":v===null?"Null":typeof(m=function(n,i){try{return n[i]}catch{}}(v=Object(v),l))=="string"?m:d?y(v):(m=y(v))=="Object"&&typeof v.callee=="function"?"Arguments":m}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":142,"../internals/well-known-symbol":149}],30:[function(c,M,j){var h=c("../internals/object-define-property").f,y=c("../internals/object-create"),l=c("../internals/redefine-all"),d=c("../internals/function-bind-context"),v=c("../internals/an-instance"),m=c("../internals/iterate"),n=c("../internals/define-iterator"),i=c("../internals/set-species"),s=c("../internals/descriptors"),a=c("../internals/internal-metadata").fastKey,c=c("../internals/internal-state"),r=c.set,u=c.getterFor;M.exports={getConstructor:function(p,g,S,P){function E(k,D,L){var U,F=R(k),V=T(k,D);return V?V.value=L:(F.last=V={index:U=a(D,!0),key:D,value:L,previous:D=F.last,next:void 0,removed:!1},F.first||(F.first=V),D&&(D.next=V),s?F.size++:k.size++,U!=="F"&&(F.index[U]=V)),k}function T(U,D){var L,U=R(U),F=a(D);if(F!=="F")return U.index[F];for(L=U.first;L;L=L.next)if(L.key==D)return L}var O=p(function(k,D){v(k,O,g),r(k,{type:g,index:y(null),first:void 0,last:void 0,size:0}),s||(k.size=0),D!=null&&m(D,k[P],k,S)}),R=u(g);return l(O.prototype,{clear:function(){for(var k=R(this),D=k.index,L=k.first;L;)L.removed=!0,L.previous&&(L.previous=L.previous.next=void 0),delete D[L.index],L=L.next;k.first=k.last=void 0,s?k.size=0:this.size=0},delete:function(F){var D,L,U=R(this),F=T(this,F);return F&&(D=F.next,L=F.previous,delete U.index[F.index],F.removed=!0,L&&(L.next=D),D&&(D.previous=L),U.first==F&&(U.first=D),U.last==F&&(U.last=L),s?U.size--:this.size--),!!F},forEach:function(k){for(var D,L=R(this),U=d(k,1<arguments.length?arguments[1]:void 0,3);D=D?D.next:L.first;)for(U(D.value,D.key,this);D&&D.removed;)D=D.previous},has:function(k){return!!T(this,k)}}),l(O.prototype,S?{get:function(k){return k=T(this,k),k&&k.value},set:function(k,D){return E(this,k===0?0:k,D)}}:{add:function(k){return E(this,k=k===0?0:k,k)}}),s&&h(O.prototype,"size",{get:function(){return R(this).size}}),O},setStrong:function(p,g,S){var P=g+" Iterator",E=u(g),T=u(P);n(p,g,function(O,R){r(this,{type:P,target:O,state:E(O),kind:R,last:void 0})},function(){for(var O=T(this),R=O.kind,k=O.last;k&&k.removed;)k=k.previous;return O.target&&(O.last=k=k?k.next:O.state.first)?R=="keys"?{value:k.key,done:!1}:R=="values"?{value:k.value,done:!1}:{value:[k.key,k.value],done:!1}:{value:O.target=void 0,done:!0}},S?"entries":"values",!S,!0),i(g)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":108,"../internals/set-species":117}],31:[function(r,M,j){function h(E){return E.frozen||(E.frozen=new y)}function y(){this.entries=[]}function l(E,T){return g(E.entries,function(O){return O[0]===T})}var d=r("../internals/redefine-all"),v=r("../internals/internal-metadata").getWeakData,m=r("../internals/an-object"),n=r("../internals/is-object"),i=r("../internals/an-instance"),s=r("../internals/iterate"),a=r("../internals/array-iteration"),c=r("../internals/has"),r=r("../internals/internal-state"),u=r.set,p=r.getterFor,g=a.find,S=a.findIndex,P=0;y.prototype={get:function(E){if(E=l(this,E),E)return E[1]},has:function(E){return!!l(this,E)},set:function(E,T){var O=l(this,E);O?O[1]=T:this.entries.push([E,T])},delete:function(E){var T=S(this.entries,function(O){return O[0]===E});return~T&&this.entries.splice(T,1),!!~T}},M.exports={getConstructor:function(E,T,O,R){function k(U,F,V){var X=L(U),H=v(m(F),!0);return H===!0?h(X).set(F,V):H[X.id]=V,U}var D=E(function(U,F){i(U,D,T),u(U,{type:T,id:P++,frozen:void 0}),F!=null&&s(F,U[R],U,O)}),L=p(T);return d(D.prototype,{delete:function(U){var F,V=L(this);return!!n(U)&&((F=v(U))===!0?h(V).delete(U):F&&c(F,V.id)&&delete F[V.id])},has:function(U){var F,V=L(this);return!!n(U)&&((F=v(U))===!0?h(V).has(U):F&&c(F,V.id))}}),d(D.prototype,O?{get:function(U){var F,V=L(this);if(n(U))return(F=v(U))===!0?h(V).get(U):F?F[V.id]:void 0},set:function(U,F){return k(this,U,F)}}:{add:function(U){return k(this,U,!0)}}),D}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":108}],32:[function(t,M,j){var h=t("../internals/export"),y=t("../internals/global"),l=t("../internals/is-forced"),d=t("../internals/redefine"),v=t("../internals/internal-metadata"),m=t("../internals/iterate"),n=t("../internals/an-instance"),i=t("../internals/is-object"),s=t("../internals/fails"),a=t("../internals/check-correctness-of-iteration"),c=t("../internals/set-to-string-tag"),r=t("../internals/inherit-if-required");M.exports=function(u,p,g){function S(H){var G=F[H];d(F,H,H=="add"?function(K){return G.call(this,K===0?0:K),this}:H=="delete"?function(K){return!(D&&!i(K))&&G.call(this,K===0?0:K)}:H=="get"?function(K){return D&&!i(K)?void 0:G.call(this,K===0?0:K)}:H=="has"?function(K){return!(D&&!i(K))&&G.call(this,K===0?0:K)}:function(K,Z){return G.call(this,K===0?0:K,Z),this})}var P,E,T,O,R,k=u.indexOf("Map")!==-1,D=u.indexOf("Weak")!==-1,L=k?"set":"add",U=y[u],F=U&&U.prototype,V=U,X={};return l(u,typeof U!="function"||!(D||F.forEach&&!s(function(){new U().entries().next()})))?(V=g.getConstructor(p,u,k,L),v.REQUIRED=!0):l(u,!0)&&(E=(P=new V)[L](D?{}:-0,1)!=P,T=s(function(){P.has(1)}),O=a(function(H){new U(H)}),R=!D&&s(function(){for(var H=new U,G=5;G--;)H[L](G,G);return!H.has(-0)}),O||(((V=p(function(H,G){return n(H,V,u),H=r(new U,H,V),G!=null&&m(G,H[L],H,k),H})).prototype=F).constructor=V),(T||R)&&(S("delete"),S("has"),k&&S("get")),(R||E)&&S(L),D&&F.clear&&delete F.clear),X[u]=V,h({global:!0,forced:V!=U},X),c(V,u),D||g.setStrong(V,u,k),V}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":109,"../internals/set-to-string-tag":118}],33:[function(t,M,j){var h=t("../internals/has"),y=t("../internals/own-keys"),l=t("../internals/object-get-own-property-descriptor"),d=t("../internals/object-define-property");M.exports=function(v,m){for(var n=y(m),i=d.f,s=l.f,a=0;a<n.length;a++){var c=n[a];h(v,c)||i(v,c,s(m,c))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":104}],34:[function(t,M,j){var h=t("../internals/well-known-symbol")("match");M.exports=function(y){var l=/./;try{"/./"[y](l)}catch{try{return l[h]=!1,"/./"[y](l)}catch{}}return!1}},{"../internals/well-known-symbol":149}],35:[function(t,M,j){t=t("../internals/fails"),M.exports=!t(function(){function h(){}return h.prototype.constructor=null,Object.getPrototypeOf(new h)!==h.prototype})},{"../internals/fails":51}],36:[function(t,M,j){var h=t("../internals/require-object-coercible"),y=/"/g;M.exports=function(n,d,v,m){var n=String(h(n)),i="<"+d;return v!==""&&(i+=" "+v+'="'+String(m).replace(y,"&quot;")+'"'),i+">"+n+"</"+d+">"}},{"../internals/require-object-coercible":114}],37:[function(t,M,j){function h(){return this}var y=t("../internals/iterators-core").IteratorPrototype,l=t("../internals/object-create"),d=t("../internals/create-property-descriptor"),v=t("../internals/set-to-string-tag"),m=t("../internals/iterators");M.exports=function(n,i,s){return i+=" Iterator",n.prototype=l(y,{next:d(1,s)}),v(n,i,!1,!0),m[i]=h,n}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":118}],38:[function(t,M,j){var h=t("../internals/descriptors"),y=t("../internals/object-define-property"),l=t("../internals/create-property-descriptor");M.exports=h?function(d,v,m){return y.f(d,v,l(1,m))}:function(d,v,m){return d[v]=m,d}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(t,M,j){M.exports=function(h,y){return{enumerable:!(1&h),configurable:!(2&h),writable:!(4&h),value:y}}},{}],40:[function(t,M,j){var h=t("../internals/to-primitive"),y=t("../internals/object-define-property"),l=t("../internals/create-property-descriptor");M.exports=function(d,v,m){v=h(v),v in d?y.f(d,v,l(0,m)):d[v]=m}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":141}],41:[function(r,M,j){function h(){return this}var y=r("../internals/export"),l=r("../internals/create-iterator-constructor"),d=r("../internals/object-get-prototype-of"),v=r("../internals/object-set-prototype-of"),m=r("../internals/set-to-string-tag"),n=r("../internals/create-non-enumerable-property"),i=r("../internals/redefine"),s=r("../internals/well-known-symbol"),a=r("../internals/is-pure"),c=r("../internals/iterators"),r=r("../internals/iterators-core"),u=r.IteratorPrototype,p=r.BUGGY_SAFARI_ITERATORS,g=s("iterator"),S="values",P="entries";M.exports=function(E,T,O,X,k,D,L){l(O,T,X);function U(x){if(x===k&&Z)return Z;if(!p&&x in G)return G[x];switch(x){case"keys":case S:case P:return function(){return new O(this,x)}}return function(){return new O(this)}}var F,V,X=T+" Iterator",H=!1,G=E.prototype,K=G[g]||G["@@iterator"]||k&&G[k],Z=!p&&K||U(k),oe=T=="Array"&&G.entries||K;if(oe&&(oe=d(oe.call(new E)),u!==Object.prototype&&oe.next&&(a||d(oe)===u||(v?v(oe,u):typeof oe[g]!="function"&&n(oe,g,h)),m(oe,X,!0,!0),a&&(c[X]=h))),k==S&&K&&K.name!==S&&(H=!0,Z=function(){return K.call(this)}),a&&!L||G[g]===Z||n(G,g,Z),c[T]=Z,k)if(F={values:U(S),keys:D?Z:U("keys"),entries:U(P)},L)for(V in F)!p&&!H&&V in G||i(G,V,F[V]);else y({target:T,proto:!0,forced:p||H},F);return F}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149}],42:[function(t,M,j){var h=t("../internals/path"),y=t("../internals/has"),l=t("../internals/well-known-symbol-wrapped"),d=t("../internals/object-define-property").f;M.exports=function(v){var m=h.Symbol||(h.Symbol={});y(m,v)||d(m,v,{value:l.f(v)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":105,"../internals/well-known-symbol-wrapped":148}],43:[function(t,M,j){t=t("../internals/fails"),M.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(y,M,j){var h=y("../internals/global"),y=y("../internals/is-object"),l=h.document,d=y(l)&&y(l.createElement);M.exports=function(v){return d?l.createElement(v):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(t,M,j){M.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(t,M,j){t=t("../internals/engine-user-agent"),M.exports=/(iphone|ipod|ipad).*applewebkit/i.test(t)},{"../internals/engine-user-agent":47}],47:[function(t,M,j){t=t("../internals/get-built-in"),M.exports=t("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(l,M,j){var h,y,d=l("../internals/global"),l=l("../internals/engine-user-agent"),d=d.process,d=d&&d.versions,d=d&&d.v8;d?y=(h=d.split("."))[0]+h[1]:l&&(!(h=l.match(/Edge\/(\d+)/))||74<=h[1])&&(h=l.match(/Chrome\/(\d+)/))&&(y=h[1]),M.exports=y&&+y},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(t,M,j){M.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(t,M,j){var h=t("../internals/global"),y=t("../internals/object-get-own-property-descriptor").f,l=t("../internals/create-non-enumerable-property"),d=t("../internals/redefine"),v=t("../internals/set-global"),m=t("../internals/copy-constructor-properties"),n=t("../internals/is-forced");M.exports=function(i,s){var a,c,r,u=i.target,p=i.global,g=i.stat,S=p?h:g?h[u]||v(u,{}):(h[u]||{}).prototype;if(S)for(a in s){if(c=s[a],r=i.noTargetGet?(r=y(S,a))&&r.value:S[a],!n(p?a:u+(g?".":"#")+a,i.forced)&&r!==void 0){if(typeof c==typeof r)continue;m(c,r)}(i.sham||r&&r.sham)&&l(c,"sham",!0),d(S,a,c,i)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":109,"../internals/set-global":116}],51:[function(t,M,j){M.exports=function(h){try{return!!h()}catch{return!0}}},{}],52:[function(s,M,j){s("../modules/es.regexp.exec");var h=s("../internals/redefine"),y=s("../internals/fails"),l=s("../internals/well-known-symbol"),d=s("../internals/regexp-exec"),v=s("../internals/create-non-enumerable-property"),m=l("species"),n=!y(function(){var r=/./;return r.exec=function(){var u=[];return u.groups={a:"7"},u},"".replace(r,"$<a>")!=="7"}),i="a".replace(/./,"$0")==="$0",s=l("replace"),a=!!/./[s]&&/./[s]("a","$0")==="",c=!y(function(){var u=/(?:)/,r=u.exec,u=(u.exec=function(){return r.apply(this,arguments)},"ab".split(u));return u.length!==2||u[0]!=="a"||u[1]!=="b"});M.exports=function(r,u,p,g){var S,P,E=l(r),T=!y(function(){var R={};return R[E]=function(){return 7},""[r](R)!=7}),O=T&&!y(function(){var R=!1,k=/a/;return r==="split"&&((k={constructor:{}}).constructor[m]=function(){return k},k.flags="",k[E]=/./[E]),k.exec=function(){return R=!0,null},k[E](""),!R});T&&O&&(r!=="replace"||n&&i&&!a)&&(r!=="split"||c)||(S=/./[E],p=(O=p(E,""[r],function(R,k,D,L,U){return k.exec===d?T&&!U?{done:!0,value:S.call(k,D,L)}:{done:!0,value:R.call(D,k,L)}:{done:!1}},{REPLACE_KEEPS_$0:i,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:a}))[0],P=O[1],h(String.prototype,r,p),h(RegExp.prototype,E,u==2?function(R,k){return P.call(R,this,k)}:function(R){return P.call(R,this)})),g&&v(RegExp.prototype[E],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-exec":111,"../internals/well-known-symbol":149,"../modules/es.regexp.exec":192}],53:[function(t,M,j){function h(v,m,n,i,s,a,c,r){for(var u,p=s,g=0,S=!!c&&d(c,r,3);g<i;){if(g in n){if(u=S?S(n[g],g,m):n[g],0<a&&y(u))p=h(v,m,u,l(u.length),p,a-1)-1;else{if(9007199254740991<=p)throw TypeError("Exceed the acceptable array length");v[p]=u}p++}g++}return p}var y=t("../internals/is-array"),l=t("../internals/to-length"),d=t("../internals/function-bind-context");M.exports=h},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":137}],54:[function(t,M,j){t=t("../internals/fails"),M.exports=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(t,M,j){var h=t("../internals/a-function");M.exports=function(y,l,d){if(h(y),l===void 0)return y;switch(d){case 0:return function(){return y.call(l)};case 1:return function(v){return y.call(l,v)};case 2:return function(v,m){return y.call(l,v,m)};case 3:return function(v,m,n){return y.call(l,v,m,n)}}return function(){return y.apply(l,arguments)}}},{"../internals/a-function":5}],56:[function(t,M,j){var h=t("../internals/a-function"),y=t("../internals/is-object"),l=[].slice,d={};M.exports=Function.bind||function(v){var m=h(this),n=l.call(arguments,1),i=function(){var s=n.concat(l.call(arguments));if(this instanceof i){var a=m,c=s.length,r=s;if(!(c in d)){for(var u=[],p=0;p<c;p++)u[p]="a["+p+"]";d[c]=Function("C,a","return new C("+u.join(",")+")")}return d[c](a,r)}return m.apply(v,s)};return y(m.prototype)&&(i.prototype=m.prototype),i}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(t,M,j){function h(d){return typeof d=="function"?d:void 0}var y=t("../internals/path"),l=t("../internals/global");M.exports=function(d,v){return arguments.length<2?h(y[d])||h(l[d]):y[d]&&y[d][v]||l[d]&&l[d][v]}},{"../internals/global":60,"../internals/path":105}],58:[function(t,M,j){var h=t("../internals/classof"),y=t("../internals/iterators"),l=t("../internals/well-known-symbol")("iterator");M.exports=function(d){if(d!=null)return d[l]||d["@@iterator"]||y[h(d)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":149}],59:[function(t,M,j){var h=t("../internals/an-object"),y=t("../internals/get-iterator-method");M.exports=function(l){var d=y(l);if(typeof d!="function")throw TypeError(String(l)+" is not iterable");return h(d.call(l))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(t,M,j){(function(h){function y(l){return l&&l.Math==Math&&l}M.exports=y(typeof globalThis=="object"&&globalThis)||y(typeof window=="object"&&window)||y(typeof self=="object"&&self)||y(typeof h=="object"&&h)||Function("return this")()}).call(this,typeof Bn<"u"?Bn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(t,M,j){var h={}.hasOwnProperty;M.exports=function(y,l){return h.call(y,l)}},{}],62:[function(t,M,j){M.exports={}},{}],63:[function(t,M,j){var h=t("../internals/global");M.exports=function(y,l){var d=h.console;d&&d.error&&(arguments.length===1?d.error(y):d.error(y,l))}},{"../internals/global":60}],64:[function(t,M,j){t=t("../internals/get-built-in"),M.exports=t("document","documentElement")},{"../internals/get-built-in":57}],65:[function(t,M,j){var h=t("../internals/descriptors"),y=t("../internals/fails"),l=t("../internals/document-create-element");M.exports=!h&&!y(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(t,M,j){var h=Math.abs,y=Math.pow,l=Math.floor,d=Math.log,v=Math.LN2;M.exports={pack:function(m,n,p){var s,a,c,r=new Array(p),u=8*p-n-1,p=(1<<u)-1,g=p>>1,S=n===23?y(2,-24)-y(2,-77):0,P=m<0||m===0&&1/m<0?1:0,E=0;for((m=h(m))!=m||m===1/0?(a=m!=m?1:0,s=p):(s=l(d(m)/v),m*(c=y(2,-s))<1&&(s--,c*=2),2<=(m+=1<=s+g?S/c:S*y(2,1-g))*c&&(s++,c/=2),p<=s+g?(a=0,s=p):1<=s+g?(a=(m*c-1)*y(2,n),s+=g):(a=m*y(2,g-1)*y(2,n),s=0));8<=n;r[E++]=255&a,a/=256,n-=8);for(s=s<<n|a,u+=n;0<u;r[E++]=255&s,s/=256,u-=8);return r[--E]|=128*P,r},unpack:function(m,n){var i,s=m.length,p=8*s-n-1,a=(1<<p)-1,c=a>>1,r=p-7,u=s-1,p=m[u--],g=127&p;for(p>>=7;0<r;g=256*g+m[u],u--,r-=8);for(i=g&(1<<-r)-1,g>>=-r,r+=n;0<r;i=256*i+m[u],u--,r-=8);if(g===0)g=1-c;else{if(g===a)return i?NaN:p?-1/0:1/0;i+=y(2,n),g-=c}return(p?-1:1)*i*y(2,g-n)}}},{}],67:[function(t,M,j){var h=t("../internals/fails"),y=t("../internals/classof-raw"),l="".split;M.exports=h(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return y(d)=="String"?l.call(d,""):Object(d)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(t,M,j){var h=t("../internals/is-object"),y=t("../internals/object-set-prototype-of");M.exports=function(l,d,v){return y&&typeof(d=d.constructor)=="function"&&d!==v&&h(d=d.prototype)&&d!==v.prototype&&y(l,d),l}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(h,M,j){var h=h("../internals/shared-store"),y=Function.toString;typeof h.inspectSource!="function"&&(h.inspectSource=function(l){return y.call(l)}),M.exports=h.inspectSource},{"../internals/shared-store":120}],70:[function(t,M,j){function h(r){v(r,i,{value:{objectID:"O"+ ++s,weakData:{}}})}var y=t("../internals/hidden-keys"),l=t("../internals/is-object"),d=t("../internals/has"),v=t("../internals/object-define-property").f,m=t("../internals/uid"),n=t("../internals/freezing"),i=m("meta"),s=0,a=Object.isExtensible||function(){return!0},c=M.exports={REQUIRED:!1,fastKey:function(r,u){if(!l(r))return typeof r=="symbol"?r:(typeof r=="string"?"S":"P")+r;if(!d(r,i)){if(!a(r))return"F";if(!u)return"E";h(r)}return r[i].objectID},getWeakData:function(r,u){if(!d(r,i)){if(!a(r))return!0;if(!u)return!1;h(r)}return r[i].weakData},onFreeze:function(r){return n&&c.REQUIRED&&a(r)&&!d(r,i)&&h(r),r}};y[i]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":146}],71:[function(p,M,j){var h,y,l,d,v,m,n,i,s=p("../internals/native-weak-map"),g=p("../internals/global"),a=p("../internals/is-object"),c=p("../internals/create-non-enumerable-property"),r=p("../internals/has"),u=p("../internals/shared-key"),p=p("../internals/hidden-keys"),g=g.WeakMap;n=s?(h=new g,y=h.get,l=h.has,d=h.set,v=function(S,P){return d.call(h,S,P),P},m=function(S){return y.call(h,S)||{}},function(S){return l.call(h,S)}):(p[i=u("state")]=!0,v=function(S,P){return c(S,i,P),P},m=function(S){return r(S,i)?S[i]:{}},function(S){return r(S,i)}),M.exports={set:v,get:m,has:n,enforce:function(S){return n(S)?m(S):v(S,{})},getterFor:function(S){return function(P){if(a(P)&&(P=m(P)).type===S)return P;throw TypeError("Incompatible receiver, "+S+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":119}],72:[function(t,M,j){var h=t("../internals/well-known-symbol"),y=t("../internals/iterators"),l=h("iterator"),d=Array.prototype;M.exports=function(v){return v!==void 0&&(y.Array===v||d[l]===v)}},{"../internals/iterators":80,"../internals/well-known-symbol":149}],73:[function(t,M,j){var h=t("../internals/classof-raw");M.exports=Array.isArray||function(y){return h(y)=="Array"}},{"../internals/classof-raw":28}],74:[function(t,M,j){function h(i,s){return(i=v[d(i)])==n||i!=m&&(typeof s=="function"?y(s):!!s)}var y=t("../internals/fails"),l=/#|\.prototype\./,d=h.normalize=function(i){return String(i).replace(l,".").toLowerCase()},v=h.data={},m=h.NATIVE="N",n=h.POLYFILL="P";M.exports=h},{"../internals/fails":51}],75:[function(t,M,j){M.exports=function(h){return typeof h=="object"?h!==null:typeof h=="function"}},{}],76:[function(t,M,j){M.exports=!1},{}],77:[function(t,M,j){var h=t("../internals/is-object"),y=t("../internals/classof-raw"),l=t("../internals/well-known-symbol")("match");M.exports=function(d){var v;return h(d)&&((v=d[l])!==void 0?!!v:y(d)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":149}],78:[function(t,M,j){function h(i,s){this.stopped=i,this.result=s}var y=t("../internals/an-object"),l=t("../internals/is-array-iterator-method"),d=t("../internals/to-length"),v=t("../internals/function-bind-context"),m=t("../internals/get-iterator-method"),n=t("../internals/call-with-safe-iteration-closing");(M.exports=function(i,s,a,c,r){var u,p,g,S,P,E,T=v(s,a,c?2:1);if(r)u=i;else{if(typeof(s=m(i))!="function")throw TypeError("Target is not iterable");if(l(s)){for(p=0,g=d(i.length);p<g;p++)if((S=c?T(y(E=i[p])[0],E[1]):T(i[p]))&&S instanceof h)return S;return new h(!1)}u=s.call(i)}for(P=u.next;!(E=P.call(u)).done;)if(typeof(S=n(u,T,E.value,c))=="object"&&S&&S instanceof h)return S;return new h(!1)}).stop=function(i){return new h(!0,i)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137}],79:[function(m,M,j){var h,y,l=m("../internals/object-get-prototype-of"),d=m("../internals/create-non-enumerable-property"),v=m("../internals/has"),n=m("../internals/well-known-symbol"),m=m("../internals/is-pure"),n=n("iterator"),i=!1;[].keys&&("next"in(y=[].keys())?(l=l(l(y)))!==Object.prototype&&(h=l):i=!0),h==null&&(h={}),m||v(h,n)||d(h,n,function(){return this}),M.exports={IteratorPrototype:h,BUGGY_SAFARI_ITERATORS:i}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":149}],80:[function(t,M,j){M.exports={}},{}],81:[function(t,M,j){M.exports=Math.sign||function(h){return(h=+h)==0||h!=h?h:h<0?-1:1}},{}],82:[function(c,M,j){var h,y,l,d,v,m,n,i,s=c("../internals/global"),P=c("../internals/object-get-own-property-descriptor").f,S=c("../internals/classof-raw"),a=c("../internals/task").set,c=c("../internals/engine-is-ios"),r=s.MutationObserver||s.WebKitMutationObserver,u=s.process,p=s.Promise,g=S(u)=="process",S=P(s,"queueMicrotask"),P=S&&S.value;P||(h=function(){var E,T;for(g&&(E=u.domain)&&E.exit();y;){T=y.fn,y=y.next;try{T()}catch(O){throw y?d():l=void 0,O}}l=void 0,E&&E.enter()},d=g?function(){u.nextTick(h)}:r&&!c?(v=!0,m=document.createTextNode(""),new r(h).observe(m,{characterData:!0}),function(){m.data=v=!v}):p&&p.resolve?(n=p.resolve(void 0),i=n.then,function(){i.call(n,h)}):function(){a.call(s,h)}),M.exports=P||function(E){E={fn:E,next:void 0},l&&(l.next=E),y||(y=E,d()),l=E}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":131}],83:[function(t,M,j){t=t("../internals/global"),M.exports=t.Promise},{"../internals/global":60}],84:[function(t,M,j){t=t("../internals/fails"),M.exports=!!Object.getOwnPropertySymbols&&!t(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(t,M,j){var h=t("../internals/fails"),y=t("../internals/well-known-symbol"),l=t("../internals/is-pure"),d=y("iterator");M.exports=!h(function(){var v=new URL("b?a=1&b=2&c=3","http://a"),m=v.searchParams,n="";return v.pathname="c%20d",m.forEach(function(i,s){m.delete("b"),n+=s+i}),l&&!v.toJSON||!m.sort||v.href!=="http://a/c%20d?a=1&c=3"||m.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!m[d]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||n!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":149}],86:[function(h,M,j){var y=h("../internals/global"),h=h("../internals/inspect-source"),y=y.WeakMap;M.exports=typeof y=="function"&&/native code/.test(h(y))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(t,M,j){function h(l){var d,v;this.promise=new l(function(m,n){if(d!==void 0||v!==void 0)throw TypeError("Bad Promise constructor");d=m,v=n}),this.resolve=y(d),this.reject=y(v)}var y=t("../internals/a-function");M.exports.f=function(l){return new h(l)}},{"../internals/a-function":5}],88:[function(t,M,j){var h=t("../internals/is-regexp");M.exports=function(y){if(h(y))throw TypeError("The method doesn't accept regular expressions");return y}},{"../internals/is-regexp":77}],89:[function(t,M,j){var h=t("../internals/global").isFinite;M.exports=Number.isFinite||function(y){return typeof y=="number"&&h(y)}},{"../internals/global":60}],90:[function(t,M,j){var h=t("../internals/descriptors"),y=t("../internals/fails"),l=t("../internals/object-keys"),d=t("../internals/object-get-own-property-symbols"),v=t("../internals/object-property-is-enumerable"),m=t("../internals/to-object"),n=t("../internals/indexed-object"),i=Object.assign,s=Object.defineProperty;M.exports=!i||y(function(){var a,c,r,u;return!(!h||i({b:1},i(s({},"a",{enumerable:!0,get:function(){s(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(c={},u="abcdefghijklmnopqrst",(a={})[r=Symbol()]=7,u.split("").forEach(function(p){c[p]=p}),i({},a)[r]!=7||l(i({},c)).join("")!=u)})?function(a,c){for(var r=m(a),u=arguments.length,p=1,g=d.f,S=v.f;p<u;)for(var P,E=n(arguments[p++]),T=g?l(E).concat(g(E)):l(E),O=T.length,R=0;R<O;)P=T[R++],h&&!S.call(E,P)||(r[P]=E[P]);return r}:i},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":138}],91:[function(s,M,j){function h(){}var y,l=s("../internals/an-object"),d=s("../internals/object-define-properties"),v=s("../internals/enum-bug-keys"),m=s("../internals/hidden-keys"),n=s("../internals/html"),i=s("../internals/document-create-element"),s=s("../internals/shared-key"),a="prototype",c="script",r=s("IE_PROTO"),u=function(g){return"<"+c+">"+g+"</"+c+">"},p=function(){try{y=document.domain&&new ActiveXObject("htmlfile")}catch{}p=y?((g=y).write(u("")),g.close(),S=g.parentWindow.Object,g=null,S):(g=i("iframe"),S="java"+c+":",g.style.display="none",n.appendChild(g),g.src=String(S),(S=g.contentWindow.document).open(),S.write(u("document.F=Object")),S.close(),S.F);for(var g,S,P=v.length;P--;)delete p[a][v[P]];return p()};m[r]=!0,M.exports=Object.create||function(g,S){var P;return g!==null?(h[a]=l(g),P=new h,h[a]=null,P[r]=g):P=p(),S===void 0?P:d(P,S)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":119}],92:[function(t,M,j){var h=t("../internals/descriptors"),y=t("../internals/object-define-property"),l=t("../internals/an-object"),d=t("../internals/object-keys");M.exports=h?Object.defineProperties:function(v,m){l(v);for(var n,i=d(m),s=i.length,a=0;a<s;)y.f(v,n=i[a++],m[n]);return v}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(t,M,j){var h=t("../internals/descriptors"),y=t("../internals/ie8-dom-define"),l=t("../internals/an-object"),d=t("../internals/to-primitive"),v=Object.defineProperty;j.f=h?v:function(m,n,i){if(l(m),n=d(n,!0),l(i),y)try{return v(m,n,i)}catch{}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(m[n]=i.value),m}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":141}],94:[function(t,M,j){var h=t("../internals/descriptors"),y=t("../internals/object-property-is-enumerable"),l=t("../internals/create-property-descriptor"),d=t("../internals/to-indexed-object"),v=t("../internals/to-primitive"),m=t("../internals/has"),n=t("../internals/ie8-dom-define"),i=Object.getOwnPropertyDescriptor;j.f=h?i:function(s,a){if(s=d(s),a=v(a,!0),n)try{return i(s,a)}catch{}if(m(s,a))return l(!y.f.call(s,a),s[a])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":135,"../internals/to-primitive":141}],95:[function(t,M,j){var h=t("../internals/to-indexed-object"),y=t("../internals/object-get-own-property-names").f,l={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];M.exports.f=function(v){if(!d||l.call(v)!="[object Window]")return y(h(v));try{return y(v)}catch{return d.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":135}],96:[function(t,M,j){var h=t("../internals/object-keys-internal"),y=t("../internals/enum-bug-keys").concat("length","prototype");j.f=Object.getOwnPropertyNames||function(l){return h(l,y)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(t,M,j){j.f=Object.getOwnPropertySymbols},{}],98:[function(d,M,j){var h=d("../internals/has"),y=d("../internals/to-object"),l=d("../internals/shared-key"),d=d("../internals/correct-prototype-getter"),v=l("IE_PROTO"),m=Object.prototype;M.exports=d?Object.getPrototypeOf:function(n){return n=y(n),h(n,v)?n[v]:typeof n.constructor=="function"&&n instanceof n.constructor?n.constructor.prototype:n instanceof Object?m:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":119,"../internals/to-object":138}],99:[function(t,M,j){var h=t("../internals/has"),y=t("../internals/to-indexed-object"),l=t("../internals/array-includes").indexOf,d=t("../internals/hidden-keys");M.exports=function(v,m){var n,i=y(v),s=0,a=[];for(n in i)!h(d,n)&&h(i,n)&&a.push(n);for(;m.length>s;)!h(i,n=m[s++])||~l(a,n)||a.push(n);return a}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":135}],100:[function(t,M,j){var h=t("../internals/object-keys-internal"),y=t("../internals/enum-bug-keys");M.exports=Object.keys||function(l){return h(l,y)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(t,M,j){var h={}.propertyIsEnumerable,y=Object.getOwnPropertyDescriptor,l=y&&!h.call({1:2},1);j.f=l?function(d){return d=y(this,d),!!d&&d.enumerable}:h},{}],102:[function(t,M,j){var h=t("../internals/an-object"),y=t("../internals/a-possible-prototype");M.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,d=!1,v={};try{(l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(v,[]),d=v instanceof Array}catch{}return function(m,n){return h(m),y(n),d?l.call(m,n):m.__proto__=n,m}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(t,M,j){var h=t("../internals/to-string-tag-support"),y=t("../internals/classof");M.exports=h?{}.toString:function(){return"[object "+y(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":142}],104:[function(t,M,j){var h=t("../internals/get-built-in"),y=t("../internals/object-get-own-property-names"),l=t("../internals/object-get-own-property-symbols"),d=t("../internals/an-object");M.exports=h("Reflect","ownKeys")||function(v){var m=y.f(d(v)),n=l.f;return n?m.concat(n(v)):m}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],105:[function(t,M,j){t=t("../internals/global"),M.exports=t},{"../internals/global":60}],106:[function(t,M,j){M.exports=function(h){try{return{error:!1,value:h()}}catch(y){return{error:!0,value:y}}}},{}],107:[function(t,M,j){var h=t("../internals/an-object"),y=t("../internals/is-object"),l=t("../internals/new-promise-capability");M.exports=function(d,v){return h(d),y(v)&&v.constructor===d?v:((0,(d=l.f(d)).resolve)(v),d.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],108:[function(t,M,j){var h=t("../internals/redefine");M.exports=function(y,l,d){for(var v in l)h(y,v,l[v],d);return y}},{"../internals/redefine":109}],109:[function(m,M,j){var h=m("../internals/global"),y=m("../internals/create-non-enumerable-property"),l=m("../internals/has"),d=m("../internals/set-global"),v=m("../internals/inspect-source"),m=m("../internals/internal-state"),n=m.get,i=m.enforce,s=String(String).split("String");(M.exports=function(a,c,r,S){var p=!!S&&!!S.unsafe,g=!!S&&!!S.enumerable,S=!!S&&!!S.noTargetGet;typeof r=="function"&&(typeof c!="string"||l(r,"name")||y(r,"name",c),i(r).source=s.join(typeof c=="string"?c:"")),a===h?g?a[c]=r:d(c,r):(p?!S&&a[c]&&(g=!0):delete a[c],g?a[c]=r:y(a,c,r))})(Function.prototype,"toString",function(){return typeof this=="function"&&n(this).source||v(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":116}],110:[function(t,M,j){var h=t("./classof-raw"),y=t("./regexp-exec");M.exports=function(l,d){var v=l.exec;if(typeof v=="function"){if(v=v.call(l,d),typeof v!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return v}if(h(l)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return y.call(l,d)}},{"./classof-raw":28,"./regexp-exec":111}],111:[function(d,M,j){var h,y,l=d("./regexp-flags"),d=d("./regexp-sticky-helpers"),v=RegExp.prototype.exec,m=String.prototype.replace,n=v,i=(h=/a/,y=/b*/g,v.call(h,"a"),v.call(y,"a"),h.lastIndex!==0||y.lastIndex!==0),s=d.UNSUPPORTED_Y||d.BROKEN_CARET,a=/()??/.exec("")[1]!==void 0;M.exports=n=i||a||s?function(c){var r,u,p,g,S=this,P=s&&S.sticky,E=l.call(S),T=S.source,O=0,R=c;return P&&((E=E.replace("y","")).indexOf("g")===-1&&(E+="g"),R=String(c).slice(S.lastIndex),0<S.lastIndex&&(!S.multiline||S.multiline&&c[S.lastIndex-1]!==`
`)&&(T="(?: "+T+")",R=" "+R,O++),u=new RegExp("^(?:"+T+")",E)),a&&(u=new RegExp("^"+T+"$(?!\\s)",E)),i&&(r=S.lastIndex),p=v.call(P?u:S,R),P?p?(p.input=p.input.slice(O),p[0]=p[0].slice(O),p.index=S.lastIndex,S.lastIndex+=p[0].length):S.lastIndex=0:i&&p&&(S.lastIndex=S.global?p.index+p[0].length:r),a&&p&&1<p.length&&m.call(p[0],u,function(){for(g=1;g<arguments.length-2;g++)arguments[g]===void 0&&(p[g]=void 0)}),p}:n},{"./regexp-flags":112,"./regexp-sticky-helpers":113}],112:[function(t,M,j){var h=t("../internals/an-object");M.exports=function(){var y=h(this),l="";return y.global&&(l+="g"),y.ignoreCase&&(l+="i"),y.multiline&&(l+="m"),y.dotAll&&(l+="s"),y.unicode&&(l+="u"),y.sticky&&(l+="y"),l}},{"../internals/an-object":10}],113:[function(t,M,j){t=t("./fails");function h(y,l){return RegExp(y,l)}j.UNSUPPORTED_Y=t(function(){var y=h("a","y");return y.lastIndex=2,y.exec("abcd")!=null}),j.BROKEN_CARET=t(function(){var y=h("^r","gy");return y.lastIndex=2,y.exec("str")!=null})},{"./fails":51}],114:[function(t,M,j){M.exports=function(h){if(h==null)throw TypeError("Can't call method on "+h);return h}},{}],115:[function(t,M,j){M.exports=Object.is||function(h,y){return h===y?h!==0||1/h==1/y:h!=h&&y!=y}},{}],116:[function(t,M,j){var h=t("../internals/global"),y=t("../internals/create-non-enumerable-property");M.exports=function(l,d){try{y(h,l,d)}catch{h[l]=d}return d}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],117:[function(t,M,j){var h=t("../internals/get-built-in"),y=t("../internals/object-define-property"),l=t("../internals/well-known-symbol"),d=t("../internals/descriptors"),v=l("species");M.exports=function(n){var n=h(n),i=y.f;d&&n&&!n[v]&&i(n,v,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],118:[function(t,M,j){var h=t("../internals/object-define-property").f,y=t("../internals/has"),l=t("../internals/well-known-symbol")("toStringTag");M.exports=function(d,v,m){d&&!y(d=m?d:d.prototype,l)&&h(d,l,{configurable:!0,value:v})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],119:[function(t,M,j){var h=t("../internals/shared"),y=t("../internals/uid"),l=h("keys");M.exports=function(d){return l[d]||(l[d]=y(d))}},{"../internals/shared":121,"../internals/uid":146}],120:[function(h,M,j){var l=h("../internals/global"),h=h("../internals/set-global"),y="__core-js_shared__",l=l[y]||h(y,{});M.exports=l},{"../internals/global":60,"../internals/set-global":116}],121:[function(t,M,j){var h=t("../internals/is-pure"),y=t("../internals/shared-store");(M.exports=function(l,d){return y[l]||(y[l]=d!==void 0?d:{})})("versions",[]).push({version:"3.6.5",mode:h?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":120}],122:[function(t,M,j){var h=t("../internals/an-object"),y=t("../internals/a-function"),l=t("../internals/well-known-symbol")("species");M.exports=function(m,v){var m=h(m).constructor;return m===void 0||(m=h(m)[l])==null?v:y(m)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":149}],123:[function(t,M,j){var h=t("../internals/fails");M.exports=function(y){return h(function(){var l=""[y]('"');return l!==l.toLowerCase()||3<l.split('"').length})}},{"../internals/fails":51}],124:[function(t,M,j){function h(d){return function(i,s){var n,i=String(l(i)),s=y(s),a=i.length;return s<0||a<=s?d?"":void 0:(n=i.charCodeAt(s))<55296||56319<n||s+1===a||(a=i.charCodeAt(s+1))<56320||57343<a?d?i.charAt(s):n:d?i.slice(s,s+2):a-56320+(n-55296<<10)+65536}}var y=t("../internals/to-integer"),l=t("../internals/require-object-coercible");M.exports={codeAt:h(!1),charAt:h(!0)}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],125:[function(t,M,j){t=t("../internals/engine-user-agent"),M.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t)},{"../internals/engine-user-agent":47}],126:[function(t,M,j){function h(m){return function(a,u,r){var a=String(d(a)),c=a.length,r=r===void 0?" ":String(r),u=y(u);return u<=c||r==""?a:((c=l.call(r,v((u=u-c)/r.length))).length>u&&(c=c.slice(0,u)),m?a+c:c+a)}}var y=t("../internals/to-length"),l=t("../internals/string-repeat"),d=t("../internals/require-object-coercible"),v=Math.ceil;M.exports={start:h(!1),end:h(!0)}},{"../internals/require-object-coercible":114,"../internals/string-repeat":128,"../internals/to-length":137}],127:[function(t,M,j){function h(p){return p+22+75*(p<26)}function y(p){var g,S=[],P=(p=function(K){for(var Z=[],oe=0,x=K.length;oe<x;){var I,B=K.charCodeAt(oe++);55296<=B&&B<=56319&&oe<x?(64512&(I=K.charCodeAt(oe++)))==56320?Z.push(((1023&B)<<10)+(1023&I)+65536):(Z.push(B),oe--):Z.push(B)}return Z}(p)).length,E=128,T=0,O=72;for(L=0;L<p.length;L++)(g=p[L])<128&&S.push(u(g));var R=S.length,k=R;for(R&&S.push("-");k<P;){for(var D=l,L=0;L<p.length;L++)E<=(g=p[L])&&g<D&&(D=g);var U=k+1;if(D-E>r((l-T)/U))throw RangeError(a);for(T+=(D-E)*U,E=D,L=0;L<p.length;L++){if((g=p[L])<E&&++T>l)throw RangeError(a);if(g==E){for(var F=T,V=d;;V+=d){var X=V<=O?1:O+v<=V?v:V-O;if(F<X)break;var H=F-X,G=d-X;S.push(u(h(X+H%G))),F=r(H/G)}S.push(u(h(F))),O=function(K,Z,oe){var x=0;for(K=oe?r(K/n):K>>1,K+=r(K/Z);c*v>>1<K;x+=d)K=r(K/c);return r(x+(c+1)*K/(K+m))}(T,U,k==R),T=0,++k}}++T,++E}return S.join("")}var l=2147483647,d=36,v=26,m=38,n=700,i=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",c=d-1,r=Math.floor,u=String.fromCharCode;M.exports=function(p){for(var g,S=[],P=p.toLowerCase().replace(s,".").split("."),E=0;E<P.length;E++)g=P[E],S.push(i.test(g)?"xn--"+y(g):g);return S.join(".")}},{}],128:[function(t,M,j){var h=t("../internals/to-integer"),y=t("../internals/require-object-coercible");M.exports="".repeat||function(l){var d=String(y(this)),v="",m=h(l);if(m<0||m==1/0)throw RangeError("Wrong number of repetitions");for(;0<m;(m>>>=1)&&(d+=d))1&m&&(v+=d);return v}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],129:[function(t,M,j){var h=t("../internals/fails"),y=t("../internals/whitespaces");M.exports=function(l){return h(function(){return!!y[l]()||"​᠎"[l]()!="​᠎"||y[l].name!==l})}},{"../internals/fails":51,"../internals/whitespaces":150}],130:[function(l,M,j){function h(m){return function(n){return n=String(y(n)),1&m&&(n=n.replace(d,"")),n=2&m?n.replace(v,""):n}}var y=l("../internals/require-object-coercible"),l="["+l("../internals/whitespaces")+"]",d=RegExp("^"+l+l+"*"),v=RegExp(l+l+"*$");M.exports={start:h(1),end:h(2),trim:h(3)}},{"../internals/require-object-coercible":114,"../internals/whitespaces":150}],131:[function(c,M,j){function h(k){return function(){R(k)}}function y(k){R(k.data)}function l(k){v.postMessage(k+"",r.protocol+"//"+r.host)}var d,v=c("../internals/global"),m=c("../internals/fails"),n=c("../internals/classof-raw"),i=c("../internals/function-bind-context"),s=c("../internals/html"),a=c("../internals/document-create-element"),c=c("../internals/engine-is-ios"),r=v.location,u=v.setImmediate,p=v.clearImmediate,g=v.process,S=v.MessageChannel,P=v.Dispatch,E=0,T={},O="onreadystatechange",R=function(k){var D;T.hasOwnProperty(k)&&(D=T[k],delete T[k],D())};u&&p||(u=function(k){for(var D=[],L=1;L<arguments.length;)D.push(arguments[L++]);return T[++E]=function(){(typeof k=="function"?k:Function(k)).apply(void 0,D)},d(E),E},p=function(k){delete T[k]},n(g)=="process"?d=function(k){g.nextTick(h(k))}:P&&P.now?d=function(k){P.now(h(k))}:S&&!c?(c=(n=new S).port2,n.port1.onmessage=y,d=i(c.postMessage,c,1)):!v.addEventListener||typeof postMessage!="function"||v.importScripts||m(l)||r.protocol==="file:"?d=O in a("script")?function(k){s.appendChild(a("script"))[O]=function(){s.removeChild(this),R(k)}}:function(k){setTimeout(h(k),0)}:(d=l,v.addEventListener("message",y,!1))),M.exports={set:u,clear:p}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],132:[function(t,M,j){var h=t("../internals/classof-raw");M.exports=function(y){if(typeof y!="number"&&h(y)!="Number")throw TypeError("Incorrect invocation");return+y}},{"../internals/classof-raw":28}],133:[function(t,M,j){var h=t("../internals/to-integer"),y=Math.max,l=Math.min;M.exports=function(d,v){return d=h(d),d<0?y(d+v,0):l(d,v)}},{"../internals/to-integer":136}],134:[function(t,M,j){var h=t("../internals/to-integer"),y=t("../internals/to-length");M.exports=function(d){if(d===void 0)return 0;var d=h(d),v=y(d);if(d!==v)throw RangeError("Wrong length or index");return v}},{"../internals/to-integer":136,"../internals/to-length":137}],135:[function(t,M,j){var h=t("../internals/indexed-object"),y=t("../internals/require-object-coercible");M.exports=function(l){return h(y(l))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":114}],136:[function(t,M,j){var h=Math.ceil,y=Math.floor;M.exports=function(l){return isNaN(l=+l)?0:(0<l?y:h)(l)}},{}],137:[function(t,M,j){var h=t("../internals/to-integer"),y=Math.min;M.exports=function(l){return 0<l?y(h(l),9007199254740991):0}},{"../internals/to-integer":136}],138:[function(t,M,j){var h=t("../internals/require-object-coercible");M.exports=function(y){return Object(h(y))}},{"../internals/require-object-coercible":114}],139:[function(t,M,j){var h=t("../internals/to-positive-integer");M.exports=function(y,l){if(y=h(y),y%l)throw RangeError("Wrong offset");return y}},{"../internals/to-positive-integer":140}],140:[function(t,M,j){var h=t("../internals/to-integer");M.exports=function(y){if(y=h(y),y<0)throw RangeError("The argument can't be less than 0");return y}},{"../internals/to-integer":136}],141:[function(t,M,j){var h=t("../internals/is-object");M.exports=function(y,l){if(!h(y))return y;var d,v;if(l&&typeof(d=y.toString)=="function"&&!h(v=d.call(y))||typeof(d=y.valueOf)=="function"&&!h(v=d.call(y))||!l&&typeof(d=y.toString)=="function"&&!h(v=d.call(y)))return v;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],142:[function(t,M,j){var h={};h[t("../internals/well-known-symbol")("toStringTag")]="z",M.exports=String(h)==="[object z]"},{"../internals/well-known-symbol":149}],143:[function(t,M,j){function h(ye,be){for(var Se=0,Fe=be.length,Me=new(ee(ye))(Fe);Se<Fe;)Me[Se]=be[Se++];return Me}function y(ye,be){I(ye,be,{get:function(){return oe(this)[be]}})}function l(ye){return ye instanceof te||(ye=R(ye))=="ArrayBuffer"||ye=="SharedArrayBuffer"}function d(ye,be){return ue(ye)&&typeof be!="symbol"&&be in ye&&String(+be)==String(be)}function v(ye,be){return d(ye,be=T(be,!0))?p(2,ye[be]):B(ye,be)}function m(ye,be,Se){return!(d(ye,be=T(be,!0))&&k(Se)&&O(Se,"value"))||O(Se,"get")||O(Se,"set")||Se.configurable||O(Se,"writable")&&!Se.writable||O(Se,"enumerable")&&!Se.enumerable?I(ye,be,Se):(ye[be]=Se.value,ye)}var n=t("../internals/export"),i=t("../internals/global"),s=t("../internals/descriptors"),a=t("../internals/typed-array-constructors-require-wrappers"),c=t("../internals/array-buffer-view-core"),r=t("../internals/array-buffer"),u=t("../internals/an-instance"),p=t("../internals/create-property-descriptor"),g=t("../internals/create-non-enumerable-property"),S=t("../internals/to-length"),P=t("../internals/to-index"),E=t("../internals/to-offset"),T=t("../internals/to-primitive"),O=t("../internals/has"),R=t("../internals/classof"),k=t("../internals/is-object"),D=t("../internals/object-create"),L=t("../internals/object-set-prototype-of"),U=t("../internals/object-get-own-property-names").f,F=t("../internals/typed-array-from"),V=t("../internals/array-iteration").forEach,X=t("../internals/set-species"),H=t("../internals/object-define-property"),G=t("../internals/object-get-own-property-descriptor"),K=t("../internals/internal-state"),Z=t("../internals/inherit-if-required"),oe=K.get,x=K.set,I=H.f,B=G.f,W=Math.round,$=i.RangeError,te=r.ArrayBuffer,ie=r.DataView,de=c.NATIVE_ARRAY_BUFFER_VIEWS,se=c.TYPED_ARRAY_TAG,he=c.TypedArray,ce=c.TypedArrayPrototype,ee=c.aTypedArrayConstructor,ue=c.isTypedArray,me="BYTES_PER_ELEMENT",je="Wrong length";s?(de||(G.f=v,H.f=m,y(ce,"buffer"),y(ce,"byteOffset"),y(ce,"byteLength"),y(ce,"length")),n({target:"Object",stat:!0,forced:!de},{getOwnPropertyDescriptor:v,defineProperty:m}),M.exports=function(_e,be,Se){function Fe(Ee,Q){I(Ee,Q,{get:function(){var re=this,Y=Q;return(re=oe(re)).view[Ge](Y*Me+re.byteOffset,!0)},set:function(re){var Y=this,ne=Q;Y=oe(Y),Se&&(re=(re=W(re))<0?0:255<re?255:255&re),Y.view[ze](ne*Me+Y.byteOffset,re,!0)},enumerable:!0})}var Me=_e.match(/\d+$/)[0]/8,Ze=_e+(Se?"Clamped":"")+"Array",Ge="get"+_e,ze="set"+_e,qe=i[Ze],He=qe,_e=He&&He.prototype,Le={};de?a&&(He=be(function(Ee,Q,re,Y){return u(Ee,He,Ze),Z(k(Q)?l(Q)?Y!==void 0?new qe(Q,E(re,Me),Y):re!==void 0?new qe(Q,E(re,Me)):new qe(Q):ue(Q)?h(He,Q):F.call(He,Q):new qe(P(Q)),Ee,He)}),L&&L(He,he),V(U(qe),function(Ee){Ee in He||g(He,Ee,qe[Ee])}),He.prototype=_e):(He=be(function(Ee,Q,re,Y){u(Ee,He,Ze);var ne,ge,xe=0,Oe=0;if(k(Q)){if(!l(Q))return ue(Q)?h(He,Q):F.call(He,Q);var Ue=Q,Oe=E(re,Me),re=Q.byteLength;if(Y===void 0){if(re%Me||(ne=re-Oe)<0)throw $(je)}else if(re<(ne=S(Y)*Me)+Oe)throw $(je);ge=ne/Me}else ge=P(Q),Ue=new te(ne=ge*Me);for(x(Ee,{buffer:Ue,byteOffset:Oe,byteLength:ne,length:ge,view:new ie(Ue)});xe<ge;)Fe(Ee,xe++)}),L&&L(He,he),_e=He.prototype=D(ce)),_e.constructor!==He&&g(_e,"constructor",He),se&&g(_e,se,Ze),Le[Ze]=He,n({global:!0,forced:He!=qe,sham:!de},Le),me in He||g(He,me,Me),me in _e||g(_e,me,Me),X(Ze)}):M.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":117,"../internals/to-index":134,"../internals/to-length":137,"../internals/to-offset":139,"../internals/to-primitive":141,"../internals/typed-array-constructors-require-wrappers":144,"../internals/typed-array-from":145}],144:[function(d,M,j){var h=d("../internals/global"),y=d("../internals/fails"),l=d("../internals/check-correctness-of-iteration"),d=d("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,v=h.ArrayBuffer,m=h.Int8Array;M.exports=!d||!y(function(){m(1)})||!y(function(){new m(-1)})||!l(function(n){new m,new m(null),new m(1.5),new m(n)},!0)||y(function(){return new m(new v(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],145:[function(t,M,j){var h=t("../internals/to-object"),y=t("../internals/to-length"),l=t("../internals/get-iterator-method"),d=t("../internals/is-array-iterator-method"),v=t("../internals/function-bind-context"),m=t("../internals/array-buffer-view-core").aTypedArrayConstructor;M.exports=function(n){var i,s,a,c,r,u,p=h(n),g=arguments.length,S=1<g?arguments[1]:void 0,P=S!==void 0,E=l(p);if(E!=null&&!d(E))for(u=(r=E.call(p)).next,p=[];!(c=u.call(r)).done;)p.push(c.value);for(P&&2<g&&(S=v(S,arguments[2],2)),s=y(p.length),a=new(m(this))(s),i=0;i<s;i++)a[i]=P?S(p[i],i):p[i];return a}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],146:[function(t,M,j){var h=0,y=Math.random();M.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++h+y).toString(36)}},{}],147:[function(t,M,j){t=t("../internals/native-symbol"),M.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],148:[function(t,M,j){t=t("../internals/well-known-symbol"),j.f=t},{"../internals/well-known-symbol":149}],149:[function(m,M,j){var h=m("../internals/global"),y=m("../internals/shared"),l=m("../internals/has"),d=m("../internals/uid"),v=m("../internals/native-symbol"),m=m("../internals/use-symbol-as-uid"),n=y("wks"),i=h.Symbol,s=m?i:i&&i.withoutSetter||d;M.exports=function(a){return l(n,a)||(v&&l(i,a)?n[a]=i[a]:n[a]=s("Symbol."+a)),n[a]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":121,"../internals/uid":146,"../internals/use-symbol-as-uid":147}],150:[function(t,M,j){M.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},{}],151:[function(l,M,j){var h=l("../internals/export"),y=l("../internals/global"),v=l("../internals/array-buffer"),l=l("../internals/set-species"),d="ArrayBuffer",v=v[d];h({global:!0,forced:y[d]!==v},{ArrayBuffer:v}),l(d)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":117}],152:[function(p,M,j){var h=p("../internals/export"),y=p("../internals/fails"),l=p("../internals/is-array"),d=p("../internals/is-object"),v=p("../internals/to-object"),m=p("../internals/to-length"),n=p("../internals/create-property"),i=p("../internals/array-species-create"),s=p("../internals/array-method-has-species-support"),u=p("../internals/well-known-symbol"),p=p("../internals/engine-v8-version"),a=u("isConcatSpreadable"),c=9007199254740991,r="Maximum allowed index exceeded",u=51<=p||!y(function(){var g=[];return g[a]=!1,g.concat()[0]!==g}),p=s("concat");h({target:"Array",proto:!0,forced:!u||!p},{concat:function(g){for(var S,P,E,T,O,R=v(this),k=i(R,0),D=0,L=-1,U=arguments.length;L<U;L++)if(O=void 0,!d(T=E=L===-1?R:arguments[L])||((O=T[a])!==void 0?!O:!l(T))){if(c<=D)throw TypeError(r);n(k,D++,E)}else{if(P=m(E.length),c<D+P)throw TypeError(r);for(S=0;S<P;S++,D++)S in E&&n(k,D,E[S])}return k.length=D,k}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":137,"../internals/to-object":138,"../internals/well-known-symbol":149}],153:[function(l,M,j){var h=l("../internals/export"),y=l("../internals/array-copy-within"),l=l("../internals/add-to-unscopables");h({target:"Array",proto:!0},{copyWithin:y}),l("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],154:[function(d,M,j){var h=d("../internals/export"),y=d("../internals/array-iteration").every,l=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),l=l("every"),d=d("every");h({target:"Array",proto:!0,forced:!l||!d},{every:function(v){return y(this,v,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],155:[function(l,M,j){var h=l("../internals/export"),y=l("../internals/array-fill"),l=l("../internals/add-to-unscopables");h({target:"Array",proto:!0},{fill:y}),l("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],156:[function(d,M,j){var h=d("../internals/export"),y=d("../internals/array-iteration").filter,l=d("../internals/array-method-has-species-support"),d=d("../internals/array-method-uses-to-length"),l=l("filter"),d=d("filter");h({target:"Array",proto:!0,forced:!l||!d},{filter:function(v){return y(this,v,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(m,M,j){var h=m("../internals/export"),y=m("../internals/array-iteration").findIndex,l=m("../internals/add-to-unscopables"),m=m("../internals/array-method-uses-to-length"),d="findIndex",v=!0,m=m(d);d in[]&&Array(1)[d](function(){v=!1}),h({target:"Array",proto:!0,forced:v||!m},{findIndex:function(n){return y(this,n,1<arguments.length?arguments[1]:void 0)}}),l(d)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(t,M,j){var h=t("../internals/export"),y=t("../internals/flatten-into-array"),l=t("../internals/to-object"),d=t("../internals/to-length"),v=t("../internals/a-function"),m=t("../internals/array-species-create");h({target:"Array",proto:!0},{flatMap:function(n){var i,s=l(this),a=d(s.length);return v(n),(i=m(s,0)).length=y(i,s,s,a,0,1,n,1<arguments.length?arguments[1]:void 0),i}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":137,"../internals/to-object":138}],159:[function(t,M,j){var h=t("../internals/export"),y=t("../internals/flatten-into-array"),l=t("../internals/to-object"),d=t("../internals/to-length"),v=t("../internals/to-integer"),m=t("../internals/array-species-create");h({target:"Array",proto:!0},{flat:function(){var n=arguments.length?arguments[0]:void 0,i=l(this),s=d(i.length),a=m(i,0);return a.length=y(a,i,i,s,0,n===void 0?1:v(n)),a}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],160:[function(y,M,j){var h=y("../internals/export"),y=y("../internals/array-for-each");h({target:"Array",proto:!0,forced:[].forEach!=y},{forEach:y})},{"../internals/array-for-each":16,"../internals/export":50}],161:[function(t,M,j){var h=t("../internals/export"),y=t("../internals/array-from");h({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(l){Array.from(l)})},{from:y})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],162:[function(t,M,j){var h=t("../internals/export"),y=t("../internals/array-includes").includes,l=t("../internals/add-to-unscopables");h({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(d){return y(this,d,1<arguments.length?arguments[1]:void 0)}}),l("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],163:[function(m,M,j){var h=m("../internals/export"),y=m("../internals/array-includes").indexOf,v=m("../internals/array-method-is-strict"),m=m("../internals/array-method-uses-to-length"),l=[].indexOf,d=!!l&&1/[1].indexOf(1,-0)<0,v=v("indexOf"),m=m("indexOf",{ACCESSORS:!0,1:0});h({target:"Array",proto:!0,forced:d||!v||!m},{indexOf:function(n){return d?l.apply(this,arguments)||0:y(this,n,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(v,M,j){var h=v("../internals/to-indexed-object"),y=v("../internals/add-to-unscopables"),l=v("../internals/iterators"),d=v("../internals/internal-state"),v=v("../internals/define-iterator"),m="Array Iterator",n=d.set,i=d.getterFor(m);M.exports=v(Array,"Array",function(s,a){n(this,{type:m,target:h(s),index:0,kind:a})},function(){var s=i(this),a=s.target,c=s.kind,r=s.index++;return!a||r>=a.length?{value:s.target=void 0,done:!0}:c=="keys"?{value:r,done:!1}:c=="values"?{value:a[r],done:!1}:{value:[r,a[r]],done:!1}},"values"),l.Arguments=l.Array,y("keys"),y("values"),y("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":135}],165:[function(v,M,j){var h=v("../internals/export"),d=v("../internals/indexed-object"),y=v("../internals/to-indexed-object"),v=v("../internals/array-method-is-strict"),l=[].join,d=d!=Object,v=v("join",",");h({target:"Array",proto:!0,forced:d||!v},{join:function(m){return l.call(y(this),m===void 0?",":m)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":135}],166:[function(y,M,j){var h=y("../internals/export"),y=y("../internals/array-last-index-of");h({target:"Array",proto:!0,forced:y!==[].lastIndexOf},{lastIndexOf:y})},{"../internals/array-last-index-of":20,"../internals/export":50}],167:[function(d,M,j){var h=d("../internals/export"),y=d("../internals/array-iteration").map,l=d("../internals/array-method-has-species-support"),d=d("../internals/array-method-uses-to-length"),l=l("map"),d=d("map");h({target:"Array",proto:!0,forced:!l||!d},{map:function(v){return y(this,v,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],168:[function(a,M,j){var h=a("../internals/export"),y=a("../internals/is-object"),l=a("../internals/is-array"),d=a("../internals/to-absolute-index"),v=a("../internals/to-length"),m=a("../internals/to-indexed-object"),n=a("../internals/create-property"),i=a("../internals/well-known-symbol"),s=a("../internals/array-method-has-species-support"),a=a("../internals/array-method-uses-to-length"),s=s("slice"),a=a("slice",{ACCESSORS:!0,0:0,1:2}),c=i("species"),r=[].slice,u=Math.max;h({target:"Array",proto:!0,forced:!s||!a},{slice:function(p,g){var S,P,E,T=m(this),O=v(T.length),R=d(p,O),k=d(g===void 0?O:g,O);if(l(T)&&((S=typeof(S=T.constructor)=="function"&&(S===Array||l(S.prototype))||y(S)&&(S=S[c])===null?void 0:S)===Array||S===void 0))return r.call(T,R,k);for(P=new(S===void 0?Array:S)(u(k-R,0)),E=0;R<k;R++,E++)R in T&&n(P,E,T[R]);return P.length=E,P}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137,"../internals/well-known-symbol":149}],169:[function(d,M,j){var h=d("../internals/export"),y=d("../internals/array-iteration").some,l=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),l=l("some"),d=d("some");h({target:"Array",proto:!0,forced:!l||!d},{some:function(v){return y(this,v,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],170:[function(s,M,j){var h=s("../internals/export"),y=s("../internals/to-absolute-index"),l=s("../internals/to-integer"),d=s("../internals/to-length"),v=s("../internals/to-object"),m=s("../internals/array-species-create"),n=s("../internals/create-property"),i=s("../internals/array-method-has-species-support"),s=s("../internals/array-method-uses-to-length"),i=i("splice"),s=s("splice",{ACCESSORS:!0,0:0,1:2}),a=Math.max,c=Math.min;h({target:"Array",proto:!0,forced:!i||!s},{splice:function(D,u){var p,g,S,P,E,T,O=v(this),R=d(O.length),k=y(D,R),D=arguments.length;if(D===0?p=g=0:g=D===1?(p=0,R-k):(p=D-2,c(a(l(u),0),R-k)),9007199254740991<R+p-g)throw TypeError("Maximum allowed length exceeded");for(S=m(O,g),P=0;P<g;P++)(E=k+P)in O&&n(S,P,O[E]);if(p<(S.length=g)){for(P=k;P<R-g;P++)T=P+p,(E=P+g)in O?O[T]=O[E]:delete O[T];for(P=R;R-g+p<P;P--)delete O[P-1]}else if(g<p)for(P=R-g;k<P;P--)T=P+p-1,(E=P+g-1)in O?O[T]=O[E]:delete O[T];for(P=0;P<p;P++)O[P+k]=arguments[P+2];return O.length=R-g+p,S}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":133,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],171:[function(t,M,j){t("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],172:[function(t,M,j){t("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],173:[function(y,M,j){var h=y("../internals/descriptors"),y=y("../internals/object-define-property").f,l=Function.prototype,d=l.toString,v=/^\s*function ([^ (]*)/;!h||"name"in l||y(l,"name",{configurable:!0,get:function(){try{return d.call(this).match(v)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],174:[function(y,M,j){var h=y("../internals/collection"),y=y("../internals/collection-strong");M.exports=h("Map",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},y)},{"../internals/collection":32,"../internals/collection-strong":30}],175:[function(h,M,j){var h=h("../internals/export"),y=Math.hypot,l=Math.abs,d=Math.sqrt;h({target:"Math",stat:!0,forced:!!y&&y(1/0,NaN)!==1/0},{hypot:function(v,m){for(var n,i,s=0,a=0,c=arguments.length,r=0;a<c;)r<(n=l(arguments[a++]))?(s=s*(i=r/n)*i+1,r=n):s+=0<n?(i=n/r)*i:n;return r===1/0?1/0:r*d(s)}})},{"../internals/export":50}],176:[function(h,M,j){var h=h("../internals/export"),y=Math.log,l=Math.LN2;h({target:"Math",stat:!0},{log2:function(d){return y(d)/l}})},{"../internals/export":50}],177:[function(t,M,j){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],178:[function(t,M,j){function h(L){var U,F,V,X,H,G,K,Z=s(L,!1);if(typeof Z=="string"&&2<Z.length){if((L=(Z=g(Z)).charCodeAt(0))===43||L===45){if((U=Z.charCodeAt(2))===88||U===120)return NaN}else if(L===48){switch(Z.charCodeAt(1)){case 66:case 98:F=2,V=49;break;case 79:case 111:F=8,V=55;break;default:return+Z}for(H=(X=Z.slice(2)).length,G=0;G<H;G++)if((K=X.charCodeAt(G))<48||V<K)return NaN;return parseInt(X,F)}}return+Z}var y=t("../internals/descriptors"),l=t("../internals/global"),d=t("../internals/is-forced"),v=t("../internals/redefine"),m=t("../internals/has"),n=t("../internals/classof-raw"),i=t("../internals/inherit-if-required"),s=t("../internals/to-primitive"),a=t("../internals/fails"),c=t("../internals/object-create"),r=t("../internals/object-get-own-property-names").f,u=t("../internals/object-get-own-property-descriptor").f,p=t("../internals/object-define-property").f,g=t("../internals/string-trim").trim,S="Number",P=l[S],E=P.prototype,T=n(c(E))==S;if(d(S,!P(" 0o1")||!P("0b1")||P("+0x1"))){for(var O,R=function(U){var U=arguments.length<1?0:U,F=this;return F instanceof R&&(T?a(function(){E.valueOf.call(F)}):n(F)!=S)?i(new P(h(U)),F,R):h(U)},k=y?r(P):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),D=0;k.length>D;D++)m(P,O=k[D])&&!m(R,O)&&p(R,O,u(P,O));(R.prototype=E).constructor=R,v(l,S,R)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/string-trim":130,"../internals/to-primitive":141}],179:[function(t,M,j){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],180:[function(m,M,j){function h(s,a,c){return a===0?c:a%2==1?h(s,a-1,c*s):h(s*s,a/2,c)}var y=m("../internals/export"),l=m("../internals/to-integer"),d=m("../internals/this-number-value"),v=m("../internals/string-repeat"),m=m("../internals/fails"),n=1 .toFixed,i=Math.floor;y({target:"Number",proto:!0,forced:n&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!m(function(){n.call({})})},{toFixed:function(S){function a(O,R){for(var k=-1,D=R;++k<6;)D+=O*P[k],P[k]=D%1e7,D=i(D/1e7)}function c(O){for(var R=6,k=0;0<=--R;)k+=P[R],P[R]=i(k/O),k=k%O*1e7}function r(){for(var O,R=6,k="";0<=--R;)k===""&&R!==0&&P[R]===0||(O=String(P[R]),k=k===""?O:k+v.call("0",7-O.length)+O);return k}var u,p,g=d(this),S=l(S),P=[0,0,0,0,0,0],E="",T="0";if(S<0||20<S)throw RangeError("Incorrect fraction digits");if(g!=g)return"NaN";if(g<=-1e21||1e21<=g)return String(g);if(g<0&&(E="-",g=-g),1e-21<g)if(g=(u=function(O){for(var R=0,k=O;4096<=k;)R+=12,k/=4096;for(;2<=k;)R+=1,k/=2;return R}(g*h(2,69,1))-69)<0?g*h(2,-u,1):g/h(2,u,1),g*=4503599627370496,0<(u=52-u)){for(a(0,g),p=S;7<=p;)a(1e7,0),p-=7;for(a(h(10,p,1),0),p=u-1;23<=p;)c(1<<23),p-=23;c(1<<p),a(1,1),c(2),T=r()}else a(0,g),a(1<<-u,0),T=r()+v.call("0",S);return T=0<S?E+((g=T.length)<=S?"0."+v.call("0",S-g)+T:T.slice(0,g-S)+"."+T.slice(g-S)):E+T}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":128,"../internals/this-number-value":132,"../internals/to-integer":136}],181:[function(y,M,j){var h=y("../internals/export"),y=y("../internals/object-assign");h({target:"Object",stat:!0,forced:Object.assign!==y},{assign:y})},{"../internals/export":50,"../internals/object-assign":90}],182:[function(t,M,j){var h=t("../internals/export"),y=t("../internals/iterate"),l=t("../internals/create-property");h({target:"Object",stat:!0},{fromEntries:function(d){var v={};return y(d,function(m,n){l(v,m,n)},void 0,!0),v}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],183:[function(d,M,j){var h=d("../internals/export"),v=d("../internals/fails"),y=d("../internals/to-indexed-object"),l=d("../internals/object-get-own-property-descriptor").f,d=d("../internals/descriptors"),v=v(function(){l(1)});h({target:"Object",stat:!0,forced:!d||v,sham:!d},{getOwnPropertyDescriptor:function(m,n){return l(y(m),n)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":135}],184:[function(l,M,j){var h=l("../internals/export"),y=l("../internals/fails"),l=l("../internals/object-get-own-property-names-external").f;h({target:"Object",stat:!0,forced:y(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:l})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],185:[function(v,M,j){var h=v("../internals/export"),y=v("../internals/fails"),l=v("../internals/to-object"),d=v("../internals/object-get-prototype-of"),v=v("../internals/correct-prototype-getter");h({target:"Object",stat:!0,forced:y(function(){d(1)}),sham:!v},{getPrototypeOf:function(m){return d(l(m))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":138}],186:[function(t,M,j){var h=t("../internals/export"),y=t("../internals/to-object"),l=t("../internals/object-keys");h({target:"Object",stat:!0,forced:t("../internals/fails")(function(){l(1)})},{keys:function(d){return l(y(d))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":138}],187:[function(l,M,j){var h=l("../internals/to-string-tag-support"),y=l("../internals/redefine"),l=l("../internals/object-to-string");h||y(Object.prototype,"toString",l,{unsafe:!0})},{"../internals/object-to-string":103,"../internals/redefine":109,"../internals/to-string-tag-support":142}],188:[function(Se,M,j){var h,y,l,d,v=Se("../internals/export"),m=Se("../internals/is-pure"),n=Se("../internals/global"),i=Se("../internals/get-built-in"),s=Se("../internals/native-promise-constructor"),a=Se("../internals/redefine"),c=Se("../internals/redefine-all"),r=Se("../internals/set-to-string-tag"),u=Se("../internals/set-species"),p=Se("../internals/is-object"),g=Se("../internals/a-function"),S=Se("../internals/an-instance"),P=Se("../internals/classof-raw"),E=Se("../internals/inspect-source"),T=Se("../internals/iterate"),O=Se("../internals/check-correctness-of-iteration"),R=Se("../internals/species-constructor"),k=Se("../internals/task").set,D=Se("../internals/microtask"),L=Se("../internals/promise-resolve"),U=Se("../internals/host-report-errors"),F=Se("../internals/new-promise-capability"),V=Se("../internals/perform"),X=Se("../internals/internal-state"),H=Se("../internals/is-forced"),Fe=Se("../internals/well-known-symbol"),G=Se("../internals/engine-v8-version"),K=Fe("species"),Z="Promise",oe=X.get,x=X.set,I=X.getterFor(Z),B=s,W=n.TypeError,$=n.document,te=n.process,ie=i("fetch"),de=F.f,se=de,he=P(te)=="process",ce=!!($&&$.createEvent&&n.dispatchEvent),ee="unhandledrejection",ue="rejectionhandled",me=1,je=2,ye=1,be=2,Se=H(Z,function(){var Le,Ee;return E(B)===String(B)&&(G===66||!he&&typeof PromiseRejectionEvent!="function")?!0:!(!m||B.prototype.finally)||!(51<=G&&/native code/.test(B))&&(Ee=function(Q){Q(function(){},function(){})},((Le=B.resolve(1)).constructor={})[K]=Ee,!(Le.then(function(){})instanceof Ee))}),Fe=Se||!O(function(Le){B.all(Le).catch(function(){})}),Me=function(Le){var Ee;return!(!p(Le)||typeof(Ee=Le.then)!="function")&&Ee},Ze=function(Le,Ee,Q){var re;Ee.notified||(Ee.notified=!0,re=Ee.reactions,D(function(){for(var Y,ne,ge=Ee.value,xe=Ee.state==me,Oe=0;re.length>Oe;){var Ue,Be,Ve,Xe=re[Oe++],st=xe?Xe.ok:Xe.fail,nt=Xe.resolve,Qe=Xe.reject,ot=Xe.domain;try{st?(xe||(Ee.rejection===be&&function(rt,wt){k.call(n,function(){he?te.emit("rejectionHandled",rt):Ge(ue,rt,wt.value)})}(Le,Ee),Ee.rejection=ye),st===!0?Ue=ge:(ot&&ot.enter(),Ue=st(ge),ot&&(ot.exit(),Ve=!0)),Ue===Xe.promise?Qe(W("Promise-chain cycle")):(Be=Me(Ue))?Be.call(Ue,nt,Qe):nt(Ue)):Qe(ge)}catch(rt){ot&&!Ve&&ot.exit(),Qe(rt)}}Ee.reactions=[],Ee.notified=!1,Q&&!Ee.rejection&&(Y=Le,ne=Ee,k.call(n,function(){var rt=ne.value,wt=ze(ne);if(wt&&(wt=V(function(){he?te.emit("unhandledRejection",rt,Y):Ge(ee,Y,rt)}),ne.rejection=he||ze(ne)?be:ye,wt.error))throw wt.value}))}))},Ge=function(Le,Ee,Q){var re;ce?((re=$.createEvent("Event")).promise=Ee,re.reason=Q,re.initEvent(Le,!1,!0),n.dispatchEvent(re)):re={promise:Ee,reason:Q},(Ee=n["on"+Le])?Ee(re):Le===ee&&U("Unhandled promise rejection",Q)},ze=function(Le){return Le.rejection!==ye&&!Le.parent},qe=function(Le,Ee,Q,re){return function(Y){Le(Ee,Q,Y,re)}},He=function(Le,Ee,Q,re){Ee.done||(Ee.done=!0,(Ee=re||Ee).value=Q,Ee.state=je,Ze(Le,Ee,!0))},_e=function(Le,Ee,Q,re){if(!Ee.done){Ee.done=!0,re&&(Ee=re);try{if(Le===Q)throw W("Promise can't be resolved itself");var Y=Me(Q);Y?D(function(){var ne={done:!1};try{Y.call(Q,qe(_e,Le,ne,Ee),qe(He,Le,ne,Ee))}catch(ge){He(Le,ne,ge,Ee)}}):(Ee.value=Q,Ee.state=me,Ze(Le,Ee,!1))}catch(ne){He(Le,{done:!1},ne,Ee)}}};Se&&(B=function(Le){S(this,B,Z),g(Le),h.call(this);var Ee=oe(this);try{Le(qe(_e,this,Ee),qe(He,this,Ee))}catch(Q){He(this,Ee,Q)}},(h=function(Le){x(this,{type:Z,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=c(B.prototype,{then:function(Le,Ee){var Q=I(this),re=de(R(this,B));return re.ok=typeof Le!="function"||Le,re.fail=typeof Ee=="function"&&Ee,re.domain=he?te.domain:void 0,Q.parent=!0,Q.reactions.push(re),Q.state!=0&&Ze(this,Q,!1),re.promise},catch:function(Le){return this.then(void 0,Le)}}),y=function(){var Le=new h,Ee=oe(Le);this.promise=Le,this.resolve=qe(_e,Le,Ee),this.reject=qe(He,Le,Ee)},F.f=de=function(Le){return Le===B||Le===l?new y:se(Le)},m||typeof s!="function"||(d=s.prototype.then,a(s.prototype,"then",function(Le,Ee){var Q=this;return new B(function(re,Y){d.call(Q,re,Y)}).then(Le,Ee)},{unsafe:!0}),typeof ie=="function"&&v({global:!0,enumerable:!0,forced:!0},{fetch:function(Le){return L(B,ie.apply(n,arguments))}}))),v({global:!0,wrap:!0,forced:Se},{Promise:B}),r(B,Z,!1,!0),u(Z),l=i(Z),v({target:Z,stat:!0,forced:Se},{reject:function(Le){var Ee=de(this);return Ee.reject.call(void 0,Le),Ee.promise}}),v({target:Z,stat:!0,forced:m||Se},{resolve:function(Le){return L(m&&this===l?B:this,Le)}}),v({target:Z,stat:!0,forced:Fe},{all:function(Le){var Ee=this,Q=de(Ee),re=Q.resolve,Y=Q.reject,ne=V(function(){var ge=g(Ee.resolve),xe=[],Oe=0,Ue=1;T(Le,function(Be){var Ve=Oe++,Xe=!1;xe.push(void 0),Ue++,ge.call(Ee,Be).then(function(st){Xe||(Xe=!0,xe[Ve]=st,--Ue||re(xe))},Y)}),--Ue||re(xe)});return ne.error&&Y(ne.value),Q.promise},race:function(Le){var Ee=this,Q=de(Ee),re=Q.reject,Y=V(function(){var ne=g(Ee.resolve);T(Le,function(ge){ne.call(Ee,ge).then(Q.resolve,re)})});return Y.error&&re(Y.value),Q.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":106,"../internals/promise-resolve":107,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-species":117,"../internals/set-to-string-tag":118,"../internals/species-constructor":122,"../internals/task":131,"../internals/well-known-symbol":149}],189:[function(n,M,j){var h=n("../internals/export"),c=n("../internals/get-built-in"),y=n("../internals/a-function"),l=n("../internals/an-object"),d=n("../internals/is-object"),v=n("../internals/object-create"),m=n("../internals/function-bind"),n=n("../internals/fails"),i=c("Reflect","construct"),s=n(function(){function r(){}return!(i(function(){},[],r)instanceof r)}),a=!n(function(){i(function(){})}),c=s||a;h({target:"Reflect",stat:!0,forced:c,sham:c},{construct:function(r,u){y(r),l(u);var p=arguments.length<3?r:y(arguments[2]);if(a&&!s)return i(r,u,p);if(r==p){switch(u.length){case 0:return new r;case 1:return new r(u[0]);case 2:return new r(u[0],u[1]);case 3:return new r(u[0],u[1],u[2]);case 4:return new r(u[0],u[1],u[2],u[3])}var g=[null];return g.push.apply(g,u),new(m.apply(r,g))}return g=p.prototype,p=v(d(g)?g:Object.prototype),g=Function.apply.call(r,p,u),d(g)?g:p}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],190:[function(t,M,j){var h=t("../internals/export"),y=t("../internals/is-object"),l=t("../internals/an-object"),d=t("../internals/has"),v=t("../internals/object-get-own-property-descriptor"),m=t("../internals/object-get-prototype-of");h({target:"Reflect",stat:!0},{get:function n(i,s){var a,c=arguments.length<3?i:arguments[2];return l(i)===c?i[s]:(a=v.f(i,s))?d(a,"value")?a.value:a.get===void 0?void 0:a.get.call(c):y(a=m(i))?n(a,s,c):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],191:[function(t,M,j){var h=t("../internals/descriptors"),y=t("../internals/global"),l=t("../internals/is-forced"),d=t("../internals/inherit-if-required"),v=t("../internals/object-define-property").f,m=t("../internals/object-get-own-property-names").f,n=t("../internals/is-regexp"),i=t("../internals/regexp-flags"),s=t("../internals/regexp-sticky-helpers"),a=t("../internals/redefine"),c=t("../internals/fails"),r=t("../internals/internal-state").set,u=t("../internals/set-species"),p=t("../internals/well-known-symbol")("match"),g=y.RegExp,S=g.prototype,P=/a/g,E=/a/g,T=new g(P)!==P,O=s.UNSUPPORTED_Y;if(h&&l("RegExp",!T||O||c(function(){return E[p]=!1,g(P)!=P||g(E)==E||g(P,"i")!="/a/i"}))){for(var R=function(L,U){var F,V=this instanceof R,X=n(L),H=U===void 0;return!V&&X&&L.constructor===R&&H?L:(T?X&&!H&&(L=L.source):L instanceof R&&(H&&(U=i.call(L)),L=L.source),O&&(F=!!U&&-1<U.indexOf("y"))&&(U=U.replace(/y/g,"")),X=d(T?new g(L,U):g(L,U),V?this:S,R),O&&F&&r(X,{sticky:F}),X)},k=m(g),D=0;k.length>D;)(function(L){L in R||v(R,L,{configurable:!0,get:function(){return g[L]},set:function(U){g[L]=U}})})(k[D++]);(S.constructor=R).prototype=S,a(y,"RegExp",R)}u("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/regexp-flags":112,"../internals/regexp-sticky-helpers":113,"../internals/set-species":117,"../internals/well-known-symbol":149}],192:[function(y,M,j){var h=y("../internals/export"),y=y("../internals/regexp-exec");h({target:"RegExp",proto:!0,forced:/./.exec!==y},{exec:y})},{"../internals/export":50,"../internals/regexp-exec":111}],193:[function(d,M,j){var h=d("../internals/redefine"),y=d("../internals/an-object"),n=d("../internals/fails"),l=d("../internals/regexp-flags"),d="toString",v=RegExp.prototype,m=v[d],n=n(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),i=m.name!=d;(n||i)&&h(RegExp.prototype,d,function(){var s=y(this),a=String(s.source),c=s.flags;return"/"+a+"/"+String(c===void 0&&s instanceof RegExp&&!("flags"in v)?l.call(s):c)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-flags":112}],194:[function(y,M,j){var h=y("../internals/collection"),y=y("../internals/collection-strong");M.exports=h("Set",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},y)},{"../internals/collection":32,"../internals/collection-strong":30}],195:[function(m,M,j){var h=m("../internals/export"),y=m("../internals/object-get-own-property-descriptor").f,l=m("../internals/to-length"),d=m("../internals/not-a-regexp"),v=m("../internals/require-object-coercible"),s=m("../internals/correct-is-regexp-logic"),m=m("../internals/is-pure"),n="".endsWith,i=Math.min,s=s("endsWith");h({target:"String",proto:!0,forced:!!(m||s||!(h=y(String.prototype,"endsWith"))||h.writable)&&!s},{endsWith:function(a){var c=String(v(this)),r=(d(a),1<arguments.length?arguments[1]:void 0),u=l(c.length),r=r===void 0?u:i(l(r),u),u=String(a);return n?n.call(c,u,r):c.slice(r-u.length,r)===u}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],196:[function(t,M,j){var h=t("../internals/export"),y=t("../internals/not-a-regexp"),l=t("../internals/require-object-coercible");h({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(d){return!!~String(l(this)).indexOf(y(d),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":114}],197:[function(l,M,j){var h=l("../internals/string-multibyte").charAt,y=l("../internals/internal-state"),l=l("../internals/define-iterator"),d="String Iterator",v=y.set,m=y.getterFor(d);l(String,"String",function(n){v(this,{type:d,string:String(n),index:0})},function(){var n=m(this),i=n.string,s=n.index;return s>=i.length?{value:void 0,done:!0}:(i=h(i,s),n.index+=i.length,{value:i,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":124}],198:[function(t,M,j){var h=t("../internals/fix-regexp-well-known-symbol-logic"),y=t("../internals/an-object"),l=t("../internals/to-length"),d=t("../internals/require-object-coercible"),v=t("../internals/advance-string-index"),m=t("../internals/regexp-exec-abstract");h("match",1,function(n,i,s){return[function(a){var c=d(this),r=a==null?void 0:a[n];return r!==void 0?r.call(a,c):new RegExp(a)[n](String(c))},function(a){var c=s(i,a,this);if(c.done)return c.value;var r=y(a),u=String(this);if(!r.global)return m(r,u);for(var p=r.unicode,g=[],S=r.lastIndex=0;(P=m(r,u))!==null;){var P=String(P[0]);(g[S]=P)===""&&(r.lastIndex=v(u,l(r.lastIndex),p)),S++}return S===0?null:g}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-length":137}],199:[function(t,M,j){var h=t("../internals/export"),y=t("../internals/string-pad").start;h({target:"String",proto:!0,forced:t("../internals/string-pad-webkit-bug")},{padStart:function(l){return y(this,l,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":126,"../internals/string-pad-webkit-bug":125}],200:[function(t,M,j){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":128}],201:[function(t,M,j){var h=t("../internals/fix-regexp-well-known-symbol-logic"),y=t("../internals/an-object"),l=t("../internals/to-object"),d=t("../internals/to-length"),v=t("../internals/to-integer"),m=t("../internals/require-object-coercible"),n=t("../internals/advance-string-index"),i=t("../internals/regexp-exec-abstract"),s=Math.max,a=Math.min,c=Math.floor,r=/\$([$&'`]|\d\d?|<[^>]*>)/g,u=/\$([$&'`]|\d\d?)/g;h("replace",2,function(p,g,S,P){var E=P.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,T=P.REPLACE_KEEPS_$0,O=E?"$":"$0";return[function(R,k){var D=m(this),L=R==null?void 0:R[p];return L!==void 0?L.call(R,D,k):g.call(String(D),R,k)},function(R,k){if(!E&&T||typeof k=="string"&&k.indexOf(O)===-1){var D=S(g,R,this,k);if(D.done)return D.value}for(var L,U=y(R),F=String(this),V=typeof k=="function",X=(V||(k=String(k)),U.global),H=(X&&(L=U.unicode,U.lastIndex=0),[]);(x=i(U,F))!==null&&(H.push(x),X);)String(x[0])===""&&(U.lastIndex=n(F,d(U.lastIndex),L));for(var G,K="",Z=0,oe=0;oe<H.length;oe++){for(var x=H[oe],I=String(x[0]),B=s(a(v(x.index),F.length),0),W=[],$=1;$<x.length;$++)W.push((G=x[$])===void 0?G:String(G));var te=x.groups,ie=V?(ie=[I].concat(W,B,F),te!==void 0&&ie.push(te),String(k.apply(void 0,ie))):function(de,se,he,ce,ee,ue){var me=he+de.length,je=ce.length,ye=u;return ee!==void 0&&(ee=l(ee),ye=r),g.call(ue,ye,function(be,Se){var Fe;switch(Se.charAt(0)){case"$":return"$";case"&":return de;case"`":return se.slice(0,he);case"'":return se.slice(me);case"<":Fe=ee[Se.slice(1,-1)];break;default:var Me,Ze=+Se;if(Ze==0)return be;if(je<Ze)return(Me=c(Ze/10))!==0&&Me<=je?ce[Me-1]===void 0?Se.charAt(1):ce[Me-1]+Se.charAt(1):be;Fe=ce[Ze-1]}return Fe===void 0?"":Fe})}(I,F,B,W,te,k);Z<=B&&(K+=F.slice(Z,B)+ie,Z=B+I.length)}return K+F.slice(Z)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],202:[function(t,M,j){var h=t("../internals/fix-regexp-well-known-symbol-logic"),y=t("../internals/an-object"),l=t("../internals/require-object-coercible"),d=t("../internals/same-value"),v=t("../internals/regexp-exec-abstract");h("search",1,function(m,n,i){return[function(s){var a=l(this),c=s==null?void 0:s[m];return c!==void 0?c.call(s,a):new RegExp(s)[m](String(a))},function(s){var a,c=i(n,s,this);return c.done?c.value:(c=y(s),s=String(this),a=c.lastIndex,d(a,0)||(c.lastIndex=0),s=v(c,s),d(c.lastIndex,a)||(c.lastIndex=a),s===null?-1:s.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/same-value":115}],203:[function(a,M,j){var h=a("../internals/fix-regexp-well-known-symbol-logic"),y=a("../internals/is-regexp"),l=a("../internals/an-object"),d=a("../internals/require-object-coercible"),v=a("../internals/species-constructor"),m=a("../internals/advance-string-index"),n=a("../internals/to-length"),i=a("../internals/regexp-exec-abstract"),s=a("../internals/regexp-exec"),a=a("../internals/fails"),c=[].push,r=Math.min,u=4294967295,p=!a(function(){return!RegExp(u,"y")});h("split",2,function(g,S,P){var E="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(T,O){var R=String(d(this)),k=O===void 0?u:O>>>0;if(k==0)return[];if(T===void 0)return[R];if(!y(T))return S.call(R,T,k);for(var D,L,U,F=[],O=(T.ignoreCase?"i":"")+(T.multiline?"m":"")+(T.unicode?"u":"")+(T.sticky?"y":""),V=0,X=new RegExp(T.source,O+"g");(D=s.call(X,R))&&!(V<(L=X.lastIndex)&&(F.push(R.slice(V,D.index)),1<D.length&&D.index<R.length&&c.apply(F,D.slice(1)),U=D[0].length,V=L,F.length>=k));)X.lastIndex===D.index&&X.lastIndex++;return V===R.length?!U&&X.test("")||F.push(""):F.push(R.slice(V)),F.length>k?F.slice(0,k):F}:"0".split(void 0,0).length?function(T,O){return T===void 0&&O===0?[]:S.call(this,T,O)}:S;return[function(T,O){var R=d(this),k=T==null?void 0:T[g];return k!==void 0?k.call(T,R,O):E.call(String(R),T,O)},function(D,O){var R=P(E,D,this,O,E!==S);if(R.done)return R.value;var R=l(D),k=String(this),D=v(R,RegExp),L=R.unicode,U=(R.ignoreCase?"i":"")+(R.multiline?"m":"")+(R.unicode?"u":"")+(p?"y":"g"),F=new D(p?R:"^(?:"+R.source+")",U),V=O===void 0?u:O>>>0;if(V==0)return[];if(k.length===0)return i(F,k)===null?[k]:[];for(var X=0,H=0,G=[];H<k.length;){F.lastIndex=p?H:0;var K,Z=i(F,p?k:k.slice(H));if(Z===null||(K=r(n(F.lastIndex+(p?0:H)),k.length))===X)H=m(k,H,L);else{if(G.push(k.slice(X,H)),G.length===V)return G;for(var oe=1;oe<=Z.length-1;oe++)if(G.push(Z[oe]),G.length===V)return G;H=X=K}}return G.push(k.slice(X)),G}]},!p)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":111,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/species-constructor":122,"../internals/to-length":137}],204:[function(m,M,j){var h=m("../internals/export"),y=m("../internals/object-get-own-property-descriptor").f,l=m("../internals/to-length"),d=m("../internals/not-a-regexp"),v=m("../internals/require-object-coercible"),s=m("../internals/correct-is-regexp-logic"),m=m("../internals/is-pure"),n="".startsWith,i=Math.min,s=s("startsWith");h({target:"String",proto:!0,forced:!!(m||s||!(h=y(String.prototype,"startsWith"))||h.writable)&&!s},{startsWith:function(u){var c=String(v(this)),r=(d(u),l(i(1<arguments.length?arguments[1]:void 0,c.length))),u=String(u);return n?n.call(c,u,r):c.slice(r,r+u.length)===u}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],205:[function(t,M,j){var h=t("../internals/export"),y=t("../internals/create-html");h({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return y(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":123}],206:[function(t,M,j){var h=t("../internals/export"),y=t("../internals/string-trim").trim;h({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return y(this)}})},{"../internals/export":50,"../internals/string-trim":130,"../internals/string-trim-forced":129}],207:[function(r,M,j){var h,y,l,d,v,m=r("../internals/export"),n=r("../internals/descriptors"),i=r("../internals/global"),s=r("../internals/has"),a=r("../internals/is-object"),c=r("../internals/object-define-property").f,r=r("../internals/copy-constructor-properties"),u=i.Symbol;!n||typeof u!="function"||"description"in u.prototype&&u().description===void 0||(h={},r(y=function(){var p=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),g=this instanceof y?new u(p):p===void 0?u():u(p);return p===""&&(h[g]=!0),g},u),(i=y.prototype=u.prototype).constructor=y,l=i.toString,d=String(u("test"))=="Symbol(test)",v=/^Symbol\((.*)\)[^)]+$/,c(i,"description",{configurable:!0,get:function(){var p=a(this)?this.valueOf():this,g=l.call(p);return s(h,p)?"":(p=d?g.slice(7,-1):g.replace(v,"$1"))===""?void 0:p}}),m({global:!0,forced:!0},{Symbol:y}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],208:[function(t,M,j){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],209:[function(se,M,j){function h(Y,ne){var ge=Fe[Y]=R(ue[de]);return he(ge,{type:ie,tag:Y,description:ne}),s||(ge.description=ne),ge}function y(Y,xe){S(Y);var ge=E(xe),xe=k(ge).concat(re(ge));return $(xe,function(Oe){s&&!Q.call(ge,Oe)||Ee(Y,Oe,ge[Oe])}),Y}function l(xe,Oe){var ge,xe=E(xe),Oe=T(Oe,!0);if(xe!==ee||!u(Fe,Oe)||u(Me,Oe))return!(ge=je(xe,Oe))||!u(Fe,Oe)||u(xe,te)&&xe[te][Oe]||(ge.enumerable=!0),ge}function d(ne){var ne=be(E(ne)),ge=[];return $(ne,function(xe){u(Fe,xe)||u(Z,xe)||ge.push(xe)}),ge}var v=se("../internals/export"),m=se("../internals/global"),n=se("../internals/get-built-in"),i=se("../internals/is-pure"),s=se("../internals/descriptors"),a=se("../internals/native-symbol"),c=se("../internals/use-symbol-as-uid"),r=se("../internals/fails"),u=se("../internals/has"),p=se("../internals/is-array"),g=se("../internals/is-object"),S=se("../internals/an-object"),P=se("../internals/to-object"),E=se("../internals/to-indexed-object"),T=se("../internals/to-primitive"),O=se("../internals/create-property-descriptor"),R=se("../internals/object-create"),k=se("../internals/object-keys"),D=se("../internals/object-get-own-property-names"),L=se("../internals/object-get-own-property-names-external"),U=se("../internals/object-get-own-property-symbols"),F=se("../internals/object-get-own-property-descriptor"),V=se("../internals/object-define-property"),X=se("../internals/object-property-is-enumerable"),H=se("../internals/create-non-enumerable-property"),G=se("../internals/redefine"),K=se("../internals/shared"),ze=se("../internals/shared-key"),Z=se("../internals/hidden-keys"),oe=se("../internals/uid"),x=se("../internals/well-known-symbol"),I=se("../internals/well-known-symbol-wrapped"),B=se("../internals/define-well-known-symbol"),W=se("../internals/set-to-string-tag"),qe=se("../internals/internal-state"),$=se("../internals/array-iteration").forEach,te=ze("hidden"),ie="Symbol",de="prototype",se=x("toPrimitive"),he=qe.set,ce=qe.getterFor(ie),ee=Object[de],ue=m.Symbol,me=n("JSON","stringify"),je=F.f,ye=V.f,be=L.f,Se=X.f,Fe=K("symbols"),Me=K("op-symbols"),Ze=K("string-to-symbol-registry"),Ge=K("symbol-to-string-registry"),ze=K("wks"),qe=m.QObject,He=!qe||!qe[de]||!qe[de].findChild,_e=s&&r(function(){return R(ye({},"a",{get:function(){return ye(this,"a",{value:7}).a}})).a!=7})?function(Y,ne,ge){var xe=je(ee,ne);xe&&delete ee[ne],ye(Y,ne,ge),xe&&Y!==ee&&ye(ee,ne,xe)}:ye,Le=c?function(Y){return typeof Y=="symbol"}:function(Y){return Object(Y)instanceof ue},Ee=function(Y,ne,ge){return Y===ee&&Ee(Me,ne,ge),S(Y),ne=T(ne,!0),S(ge),(u(Fe,ne)?(ge.enumerable?(u(Y,te)&&Y[te][ne]&&(Y[te][ne]=!1),ge=R(ge,{enumerable:O(0,!1)})):(u(Y,te)||ye(Y,te,O(1,{})),Y[te][ne]=!0),_e):ye)(Y,ne,ge)},Q=function(ne){var ne=T(ne,!0),ge=Se.call(this,ne);return!(this===ee&&u(Fe,ne)&&!u(Me,ne))&&(!(ge||!u(this,ne)||!u(Fe,ne)||u(this,te)&&this[te][ne])||ge)},re=function(ge){var ne=ge===ee,ge=be(ne?Me:E(ge)),xe=[];return $(ge,function(Oe){!u(Fe,Oe)||ne&&!u(ee,Oe)||xe.push(Fe[Oe])}),xe};a||(G((ue=function(){if(this instanceof ue)throw TypeError("Symbol is not a constructor");var Y=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,ne=oe(Y),ge=function(xe){this===ee&&ge.call(Me,xe),u(this,te)&&u(this[te],ne)&&(this[te][ne]=!1),_e(this,ne,O(1,xe))};return s&&He&&_e(ee,ne,{configurable:!0,set:ge}),h(ne,Y)})[de],"toString",function(){return ce(this).tag}),G(ue,"withoutSetter",function(Y){return h(oe(Y),Y)}),X.f=Q,V.f=Ee,F.f=l,D.f=L.f=d,U.f=re,I.f=function(Y){return h(x(Y),Y)},s&&(ye(ue[de],"description",{configurable:!0,get:function(){return ce(this).description}}),i||G(ee,"propertyIsEnumerable",Q,{unsafe:!0}))),v({global:!0,wrap:!0,forced:!a,sham:!a},{Symbol:ue}),$(k(ze),function(Y){B(Y)}),v({target:ie,stat:!0,forced:!a},{for:function(ge){var ne,ge=String(ge);return u(Ze,ge)?Ze[ge]:(ne=ue(ge),Ze[ge]=ne,Ge[ne]=ge,ne)},keyFor:function(Y){if(!Le(Y))throw TypeError(Y+" is not a symbol");if(u(Ge,Y))return Ge[Y]},useSetter:function(){He=!0},useSimple:function(){He=!1}}),v({target:"Object",stat:!0,forced:!a,sham:!s},{create:function(Y,ne){return ne===void 0?R(Y):y(R(Y),ne)},defineProperty:Ee,defineProperties:y,getOwnPropertyDescriptor:l}),v({target:"Object",stat:!0,forced:!a},{getOwnPropertyNames:d,getOwnPropertySymbols:re}),v({target:"Object",stat:!0,forced:r(function(){U.f(1)})},{getOwnPropertySymbols:function(Y){return U.f(P(Y))}}),me&&v({target:"JSON",stat:!0,forced:!a||r(function(){var Y=ue();return me([Y])!="[null]"||me({a:Y})!="{}"||me(Object(Y))!="{}"})},{stringify:function(Y,ne,ge){for(var xe,Oe=[Y],Ue=1;Ue<arguments.length;)Oe.push(arguments[Ue++]);if((g(xe=ne)||Y!==void 0)&&!Le(Y))return p(ne)||(ne=function(Be,Ve){if(typeof xe=="function"&&(Ve=xe.call(this,Be,Ve)),!Le(Ve))return Ve}),Oe[1]=ne,me.apply(null,Oe)}}),ue[de][se]||H(ue[de],se,ue[de].valueOf),W(ue,ie),Z[te]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/shared":121,"../internals/shared-key":119,"../internals/to-indexed-object":135,"../internals/to-object":138,"../internals/to-primitive":141,"../internals/uid":146,"../internals/use-symbol-as-uid":147,"../internals/well-known-symbol":149,"../internals/well-known-symbol-wrapped":148}],210:[function(t,M,j){var h=t("../internals/array-buffer-view-core"),y=t("../internals/array-copy-within"),l=h.aTypedArray;(0,h.exportTypedArrayMethod)("copyWithin",function(d,v){return y.call(l(this),d,v,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],211:[function(t,M,j){var h=t("../internals/array-buffer-view-core"),y=t("../internals/array-iteration").every,l=h.aTypedArray;(0,h.exportTypedArrayMethod)("every",function(d){return y(l(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],212:[function(t,M,j){var h=t("../internals/array-buffer-view-core"),y=t("../internals/array-fill"),l=h.aTypedArray;(0,h.exportTypedArrayMethod)("fill",function(d){return y.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],213:[function(t,M,j){var h=t("../internals/array-buffer-view-core"),y=t("../internals/array-iteration").filter,l=t("../internals/species-constructor"),d=h.aTypedArray,v=h.aTypedArrayConstructor;(0,h.exportTypedArrayMethod)("filter",function(m){for(var n=y(d(this),m,1<arguments.length?arguments[1]:void 0),m=l(this,this.constructor),i=0,s=n.length,a=new(v(m))(s);i<s;)a[i]=n[i++];return a})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],214:[function(t,M,j){var h=t("../internals/array-buffer-view-core"),y=t("../internals/array-iteration").findIndex,l=h.aTypedArray;(0,h.exportTypedArrayMethod)("findIndex",function(d){return y(l(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(t,M,j){var h=t("../internals/array-buffer-view-core"),y=t("../internals/array-iteration").find,l=h.aTypedArray;(0,h.exportTypedArrayMethod)("find",function(d){return y(l(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],216:[function(t,M,j){t("../internals/typed-array-constructor")("Float32",function(h){return function(y,l,d){return h(this,y,l,d)}})},{"../internals/typed-array-constructor":143}],217:[function(t,M,j){t("../internals/typed-array-constructor")("Float64",function(h){return function(y,l,d){return h(this,y,l,d)}})},{"../internals/typed-array-constructor":143}],218:[function(t,M,j){var h=t("../internals/array-buffer-view-core"),y=t("../internals/array-iteration").forEach,l=h.aTypedArray;(0,h.exportTypedArrayMethod)("forEach",function(d){y(l(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(t,M,j){var h=t("../internals/array-buffer-view-core"),y=t("../internals/array-includes").includes,l=h.aTypedArray;(0,h.exportTypedArrayMethod)("includes",function(d){return y(l(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],220:[function(t,M,j){var h=t("../internals/array-buffer-view-core"),y=t("../internals/array-includes").indexOf,l=h.aTypedArray;(0,h.exportTypedArrayMethod)("indexOf",function(d){return y(l(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],221:[function(t,M,j){t("../internals/typed-array-constructor")("Int16",function(h){return function(y,l,d){return h(this,y,l,d)}})},{"../internals/typed-array-constructor":143}],222:[function(t,M,j){t("../internals/typed-array-constructor")("Int32",function(h){return function(y,l,d){return h(this,y,l,d)}})},{"../internals/typed-array-constructor":143}],223:[function(y,M,j){function h(){return l.call(m(this))}var s=y("../internals/global"),i=y("../internals/array-buffer-view-core"),n=y("../modules/es.array.iterator"),y=y("../internals/well-known-symbol")("iterator"),s=s.Uint8Array,l=n.values,d=n.keys,v=n.entries,m=i.aTypedArray,n=i.exportTypedArrayMethod,i=s&&s.prototype[y],s=!!i&&(i.name=="values"||i.name==null);n("entries",function(){return v.call(m(this))}),n("keys",function(){return d.call(m(this))}),n("values",h,!s),n(y,h,!s)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],224:[function(y,M,j){var y=y("../internals/array-buffer-view-core"),h=y.aTypedArray,y=y.exportTypedArrayMethod,l=[].join;y("join",function(d){return l.apply(h(this),arguments)})},{"../internals/array-buffer-view-core":12}],225:[function(t,M,j){var h=t("../internals/array-buffer-view-core"),y=t("../internals/array-last-index-of"),l=h.aTypedArray;(0,h.exportTypedArrayMethod)("lastIndexOf",function(d){return y.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],226:[function(t,M,j){var h=t("../internals/array-buffer-view-core"),y=t("../internals/array-iteration").map,l=t("../internals/species-constructor"),d=h.aTypedArray,v=h.aTypedArrayConstructor;(0,h.exportTypedArrayMethod)("map",function(m){return y(d(this),m,1<arguments.length?arguments[1]:void 0,function(n,i){return new(v(l(n,n.constructor)))(i)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],227:[function(t,M,j){var h=t("../internals/array-buffer-view-core"),y=t("../internals/array-reduce").right,l=h.aTypedArray;(0,h.exportTypedArrayMethod)("reduceRight",function(d){return y(l(this),d,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],228:[function(t,M,j){var h=t("../internals/array-buffer-view-core"),y=t("../internals/array-reduce").left,l=h.aTypedArray;(0,h.exportTypedArrayMethod)("reduce",function(d){return y(l(this),d,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],229:[function(y,M,j){var y=y("../internals/array-buffer-view-core"),h=y.aTypedArray,y=y.exportTypedArrayMethod,l=Math.floor;y("reverse",function(){for(var d,v=h(this).length,m=l(v/2),n=0;n<m;)d=this[n],this[n++]=this[--v],this[v]=d;return this})},{"../internals/array-buffer-view-core":12}],230:[function(v,M,j){var h=v("../internals/array-buffer-view-core"),y=v("../internals/to-length"),l=v("../internals/to-offset"),d=v("../internals/to-object"),v=v("../internals/fails"),m=h.aTypedArray;(0,h.exportTypedArrayMethod)("set",function(n){m(this);var i=l(1<arguments.length?arguments[1]:void 0,1),s=this.length,a=d(n),c=y(a.length),r=0;if(s<c+i)throw RangeError("Wrong length");for(;r<c;)this[i+r]=a[r++]},v(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":137,"../internals/to-object":138,"../internals/to-offset":139}],231:[function(y,M,j){var v=y("../internals/array-buffer-view-core"),h=y("../internals/species-constructor"),y=y("../internals/fails"),l=v.aTypedArray,d=v.aTypedArrayConstructor,v=v.exportTypedArrayMethod,m=[].slice;v("slice",function(n,i){for(var s=m.call(l(this),n,i),n=h(this,this.constructor),a=0,c=s.length,r=new(d(n))(c);a<c;)r[a]=s[a++];return r},y(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":122}],232:[function(t,M,j){var h=t("../internals/array-buffer-view-core"),y=t("../internals/array-iteration").some,l=h.aTypedArray;(0,h.exportTypedArrayMethod)("some",function(d){return y(l(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],233:[function(y,M,j){var y=y("../internals/array-buffer-view-core"),h=y.aTypedArray,y=y.exportTypedArrayMethod,l=[].sort;y("sort",function(d){return l.call(h(this),d)})},{"../internals/array-buffer-view-core":12}],234:[function(t,M,j){var h=t("../internals/array-buffer-view-core"),y=t("../internals/to-length"),l=t("../internals/to-absolute-index"),d=t("../internals/species-constructor"),v=h.aTypedArray;(0,h.exportTypedArrayMethod)("subarray",function(a,n){var i=v(this),s=i.length,a=l(a,s);return new(d(i,i.constructor))(i.buffer,i.byteOffset+a*i.BYTES_PER_ELEMENT,y((n===void 0?s:l(n,s))-a))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":122,"../internals/to-absolute-index":133,"../internals/to-length":137}],235:[function(y,M,j){var v=y("../internals/global"),h=y("../internals/array-buffer-view-core"),y=y("../internals/fails"),l=v.Int8Array,d=h.aTypedArray,v=h.exportTypedArrayMethod,m=[].toLocaleString,n=[].slice,i=!!l&&y(function(){m.call(new l(1))});v("toLocaleString",function(){return m.apply(i?n.call(d(this)):d(this),arguments)},y(function(){return[1,2].toLocaleString()!=new l([1,2]).toLocaleString()})||!y(function(){l.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],236:[function(y,M,j){var h=y("../internals/array-buffer-view-core").exportTypedArrayMethod,v=y("../internals/fails"),y=y("../internals/global").Uint8Array,y=y&&y.prototype||{},l=[].toString,d=[].join,v=(v(function(){l.call({})})&&(l=function(){return d.call(this)}),y.toString!=l);h("toString",l,v)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],237:[function(t,M,j){t("../internals/typed-array-constructor")("Uint16",function(h){return function(y,l,d){return h(this,y,l,d)}})},{"../internals/typed-array-constructor":143}],238:[function(t,M,j){t("../internals/typed-array-constructor")("Uint32",function(h){return function(y,l,d){return h(this,y,l,d)}})},{"../internals/typed-array-constructor":143}],239:[function(t,M,j){t("../internals/typed-array-constructor")("Uint8",function(h){return function(y,l,d){return h(this,y,l,d)}})},{"../internals/typed-array-constructor":143}],240:[function(t,M,j){t("../internals/typed-array-constructor")("Uint8",function(h){return function(y,l,d){return h(this,y,l,d)}},!0)},{"../internals/typed-array-constructor":143}],241:[function(u,S,j){function h(P){return function(){return P(this,arguments.length?arguments[0]:void 0)}}var y,l,d,v,m,p=u("../internals/global"),n=u("../internals/redefine-all"),i=u("../internals/internal-metadata"),s=u("../internals/collection"),a=u("../internals/collection-weak"),c=u("../internals/is-object"),r=u("../internals/internal-state").enforce,u=u("../internals/native-weak-map"),p=!p.ActiveXObject&&"ActiveXObject"in p,g=Object.isExtensible,S=S.exports=s("WeakMap",h,a);u&&p&&(y=a.getConstructor(h,"WeakMap",!0),i.REQUIRED=!0,s=S.prototype,l=s.delete,d=s.has,v=s.get,m=s.set,n(s,{delete:function(P){var E;return c(P)&&!g(P)?((E=r(this)).frozen||(E.frozen=new y),l.call(this,P)||E.frozen.delete(P)):l.call(this,P)},has:function(P){var E;return c(P)&&!g(P)?((E=r(this)).frozen||(E.frozen=new y),d.call(this,P)||E.frozen.has(P)):d.call(this,P)},get:function(P){var E;return!c(P)||g(P)||((E=r(this)).frozen||(E.frozen=new y),d.call(this,P))?v.call(this,P):E.frozen.get(P)},set:function(P,E){var T;return!c(P)||g(P)||((T=r(this)).frozen||(T.frozen=new y),d.call(this,P))?m.call(this,P,E):T.frozen.set(P,E),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":108}],242:[function(t,M,j){var h,y=t("../internals/global"),l=t("../internals/dom-iterables"),d=t("../internals/array-for-each"),v=t("../internals/create-non-enumerable-property");for(h in l){var m=y[h],m=m&&m.prototype;if(m&&m.forEach!==d)try{v(m,"forEach",d)}catch{m.forEach=d}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],243:[function(m,M,j){var h,y=m("../internals/global"),l=m("../internals/dom-iterables"),d=m("../modules/es.array.iterator"),v=m("../internals/create-non-enumerable-property"),m=m("../internals/well-known-symbol"),n=m("iterator"),i=m("toStringTag"),s=d.values;for(h in l){var a=y[h],c=a&&a.prototype;if(c){if(c[n]!==s)try{v(c,n,s)}catch{c[n]=s}if(c[i]||v(c,i,h),l[h]){for(var r in d)if(c[r]!==d[r])try{v(c,r,d[r])}catch{c[r]=d[r]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],244:[function(te,M,j){te("../modules/es.array.iterator");function h(ie){try{return decodeURIComponent(ie)}catch{return ie}}function y(ie){return B[ie]}function l(ie){return encodeURIComponent(ie).replace(I,y)}function d(ie){this.entries.length=0,W(this.entries,ie)}function v(ie,de){if(ie<de)throw TypeError("Not enough arguments")}function m(){p(this,m,V);var ie,de,se,he,ce,ee,ue,me,je=0<arguments.length?arguments[0]:void 0,ye=[];if(H(this,{type:V,entries:ye,updateURL:function(){},updateSearchParams:d}),je!==void 0)if(T(je))if(typeof(ie=D(je))=="function")for(se=(de=ie.call(je)).next;!(he=se.call(de)).done;){if((ee=(ce=(he=k(E(he.value))).next).call(he)).done||(ue=ce.call(he)).done||!ce.call(he).done)throw TypeError("Expected sequence with length 2");ye.push({key:ee.value+"",value:ue.value+""})}else for(me in je)g(je,me)&&ye.push({key:me,value:je[me]+""});else W(ye,typeof je=="string"?je.charAt(0)==="?"?je.slice(1):je:je+"")}var n=te("../internals/export"),F=te("../internals/get-built-in"),i=te("../internals/native-url"),s=te("../internals/redefine"),a=te("../internals/redefine-all"),c=te("../internals/set-to-string-tag"),r=te("../internals/create-iterator-constructor"),u=te("../internals/internal-state"),p=te("../internals/an-instance"),g=te("../internals/has"),S=te("../internals/function-bind-context"),P=te("../internals/classof"),E=te("../internals/an-object"),T=te("../internals/is-object"),O=te("../internals/object-create"),R=te("../internals/create-property-descriptor"),k=te("../internals/get-iterator"),D=te("../internals/get-iterator-method"),te=te("../internals/well-known-symbol"),L=F("fetch"),U=F("Headers"),F=te("iterator"),V="URLSearchParams",X=V+"Iterator",H=u.set,G=u.getterFor(V),K=u.getterFor(X),Z=/\+/g,oe=Array(4),x=function(ie){var de,se=ie.replace(Z," "),he=4;try{return decodeURIComponent(se)}catch{for(;he;)se=se.replace((de=he--,oe[de-1]||(oe[de-1]=RegExp("((?:%[\\da-f]{2}){"+de+"})","gi"))),h);return se}},I=/[!'()~]|%20/g,B={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},W=function(ie,de){if(de)for(var se,he=de.split("&"),ce=0;ce<he.length;)(se=he[ce++]).length&&(se=se.split("="),ie.push({key:x(se.shift()),value:x(se.join("="))}))},$=r(function(ie,de){H(this,{type:X,iterator:k(G(ie).entries),kind:de})},"Iterator",function(){var de=K(this),ie=de.kind,de=de.iterator.next(),se=de.value;return de.done||(de.value=ie==="keys"?se.key:ie==="values"?se.value:[se.key,se.value]),de}),te=m.prototype;a(te,{append:function(ie,de){v(arguments.length,2);var se=G(this);se.entries.push({key:ie+"",value:de+""}),se.updateURL()},delete:function(ie){v(arguments.length,1);for(var de=G(this),se=de.entries,he=ie+"",ce=0;ce<se.length;)se[ce].key===he?se.splice(ce,1):ce++;de.updateURL()},get:function(ie){v(arguments.length,1);for(var de=G(this).entries,se=ie+"",he=0;he<de.length;he++)if(de[he].key===se)return de[he].value;return null},getAll:function(ie){v(arguments.length,1);for(var de=G(this).entries,se=ie+"",he=[],ce=0;ce<de.length;ce++)de[ce].key===se&&he.push(de[ce].value);return he},has:function(ie){v(arguments.length,1);for(var de=G(this).entries,se=ie+"",he=0;he<de.length;)if(de[he++].key===se)return!0;return!1},set:function(ie,de){v(arguments.length,1);for(var se,he=G(this),ce=he.entries,ee=!1,ue=ie+"",me=de+"",je=0;je<ce.length;je++)(se=ce[je]).key===ue&&(ee?ce.splice(je--,1):(ee=!0,se.value=me));ee||ce.push({key:ue,value:me}),he.updateURL()},sort:function(){for(var ie,de,se=G(this),he=se.entries,ce=he.slice(),ee=he.length=0;ee<ce.length;ee++){for(ie=ce[ee],de=0;de<ee;de++)if(he[de].key>ie.key){he.splice(de,0,ie);break}de===ee&&he.push(ie)}se.updateURL()},forEach:function(ie){for(var de,se=G(this).entries,he=S(ie,1<arguments.length?arguments[1]:void 0,3),ce=0;ce<se.length;)he((de=se[ce++]).value,de.key,this)},keys:function(){return new $(this,"keys")},values:function(){return new $(this,"values")},entries:function(){return new $(this,"entries")}},{enumerable:!0}),s(te,F,te.entries),s(te,"toString",function(){for(var ie,de=G(this).entries,se=[],he=0;he<de.length;)ie=de[he++],se.push(l(ie.key)+"="+l(ie.value));return se.join("&")},{enumerable:!0}),c(m,V),n({global:!0,forced:!i},{URLSearchParams:m}),i||typeof L!="function"||typeof U!="function"||n({global:!0,enumerable:!0,forced:!0},{fetch:function(ce){var de,se,he,ce=[ce];return 1<arguments.length&&(T(de=arguments[1])&&(se=de.body,P(se)===V&&((he=de.headers?new U(de.headers):new U).has("content-type")||he.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),de=O(de,{body:R(0,String(se)),headers:R(0,he)}))),ce.push(de)),L.apply(this,ce)}}),M.exports={URLSearchParams:m,getState:G}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],245:[function(k,M,j){k("../modules/es.string.iterator");function h(fe){var Ne,Ke,De,ut;if(typeof fe=="number"){for(Ne=[],Ke=0;Ke<4;Ke++)Ne.unshift(fe%256),fe=X(fe/256);return Ne.join(".")}if(typeof fe!="object")return fe;for(Ne="",De=ue(fe),Ke=0;Ke<8;Ke++)ut&&fe[Ke]===0||(ut=ut&&!1,De===Ke?(Ne+=Ke?":":"::",ut=!0):(Ne+=fe[Ke].toString(16),Ke<7&&(Ne+=":")));return"["+Ne+"]"}function y(fe){return!fe.host||fe.cannotBeABaseURL||fe.scheme=="file"}function l(fe,Ne,Ke,De){var ut,Ie,ht,We=Ke||Le,ct=0,Ye="",Rt=!1,Nt=!1,Ot=!1;for(Ke||(fe.scheme="",fe.username="",fe.password="",fe.host=null,fe.port=null,fe.path=[],fe.query=null,fe.fragment=null,fe.cannotBeABaseURL=!1,Ne=Ne.replace(he,"")),Ne=Ne.replace(ce,""),ut=P(Ne);ct<=ut.length;){switch(Ie=ut[ct],We){case Le:if(!Ie||!x.test(Ie)){if(Ke)return K;We=Q;continue}Ye+=Ie.toLowerCase(),We=Ee;break;case Ee:if(Ie&&(I.test(Ie)||Ie=="+"||Ie=="-"||Ie=="."))Ye+=Ie.toLowerCase();else{if(Ie!=":"){if(Ke)return K;Ye="",We=Q,ct=0;continue}if(Ke&&(Me(fe)!=g(Fe,Ye)||Ye=="file"&&(Ze(fe)||fe.port!==null)||fe.scheme=="file"&&!fe.host))return;if(fe.scheme=Ye,Ke)return void(Me(fe)&&Fe[fe.scheme]==fe.port&&(fe.port=null));Ye="",fe.scheme=="file"?We=st:Me(fe)&&De&&De.scheme==fe.scheme?We=re:Me(fe)?We=xe:ut[ct+1]=="/"?(We=Y,ct++):(fe.cannotBeABaseURL=!0,fe.path.push(""),We=wt)}break;case Q:if(!De||De.cannotBeABaseURL&&Ie!="#")return K;if(De.cannotBeABaseURL&&Ie=="#"){fe.scheme=De.scheme,fe.path=De.path.slice(),fe.query=De.query,fe.fragment="",fe.cannotBeABaseURL=!0,We=It;break}We=De.scheme=="file"?st:ne;continue;case re:if(Ie!="/"||ut[ct+1]!="/"){We=ne;continue}We=Oe,ct++;break;case Y:if(Ie=="/"){We=Ue;break}We=rt;continue;case ne:if(fe.scheme=De.scheme,Ie==m)fe.username=De.username,fe.password=De.password,fe.host=De.host,fe.port=De.port,fe.path=De.path.slice(),fe.query=De.query;else if(Ie=="/"||Ie=="\\"&&Me(fe))We=ge;else if(Ie=="?")fe.username=De.username,fe.password=De.password,fe.host=De.host,fe.port=De.port,fe.path=De.path.slice(),fe.query="",We=Yt;else{if(Ie!="#"){fe.username=De.username,fe.password=De.password,fe.host=De.host,fe.port=De.port,fe.path=De.path.slice(),fe.path.pop(),We=rt;continue}fe.username=De.username,fe.password=De.password,fe.host=De.host,fe.port=De.port,fe.path=De.path.slice(),fe.query=De.query,fe.fragment="",We=It}break;case ge:if(!Me(fe)||Ie!="/"&&Ie!="\\"){if(Ie!="/"){fe.username=De.username,fe.password=De.password,fe.host=De.host,fe.port=De.port,We=rt;continue}We=Ue}else We=Oe;break;case xe:if(We=Oe,Ie!="/"||Ye.charAt(ct+1)!="/")continue;ct++;break;case Oe:if(Ie=="/"||Ie=="\\")break;We=Ue;continue;case Ue:if(Ie=="@"){Rt&&(Ye="%40"+Ye);for(var Rt=!0,Gt=P(Ye),cr=0;cr<Gt.length;cr++){var rr=Gt[cr];rr!=":"||Ot?(rr=Se(rr,be),Ot?fe.password+=rr:fe.username+=rr):Ot=!0}Ye=""}else if(Ie==m||Ie=="/"||Ie=="?"||Ie=="#"||Ie=="\\"&&Me(fe)){if(Rt&&Ye=="")return G;ct-=P(Ye).length+1,Ye="",We=Be}else Ye+=Ie;break;case Be:case Ve:if(Ke&&fe.scheme=="file"){We=Qe;continue}if(Ie!=":"||Nt){if(Ie==m||Ie=="/"||Ie=="?"||Ie=="#"||Ie=="\\"&&Me(fe)){if(Me(fe)&&Ye=="")return Z;if(Ke&&Ye==""&&(Ze(fe)||fe.port!==null))return;if(ht=ee(fe,Ye))return ht;if(Ye="",We=ot,Ke)return;continue}Ie=="["?Nt=!0:Ie=="]"&&(Nt=!1),Ye+=Ie}else{if(Ye=="")return Z;if(ht=ee(fe,Ye))return ht;if(Ye="",We=Xe,Ke==Ve)return}break;case Xe:if(!B.test(Ie)){if(Ie==m||Ie=="/"||Ie=="?"||Ie=="#"||Ie=="\\"&&Me(fe)||Ke){if(Ye!=""){var dr=parseInt(Ye,10);if(65535<dr)return oe;fe.port=Me(fe)&&dr===Fe[fe.scheme]?null:dr,Ye=""}if(Ke)return;We=ot;continue}return oe}Ye+=Ie;break;case st:if(fe.scheme="file",Ie=="/"||Ie=="\\")We=nt;else{if(!De||De.scheme!="file"){We=rt;continue}if(Ie==m)fe.host=De.host,fe.path=De.path.slice(),fe.query=De.query;else if(Ie=="?")fe.host=De.host,fe.path=De.path.slice(),fe.query="",We=Yt;else{if(Ie!="#"){ze(ut.slice(ct).join(""))||(fe.host=De.host,fe.path=De.path.slice(),qe(fe)),We=rt;continue}fe.host=De.host,fe.path=De.path.slice(),fe.query=De.query,fe.fragment="",We=It}}break;case nt:if(Ie=="/"||Ie=="\\"){We=Qe;break}De&&De.scheme=="file"&&!ze(ut.slice(ct).join(""))&&(Ge(De.path[0],!0)?fe.path.push(De.path[0]):fe.host=De.host),We=rt;continue;case Qe:if(Ie==m||Ie=="/"||Ie=="\\"||Ie=="?"||Ie=="#"){if(!Ke&&Ge(Ye))We=rt;else{if(Ye==""){if(fe.host="",Ke)return}else{if(ht=ee(fe,Ye))return ht;if(fe.host=="localhost"&&(fe.host=""),Ke)return;Ye=""}We=ot}continue}Ye+=Ie;break;case ot:if(Me(fe)){if(We=rt,Ie!="/"&&Ie!="\\")continue}else if(Ke||Ie!="?")if(Ke||Ie!="#"){if(Ie!=m&&(We=rt,Ie!="/"))continue}else fe.fragment="",We=It;else fe.query="",We=Yt;break;case rt:if(Ie==m||Ie=="/"||Ie=="\\"&&Me(fe)||!Ke&&(Ie=="?"||Ie=="#")){if(_e(Ye)?(qe(fe),Ie=="/"||Ie=="\\"&&Me(fe)||fe.path.push("")):He(Ye)?Ie=="/"||Ie=="\\"&&Me(fe)||fe.path.push(""):(fe.scheme=="file"&&!fe.path.length&&Ge(Ye)&&(fe.host&&(fe.host=""),Ye=Ye.charAt(0)+":"),fe.path.push(Ye)),Ye="",fe.scheme=="file"&&(Ie==m||Ie=="?"||Ie=="#"))for(;1<fe.path.length&&fe.path[0]==="";)fe.path.shift();Ie=="?"?(fe.query="",We=Yt):Ie=="#"&&(fe.fragment="",We=It)}else Ye+=Se(Ie,ye);break;case wt:Ie=="?"?(fe.query="",We=Yt):Ie=="#"?(fe.fragment="",We=It):Ie!=m&&(fe.path[0]+=Se(Ie,me));break;case Yt:Ke||Ie!="#"?Ie!=m&&(Ie=="'"&&Me(fe)?fe.query+="%27":fe.query+=Ie=="#"?"%23":Se(Ie,me)):(fe.fragment="",We=It);break;case It:Ie!=m&&(fe.fragment+=Se(Ie,je))}ct++}}function d(Ie){var Ne,Ke,De=p(this,d,"URL"),ut=1<arguments.length?arguments[1]:void 0,Ie=String(Ie),ht=F(De,{type:"URL"});if(ut!==void 0){if(ut instanceof d)Ne=V(ut);else if(Ke=l(Ne={},String(ut)))throw TypeError(Ke)}if(Ke=l(ht,Ie,null,Ne))throw TypeError(Ke);var We=ht.searchParams=new L;(ut=U(We)).updateSearchParams(ht.query),ut.updateURL=function(){ht.query=String(We)||null},a||(De.href=St.call(De),De.origin=dt.call(De),De.protocol=Wt.call(De),De.username=Vt.call(De),De.password=vt.call(De),De.host=qt.call(De),De.hostname=rn.call(De),De.port=nn.call(De),De.pathname=on.call(De),De.search=Ln.call(De),De.searchParams=sn.call(De),De.hash=an.call(De))}function v(fe,Ne){return{get:fe,set:Ne,configurable:!0,enumerable:!0}}var m,n,i,s=k("../internals/export"),a=k("../internals/descriptors"),c=k("../internals/native-url"),mt=k("../internals/global"),r=k("../internals/object-define-properties"),u=k("../internals/redefine"),p=k("../internals/an-instance"),g=k("../internals/has"),S=k("../internals/object-assign"),P=k("../internals/array-from"),E=k("../internals/string-multibyte").codeAt,T=k("../internals/string-punycode-to-ascii"),O=k("../internals/set-to-string-tag"),R=k("../modules/web.url-search-params"),k=k("../internals/internal-state"),D=mt.URL,L=R.URLSearchParams,U=R.getState,F=k.set,V=k.getterFor("URL"),X=Math.floor,H=Math.pow,G="Invalid authority",K="Invalid scheme",Z="Invalid host",oe="Invalid port",x=/[A-Za-z]/,I=/[\d+-.A-Za-z]/,B=/\d/,W=/^(0x|0X)/,$=/^[0-7]+$/,te=/^\d+$/,ie=/^[\dA-Fa-f]+$/,de=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,se=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,he=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ce=/[\u0009\u000A\u000D]/g,ee=function(fe,Ne){var Ke,De,ut;if(Ne.charAt(0)=="[")return Ne.charAt(Ne.length-1)=="]"&&(Ke=function(Ie){var ht=[0,0,0,0,0,0,0,0],We=0,ct=null,Ye=0,Rt,Nt,Ot,Gt,cr,rr,dr,zt=function(){return Ie.charAt(Ye)};if(zt()==":"){if(Ie.charAt(1)!=":")return;Ye+=2,We++,ct=We}for(;zt();){if(We==8)return;if(zt()==":"){if(ct!==null)return;Ye++,We++,ct=We;continue}for(Rt=Nt=0;Nt<4&&ie.test(zt());)Rt=Rt*16+parseInt(zt(),16),Ye++,Nt++;if(zt()=="."){if(Nt==0||(Ye-=Nt,We>6))return;for(Ot=0;zt();){if(Gt=null,Ot>0)if(zt()=="."&&Ot<4)Ye++;else return;if(!B.test(zt()))return;for(;B.test(zt());){if(cr=parseInt(zt(),10),Gt===null)Gt=cr;else{if(Gt==0)return;Gt=Gt*10+cr}if(Gt>255)return;Ye++}ht[We]=ht[We]*256+Gt,Ot++,(Ot==2||Ot==4)&&We++}if(Ot!=4)return;break}else if(zt()==":"){if(Ye++,!zt())return}else if(zt())return;ht[We++]=Rt}if(ct!==null)for(rr=We-ct,We=7;We!=0&&rr>0;)dr=ht[We],ht[We--]=ht[ct+rr-1],ht[ct+--rr]=dr;else if(We!=8)return;return ht}(Ne.slice(1,-1)))?void(fe.host=Ke):Z;if(Me(fe))return Ne=T(Ne),de.test(Ne)||(Ke=function(Ie){var ht=Ie.split("."),We,ct,Ye,Rt,Nt,Ot,Gt;if(ht.length&&ht[ht.length-1]==""&&ht.pop(),(We=ht.length)>4)return Ie;for(ct=[],Ye=0;Ye<We;Ye++){if(Rt=ht[Ye],Rt=="")return Ie;if(Nt=10,Rt.length>1&&Rt.charAt(0)=="0"&&(Nt=W.test(Rt)?16:8,Rt=Rt.slice(Nt==8?1:2)),Rt==="")Ot=0;else{if(!(Nt==10?te:Nt==8?$:ie).test(Rt))return Ie;Ot=parseInt(Rt,Nt)}ct.push(Ot)}for(Ye=0;Ye<We;Ye++)if(Ot=ct[Ye],Ye==We-1){if(Ot>=H(256,5-We))return null}else if(Ot>255)return null;for(Gt=ct.pop(),Ye=0;Ye<ct.length;Ye++)Gt+=ct[Ye]*H(256,3-Ye);return Gt}(Ne))===null?Z:void(fe.host=Ke);if(se.test(Ne))return Z;for(Ke="",De=P(Ne),ut=0;ut<De.length;ut++)Ke+=Se(De[ut],me);fe.host=Ke},ue=function(fe){for(var Ne=null,Ke=1,De=null,ut=0,Ie=0;Ie<8;Ie++)fe[Ie]!==0?(Ke<ut&&(Ne=De,Ke=ut),De=null,ut=0):(De===null&&(De=Ie),++ut);return Ke<ut&&(Ne=De,Ke=ut),Ne},me={},je=S({},me,{" ":1,'"':1,"<":1,">":1,"`":1}),ye=S({},je,{"#":1,"?":1,"{":1,"}":1}),be=S({},ye,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Se=function(fe,Ne){var Ke=E(fe,0);return 32<Ke&&Ke<127&&!g(Ne,fe)?fe:encodeURIComponent(fe)},Fe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Me=function(fe){return g(Fe,fe.scheme)},Ze=function(fe){return fe.username!=""||fe.password!=""},Ge=function(fe,Ne){return fe.length==2&&x.test(fe.charAt(0))&&((fe=fe.charAt(1))==":"||!Ne&&fe=="|")},ze=function(fe){return 1<fe.length&&Ge(fe.slice(0,2))&&(fe.length==2||(fe=fe.charAt(2))==="/"||fe==="\\"||fe==="?"||fe==="#")},qe=function(fe){var Ne=fe.path,Ke=Ne.length;!Ke||fe.scheme=="file"&&Ke==1&&Ge(Ne[0],!0)||Ne.pop()},He=function(fe){return fe==="."||fe.toLowerCase()==="%2e"},_e=function(fe){return(fe=fe.toLowerCase())===".."||fe==="%2e."||fe===".%2e"||fe==="%2e%2e"},Le={},Ee={},Q={},re={},Y={},ne={},ge={},xe={},Oe={},Ue={},Be={},Ve={},Xe={},st={},nt={},Qe={},ot={},rt={},wt={},Yt={},It={},mt=d.prototype,St=function(){var fe=V(this),Ne=fe.scheme,Ke=fe.username,De=fe.password,ut=fe.host,Ie=fe.port,ht=fe.path,We=fe.query,ct=fe.fragment,Ye=Ne+":";return ut!==null?(Ye+="//",Ze(fe)&&(Ye+=Ke+(De?":"+De:"")+"@"),Ye+=h(ut),Ie!==null&&(Ye+=":"+Ie)):Ne=="file"&&(Ye+="//"),Ye+=fe.cannotBeABaseURL?ht[0]:ht.length?"/"+ht.join("/"):"",We!==null&&(Ye+="?"+We),ct!==null&&(Ye+="#"+ct),Ye},dt=function(){var fe=V(this),Ne=fe.scheme,Ke=fe.port;if(Ne=="blob")try{return new URL(Ne.path[0]).origin}catch{return"null"}return Ne!="file"&&Me(fe)?Ne+"://"+h(fe.host)+(Ke!==null?":"+Ke:""):"null"},Wt=function(){return V(this).scheme+":"},Vt=function(){return V(this).username},vt=function(){return V(this).password},qt=function(){var Ne=V(this),fe=Ne.host,Ne=Ne.port;return fe===null?"":Ne===null?h(fe):h(fe)+":"+Ne},rn=function(){var fe=V(this).host;return fe===null?"":h(fe)},nn=function(){var fe=V(this).port;return fe===null?"":String(fe)},on=function(){var fe=V(this),Ne=fe.path;return fe.cannotBeABaseURL?Ne[0]:Ne.length?"/"+Ne.join("/"):""},Ln=function(){var fe=V(this).query;return fe?"?"+fe:""},sn=function(){return V(this).searchParams},an=function(){var fe=V(this).fragment;return fe?"#"+fe:""};a&&r(mt,{href:v(St,function(Ke){var Ne=V(this),Ke=String(Ke),Ke=l(Ne,Ke);if(Ke)throw TypeError(Ke);U(Ne.searchParams).updateSearchParams(Ne.query)}),origin:v(dt),protocol:v(Wt,function(fe){var Ne=V(this);l(Ne,String(fe)+":",Le)}),username:v(Vt,function(fe){var Ne=V(this),Ke=P(String(fe));if(!y(Ne)){Ne.username="";for(var De=0;De<Ke.length;De++)Ne.username+=Se(Ke[De],be)}}),password:v(vt,function(fe){var Ne=V(this),Ke=P(String(fe));if(!y(Ne)){Ne.password="";for(var De=0;De<Ke.length;De++)Ne.password+=Se(Ke[De],be)}}),host:v(qt,function(fe){var Ne=V(this);Ne.cannotBeABaseURL||l(Ne,String(fe),Be)}),hostname:v(rn,function(fe){var Ne=V(this);Ne.cannotBeABaseURL||l(Ne,String(fe),Ve)}),port:v(nn,function(fe){var Ne=V(this);y(Ne)||((fe=String(fe))==""?Ne.port=null:l(Ne,fe,Xe))}),pathname:v(on,function(fe){var Ne=V(this);Ne.cannotBeABaseURL||(Ne.path=[],l(Ne,fe+"",ot))}),search:v(Ln,function(fe){var Ne=V(this);(fe=String(fe))==""?Ne.query=null:(fe.charAt(0)=="?"&&(fe=fe.slice(1)),Ne.query="",l(Ne,fe,Yt)),U(Ne.searchParams).updateSearchParams(Ne.query)}),searchParams:v(sn),hash:v(an,function(fe){var Ne=V(this);(fe=String(fe))==""?Ne.fragment=null:(fe.charAt(0)=="#"&&(fe=fe.slice(1)),Ne.fragment="",l(Ne,fe,It))})}),u(mt,"toJSON",function(){return St.call(this)},{enumerable:!0}),u(mt,"toString",function(){return St.call(this)},{enumerable:!0}),D&&(n=D.createObjectURL,i=D.revokeObjectURL,n&&u(d,"createObjectURL",function(fe){return n.apply(D,arguments)}),i&&u(d,"revokeObjectURL",function(fe){return i.apply(D,arguments)})),O(d,"URL"),s({global:!0,forced:!c,sham:!a},{URL:d})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/string-multibyte":124,"../internals/string-punycode-to-ascii":127,"../modules/es.string.iterator":197,"../modules/web.url-search-params":244}],246:[function(t,M,j){M.exports=t("./").polyfill()},{"./":247}],247:[function(t,M,j){(function(h,y){var l,d;l=this,d=function(){function v(ee){return typeof ee=="function"}var m=Array.isArray||function(ee){return Object.prototype.toString.call(ee)==="[object Array]"},n=0,i=void 0,s=void 0,a=function(ee,ue){S[n]=ee,S[n+1]=ue,(n+=2)===2&&(s?s(P):L())},c=typeof window<"u"?window:void 0,r=c||{},r=r.MutationObserver||r.WebKitMutationObserver,u=typeof self>"u"&&h!==void 0&&{}.toString.call(h)==="[object process]",p=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function g(){var ee=setTimeout;return function(){return ee(P,1)}}var S=new Array(1e3);function P(){for(var ee=0;ee<n;ee+=2)(0,S[ee])(S[ee+1]),S[ee]=void 0,S[ee+1]=void 0;n=0}function E(){try{var ee=Function("return this")().require("vertx");return(i=ee.runOnLoop||ee.runOnContext)!==void 0?function(){i(P)}:g()}catch{return g()}}var T,O,R,L=void 0;function k(ee,ue){var me,je=this,ye=new this.constructor(F),be=(ye[U]===void 0&&ie(ye),je._state);return be?(me=arguments[be-1],a(function(){return $(be,ye,me,je._result)})):B(je,ye,ee,ue),ye}function D(ee){var ue;return ee&&typeof ee=="object"&&ee.constructor===this?ee:(Z(ue=new this(F),ee),ue)}var L=u?function(){return h.nextTick(P)}:r?(O=0,u=new r(P),R=document.createTextNode(""),u.observe(R,{characterData:!0}),function(){R.data=O=++O%2}):p?((T=new MessageChannel).port1.onmessage=P,function(){return T.port2.postMessage(0)}):(c===void 0&&typeof t=="function"?E:g)(),U=Math.random().toString(36).substring(2);function F(){}var V=void 0,X=1,H=2;function G(ee,ue,me){a(function(je){var ye=!1,be=function(Se,Fe,Me,Ze){try{Se.call(Fe,Me,Ze)}catch(Ge){return Ge}}(me,ue,function(Se){ye||(ye=!0,(ue!==Se?Z:x)(je,Se))},function(Se){ye||(ye=!0,I(je,Se))},je._label);!ye&&be&&(ye=!0,I(je,be))},ee)}function K(ee,ue,me){var je,ye;ue.constructor===ee.constructor&&me===k&&ue.constructor.resolve===D?(je=ee,(ye=ue)._state===X?x(je,ye._result):ye._state===H?I(je,ye._result):B(ye,void 0,function(be){return Z(je,be)},function(be){return I(je,be)})):me!==void 0&&v(me)?G(ee,ue,me):x(ee,ue)}function Z(ee,ue){if(ee===ue)I(ee,new TypeError("You cannot resolve a promise with itself"));else if(me=typeof ue,ue===null||me!="object"&&me!="function")x(ee,ue);else{me=void 0;try{me=ue.then}catch(je){return void I(ee,je)}K(ee,ue,me)}var me}function oe(ee){ee._onerror&&ee._onerror(ee._result),W(ee)}function x(ee,ue){ee._state===V&&(ee._result=ue,ee._state=X,ee._subscribers.length!==0&&a(W,ee))}function I(ee,ue){ee._state===V&&(ee._state=H,ee._result=ue,a(oe,ee))}function B(ee,ue,me,je){var ye=ee._subscribers,be=ye.length;ee._onerror=null,ye[be]=ue,ye[be+X]=me,ye[be+H]=je,be===0&&ee._state&&a(W,ee)}function W(ee){var ue=ee._subscribers,me=ee._state;if(ue.length!==0){for(var je,ye=void 0,be=ee._result,Se=0;Se<ue.length;Se+=3)je=ue[Se],ye=ue[Se+me],je?$(me,je,ye,be):ye(be);ee._subscribers.length=0}}function $(ee,ue,me,je){var ye=v(me),be=void 0,Se=void 0,Fe=!0;if(ye){try{be=me(je)}catch(Me){Fe=!1,Se=Me}if(ue===be)return void I(ue,new TypeError("A promises callback cannot return that same promise."))}else be=je;ue._state===V&&(ye&&Fe?Z(ue,be):Fe===!1?I(ue,Se):ee===X?x(ue,be):ee===H&&I(ue,be))}var te=0;function ie(ee){ee[U]=te++,ee._state=void 0,ee._result=void 0,ee._subscribers=[]}se.prototype._enumerate=function(ee){for(var ue=0;this._state===V&&ue<ee.length;ue++)this._eachEntry(ee[ue],ue)},se.prototype._eachEntry=function(ee,ue){var me=this._instanceConstructor,je=me.resolve;if(je===D){var ye,be=void 0,Se=void 0,Fe=!1;try{be=ee.then}catch(Me){Fe=!0,Se=Me}be===k&&ee._state!==V?this._settledAt(ee._state,ue,ee._result):typeof be!="function"?(this._remaining--,this._result[ue]=ee):me===he?(ye=new me(F),Fe?I(ye,Se):K(ye,ee,be),this._willSettleAt(ye,ue)):this._willSettleAt(new me(function(Me){return Me(ee)}),ue)}else this._willSettleAt(je(ee),ue)},se.prototype._settledAt=function(ee,ue,me){var je=this.promise;je._state===V&&(this._remaining--,ee===H?I(je,me):this._result[ue]=me),this._remaining===0&&x(je,this._result)},se.prototype._willSettleAt=function(ee,ue){var me=this;B(ee,void 0,function(je){return me._settledAt(X,ue,je)},function(je){return me._settledAt(H,ue,je)})};var de=se;function se(ee,ue){this._instanceConstructor=ee,this.promise=new ee(F),this.promise[U]||ie(this.promise),m(ue)?(this.length=ue.length,this._remaining=ue.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(ue),this._remaining!==0)||x(this.promise,this._result)):I(this.promise,new Error("Array Methods must be provided an Array"))}ce.prototype.catch=function(ee){return this.then(null,ee)},ce.prototype.finally=function(ee){var ue=this.constructor;return v(ee)?this.then(function(me){return ue.resolve(ee()).then(function(){return me})},function(me){return ue.resolve(ee()).then(function(){throw me})}):this.then(ee,ee)};var he=ce;function ce(ee){if(this[U]=te++,this._result=this._state=void 0,this._subscribers=[],F!==ee){if(typeof ee!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof ce))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var ue=this;try{ee(function(me){Z(ue,me)},function(me){I(ue,me)})}catch(me){I(ue,me)}}}return he.prototype.then=k,he.all=function(ee){return new de(this,ee).promise},he.race=function(ee){var ue=this;return m(ee)?new ue(function(me,je){for(var ye=ee.length,be=0;be<ye;be++)ue.resolve(ee[be]).then(me,je)}):new ue(function(me,je){return je(new TypeError("You must pass an array to race."))})},he.resolve=D,he.reject=function(ee){var ue=new this(F);return I(ue,ee),ue},he._setScheduler=function(ee){s=ee},he._setAsap=function(ee){a=ee},he._asap=a,he.polyfill=function(){var ee=void 0;if(y!==void 0)ee=y;else if(typeof self<"u")ee=self;else try{ee=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ue=ee.Promise;if(ue){var me=null;try{me=Object.prototype.toString.call(ue.resolve())}catch{}if(me==="[object Promise]"&&!ue.cast)return}ee.Promise=he},he.Promise=he},typeof j=="object"&&M!==void 0?M.exports=d():l.ES6Promise=d()}).call(this,t("_process"),typeof Bn<"u"?Bn:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:256}],248:[function(t,M,j){var h,y;h=this,y=function(l,d){var v=5e3,m="callback";function n(s){try{delete window[s]}catch{window[s]=void 0}}function i(s){s=document.getElementById(s),s&&document.getElementsByTagName("head")[0].removeChild(s)}d.exports=function(s){var a=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],c=s,r=a.timeout||v,u=a.jsonpCallback||m,p=void 0;return new Promise(function(g,S){var P=a.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),E=u+"_"+P,T=(window[P]=function(O){g({ok:!0,json:function(){return Promise.resolve(O)}}),p&&clearTimeout(p),i(E),n(P)},c+=c.indexOf("?")===-1?"?":"&",document.createElement("script"));T.setAttribute("src",""+c+u+"="+P),a.charset&&T.setAttribute("charset",a.charset),T.id=E,document.getElementsByTagName("head")[0].appendChild(T),p=setTimeout(function(){S(new Error("JSONP request to "+s+" timed out")),n(P),i(E),window[P]=function(){n(P)}},r),T.onerror=function(){S(new Error("JSONP request to "+s+" failed")),n(P),i(E),p&&clearTimeout(p)}})}},j!==void 0&&M!==void 0?y(0,M):(y(y={exports:{}},y),h.fetchJsonp=y.exports)},{}],249:[function(t,M,j){var h=function(y){var l,d,v,m,n,i,s,a,c,r,u;if(!(y===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return u=y.document,l=function(){return y.URL||y.webkitURL||y},d=u.createElementNS("http://www.w3.org/1999/xhtml","a"),v="download"in d,m=/constructor/i.test(y.HTMLElement)||y.safari,n=/CriOS\/[\d]+/.test(navigator.userAgent),i=function(p){(y.setImmediate||y.setTimeout)(function(){throw p},0)},s=4e4,a=function(p){setTimeout(function(){typeof p=="string"?l().revokeObjectURL(p):p.remove()},s)},c=function(p){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(p.type)?new Blob(["\uFEFF",p],{type:p.type}):p},u=(r=function(p,g,O){O||(p=c(p));var P,E,T=this,O=p.type==="application/octet-stream",R=function(){for(var k=T,D="writestart progress write writeend".split(" "),L=void 0,U=(D=[].concat(D)).length;U--;){var F=k["on"+D[U]];if(typeof F=="function")try{F.call(k,L||k)}catch(V){i(V)}}};T.readyState=T.INIT,v?(P=l().createObjectURL(p),setTimeout(function(){var k,D;d.href=P,d.download=g,k=d,D=new MouseEvent("click"),k.dispatchEvent(D),R(),a(P),T.readyState=T.DONE})):(n||O&&m)&&y.FileReader?((E=new FileReader).onloadend=function(){var k=n?E.result:E.result.replace(/^data:[^;]*;/,"data:attachment/file;");y.open(k,"_blank")||(y.location.href=k),k=void 0,T.readyState=T.DONE,R()},E.readAsDataURL(p),T.readyState=T.INIT):(P=P||l().createObjectURL(p),!O&&y.open(P,"_blank")||(y.location.href=P),T.readyState=T.DONE,R(),a(P))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(p,g,S){return g=g||p.name||"download",S||(p=c(p)),navigator.msSaveOrOpenBlob(p,g)}:(u.abort=function(){},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(p,g,S){return new r(p,g||p.name||"download",S)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);M!==void 0&&M.exports?M.exports.saveAs=h:b!=null},{}],250:[function(t,M,j){var h,y=Object.defineProperty,l=(y(j,"__esModule",{value:!0}),j),d={GIFEncoder:()=>R,applyPalette:()=>function(V,X,H="rgb565"){if(!V||!V.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(V instanceof Uint8Array||V instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<X.length)throw new Error("applyPalette() only works with 256 colors or less");const G=new Uint32Array(V.buffer),K=G.length,Z=H==="rgb444"?4096:65536,oe=new Uint8Array(K),x=new Array(Z);if(H==="rgba4444")for(let ce=0;ce<K;ce++){var $=G[ce],I=$>>24&255,B=$>>16&255,W=$>>8&255,$=255&$,te=a($,W,B,I),te=te in x?x[te]:x[te]=function(ee,ue,me,je,ye){let be=0,Se=1e100;for(let Ge=0;Ge<ye.length;Ge++){var Fe,Me=ye[Ge],Ze=E(Me[3]-je);Ze>Se||(Fe=Me[0],(Ze+=E(Fe-ee))>Se||(Fe=Me[1],(Ze+=E(Fe-ue))>Se||(Fe=Me[2],(Ze+=E(Fe-me))>Se||(Se=Ze,be=Ge))))}return be}($,W,B,I,X);oe[ce]=te}else{const ce=H==="rgb444"?c:s;for(let ee=0;ee<K;ee++){var se=G[ee],ie=se>>16&255,de=se>>8&255,se=255&se,he=ce(se,de,ie),he=he in x?x[he]:x[he]=function(ue,me,je,ye){let be=0,Se=1e100;for(let Ge=0;Ge<ye.length;Ge++){var Fe,Me=ye[Ge],Ze=E(Me[0]-ue);Ze>Se||(Fe=Me[1],(Ze+=E(Fe-me))>Se||(Fe=Me[2],(Ze+=E(Fe-je))>Se||(Se=Ze,be=Ge)))}return be}(se,de,ie,X);oe[ee]=he}}return oe},default:()=>F,nearestColor:()=>function(V,X,H=S){return V[T(V,X,H)]},nearestColorIndex:()=>T,nearestColorIndexWithDistance:()=>O,prequantize:()=>function(V,{roundRGB:X=5,roundAlpha:H=10,oneBitAlpha:G=null}={}){const K=new Uint32Array(V.buffer);for(let B=0;B<K.length;B++){var I=K[B];let W=I>>24&255;var Z,oe=I>>16&255,x=I>>8&255,I=255&I;W=P(W,H),G&&(Z=typeof G=="number"?G:127,W=W<=Z?0:255),I=P(I,X),x=P(x,X),oe=P(oe,X),K[B]=W<<24|oe<<16|x<<8|I<<0}},quantize:()=>function(V,X,H={}){var{format:G="rgb565",clearAlpha:K=!0,clearAlphaColor:Z=0,clearAlphaThreshold:oe=0,oneBitAlpha:x=!1}=H;if(!V||!V.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(V instanceof Uint8Array||V instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");V=new Uint32Array(V.buffer);let I=H.useSqrt!==!1;const B=G==="rgba4444",W=function(ze,qe){const He=qe==="rgb444"?4096:65536,_e=new Array(He),Le=ze.length;if(qe==="rgba4444")for(let nt=0;nt<Le;++nt){var Y=ze[nt],Ee=Y>>24&255,Q=Y>>16&255,re=Y>>8&255,Y=255&Y,ne=a(Y,re,Q,Ee);let Qe=ne in _e?_e[ne]:_e[ne]=g();Qe.rc+=Y,Qe.gc+=re,Qe.bc+=Q,Qe.ac+=Ee,Qe.cnt++}else if(qe==="rgb444")for(let nt=0;nt<Le;++nt){var Oe=ze[nt],ge=Oe>>16&255,xe=Oe>>8&255,Oe=255&Oe,Ue=c(Oe,xe,ge);let Qe=Ue in _e?_e[Ue]:_e[Ue]=g();Qe.rc+=Oe,Qe.gc+=xe,Qe.bc+=ge,Qe.cnt++}else for(let nt=0;nt<Le;++nt){var Xe=ze[nt],Be=Xe>>16&255,Ve=Xe>>8&255,Xe=255&Xe,st=s(Xe,Ve,Be);let Qe=st in _e?_e[st]:_e[st]=g();Qe.rc+=Xe,Qe.gc+=Ve,Qe.bc+=Be,Qe.cnt++}return _e}(V,G),$=W.length,te=$-1,ie=new Uint32Array($+1);for(var de=0,se=0;se<$;++se){const ze=W[se];ze!=null&&(Me=1/ze.cnt,B&&(ze.ac*=Me),ze.rc*=Me,ze.gc*=Me,ze.bc*=Me,W[de++]=ze)}u(X)/de<.022&&(I=!1);for(var he,ce,ee,se=0;se<de-1;++se)W[se].fw=se+1,W[se+1].bk=se,I&&(W[se].cnt=Math.sqrt(W[se].cnt));for(I&&(W[se].cnt=Math.sqrt(W[se].cnt)),se=0;se<de;++se){p(W,se,!1);var ue=W[se].err;for(ce=++ie[0];1<ce&&(ee=ce>>1,!(W[he=ie[ee]].err<=ue));ce=ee)ie[ce]=he;ie[ce]=se}var me,je=de-X;for(se=0;se<je;){for(;;){var ye=ie[1];if((me=W[ye]).tm>=me.mtm&&W[me.nn].mtm<=me.tm)break;for(me.mtm==te?ye=ie[1]=ie[ie[0]--]:(p(W,ye,!1),me.tm=se),ue=W[ye].err,ce=1;(ee=ce+ce)<=ie[0]&&(ee<ie[0]&&W[ie[ee]].err>W[ie[ee+1]].err&&ee++,!(ue<=W[he=ie[ee]].err));ce=ee)ie[ce]=he;ie[ce]=ye}var be=W[me.nn],Se=me.cnt,Fe=be.cnt,Me=1/(Se+Fe);B&&(me.ac=Me*(Se*me.ac+Fe*be.ac)),me.rc=Me*(Se*me.rc+Fe*be.rc),me.gc=Me*(Se*me.gc+Fe*be.gc),me.bc=Me*(Se*me.bc+Fe*be.bc),me.cnt+=be.cnt,me.mtm=++se,W[be.bk].fw=be.fw,W[be.fw].bk=be.bk,be.mtm=te}let Ze=[];for(se=0;;0){let ze=r(Math.round(W[se].rc),0,255),qe=r(Math.round(W[se].gc),0,255),He=r(Math.round(W[se].bc),0,255),_e=255;B&&(_e=r(Math.round(W[se].ac),0,255),x&&(Ge=typeof x=="number"?x:127,_e=_e<=Ge?0:255),K&&_e<=oe&&(ze=qe=He=Z,_e=0));var Ge=B?[ze,qe,He,_e]:[ze,qe,He];if(function(Le,Ee){for(let Y=0;Y<Le.length;Y++){var re=Le[Y],Q=re[0]===Ee[0]&&re[1]===Ee[1]&&re[2]===Ee[2],re=!(4<=re.length&&4<=Ee.length)||re[3]===Ee[3];if(Q&&re)return!0}return!1}(Ze,Ge)||Ze.push(Ge),(se=W[se].fw)==0)break}return Ze},snapColorsToPalette:()=>function(V,X,H=5){if(V.length&&X.length){var G=V.map(I=>I.slice(0,3)),K=H*H,Z=V[0].length;for(let I=0;I<X.length;I++){let B=X[I];B=B.length<Z?[B[0],B[1],B[2],255]:B.length>Z?B.slice(0,3):B.slice();var x=O(G,B.slice(0,3),S),oe=x[0],x=x[1];0<x&&x<=K&&(V[oe]=B)}}}};for(h in d)y(l,h,{get:d[h],enumerable:!0});var v={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function m(V=256){let X=0,H=new Uint8Array(V);return{get buffer(){return H.buffer},reset(){X=0},bytesView(){return H.subarray(0,X)},bytes(){return H.slice(0,X)},writeByte(K){G(X+1),H[X]=K,X++},writeBytes(K,Z=0,oe=K.length){G(X+oe);for(let x=0;x<oe;x++)H[X++]=K[x+Z]},writeBytesView(K,Z=0,oe=K.byteLength){G(X+oe),H.set(K.subarray(Z,Z+oe),X),X+=oe}};function G(K){var Z=H.length;if(!(K<=Z)){K=Math.max(K,Z*(Z<1048576?2:1.125)>>>0),Z!=0&&(K=Math.max(K,256));const oe=H;H=new Uint8Array(K),0<X&&H.set(oe.subarray(0,X),0)}}}var n=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],i=function(V,X,H,B,K=m(512),Z=new Uint8Array(256),oe=new Int32Array(5003),x=new Int32Array(5003)){var I=oe.length,B=Math.max(2,B);Z.fill(0),x.fill(0),oe.fill(-1);let W=0,$=0;var te=B+1;const ie=te;let de=!1,se=ie,he=(1<<se)-1;var ce=1<<te-1;const ee=1+ce;let ue=2+ce,me=0,je=H[0],ye=0;for(let Ge=I;Ge<65536;Ge*=2)++ye;ye=8-ye,K.writeByte(B),Ze(ce);var be=H.length;for(let Ge=1;Ge<be;Ge++)e:{var Se=H[Ge],Fe=(Se<<12)+je;let ze=Se<<ye^je;if(oe[ze]===Fe)je=x[ze];else{for(var Me=ze===0?1:I-ze;0<=oe[ze];)if((ze-=Me)<0&&(ze+=I),oe[ze]===Fe){je=x[ze];break e}Ze(je),je=Se,ue<4096?(x[ze]=ue++,oe[ze]=Fe):(oe.fill(-1),ue=2+ce,de=!0,Ze(ce))}}return Ze(je),Ze(ee),K.writeByte(0),K.bytesView();function Ze(Ge){for(W&=n[$],0<$?W|=Ge<<$:W=Ge,$+=se;8<=$;)Z[me++]=255&W,254<=me&&(K.writeByte(me),K.writeBytesView(Z,0,me),me=0),W>>=8,$-=8;if((ue>he||de)&&(de?(se=ie,he=(1<<se)-1,de=!1):(++se,he=se===12?1<<se:(1<<se)-1)),Ge==ee){for(;0<$;)Z[me++]=255&W,254<=me&&(K.writeByte(me),K.writeBytesView(Z,0,me),me=0),W>>=8,$-=8;0<me&&(K.writeByte(me),K.writeBytesView(Z,0,me),me=0)}}};function s(V,X,H){return V<<8&63488|X<<2&992|H>>3}function a(V,X,H,G){return V>>4|240&X|(240&H)<<4|(240&G)<<8}function c(V,X,H){return V>>4<<8|240&X|H>>4}function r(V,X,H){return V<X?X:H<V?H:V}function u(V){return V*V}function p(V,X,H){var G=0,K=1e100;const Z=V[X];for(var oe=Z.cnt,x=Z.ac,I=Z.rc,B=Z.gc,W=Z.bc,$=Z.fw;$!=0;$=V[$].fw){var te,ie=V[$],de=ie.cnt,de=oe*de/(oe+de);K<=de||(te=0,H&&K<=(te+=de*u(ie.ac-x))||K<=(te+=de*u(ie.rc-I))||K<=(te+=de*u(ie.gc-B))||K<=(te+=de*u(ie.bc-W))||(K=te,G=$))}Z.err=K,Z.nn=G}function g(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function S(V,X){for(var H=0,G=0;G<V.length;G++){var K=V[G]-X[G];H+=K*K}return H}function P(V,X){return 1<X?Math.round(V/X)*X:V}function E(V){return V*V}function T(V,X,H=S){let G=1/0,K=-1;for(let oe=0;oe<V.length;oe++){var Z=H(X,V[oe]);Z<G&&(G=Z,K=oe)}return K}function O(V,X,H=S){let G=1/0,K=-1;for(let oe=0;oe<V.length;oe++){var Z=H(X,V[oe]);Z<G&&(G=Z,K=oe)}return[K,G]}function R(V={}){const{initialCapacity:X=4096,auto:H=!0}=V,G=m(X),K=new Uint8Array(256),Z=new Int32Array(5003),oe=new Int32Array(5003);let x=!1;return{reset(){G.reset(),x=!1},finish(){G.writeByte(v.trailer)},bytes(){return G.bytes()},bytesView(){return G.bytesView()},get buffer(){return G.buffer},get stream(){return G},writeHeader:I,writeFrame(B,W,$,je={}){var{transparent:ie=!1,transparentIndex:de=0,delay:Me=0,palette:se=null,repeat:be=0,colorDepth:he=8,dispose:ce=-1}=je;let ee=!1;if(H?x||(ee=!0,I(),x=!0):ee=!!je.first,W=Math.max(0,Math.floor(W)),$=Math.max(0,Math.floor($)),ee){if(!se)throw new Error("First frame must include a { palette } option");var[je,Se,me,Fe,ye=8]=[G,W,$,se,he];Fe=U(Fe.length)-1,ye=128|ye-1<<4|Fe,D(je,Se),D(je,me),je.writeBytes([ye,0,0]),k(G,se),0<=be&&(Fe=G,Se=be,Fe.writeByte(33),Fe.writeByte(255),Fe.writeByte(11),L(Fe,"NETSCAPE2.0"),Fe.writeByte(3),Fe.writeByte(1),D(Fe,Se),Fe.writeByte(0))}var ue,me=Math.round(Me/10),je=G,ye=ce,be=me,Se=ie,Fe=de,Me=(je.writeByte(33),je.writeByte(249),je.writeByte(4),Fe<0&&(Fe=0,Se=!1),Se=Se?(ue=1,2):ue=0,0<=ye&&(Se=7&ye),Se<<=2,je.writeByte(0|Se|ue),D(je,be),je.writeByte(Fe||0),je.writeByte(0),!!se&&!ee);ce=G,ie=W,de=$,ue=Me?se:null,ce.writeByte(44),D(ce,0),D(ce,0),D(ce,ie),D(ce,de),ue?(ie=U(ue.length)-1,ce.writeByte(128|ie)):ce.writeByte(0),Me&&k(G,se),[be,je,de,ie,ce=8,Me,se,B]=[G,B,W,$,he,K,Z,oe],i(de,ie,je,ce,be,Me,se,B)}};function I(){L(G,"GIF89a")}}function k(V,X){var H=1<<U(X.length);for(let G=0;G<H;G++){let K=[0,0,0];G<X.length&&(K=X[G]),V.writeByte(K[0]),V.writeByte(K[1]),V.writeByte(K[2])}}function D(V,X){V.writeByte(255&X),V.writeByte(X>>8&255)}function L(V,X){for(var H=0;H<X.length;H++)V.writeByte(X.charCodeAt(H))}function U(V){return Math.max(Math.ceil(Math.log2(V)),1)}var F=R},{}],251:[function(t,M,j){j.read=function(h,y,l,d,p){var m,n,i=8*p-d-1,s=(1<<i)-1,a=s>>1,c=-7,r=l?p-1:0,u=l?-1:1,p=h[y+r];for(r+=u,m=p&(1<<-c)-1,p>>=-c,c+=i;0<c;m=256*m+h[y+r],r+=u,c-=8);for(n=m&(1<<-c)-1,m>>=-c,c+=d;0<c;n=256*n+h[y+r],r+=u,c-=8);if(m===0)m=1-a;else{if(m===s)return n?NaN:1/0*(p?-1:1);n+=Math.pow(2,d),m-=a}return(p?-1:1)*n*Math.pow(2,m-d)},j.write=function(h,y,l,d,v,g){var n,i,s=8*g-v-1,a=(1<<s)-1,c=a>>1,r=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=d?0:g-1,p=d?1:-1,g=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(i=isNaN(y)?1:0,n=a):(n=Math.floor(Math.log(y)/Math.LN2),y*(d=Math.pow(2,-n))<1&&(n--,d*=2),2<=(y+=1<=n+c?r/d:r*Math.pow(2,1-c))*d&&(n++,d/=2),a<=n+c?(i=0,n=a):1<=n+c?(i=(y*d-1)*Math.pow(2,v),n+=c):(i=y*Math.pow(2,c-1)*Math.pow(2,v),n=0));8<=v;h[l+u]=255&i,u+=p,i/=256,v-=8);for(n=n<<v|i,s+=v;0<s;h[l+u]=255&n,u+=p,n/=256,s-=8);h[l+u-p]|=128*g}},{}],252:[function(t,M,j){var h;function y(Q,re){return Q.b===re.b&&Q.a===re.a}function l(Q,re){return Q.b<re.b||Q.b===re.b&&Q.a<=re.a}function d(Q,re,Y){var ne=re.b-Q.b,ge=Y.b-re.b;return 0<ne+ge?ne<ge?re.a-Q.a+ne/(ne+ge)*(Q.a-Y.a):re.a-Y.a+ge/(ne+ge)*(Y.a-Q.a):0}function v(Q,re,Y){var ne=re.b-Q.b,ge=Y.b-re.b;return 0<ne+ge?(re.a-Y.a)*ne+(re.a-Q.a)*ge:0}function m(Q,re){return Q.a<re.a||Q.a===re.a&&Q.b<=re.b}function n(Q,re,Y){var ne=re.a-Q.a,ge=Y.a-re.a;return 0<ne+ge?ne<ge?re.b-Q.b+ne/(ne+ge)*(Q.b-Y.b):re.b-Y.b+ge/(ne+ge)*(Y.b-Q.b):0}function i(Q,re,Y){var ne=re.a-Q.a,ge=Y.a-re.a;return 0<ne+ge?(re.b-Y.b)*ne+(re.b-Q.b)*ge:0}function s(Q,re,Y,ne){return(Q=Q<0?0:Q)<=(Y=Y<0?0:Y)?Y===0?(re+ne)/2:re+Q/(Q+Y)*(ne-re):ne+Y/(Q+Y)*(re-ne)}function a(Q){var re=g(Q.b);return P(re,Q.c),P(re.b,Q.c),E(re,Q.a),re}function c(Q,re){var Y=!1,ne=!1;Q!==re&&(re.a!==Q.a&&(ne=!0,O(re.a,Q.a)),re.d!==Q.d&&(Y=!0,R(re.d,Q.d)),S(re,Q),ne||(P(re,Q.a),Q.a.c=Q),Y||(E(re,Q.d),Q.d.a=Q))}function r(Q){var re=Q.b,Y=!1;Q.d!==Q.b.d&&(Y=!0,R(Q.d,Q.b.d)),Q.c===Q?O(Q.a,null):(Q.b.d.a=Q.b.e,Q.a.c=Q.c,S(Q,Q.b.e),Y||E(Q,Q.d)),re.c===re?(O(re.a,null),R(re.d,null)):(Q.d.a=re.b.e,re.a.c=re.c,S(re,re.b.e)),T(Q)}function u(Q){var re=g(Q),Y=re.b;return S(re,Q.e),re.a=Q.b.a,P(Y,re.a),re.d=Y.d=Q.d,re=re.b,S(Q.b,Q.b.b.e),S(Q.b,re),Q.b.a=re.a,re.b.a.c=re.b,re.b.d=Q.b.d,re.f=Q.f,re.b.f=Q.b.f,re}function p(Q,re){var Y=!1,ne=g(Q),ge=ne.b;return re.d!==Q.d&&(Y=!0,R(re.d,Q.d)),S(ne,Q.e),S(ge,re),ne.a=Q.b.a,ge.a=re.a,ne.d=ge.d=Q.d,Q.d.a=ge,Y||E(ne,Q.d),ne}function g(Q){var re=new me,Y=new me,ne=Q.b.h;return(((Y.h=ne).b.h=re).h=Q).b.h=Y,re.b=Y,((re.c=re).e=Y).b=re,(Y.c=Y).e=re}function S(Q,re){var Y=Q.c,ne=re.c;Y.b.e=re,(ne.b.e=Q).c=ne,re.c=Y}function P(Q,re){var Y=re.f,ne=new ye(re,Y);for(Y.e=ne,Y=(re.f=ne).c=Q;Y.a=ne,(Y=Y.c)!==Q;);}function E(Q,re){var Y=re.d,ne=new ue(re,Y);for(Y.b=ne,(re.d=ne).a=Q,ne.c=re.c,Y=Q;Y.d=ne,(Y=Y.e)!==Q;);}function T(Q){var re=Q.h;Q=Q.b.h,(re.b.h=Q).b.h=re}function O(Q,re){for(var Y=Q.c,ne=Y;ne.a=re,(ne=ne.c)!==Y;);Y=Q.f,((ne=Q.e).f=Y).e=ne}function R(Q,re){for(var Y=Q.a,ne=Y;ne.d=re,(ne=ne.e)!==Y;);Y=Q.d,((ne=Q.b).d=Y).b=ne}function k(Q){var re=0;return Math.abs(Q[1])>Math.abs(Q[0])&&(re=1),re=Math.abs(Q[2])>Math.abs(Q[re])?2:re}function D(Q,re){Q.f+=re.f,Q.b.f+=re.b.f}function L(Q,re,Y){return Q=Q.a,re=re.a,Y=Y.a,re.b.a===Q?Y.b.a===Q?l(re.a,Y.a)?v(Y.b.a,re.a,Y.a)<=0:0<=v(re.b.a,Y.a,re.a):v(Y.b.a,Q,Y.a)<=0:Y.b.a===Q?0<=v(re.b.a,Q,re.a):(re=d(re.b.a,Q,re.a),(Q=d(Y.b.a,Q,Y.a))<=re)}function U(Q){Q.a.i=null;var re=Q.e;re.a.c=re.c,re.c.a=re.a,Q.e=null}function F(Q,re){r(Q.a),Q.c=!1,(Q.a=re).i=Q}function V(Q){for(var re=Q.a.a;(Q=Ee(Q)).a.a===re;);return Q.c&&(F(Q,re=p(Le(Q).a.b,Q.a.e)),Q=Ee(Q)),Q}function X(Q,re,Y){var ne=new _e;return ne.a=Y,ne.e=de(Q.f,re.e,ne),Y.i=ne}function H(Q,re){switch(Q.s){case 100130:return(1&re)!=0;case 100131:return re!==0;case 100132:return 0<re;case 100133:return re<0;case 100134:return 2<=re||re<=-2}return!1}function G(Q){var re=Q.a,Y=re.d;Y.c=Q.d,Y.a=re,U(Q)}function K(Q,re,Y){for(re=(Q=re).a;Q!==Y;){Q.c=!1;var ne=Le(Q),ge=ne.a;if(ge.a!==re.a){if(!ne.c){G(Q);break}F(ne,ge=p(re.c.b,ge.b))}re.c!==ge&&(c(ge.b.e,ge),c(re,ge)),G(Q),re=ne.a,Q=ne}return re}function Z(Q,re,Y,ne,ge,xe){for(var Oe=!0;X(Q,re,Y.b),(Y=Y.c)!==ne;);for(ge===null&&(ge=Le(re).a.b.c);(Y=(ne=Le(re)).a.b).a===ge.a;)Y.c!==ge&&(c(Y.b.e,Y),c(ge.b.e,Y)),ne.f=re.f-Y.f,ne.d=H(Q,ne.f),re.b=!0,!Oe&&B(Q,re)&&(D(Y,ge),U(re),r(ge)),Oe=!1,re=ne,ge=Y;re.b=!0,xe&&$(Q,re)}function oe(Q,re,Y,ne,ge){var xe=[re.g[0],re.g[1],re.g[2]];re.d=null,re.d=Q.o&&Q.o(xe,Y,ne,Q.c)||null,re.d===null&&(ge?Q.n||(ee(Q,100156),Q.n=!0):re.d=Y[0])}function x(Q,re,Y){var ne=[null,null,null,null];ne[0]=re.a.d,ne[1]=Y.a.d,oe(Q,re.a,ne,[.5,.5,0,0],!1),c(re,Y)}function I(Q,re,Y,ne,ge){var xe=Math.abs(re.b-Q.b)+Math.abs(re.a-Q.a),Oe=Math.abs(Y.b-Q.b)+Math.abs(Y.a-Q.a),Ue=ge+1;ne[ge]=.5*Oe/(xe+Oe),ne[Ue]=.5*xe/(xe+Oe),Q.g[0]+=ne[ge]*re.g[0]+ne[Ue]*Y.g[0],Q.g[1]+=ne[ge]*re.g[1]+ne[Ue]*Y.g[1],Q.g[2]+=ne[ge]*re.g[2]+ne[Ue]*Y.g[2]}function B(Q,re){var Y=Le(re),ne=re.a,ge=Y.a;if(l(ne.a,ge.a)){if(0<v(ge.b.a,ne.a,ge.a))return;if(y(ne.a,ge.a)){if(ne.a!==ge.a){var Y=Q.e,xe=ne.a.h;if(0<=xe){var Oe=(Y=Y.b).d,Ue=Y.e,Be=Y.c,Ve=Be[xe];Oe[Ve]=Oe[Y.a],(Be[Oe[Ve]]=Ve)<=--Y.a&&(Ve<=1||l(Ue[Oe[Ve>>1]],Ue[Oe[Ve]])?qe:He)(Y,Ve),Ue[xe]=null,Be[xe]=Y.b,Y.b=xe}else for(Y.c[-(xe+1)]=null;0<Y.a&&Y.c[Y.d[Y.a-1]]===null;)--Y.a;x(Q,ge.b.e,ne)}}else u(ge.b),c(ne,ge.b.e),re.b=Y.b=!0}else{if(v(ne.b.a,ge.a,ne.a)<0)return;Ee(re).b=re.b=!0,u(ne.b),c(ge.b.e,ne)}return 1}function W(Q,re){var Y=Le(re),ne=re.a,ge=Y.a,xe=ne.a,Oe=ge.a,Ue=ne.b.a,Be=ge.b.a,Ve=new ye;if(v(Ue,Q.a,xe),v(Be,Q.a,Oe),!(xe===Oe||Math.min(xe.a,Ue.a)>Math.max(Oe.a,Be.a))){if(l(xe,Oe)){if(0<v(Be,xe,Oe))return}else if(v(Ue,Oe,xe)<0)return;var Xe,st,nt=Ue,Qe=xe,ot=Be,rt=Oe;if(l(nt,Qe)||(Xe=nt,nt=Qe,Qe=Xe),l(ot,rt)||(Xe=ot,ot=rt,rt=Xe),l(nt,ot)||(Xe=nt,nt=ot,ot=Xe,Xe=Qe,Qe=rt,rt=Xe),l(ot,Qe)?l(Qe,rt)?((Xe=d(nt,ot,Qe))+(st=d(ot,Qe,rt))<0&&(Xe=-Xe,st=-st),Ve.b=s(Xe,ot.b,st,Qe.b)):((Xe=v(nt,ot,Qe))+(st=-v(nt,rt,Qe))<0&&(Xe=-Xe,st=-st),Ve.b=s(Xe,ot.b,st,rt.b)):Ve.b=(ot.b+Qe.b)/2,m(nt,Qe)||(Xe=nt,nt=Qe,Qe=Xe),m(ot,rt)||(Xe=ot,ot=rt,rt=Xe),m(nt,ot)||(Xe=nt,nt=ot,ot=Xe,Xe=Qe,Qe=rt,rt=Xe),m(ot,Qe)?m(Qe,rt)?((Xe=n(nt,ot,Qe))+(st=n(ot,Qe,rt))<0&&(Xe=-Xe,st=-st),Ve.a=s(Xe,ot.a,st,Qe.a)):((Xe=i(nt,ot,Qe))+(st=-i(nt,rt,Qe))<0&&(Xe=-Xe,st=-st),Ve.a=s(Xe,ot.a,st,rt.a)):Ve.a=(ot.a+Qe.a)/2,l(Ve,Q.a)&&(Ve.b=Q.a.b,Ve.a=Q.a.a),nt=l(xe,Oe)?xe:Oe,l(nt,Ve)&&(Ve.b=nt.b,Ve.a=nt.a),y(Ve,xe)||y(Ve,Oe))return B(Q,re),0;if(!y(Ue,Q.a)&&0<=v(Ue,Q.a,Ve)||!y(Be,Q.a)&&v(Be,Q.a,Ve)<=0){if(Be===Q.a)u(ne.b),c(ge.b,ne),ne=Le(re=V(re)).a,K(Q,Le(re),Y),Z(Q,re,ne.b.e,ne,ne,!0);else{if(Ue!==Q.a)return 0<=v(Ue,Q.a,Ve)&&(Ee(re).b=re.b=!0,u(ne.b),ne.a.b=Q.a.b,ne.a.a=Q.a.a),void(v(Be,Q.a,Ve)<=0&&(re.b=Y.b=!0,u(ge.b),ge.a.b=Q.a.b,ge.a.a=Q.a.a));for(u(ge.b),c(ne.e,ge.b.e),Oe=(xe=Y=re).a.b.a;(xe=Ee(xe)).a.b.a===Oe;);xe=Le(re=xe).a.b.c,Y.a=ge.b.e,Z(Q,re,(ge=K(Q,Y,null)).c,ne.b.c,xe,!0)}return 1}u(ne.b),u(ge.b),c(ge.b.e,ne),ne.a.b=Ve.b,ne.a.a=Ve.a,ne.a.h=Se(Q.e,ne.a),ne=ne.a,ge=[0,0,0,0],Ve=[xe.d,Ue.d,Oe.d,Be.d],ne.g[0]=ne.g[1]=ne.g[2]=0,I(ne,xe,Ue,ge,0),I(ne,Oe,Be,ge,2),oe(Q,ne,Ve,ge,!0),Ee(re).b=re.b=Y.b=!0}}function $(Q,re){for(var Y=Le(re);;){for(;Y.b;)Y=Le(re=Y);if(!re.b&&((re=Ee(Y=re))===null||!re.b))break;re.b=!1;var ne=re.a,ge=Y.a;if(xe=ne.b.a!==ge.b.a)e:{var xe,Oe=Le(xe=re),Ue=xe.a,Be=Oe.a,Ve=void 0;if(l(Ue.b.a,Be.b.a)){if(v(Ue.b.a,Be.b.a,Ue.a)<0){xe=!1;break e}Ee(xe).b=xe.b=!0,Ve=u(Ue),c(Be.b,Ve),Ve.d.c=xe.d}else{if(0<v(Be.b.a,Ue.b.a,Be.a)){xe=!1;break e}xe.b=Oe.b=!0,Ve=u(Be),c(Ue.e,Be.b),Ve.b.d.c=xe.d}xe=!0}if(xe&&(Y.c?(U(Y),r(ge),ge=(Y=Le(re)).a):re.c&&(U(re),r(ne),ne=(re=Ee(Y)).a)),ne.a!==ge.a){if(ne.b.a===ge.b.a||re.c||Y.c||ne.b.a!==Q.a&&ge.b.a!==Q.a)B(Q,re);else if(W(Q,re))break}ne.a===ge.a&&ne.b.a===ge.b.a&&(D(ge,ne),U(re),r(ne),re=Ee(Y))}}function te(Q,re){var Y=new _e,ne=a(Q.b);ne.a.b=4e150,ne.a.a=re,ne.b.a.b=-4e150,ne.b.a.a=re,Q.a=ne.b.a,Y.a=ne,Y.f=0,Y.d=!1,Y.c=!1,Y.h=!0,Y.b=!1,ne=de(ne=Q.f,ne.a,Y),Y.e=ne}function ie(Q){this.a=new se,this.b=Q,this.c=L}function de(Q,re,Y){for(;(re=re.c).b!==null&&!Q.c(Q.b,re.b,Y););return Q=new se(Y,re.a,re),re.a.c=Q,re.a=Q}function se(Q,re,Y){this.b=Q||null,this.a=re||this,this.c=Y||this}function he(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function ce(Q,re){if(Q.d!==re)for(;Q.d!==re;)if(Q.d<re)switch(Q.d){case 0:ee(Q,100151),Q.u(null);break;case 1:ee(Q,100152),Q.t()}else switch(Q.d){case 2:ee(Q,100154),Q.v();break;case 1:ee(Q,100153),Q.w()}}function ee(Q,re){Q.p&&Q.p(re,Q.c)}function ue(Q,re){this.b=Q||this,this.d=re||this,this.a=null,this.c=!1}function me(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function je(){this.c=new ye,this.a=new ue,this.b=new me,this.d=new me,this.b.b=this.d,this.d.b=this.b}function ye(Q,re){this.e=Q||this,this.f=re||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function be(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Me}function Se(Q,re){var Y,ne,ge;return Q.e?(2*(ne=++(Y=Q.b).a)>Y.f&&(Y.f*=2,Y.c=Ze(Y.c,Y.f+1)),Y.b===0?ge=ne:(ge=Y.b,Y.b=Y.c[Y.b]),Y.e[ge]=re,Y.c[ge]=ne,Y.d[ne]=ge,Y.h&&He(Y,ne),ge):(Y=Q.a++,Q.c[Y]=re,-(Y+1))}function Fe(Q){if(Q.a===0)return ze(Q.b);var re=Q.c[Q.d[Q.a-1]];if(Q.b.a!==0&&l(Ge(Q.b),re))return ze(Q.b);for(;--Q.a,0<Q.a&&Q.c[Q.d[Q.a-1]]===null;);return re}function Me(){this.d=Ze([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Ze(Q,re){for(var Y=Array(re),ne=0;ne<Q.length;ne++)Y[ne]=Q[ne];for(;ne<re;ne++)Y[ne]=0;return Y}function Ge(Q){return Q.e[Q.d[1]]}function ze(Q){var re=Q.d,Y=Q.e,ne=Q.c,ge=re[1],xe=Y[ge];return 0<Q.a&&(re[1]=re[Q.a],ne[re[1]]=1,Y[ge]=null,ne[ge]=Q.b,Q.b=ge,0<--Q.a&&qe(Q,1)),xe}function qe(Q,re){for(var Y=Q.d,ne=Q.e,ge=Q.c,xe=re,Oe=Y[xe];;){var Ue=xe<<1,Be=(Ue<Q.a&&l(ne[Y[Ue+1]],ne[Y[Ue]])&&(Ue+=1),Y[Ue]);if(Ue>Q.a||l(ne[Oe],ne[Be])){ge[Y[xe]=Oe]=xe;break}ge[Y[xe]=Be]=xe,xe=Ue}}function He(Q,re){for(var Y=Q.d,ne=Q.e,ge=Q.c,xe=re,Oe=Y[xe];;){var Ue=xe>>1,Be=Y[Ue];if(Ue==0||l(ne[Be],ne[Oe])){ge[Y[xe]=Oe]=xe;break}ge[Y[xe]=Be]=xe,xe=Ue}}function _e(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Le(Q){return Q.e.c.b}function Ee(Q){return Q.e.a.b}(h=he.prototype).x=function(){ce(this,0)},h.B=function(Q,re){switch(Q){case 100142:return;case 100140:switch(re){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=re)}break;case 100141:return void(this.m=!!re);default:return void ee(this,100900)}ee(this,100901)},h.y=function(Q){switch(Q){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ee(this,100900)}return!1},h.A=function(Q,re,Y){this.j[0]=Q,this.j[1]=re,this.j[2]=Y},h.z=function(Q,re){var Y=re||null;switch(Q){case 100100:case 100106:this.h=Y;break;case 100104:case 100110:this.l=Y;break;case 100101:case 100107:this.k=Y;break;case 100102:case 100108:this.i=Y;break;case 100103:case 100109:this.p=Y;break;case 100105:case 100111:this.o=Y;break;case 100112:this.r=Y;break;default:ee(this,100900)}},h.C=function(Q,re){var Y=!1,ne=[0,0,0];ce(this,2);for(var ge=0;ge<3;++ge){var xe=Q[ge];xe<-1e150&&(xe=-1e150,Y=!0),1e150<xe&&(xe=1e150,Y=!0),ne[ge]=xe}Y&&ee(this,100155),(Y=this.q)===null?c(Y=a(this.b),Y.b):(u(Y),Y=Y.e),Y.a.d=re,Y.a.g[0]=ne[0],Y.a.g[1]=ne[1],Y.a.g[2]=ne[2],Y.f=1,Y.b.f=-1,this.q=Y},h.u=function(Q){ce(this,0),this.d=1,this.b=new je,this.c=Q},h.t=function(){ce(this,1),this.d=2,this.q=null},h.v=function(){ce(this,2),this.d=1},h.w=function(){ce(this,1),this.d=0;var Q,re,Y=this.j[0],ne=this.j[1],ge=this.j[2],xe=!1,Oe=[Y,ne,ge];if(Y===0&&ne===0&&ge===0){for(var ne=[-2e150,-2e150,-2e150],Ue=[2e150,2e150,2e150],ge=[],Be=[],Y=(xe=this.b.c).e;Y!==xe;Y=Y.e)for(var Ve=0;Ve<3;++Ve){var Xe=Y.g[Ve];Xe<Ue[Ve]&&(Ue[Ve]=Xe,Be[Ve]=Y),Xe>ne[Ve]&&(ne[Ve]=Xe,ge[Ve]=Y)}if(ne[1]-Ue[1]>ne[Y=0]-Ue[0]&&(Y=1),Ue[Y=ne[2]-Ue[2]>ne[Y]-Ue[Y]?2:Y]>=ne[Y])Oe[0]=0,Oe[1]=0,Oe[2]=1;else{for(Ue=Be[Y],ge=ge[Y],Be=[ne=0,0,0],Ue=[Ue.g[0]-ge.g[0],Ue.g[1]-ge.g[1],Ue.g[2]-ge.g[2]],Ve=[0,0,0],Y=xe.e;Y!==xe;Y=Y.e)Ve[0]=Y.g[0]-ge.g[0],Ve[1]=Y.g[1]-ge.g[1],Ve[2]=Y.g[2]-ge.g[2],Be[0]=Ue[1]*Ve[2]-Ue[2]*Ve[1],Be[1]=Ue[2]*Ve[0]-Ue[0]*Ve[2],Be[2]=Ue[0]*Ve[1]-Ue[1]*Ve[0],ne<(Xe=Be[0]*Be[0]+Be[1]*Be[1]+Be[2]*Be[2])&&(ne=Xe,Oe[0]=Be[0],Oe[1]=Be[1],Oe[2]=Be[2]);ne<=0&&(Oe[0]=Oe[1]=Oe[2]=0,Oe[k(Ue)]=1)}xe=!0}for(Be=k(Oe),Y=this.b.c,ne=(Be+1)%3,ge=(Be+2)%3,Be=0<Oe[Be]?1:-1,Oe=Y.e;Oe!==Y;Oe=Oe.e)Oe.b=Oe.g[ne],Oe.a=Be*Oe.g[ge];if(xe){for(Oe=0,Y=(xe=this.b.a).b;Y!==xe;Y=Y.b)if(!((ne=Y.a).f<=0))for(;Oe+=(ne.a.b-ne.b.a.b)*(ne.a.a+ne.b.a.a),(ne=ne.e)!==Y.a;);if(Oe<0)for(xe=(Oe=this.b.c).e;xe!==Oe;xe=xe.e)xe.a=-xe.a}for(this.n=!1,Oe=this.b.b,Y=Oe.h;Y!==Oe;Y=xe)xe=Y.h,ne=Y.e,y(Y.a,Y.b.a)&&Y.e.e!==Y&&(x(this,ne,Y),r(Y),ne=(Y=ne).e),ne.e===Y&&(ne!==Y&&(ne!==xe&&ne!==xe.b||(xe=xe.h),r(ne)),Y!==xe&&Y!==xe.b||(xe=xe.h),r(Y));for(this.e=Oe=new be,xe=this.b.c,Y=xe.e;Y!==xe;Y=Y.e)Y.h=Se(Oe,Y);var st=Oe;st.d=[];for(var nt=0;nt<st.a;nt++)st.d[nt]=nt;st.d.sort(function(rt){return function(wt,Yt){return l(rt[wt],rt[Yt])?1:-1}}(st.c)),st.e=!0;for(var Qe=st.b,ot=Qe.a;1<=ot;--ot)qe(Qe,ot);for(Qe.h=!0,this.f=new ie(this),te(this,-4e150),te(this,4e150);(Oe=Fe(this.e))!==null;){for(;;){e:if((Y=this.e).a===0)xe=Ge(Y.b);else if(xe=Y.c[Y.d[Y.a-1]],Y.b.a!==0&&l(Y=Ge(Y.b),xe)){xe=Y;break e}if(xe===null||!y(xe,Oe))break;xe=Fe(this.e),x(this,Oe.c,xe.c)}(function rt(wt,Yt){for(var It,mt=(wt.a=Yt).c;mt.i===null;)if((mt=mt.c)===Yt.c){var mt=wt,St=Yt;(vt=new _e).a=St.c.b;for(var qt=(dt=mt.f).a;(qt=qt.a).b!==null&&!dt.c(dt.b,vt,qt.b););var dt,Wt,Vt=Le(dt=qt.b),vt=dt.a,qt=Vt.a;return void(v(vt.b.a,St,vt.a)===0?y((vt=dt.a).a,St)||y(vt.b.a,St)||(u(vt.b),dt.c&&(r(vt.c),dt.c=!1),c(St.c,vt),rt(mt,St)):(Wt=l(qt.b.a,vt.b.a)?dt:Vt,Vt=void 0,dt.d||Wt.c?(Vt=Wt===dt?p(St.c.b,vt.e):p(qt.b.c.b,St.c).b,Wt.c?F(Wt,Vt):((dt=X(vt=mt,dt,Vt)).f=Ee(dt).f+dt.a.f,dt.d=H(vt,dt.f)),rt(mt,St)):Z(mt,dt,St.c,St.c,null,!0)))}dt=(vt=Le(mt=V(mt.i))).a,(vt=K(wt,vt,null)).c===dt?(vt=(dt=vt).c,qt=Le(mt),Vt=mt.a,Wt=qt.a,It=!1,Vt.b.a!==Wt.b.a&&W(wt,mt),y(Vt.a,wt.a)&&(c(vt.b.e,Vt),vt=Le(mt=V(mt)).a,K(wt,Le(mt),qt),It=!0),y(Wt.a,wt.a)&&(c(dt,Wt.b.e),dt=K(wt,qt,null),It=!0),It?Z(wt,mt,dt.c,vt,vt,!0):(St=l(Wt.a,Vt.a)?Wt.b.e:Vt,Z(wt,mt,St=p(dt.c.b,St),St.c,St.c,!1),St.b.i.c=!0,$(wt,mt))):Z(wt,mt,vt.c,dt,dt,!0)})(this,Oe)}for(this.a=this.f.a.a.b.a.a,Oe=0;(xe=this.f.a.a.b)!==null;)xe.h||++Oe,U(xe);for(this.f=null,(Oe=this.e).b=null,Oe.d=null,this.e=Oe.c=null,Oe=this.b,Y=Oe.a.b;Y!==Oe.a;Y=xe)xe=Y.b,(Y=Y.a).e.e===Y&&(D(Y.c,Y),r(Y));if(!this.n){if(Oe=this.b,this.m)for(Y=Oe.b.h;Y!==Oe.b;Y=xe)xe=Y.h,Y.b.d.c!==Y.d.c?Y.f=Y.d.c?1:-1:r(Y);else for(Y=Oe.a.b;Y!==Oe.a;Y=xe)if(xe=Y.b,Y.c){for(Y=Y.a;l(Y.b.a,Y.a);Y=Y.c.b);for(;l(Y.a,Y.b.a);Y=Y.e);for(ne=Y.c.b,ge=void 0;Y.e!==ne;)if(l(Y.b.a,ne.a)){for(;ne.e!==Y&&(l((re=ne.e).b.a,re.a)||v(ne.a,ne.b.a,ne.e.b.a)<=0);)ne=(ge=p(ne.e,ne)).b;ne=ne.c.b}else{for(;ne.e!==Y&&(l((Q=Y.c.b).a,Q.b.a)||0<=v(Y.b.a,Y.a,Y.c.b.a));)Y=(ge=p(Y,Y.c.b)).b;Y=Y.e}for(;ne.e.e!==Y;)ge=p(ne.e,ne),ne=ge.b}if(this.h||this.i||this.k||this.l)if(this.m){for(xe=(Oe=this.b).a.b;xe!==Oe.a;xe=xe.b)if(xe.c){for(this.h&&this.h(2,this.c),Y=xe.a;this.k&&this.k(Y.a.d,this.c),(Y=Y.e)!==xe.a;);this.i&&this.i(this.c)}}else{for(Oe=this.b,xe=!!this.l,Y=!1,ne=-1,ge=Oe.a.d;ge!==Oe.a;ge=ge.d)if(ge.c)for(Y||(this.h&&this.h(4,this.c),Y=!0),Be=ge.a;xe&&(Ue=Be.b.d.c?0:1,ne!==Ue&&(ne=Ue,this.l&&this.l(!!ne,this.c))),this.k&&this.k(Be.a.d,this.c),(Be=Be.e)!==ge.a;);Y&&this.i&&this.i(this.c)}if(this.r){for(Oe=this.b,Y=Oe.a.b;Y!==Oe.a;Y=xe)if(xe=Y.b,!Y.c){for(ge=(ne=Y.a).e,Be=void 0;ge=(Be=ge).e,(Be.d=null)===Be.b.d&&(Be.c===Be?O(Be.a,null):(Be.a.c=Be.c,S(Be,Be.b.e)),(Ue=Be.b).c===Ue?O(Ue.a,null):(Ue.a.c=Ue.c,S(Ue,Ue.b.e)),T(Be)),Be!==ne;);ne=Y.d,((Y=Y.b).d=ne).b=Y}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:he,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},he.prototype.gluDeleteTess=he.prototype.x,he.prototype.gluTessProperty=he.prototype.B,he.prototype.gluGetTessProperty=he.prototype.y,he.prototype.gluTessNormal=he.prototype.A,he.prototype.gluTessCallback=he.prototype.z,he.prototype.gluTessVertex=he.prototype.C,he.prototype.gluTessBeginPolygon=he.prototype.u,he.prototype.gluTessBeginContour=he.prototype.t,he.prototype.gluTessEndContour=he.prototype.v,he.prototype.gluTessEndPolygon=he.prototype.w,M!==void 0&&(M.exports=this.libtess)},{}],253:[function(t,M,j){function h(l,d,v,m){var n=0,i=(m=m===void 0?{}:m).loop===void 0?null:m.loop,s=m.palette===void 0?null:m.palette;if(d<=0||v<=0||65535<d||65535<v)throw new Error("Width/Height invalid.");function a(E){if(E=E.length,E<2||256<E||E&E-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return E}l[n++]=71,l[n++]=73,l[n++]=70,l[n++]=56,l[n++]=57,l[n++]=97;var c=0,r=0;if(s!==null){for(var u=a(s);u>>=1;)++c;if(u=1<<c,--c,m.background!==void 0){if(u<=(r=m.background))throw new Error("Background index out of range.");if(r===0)throw new Error("Background index explicitly passed as 0.")}}if(l[n++]=255&d,l[n++]=d>>8&255,l[n++]=255&v,l[n++]=v>>8&255,l[n++]=(s!==null?128:0)|c,l[n++]=r,l[n++]=0,s!==null)for(var p=0,g=s.length;p<g;++p){var S=s[p];l[n++]=S>>16&255,l[n++]=S>>8&255,l[n++]=255&S}if(i!==null){if(i<0||65535<i)throw new Error("Loop count invalid.");l[n++]=33,l[n++]=255,l[n++]=11,l[n++]=78,l[n++]=69,l[n++]=84,l[n++]=83,l[n++]=67,l[n++]=65,l[n++]=80,l[n++]=69,l[n++]=50,l[n++]=46,l[n++]=48,l[n++]=3,l[n++]=1,l[n++]=255&i,l[n++]=i>>8&255,l[n++]=0}var P=!1;this.addFrame=function(E,T,O,R,k,D){if(P===!0&&(--n,P=!1),D=D===void 0?{}:D,E<0||T<0||65535<E||65535<T)throw new Error("x/y invalid.");if(O<=0||R<=0||65535<O||65535<R)throw new Error("Width/Height invalid.");if(k.length<O*R)throw new Error("Not enough pixels for the frame size.");var L=!0,U=D.palette;if(U==null&&(L=!1,U=s),U==null)throw new Error("Must supply either a local or global palette.");for(var V=a(U),F=0;V>>=1;)++F;var V=1<<F,X=D.delay===void 0?0:D.delay,H=D.disposal===void 0?0:D.disposal;if(H<0||3<H)throw new Error("Disposal out of range.");var G=!1,K=0;if(D.transparent!==void 0&&D.transparent!==null&&(G=!0,(K=D.transparent)<0||V<=K))throw new Error("Transparent color index.");if(H===0&&!G&&X===0||(l[n++]=33,l[n++]=249,l[n++]=4,l[n++]=H<<2|(G===!0?1:0),l[n++]=255&X,l[n++]=X>>8&255,l[n++]=K,l[n++]=0),l[n++]=44,l[n++]=255&E,l[n++]=E>>8&255,l[n++]=255&T,l[n++]=T>>8&255,l[n++]=255&O,l[n++]=O>>8&255,l[n++]=255&R,l[n++]=R>>8&255,l[n++]=L===!0?128|F-1:0,L===!0)for(var Z=0,oe=U.length;Z<oe;++Z){var x=U[Z];l[n++]=x>>16&255,l[n++]=x>>8&255,l[n++]=255&x}return n=function(I,B,W,$){I[B++]=W;var te=B++,ie=1<<W,de=ie-1,se=1+ie,he=1+se,ce=W+1,ee=0,ue=0;function me(ze){for(;ze<=ee;)I[B++]=255&ue,ue>>=8,ee-=8,B===te+256&&(I[te]=255,te=B++)}function je(ze){ue|=ze<<ee,ee+=ce,me(8)}var ye=$[0]&de,be={};je(ie);for(var Se=1,Fe=$.length;Se<Fe;++Se){var Me=$[Se]&de,Ze=ye<<8|Me,Ge=be[Ze];if(Ge===void 0){for(ue|=ye<<ee,ee+=ce;8<=ee;)I[B++]=255&ue,ue>>=8,ee-=8,B===te+256&&(I[te]=255,te=B++);he===4096?(je(ie),he=1+se,ce=W+1,be={}):(1<<ce<=he&&++ce,be[Ze]=he++),ye=Me}else ye=Ge}return je(ye),je(se),me(1),te+1===B?I[te]=0:(I[te]=B-te-1,I[B++]=0),B}(l,n,F<2?2:F,k)},this.end=function(){return P===!1&&(l[n++]=59,P=!0),n},this.getOutputBuffer=function(){return l},this.setOutputBuffer=function(E){l=E},this.getOutputBufferPosition=function(){return n},this.setOutputBufferPosition=function(E){n=E}}function y(l,d,v,m){for(var n=l[d++],i=1<<n,s=1+i,a=1+s,c=n+1,r=(1<<c)-1,u=0,p=0,g=0,S=l[d++],P=new Int32Array(4096),E=null;;){for(;u<16&&S!==0;)p|=l[d++]<<u,u+=8,S===1?S=l[d++]:--S;if(u<c)break;var T=p&r;if(p>>=c,u-=c,T==i)a=1+s,r=(1<<(c=n+1))-1,E=null;else{if(T==s)break;for(var O=T<a?T:E,R=0,k=O;i<k;)k=P[k]>>8,++R;var D=k;if(m<g+R+(O!==T?1:0))return void console.log("Warning, gif stream longer than expected.");v[g++]=D;var L=g+=R;for(O!==T&&(v[g++]=D),k=O;R--;)k=P[k],v[--L]=255&k,k>>=8;E!==null&&a<4096&&(P[a++]=E<<8|D,r+1<=a&&c<12&&(++c,r=r<<1|1)),E=T}}g!==m&&console.log("Warning, gif stream shorter than expected.")}try{j.GifWriter=h,j.GifReader=function(l){var d=0;if(l[d++]!==71||l[d++]!==73||l[d++]!==70||l[d++]!==56||(l[d++]+1&253)!=56||l[d++]!==97)throw new Error("Invalid GIF 87a/89a header.");var v=l[d++]|l[d++]<<8,m=l[d++]|l[d++]<<8,n=l[d++],i=1<<1+(7&n),s=(l[d++],l[d++],null),a=null,c=(n>>7&&(s=d,d+=3*(a=i)),!0),r=[],u=0,p=null,g=0,S=null;for(this.width=v,this.height=m;c&&d<l.length;)switch(l[d++]){case 33:switch(l[d++]){case 255:if(l[d]!==11||l[d+1]==78&&l[d+2]==69&&l[d+3]==84&&l[d+4]==83&&l[d+5]==67&&l[d+6]==65&&l[d+7]==80&&l[d+8]==69&&l[d+9]==50&&l[d+10]==46&&l[d+11]==48&&l[d+12]==3&&l[d+13]==1&&l[d+16]==0)d+=14,S=l[d++]|l[d++]<<8,d++;else for(d+=12;;){if(!(0<=(E=l[d++])))throw Error("Invalid block size");if(E===0)break;d+=E}break;case 249:if(l[d++]!==4||l[d+4]!==0)throw new Error("Invalid graphics extension block.");var P=l[d++],u=l[d++]|l[d++]<<8,p=l[d++];!(1&P)&&(p=null),g=P>>2&7,d++;break;case 254:for(;;){if(!(0<=(E=l[d++])))throw Error("Invalid block size");if(E===0)break;d+=E}break;default:throw new Error("Unknown graphic control label: 0x"+l[d-1].toString(16))}break;case 44:var E,T=l[d++]|l[d++]<<8,O=l[d++]|l[d++]<<8,R=l[d++]|l[d++]<<8,k=l[d++]|l[d++]<<8,X=l[d++],D=X>>6&1,L=1<<1+(7&X),U=s,F=a,V=!1,X=(X>>7&&(V=!0,U=d,d+=3*(F=L)),d);for(d++;;){if(!(0<=(E=l[d++])))throw Error("Invalid block size");if(E===0)break;d+=E}r.push({x:T,y:O,width:R,height:k,has_local_palette:V,palette_offset:U,palette_size:F,data_offset:X,data_length:d-X,transparent_index:p,interlaced:!!D,delay:u,disposal:g});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+l[d-1].toString(16))}this.numFrames=function(){return r.length},this.loopCount=function(){return S},this.frameInfo=function(H){if(H<0||H>=r.length)throw new Error("Frame index out of range.");return r[H]},this.decodeAndBlitFrameBGRA=function(H,G){for(var H=this.frameInfo(H),K=H.width*H.height,Z=new Uint8Array(K),oe=(y(l,H.data_offset,Z,K),H.palette_offset),x=H.transparent_index,I=(x===null&&(x=256),H.width),B=v-I,W=I,$=4*(H.y*v+H.x),te=4*((H.y+H.height)*v+H.x),ie=$,de=4*B,se=(H.interlaced===!0&&(de+=4*v*7),8),he=0,ce=Z.length;he<ce;++he){var ee,ue,me=Z[he];W===0&&(W=I,te<=(ie+=de)&&(de=4*B+4*v*(se-1),ie=$+(I+B)*(se<<1),se>>=1)),me===x?ie+=4:(ee=l[oe+3*me],ue=l[oe+3*me+1],me=l[oe+3*me+2],G[ie++]=me,G[ie++]=ue,G[ie++]=ee,G[ie++]=255),--W}},this.decodeAndBlitFrameRGBA=function(H,G){for(var H=this.frameInfo(H),K=H.width*H.height,Z=new Uint8Array(K),oe=(y(l,H.data_offset,Z,K),H.palette_offset),x=H.transparent_index,I=(x===null&&(x=256),H.width),B=v-I,W=I,$=4*(H.y*v+H.x),te=4*((H.y+H.height)*v+H.x),ie=$,de=4*B,se=(H.interlaced===!0&&(de+=4*v*7),8),he=0,ce=Z.length;he<ce;++he){var ee,ue,me=Z[he];W===0&&(W=I,te<=(ie+=de)&&(de=4*B+4*v*(se-1),ie=$+(I+B)*(se<<1),se>>=1)),me===x?ie+=4:(ee=l[oe+3*me],ue=l[oe+3*me+1],me=l[oe+3*me+2],G[ie++]=ee,G[ie++]=ue,G[ie++]=me,G[ie++]=255),--W}}}}catch{}},{}],254:[function(t,M,j){(function(h){var y,l;y=this,l=function(d){function v(N){if(this==null)throw TypeError();var w,C=String(this),A=C.length,N=N?Number(N):0;if(!((N=N!=N?0:N)<0||A<=N))return 55296<=(w=C.charCodeAt(N))&&w<=56319&&N+1<A&&56320<=(A=C.charCodeAt(N+1))&&A<=57343?1024*(w-55296)+A-56320+65536:w}String.prototype.codePointAt||((m=function(){try{var f={},w=Object.defineProperty,C=w(f,f,f)&&w}catch{}return C}())?m(String.prototype,"codePointAt",{value:v,configurable:!0,writable:!0}):String.prototype.codePointAt=v);var m,n=0,i=-3;function s(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function a(f,w){this.source=f,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=w,this.destLen=0,this.ltree=new s,this.dtree=new s}var c=new s,r=new s,u=new Uint8Array(30),p=new Uint16Array(30),g=new Uint8Array(30),S=new Uint16Array(30),P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E=new s,T=new Uint8Array(320);function O(f,w,C,A){for(var N,z=0;z<C;++z)f[z]=0;for(z=0;z<30-C;++z)f[z+C]=z/C|0;for(N=A,z=0;z<30;++z)w[z]=N,N+=1<<f[z]}var R=new Uint16Array(16);function k(f,w,C,A){for(var N,z=0;z<16;++z)f.table[z]=0;for(z=0;z<A;++z)f.table[w[C+z]]++;for(z=N=f.table[0]=0;z<16;++z)R[z]=N,N+=f.table[z];for(z=0;z<A;++z)w[C+z]&&(f.trans[R[w[C+z]]++]=z)}function D(f,w,C){if(!w)return C;for(;f.bitcount<24;)f.tag|=f.source[f.sourceIndex++]<<f.bitcount,f.bitcount+=8;var A=f.tag&65535>>>16-w;return f.tag>>>=w,f.bitcount-=w,A+C}function L(f,w){for(;f.bitcount<24;)f.tag|=f.source[f.sourceIndex++]<<f.bitcount,f.bitcount+=8;for(var C=0,A=0,N=0,z=f.tag;A=2*A+(1&z),z>>>=1,C+=w.table[++N],0<=(A-=w.table[N]););return f.tag=z,f.bitcount-=N,w.trans[C+A]}function U(f,w,C){for(;;){var A=L(f,w);if(A===256)return n;if(A<256)f.dest[f.destLen++]=A;else for(var N,z=D(f,u[A-=257],p[A]),A=L(f,C),q=N=f.destLen-D(f,g[A],S[A]);q<N+z;++q)f.dest[f.destLen++]=f.dest[q]}}for(var F=c,V=r,X=0;X<7;++X)F.table[X]=0;for(F.table[7]=24,F.table[8]=152,F.table[9]=112,X=0;X<24;++X)F.trans[X]=256+X;for(X=0;X<144;++X)F.trans[24+X]=X;for(X=0;X<8;++X)F.trans[168+X]=280+X;for(X=0;X<112;++X)F.trans[176+X]=144+X;for(X=0;X<5;++X)V.table[X]=0;for(V.table[5]=32,X=0;X<32;++X)V.trans[X]=X;O(u,p,4,3),O(g,S,2,1),u[28]=0,p[28]=258;var H=function(f,w){var C,A,N,z=new a(f,w);do{switch(N=void 0,(A=z).bitcount--||(A.tag=A.source[A.sourceIndex++],A.bitcount=7),N=1&A.tag,A.tag>>>=1,A=N,D(z,2,0)){case 0:C=function(Te){for(var Je,it;8<Te.bitcount;)Te.sourceIndex--,Te.bitcount-=8;if((Je=256*Te.source[Te.sourceIndex+1]+Te.source[Te.sourceIndex])!==(65535&~(256*Te.source[Te.sourceIndex+3]+Te.source[Te.sourceIndex+2])))return i;for(Te.sourceIndex+=4,it=Je;it;--it)Te.dest[Te.destLen++]=Te.source[Te.sourceIndex++];return Te.bitcount=0,n}(z);break;case 1:C=U(z,c,r);break;case 2:Ae=Pe=Re=ke=q=pe=we=Ce=ve=ae=le=J=void 0;for(var q,J=z,le=z.ltree,ae=z.dtree,ve=D(J,5,257),Ce=D(J,5,1),we=D(J,4,4),pe=0;pe<19;++pe)T[pe]=0;for(pe=0;pe<we;++pe){var Re=D(J,3,0);T[P[pe]]=Re}for(k(E,T,0,19),q=0;q<ve+Ce;){var Pe=L(J,E);switch(Pe){case 16:for(var Ae=T[q-1],ke=D(J,2,3);ke;--ke)T[q++]=Ae;break;case 17:for(ke=D(J,3,3);ke;--ke)T[q++]=0;break;case 18:for(ke=D(J,7,11);ke;--ke)T[q++]=0;break;default:T[q++]=Pe}}k(le,T,0,ve),k(ae,T,ve,Ce),C=U(z,z.ltree,z.dtree);break;default:C=i}if(C!==n)throw new Error("Data error")}while(!A);return z.destLen<z.dest.length?typeof z.dest.slice=="function"?z.dest.slice(0,z.destLen):z.dest.subarray(0,z.destLen):z.dest};function G(f,w,C,A,N){return Math.pow(1-N,3)*f+3*Math.pow(1-N,2)*N*w+3*(1-N)*Math.pow(N,2)*C+Math.pow(N,3)*A}function K(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Z(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function oe(f){throw new Error(f)}function x(f,w){f||oe(w)}K.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},K.prototype.addPoint=function(f,w){typeof f=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=f,this.x2=f),f<this.x1&&(this.x1=f),f>this.x2&&(this.x2=f)),typeof w=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=w,this.y2=w),w<this.y1&&(this.y1=w),w>this.y2&&(this.y2=w))},K.prototype.addX=function(f){this.addPoint(f,null)},K.prototype.addY=function(f){this.addPoint(null,f)},K.prototype.addBezier=function(f,w,C,A,N,z,q,J){var le=[f,w],ae=[C,A],ve=[N,z],Ce=[q,J];this.addPoint(f,w),this.addPoint(q,J);for(var we=0;we<=1;we++){var pe,Re=6*le[we]-12*ae[we]+6*ve[we],Pe=-3*le[we]+9*ae[we]-9*ve[we]+3*Ce[we],Ae=3*ae[we]-3*le[we];Pe==0?Re==0||0<(pe=-Ae/Re)&&pe<1&&(we===0&&this.addX(G(le[we],ae[we],ve[we],Ce[we],pe)),we===1&&this.addY(G(le[we],ae[we],ve[we],Ce[we],pe))):(pe=Math.pow(Re,2)-4*Ae*Pe)<0||(0<(Ae=(-Re+Math.sqrt(pe))/(2*Pe))&&Ae<1&&(we===0&&this.addX(G(le[we],ae[we],ve[we],Ce[we],Ae)),we===1&&this.addY(G(le[we],ae[we],ve[we],Ce[we],Ae))),0<(Ae=(-Re-Math.sqrt(pe))/(2*Pe))&&Ae<1&&(we===0&&this.addX(G(le[we],ae[we],ve[we],Ce[we],Ae)),we===1&&this.addY(G(le[we],ae[we],ve[we],Ce[we],Ae))))}},K.prototype.addQuad=function(f,w,C,A,N,z){C=f+2/3*(C-f),A=w+2/3*(A-w),this.addBezier(f,w,C,A,C+1/3*(N-f),A+1/3*(z-w),N,z)},Z.prototype.moveTo=function(f,w){this.commands.push({type:"M",x:f,y:w})},Z.prototype.lineTo=function(f,w){this.commands.push({type:"L",x:f,y:w})},Z.prototype.curveTo=Z.prototype.bezierCurveTo=function(f,w,C,A,N,z){this.commands.push({type:"C",x1:f,y1:w,x2:C,y2:A,x:N,y:z})},Z.prototype.quadTo=Z.prototype.quadraticCurveTo=function(f,w,C,A){this.commands.push({type:"Q",x1:f,y1:w,x:C,y:A})},Z.prototype.close=Z.prototype.closePath=function(){this.commands.push({type:"Z"})},Z.prototype.extend=function(f){var w;if(f.commands)f=f.commands;else if(f instanceof K)return w=f,this.moveTo(w.x1,w.y1),this.lineTo(w.x2,w.y1),this.lineTo(w.x2,w.y2),this.lineTo(w.x1,w.y2),void this.close();Array.prototype.push.apply(this.commands,f)},Z.prototype.getBoundingBox=function(){for(var f=new K,w=0,C=0,A=0,N=0,z=0;z<this.commands.length;z++){var q=this.commands[z];switch(q.type){case"M":f.addPoint(q.x,q.y),w=A=q.x,C=N=q.y;break;case"L":f.addPoint(q.x,q.y),A=q.x,N=q.y;break;case"Q":f.addQuad(A,N,q.x1,q.y1,q.x,q.y),A=q.x,N=q.y;break;case"C":f.addBezier(A,N,q.x1,q.y1,q.x2,q.y2,q.x,q.y),A=q.x,N=q.y;break;case"Z":A=w,N=C;break;default:throw new Error("Unexpected path command "+q.type)}}return f.isEmpty()&&f.addPoint(0,0),f},Z.prototype.draw=function(f){f.beginPath();for(var w=0;w<this.commands.length;w+=1){var C=this.commands[w];C.type==="M"?f.moveTo(C.x,C.y):C.type==="L"?f.lineTo(C.x,C.y):C.type==="C"?f.bezierCurveTo(C.x1,C.y1,C.x2,C.y2,C.x,C.y):C.type==="Q"?f.quadraticCurveTo(C.x1,C.y1,C.x,C.y):C.type==="Z"&&f.closePath()}this.fill&&(f.fillStyle=this.fill,f.fill()),this.stroke&&(f.strokeStyle=this.stroke,f.lineWidth=this.strokeWidth,f.stroke())},Z.prototype.toPathData=function(f){function w(){for(var z=arguments,q="",J=0;J<arguments.length;J+=1){var le=z[J];0<=le&&0<J&&(q+=" "),q+=(le=le,Math.round(le)===le?""+Math.round(le):le.toFixed(f))}return q}f=f!==void 0?f:2;for(var C="",A=0;A<this.commands.length;A+=1){var N=this.commands[A];N.type==="M"?C+="M"+w(N.x,N.y):N.type==="L"?C+="L"+w(N.x,N.y):N.type==="C"?C+="C"+w(N.x1,N.y1,N.x2,N.y2,N.x,N.y):N.type==="Q"?C+="Q"+w(N.x1,N.y1,N.x,N.y):N.type==="Z"&&(C+="Z")}return C},Z.prototype.toSVG=function(f){var w=(w='<path d="')+this.toPathData(f)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?w+=' fill="none"':w+=' fill="'+this.fill+'"'),this.stroke&&(w+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),w+="/>"},Z.prototype.toDOMElement=function(w){var w=this.toPathData(w),C=document.createElementNS("http://www.w3.org/2000/svg","path");return C.setAttribute("d",w),C};var I={fail:oe,argument:x,assert:x},B={},W={},$={};function te(f){return function(){return f}}W.BYTE=function(f){return I.argument(0<=f&&f<=255,"Byte value should be between 0 and 255."),[f]},$.BYTE=te(1),W.CHAR=function(f){return[f.charCodeAt(0)]},$.CHAR=te(1),W.CHARARRAY=function(f){for(var w=[],C=0;C<f.length;C+=1)w[C]=f.charCodeAt(C);return w},$.CHARARRAY=function(f){return f.length},W.USHORT=function(f){return[f>>8&255,255&f]},$.USHORT=te(2),W.SHORT=function(f){return[(f=32768<=f?-(65536-f):f)>>8&255,255&f]},$.SHORT=te(2),W.UINT24=function(f){return[f>>16&255,f>>8&255,255&f]},$.UINT24=te(3),W.ULONG=function(f){return[f>>24&255,f>>16&255,f>>8&255,255&f]},$.ULONG=te(4),W.LONG=function(f){return[(f=2147483648<=f?-(4294967296-f):f)>>24&255,f>>16&255,f>>8&255,255&f]},$.LONG=te(4),W.FIXED=W.ULONG,$.FIXED=$.ULONG,W.FWORD=W.SHORT,$.FWORD=$.SHORT,W.UFWORD=W.USHORT,$.UFWORD=$.USHORT,W.LONGDATETIME=function(f){return[0,0,0,0,f>>24&255,f>>16&255,f>>8&255,255&f]},$.LONGDATETIME=te(8),W.TAG=function(f){return I.argument(f.length===4,"Tag should be exactly 4 ASCII characters."),[f.charCodeAt(0),f.charCodeAt(1),f.charCodeAt(2),f.charCodeAt(3)]},$.TAG=te(4),W.Card8=W.BYTE,$.Card8=$.BYTE,W.Card16=W.USHORT,$.Card16=$.USHORT,W.OffSize=W.BYTE,$.OffSize=$.BYTE,W.SID=W.USHORT,$.SID=$.USHORT,W.NUMBER=function(f){return-107<=f&&f<=107?[f+139]:108<=f&&f<=1131?[247+((f-=108)>>8),255&f]:-1131<=f&&f<=-108?[251+((f=-f-108)>>8),255&f]:-32768<=f&&f<=32767?W.NUMBER16(f):W.NUMBER32(f)},$.NUMBER=function(f){return W.NUMBER(f).length},W.NUMBER16=function(f){return[28,f>>8&255,255&f]},$.NUMBER16=te(3),W.NUMBER32=function(f){return[29,f>>24&255,f>>16&255,f>>8&255,255&f]},$.NUMBER32=te(5),W.REAL=function(f){for(var w=f.toString(),C=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(w),A=(C&&(C=parseFloat("1e"+((C[2]?+C[2]:0)+C[1].length)),w=(Math.round(f*C)/C).toString()),""),N=0,z=w.length;N<z;N+=1){var q=w[N];A+=q==="e"?w[++N]==="-"?"c":"b":q==="."?"a":q==="-"?"e":q}for(var J=[30],le=0,ae=(A+=1&A.length?"f":"ff").length;le<ae;le+=2)J.push(parseInt(A.substr(le,2),16));return J},$.REAL=function(f){return W.REAL(f).length},W.NAME=W.CHARARRAY,$.NAME=$.CHARARRAY,W.STRING=W.CHARARRAY,$.STRING=$.CHARARRAY,B.UTF8=function(f,w,C){for(var A=[],N=C,z=0;z<N;z++,w+=1)A[z]=f.getUint8(w);return String.fromCharCode.apply(null,A)},B.UTF16=function(f,w,C){for(var A=[],N=C/2,z=0;z<N;z++,w+=2)A[z]=f.getUint16(w);return String.fromCharCode.apply(null,A)},W.UTF16=function(f){for(var w=[],C=0;C<f.length;C+=1){var A=f.charCodeAt(C);w[w.length]=A>>8&255,w[w.length]=255&A}return w},$.UTF16=function(f){return 2*f.length};var ie,de={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"},se=(B.MACSTRING=function(f,w,C,A){var N=de[A];if(N!==void 0){for(var z="",q=0;q<C;q++){var J=f.getUint8(w+q);z+=J<=127?String.fromCharCode(J):N[127&J]}return z}},typeof WeakMap=="function"&&new WeakMap);function he(f){return-128<=f&&f<=127}W.MACSTRING=function(f,w){var C=function(q){if(!ie)for(var J in ie={},de)ie[J]=new String(J);var le=ie[q];if(le!==void 0){if(se){var ae=se.get(le);if(ae!==void 0)return ae}var ve=de[q];if(ve!==void 0){for(var Ce={},we=0;we<ve.length;we++)Ce[ve.charCodeAt(we)]=we+128;return se&&se.set(le,Ce),Ce}}}(w);if(C!==void 0){for(var A=[],N=0;N<f.length;N++){var z=f.charCodeAt(N);if(128<=z&&(z=C[z])===void 0)return;A[N]=z}return A}},$.MACSTRING=function(f,w){return f=W.MACSTRING(f,w),f!==void 0?f.length:0},W.VARDELTAS=function(f){for(var A=0,w=[];A<f.length;)var C=f[A],A=(C===0?function(N,z,q){for(var J=0,le=N.length;z<le&&J<64&&N[z]===0;)++z,++J;return q.push(128|J-1),z}:-128<=C&&C<=127?function(N,z,q){for(var J=0,le=N.length,ae=z;ae<le&&J<64;){var ve=N[ae];if(!he(ve)||ve===0&&ae+1<le&&N[ae+1]===0)break;++ae,++J}q.push(J-1);for(var Ce=z;Ce<ae;++Ce)q.push(N[Ce]+256&255);return ae}:function(N,z,q){for(var J=0,le=N.length,ae=z;ae<le&&J<64;){var ve=N[ae];if(ve===0||he(ve)&&ae+1<le&&he(N[ae+1]))break;++ae,++J}q.push(64|J-1);for(var Ce=z;Ce<ae;++Ce){var we=N[Ce];q.push(we+65536>>8&255,we+256&255)}return ae})(f,A,w);return w},W.INDEX=function(f){for(var w=1,C=[w],A=[],N=0;N<f.length;N+=1){var z=W.OBJECT(f[N]);Array.prototype.push.apply(A,z),w+=z.length,C.push(w)}if(A.length===0)return[0,0];for(var q=[],J=1+Math.floor(Math.log(w)/Math.log(2))/8|0,le=[void 0,W.BYTE,W.USHORT,W.UINT24,W.ULONG][J],ae=0;ae<C.length;ae+=1){var ve=le(C[ae]);Array.prototype.push.apply(q,ve)}return Array.prototype.concat(W.Card16(f.length),W.OffSize(J),q,A)},$.INDEX=function(f){return W.INDEX(f).length},W.DICT=function(f){for(var w=[],C=Object.keys(f),A=C.length,N=0;N<A;N+=1){var z=parseInt(C[N],0),q=f[z];w=(w=w.concat(W.OPERAND(q.value,q.type))).concat(W.OPERATOR(z))}return w},$.DICT=function(f){return W.DICT(f).length},W.OPERATOR=function(f){return f<1200?[f]:[12,f-1200]},W.OPERAND=function(f,w){var C=[];if(Array.isArray(w))for(var A=0;A<w.length;A+=1)I.argument(f.length===w.length,"Not enough arguments given for type"+w),C=C.concat(W.OPERAND(f[A],w[A]));else if(w==="SID")C=C.concat(W.NUMBER(f));else if(w==="offset")C=C.concat(W.NUMBER32(f));else if(w==="number")C=C.concat(W.NUMBER(f));else{if(w!=="real")throw new Error("Unknown operand type "+w);C=C.concat(W.REAL(f))}return C},W.OP=W.BYTE,$.OP=$.BYTE;var ce=typeof WeakMap=="function"&&new WeakMap;function ee(f,w,C){for(var A=0;A<w.length;A+=1){var N=w[A];this[N.name]=N.value}if(this.tableName=f,this.fields=w,C)for(var z=Object.keys(C),q=0;q<z.length;q+=1){var J=z[q],le=C[J];this[J]!==void 0&&(this[J]=le)}}function ue(f,w,C){C===void 0&&(C=w.length);var A=new Array(w.length+1);A[0]={name:f+"Count",type:"USHORT",value:C};for(var N=0;N<w.length;N++)A[N+1]={name:f+N,type:"USHORT",value:w[N]};return A}function me(f,w,C){var A=w.length,N=new Array(A+1);N[0]={name:f+"Count",type:"USHORT",value:A};for(var z=0;z<A;z++)N[z+1]={name:f+z,type:"TABLE",value:C(w[z],z)};return N}function je(f,w,C){var A=w.length,N=[];N[0]={name:f+"Count",type:"USHORT",value:A};for(var z=0;z<A;z++)N=N.concat(C(w[z],z));return N}function ye(f){f.format===1?ee.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ue("glyph",f.glyphs))):I.assert(!1,"Can't create coverage table format 2 yet.")}function be(f){ee.call(this,"scriptListTable",je("scriptRecord",f,function(w,C){var A=w.script,N=A.defaultLangSys;return I.assert(!!N,"Unable to write GSUB: script "+w.tag+" has no default language system."),[{name:"scriptTag"+C,type:"TAG",value:w.tag},{name:"script"+C,type:"TABLE",value:new ee("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ee("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:N.reqFeatureIndex}].concat(ue("featureIndex",N.featureIndexes)))}].concat(je("langSys",A.langSysRecords,function(z,q){var J=z.langSys;return[{name:"langSysTag"+q,type:"TAG",value:z.tag},{name:"langSys"+q,type:"TABLE",value:new ee("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:J.reqFeatureIndex}].concat(ue("featureIndex",J.featureIndexes)))}]})))}]}))}function Se(f){ee.call(this,"featureListTable",je("featureRecord",f,function(w,C){var A=w.feature;return[{name:"featureTag"+C,type:"TAG",value:w.tag},{name:"feature"+C,type:"TABLE",value:new ee("featureTable",[{name:"featureParams",type:"USHORT",value:A.featureParams}].concat(ue("lookupListIndex",A.lookupListIndexes)))}]}))}function Fe(f,w){ee.call(this,"lookupListTable",me("lookup",f,function(C){var A=w[C.lookupType];return I.assert(!!A,"Unable to write GSUB lookup type "+C.lookupType+" tables."),new ee("lookupTable",[{name:"lookupType",type:"USHORT",value:C.lookupType},{name:"lookupFlag",type:"USHORT",value:C.lookupFlag}].concat(me("subtable",C.subtables,A)))}))}W.CHARSTRING=function(f){if(ce){var w=ce.get(f);if(w!==void 0)return w}for(var z=[],C=f.length,A=0;A<C;A+=1)var N=f[A],z=z.concat(W[N.type](N.value));return ce&&ce.set(f,z),z},$.CHARSTRING=function(f){return W.CHARSTRING(f).length},W.OBJECT=function(f){var w=W[f.type];return I.argument(w!==void 0,"No encoding function for type "+f.type),w(f.value)},$.OBJECT=function(f){var w=$[f.type];return I.argument(w!==void 0,"No sizeOf function for type "+f.type),w(f.value)},W.TABLE=function(f){for(var w=[],C=f.fields.length,A=[],N=[],z=0;z<C;z+=1){var q=f.fields[z],le=W[q.type],J=(I.argument(le!==void 0,"No encoding function for field type "+q.type+" ("+q.name+")"),f[q.name]),le=le(J=J===void 0?q.value:J);q.type==="TABLE"?(N.push(w.length),w=w.concat([0,0]),A.push(le)):w=w.concat(le)}for(var ae=0;ae<A.length;ae+=1){var ve=N[ae],Ce=w.length;I.argument(Ce<65536,"Table "+f.tableName+" too big."),w[ve]=Ce>>8,w[ve+1]=255&Ce,w=w.concat(A[ae])}return w},$.TABLE=function(f){for(var w=0,C=f.fields.length,A=0;A<C;A+=1){var N=f.fields[A],z=$[N.type],q=(I.argument(z!==void 0,"No sizeOf function for field type "+N.type+" ("+N.name+")"),f[N.name]);w+=z(q=q===void 0?N.value:q),N.type==="TABLE"&&(w+=2)}return w},W.RECORD=W.TABLE,$.RECORD=$.TABLE,W.LITERAL=function(f){return f},$.LITERAL=function(f){return f.length},ee.prototype.encode=function(){return W.TABLE(this)},ee.prototype.sizeOf=function(){return $.TABLE(this)};var Me={Table:ee,Record:ee,Coverage:(ye.prototype=Object.create(ee.prototype)).constructor=ye,ScriptList:(be.prototype=Object.create(ee.prototype)).constructor=be,FeatureList:(Se.prototype=Object.create(ee.prototype)).constructor=Se,LookupList:(Fe.prototype=Object.create(ee.prototype)).constructor=Fe,ushortList:ue,tableList:me,recordList:je};function Ze(f,w){return f.getUint8(w)}function Ge(f,w){return f.getUint16(w,!1)}function ze(f,w){return f.getUint32(w,!1)}function qe(f,w){return f.getInt16(w,!1)+f.getUint16(w+2,!1)/65535}var He={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function _e(f,w){this.data=f,this.offset=w,this.relativeOffset=0}_e.prototype.parseByte=function(){var f=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,f},_e.prototype.parseChar=function(){var f=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,f},_e.prototype.parseCard8=_e.prototype.parseByte,_e.prototype.parseCard16=_e.prototype.parseUShort=function(){var f=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,f},_e.prototype.parseSID=_e.prototype.parseUShort,_e.prototype.parseOffset16=_e.prototype.parseUShort,_e.prototype.parseShort=function(){var f=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,f},_e.prototype.parseF2Dot14=function(){var f=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,f},_e.prototype.parseOffset32=_e.prototype.parseULong=function(){var f=ze(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,f},_e.prototype.parseFixed=function(){var f=qe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,f},_e.prototype.parseString=function(f){var w=this.data,C=this.offset+this.relativeOffset,A="";this.relativeOffset+=f;for(var N=0;N<f;N++)A+=String.fromCharCode(w.getUint8(C+N));return A},_e.prototype.parseTag=function(){return this.parseString(4)},_e.prototype.parseLongDateTime=function(){var f=ze(this.data,this.offset+this.relativeOffset+4);return f-=2082844800,this.relativeOffset+=8,f},_e.prototype.parseVersion=function(f){var w=Ge(this.data,this.offset+this.relativeOffset),C=Ge(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,w+C/(f=f===void 0?4096:f)/10},_e.prototype.skip=function(f,w){this.relativeOffset+=He[f]*(w=w===void 0?1:w)},_e.prototype.parseULongList=function(f){f===void 0&&(f=this.parseULong());for(var w=new Array(f),C=this.data,A=this.offset+this.relativeOffset,N=0;N<f;N++)w[N]=C.getUint32(A),A+=4;return this.relativeOffset+=4*f,w},_e.prototype.parseOffset16List=_e.prototype.parseUShortList=function(f){f===void 0&&(f=this.parseUShort());for(var w=new Array(f),C=this.data,A=this.offset+this.relativeOffset,N=0;N<f;N++)w[N]=C.getUint16(A),A+=2;return this.relativeOffset+=2*f,w},_e.prototype.parseShortList=function(f){for(var w=new Array(f),C=this.data,A=this.offset+this.relativeOffset,N=0;N<f;N++)w[N]=C.getInt16(A),A+=2;return this.relativeOffset+=2*f,w},_e.prototype.parseByteList=function(f){for(var w=new Array(f),C=this.data,A=this.offset+this.relativeOffset,N=0;N<f;N++)w[N]=C.getUint8(A++);return this.relativeOffset+=f,w},_e.prototype.parseList=function(f,w){w||(w=f,f=this.parseUShort());for(var C=new Array(f),A=0;A<f;A++)C[A]=w.call(this);return C},_e.prototype.parseList32=function(f,w){w||(w=f,f=this.parseULong());for(var C=new Array(f),A=0;A<f;A++)C[A]=w.call(this);return C},_e.prototype.parseRecordList=function(f,w){w||(w=f,f=this.parseUShort());for(var C=new Array(f),A=Object.keys(w),N=0;N<f;N++){for(var z={},q=0;q<A.length;q++){var J=A[q],le=w[J];z[J]=le.call(this)}C[N]=z}return C},_e.prototype.parseRecordList32=function(f,w){w||(w=f,f=this.parseULong());for(var C=new Array(f),A=Object.keys(w),N=0;N<f;N++){for(var z={},q=0;q<A.length;q++){var J=A[q],le=w[J];z[J]=le.call(this)}C[N]=z}return C},_e.prototype.parseStruct=function(f){if(typeof f=="function")return f.call(this);for(var w=Object.keys(f),C={},A=0;A<w.length;A++){var N=w[A],z=f[N];C[N]=z.call(this)}return C},_e.prototype.parseValueRecord=function(f){var w;if((f=f===void 0?this.parseUShort():f)!==0)return w={},1&f&&(w.xPlacement=this.parseShort()),2&f&&(w.yPlacement=this.parseShort()),4&f&&(w.xAdvance=this.parseShort()),8&f&&(w.yAdvance=this.parseShort()),16&f&&(w.xPlaDevice=void 0,this.parseShort()),32&f&&(w.yPlaDevice=void 0,this.parseShort()),64&f&&(w.xAdvDevice=void 0,this.parseShort()),128&f&&(w.yAdvDevice=void 0,this.parseShort()),w},_e.prototype.parseValueRecordList=function(){for(var f=this.parseUShort(),w=this.parseUShort(),C=new Array(w),A=0;A<w;A++)C[A]=this.parseValueRecord(f);return C},_e.prototype.parsePointer=function(f){var w=this.parseOffset16();if(0<w)return new _e(this.data,this.offset+w).parseStruct(f)},_e.prototype.parsePointer32=function(f){var w=this.parseOffset32();if(0<w)return new _e(this.data,this.offset+w).parseStruct(f)},_e.prototype.parseListOfLists=function(f){for(var w=this.parseOffset16List(),C=w.length,A=this.relativeOffset,N=new Array(C),z=0;z<C;z++){var q=w[z];if(q===0)N[z]=void 0;else if(this.relativeOffset=q,f){for(var J=this.parseOffset16List(),le=new Array(J.length),ae=0;ae<J.length;ae++)this.relativeOffset=q+J[ae],le[ae]=f.call(this);N[z]=le}else N[z]=this.parseUShortList()}return this.relativeOffset=A,N},_e.prototype.parseCoverage=function(){var f=this.offset+this.relativeOffset,w=this.parseUShort(),C=this.parseUShort();if(w===1)return{format:1,glyphs:this.parseUShortList(C)};if(w!==2)throw new Error("0x"+f.toString(16)+": Coverage format must be 1 or 2.");for(var A=new Array(C),N=0;N<C;N++)A[N]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:A}},_e.prototype.parseClassDef=function(){var f=this.offset+this.relativeOffset,w=this.parseUShort();if(w===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(w===2)return{format:2,ranges:this.parseRecordList({start:_e.uShort,end:_e.uShort,classId:_e.uShort})};throw new Error("0x"+f.toString(16)+": ClassDef format must be 1 or 2.")},_e.list=function(f,w){return function(){return this.parseList(f,w)}},_e.list32=function(f,w){return function(){return this.parseList32(f,w)}},_e.recordList=function(f,w){return function(){return this.parseRecordList(f,w)}},_e.recordList32=function(f,w){return function(){return this.parseRecordList32(f,w)}},_e.pointer=function(f){return function(){return this.parsePointer(f)}},_e.pointer32=function(f){return function(){return this.parsePointer32(f)}},_e.tag=_e.prototype.parseTag,_e.byte=_e.prototype.parseByte,_e.uShort=_e.offset16=_e.prototype.parseUShort,_e.uShortList=_e.prototype.parseUShortList,_e.uLong=_e.offset32=_e.prototype.parseULong,_e.uLongList=_e.prototype.parseULongList,_e.struct=_e.prototype.parseStruct,_e.coverage=_e.prototype.parseCoverage,_e.classDef=_e.prototype.parseClassDef;var Le={reserved:_e.uShort,reqFeatureIndex:_e.uShort,featureIndexes:_e.uShortList},Ee=(_e.prototype.parseScriptList=function(){return this.parsePointer(_e.recordList({tag:_e.tag,script:_e.pointer({defaultLangSys:_e.pointer(Le),langSysRecords:_e.recordList({tag:_e.tag,langSys:_e.pointer(Le)})})}))||[]},_e.prototype.parseFeatureList=function(){return this.parsePointer(_e.recordList({tag:_e.tag,feature:_e.pointer({featureParams:_e.offset16,lookupListIndexes:_e.uShortList})}))||[]},_e.prototype.parseLookupList=function(f){return this.parsePointer(_e.list(_e.pointer(function(){var w=this.parseUShort(),C=(I.argument(1<=w&&w<=9,"GPOS/GSUB lookup type "+w+" unknown."),this.parseUShort()),A=16&C;return{lookupType:w,lookupFlag:C,subtables:this.parseList(_e.pointer(f[w])),markFilteringSet:A?this.parseUShort():void 0}})))||[]},_e.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var f=this.parseUShort(),w=this.parseUShort();return I.argument(f===1&&w<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:_e.offset32,featureTableSubstitutionOffset:_e.offset32})})||[]},{getByte:Ze,getCard8:Ze,getUShort:Ge,getCard16:Ge,getShort:function(f,w){return f.getInt16(w,!1)},getULong:ze,getFixed:qe,getTag:function(f,w){for(var C="",A=w;A<w+4;A+=1)C+=String.fromCharCode(f.getInt8(A));return C},getOffset:function(f,w,C){for(var A=0,N=0;N<C;N+=1)A=(A<<=8)+f.getUint8(w+N);return A},getBytes:function(f,w,C){for(var A=[],N=w;N<C;N+=1)A.push(f.getUint8(N));return A},bytesToString:function(f){for(var w="",C=0;C<f.length;C+=1)w+=String.fromCharCode(f[C]);return w},Parser:_e}),Q={parse:function(f,w){for(var C={},A=(C.version=Ee.getUShort(f,w),I.argument(C.version===0,"cmap table version should be 0."),C.numTables=Ee.getUShort(f,w+2),-1),N=C.numTables-1;0<=N;--N){var z=Ee.getUShort(f,w+4+8*N),q=Ee.getUShort(f,w+4+8*N+2);if(z===3&&(q===0||q===1||q===10)||z===0&&(q===0||q===1||q===2||q===3||q===4)){A=Ee.getULong(f,w+4+8*N+4);break}}if(A===-1)throw new Error("No valid cmap sub-tables found.");var J=new Ee.Parser(f,w+A);if(C.format=J.parseUShort(),C.format===12){var le,ae=C,ve=J;ve.parseUShort(),ae.length=ve.parseULong(),ae.language=ve.parseULong(),ae.groupCount=le=ve.parseULong(),ae.glyphIndexMap={};for(var Ce=0;Ce<le;Ce+=1)for(var we=ve.parseULong(),pe=ve.parseULong(),Re=ve.parseULong(),Pe=we;Pe<=pe;Pe+=1)ae.glyphIndexMap[Pe]=Re,Re++}else{if(C.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+C.format+").");var Ae=C,ke=f,Te=w,Je=A;Ae.length=J.parseUShort(),Ae.language=J.parseUShort(),Ae.segCount=it=J.parseUShort()>>1,J.skip("uShort",3),Ae.glyphIndexMap={};for(var it,et=new Ee.Parser(ke,Te+Je+14),tt=new Ee.Parser(ke,Te+Je+16+2*it),at=new Ee.Parser(ke,Te+Je+16+4*it),xt=new Ee.Parser(ke,Te+Je+16+6*it),At=Te+Je+16+8*it,Ft=0;Ft<it-1;Ft+=1)for(var Kt=void 0,Zt=et.parseUShort(),ur=tt.parseUShort(),_t=at.parseShort(),Et=xt.parseUShort(),gt=ur;gt<=Zt;gt+=1)Et!==0?(At=(At=xt.offset+xt.relativeOffset-2)+Et+2*(gt-ur),(Kt=Ee.getUShort(ke,At))!==0&&(Kt=Kt+_t&65535)):Kt=gt+_t&65535,Ae.glyphIndexMap[gt]=Kt}return C},make:function(f){for(var w=!0,C=f.length-1;0<C;--C)if(65535<f.get(C).unicode){console.log("Adding CMAP format 12 (needed!)"),w=!1;break}var A,N,z=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:w?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:w?12:20}],q=(z=(z=w?z:z.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Me.Table("cmap",z));for(q.segments=[],C=0;C<f.length;C+=1){for(var J=f.get(C),le=0;le<J.unicodes.length;le+=1)A=J.unicodes[le],N=C,q.segments.push({end:A,start:A,delta:-(A-N),offset:0,glyphIndex:N});q.segments=q.segments.sort(function(Te,Je){return Te.start-Je.start})}q.segments.push({end:65535,start:65535,delta:1,offset:0});var ae=q.segments.length,ve=0,Ce=[],we=[],pe=[],Re=[],Pe=[],Ae=[];for(C=0;C<ae;C+=1){var ke=q.segments[C];ke.end<=65535&&ke.start<=65535?(Ce=Ce.concat({name:"end_"+C,type:"USHORT",value:ke.end}),we=we.concat({name:"start_"+C,type:"USHORT",value:ke.start}),pe=pe.concat({name:"idDelta_"+C,type:"SHORT",value:ke.delta}),Re=Re.concat({name:"idRangeOffset_"+C,type:"USHORT",value:ke.offset}),ke.glyphId!==void 0&&(Pe=Pe.concat({name:"glyph_"+C,type:"USHORT",value:ke.glyphId}))):ve+=1,w||ke.glyphIndex===void 0||(Ae=(Ae=(Ae=Ae.concat({name:"cmap12Start_"+C,type:"ULONG",value:ke.start})).concat({name:"cmap12End_"+C,type:"ULONG",value:ke.end})).concat({name:"cmap12Glyph_"+C,type:"ULONG",value:ke.glyphIndex}))}return q.segCountX2=2*(ae-ve),q.searchRange=2*Math.pow(2,Math.floor(Math.log(ae-ve)/Math.log(2))),q.entrySelector=Math.log(q.searchRange/2)/Math.log(2),q.rangeShift=q.segCountX2-q.searchRange,q.fields=q.fields.concat(Ce),q.fields.push({name:"reservedPad",type:"USHORT",value:0}),q.fields=q.fields.concat(we),q.fields=q.fields.concat(pe),q.fields=q.fields.concat(Re),q.fields=q.fields.concat(Pe),q.cmap4Length=14+2*Ce.length+2+2*we.length+2*pe.length+2*Re.length+2*Pe.length,w||(z=16+4*Ae.length,q.cmap12Offset=20+q.cmap4Length,q.fields=q.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:z},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Ae.length/3}]),q.fields=q.fields.concat(Ae)),q}},re=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Y=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ne=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ge=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function xe(f){this.font=f}function Oe(f){this.cmap=f}function Ue(f,w){this.encoding=f,this.charset=w}function Be(f){switch(f.version){case 1:this.names=ge.slice();break;case 2:this.names=new Array(f.numberOfGlyphs);for(var w=0;w<f.numberOfGlyphs;w++)f.glyphNameIndex[w]<ge.length?this.names[w]=ge[f.glyphNameIndex[w]]:this.names[w]=f.names[f.glyphNameIndex[w]-ge.length];break;case 2.5:this.names=new Array(f.numberOfGlyphs);for(var C=0;C<f.numberOfGlyphs;C++)this.names[C]=ge[C+f.glyphNameIndex[C]];break;default:this.names=[]}}xe.prototype.charToGlyphIndex=function(f){var w=f.codePointAt(0),C=this.font.glyphs;if(C){for(var A=0;A<C.length;A+=1)for(var N=C.get(A),z=0;z<N.unicodes.length;z+=1)if(N.unicodes[z]===w)return A}return null},Oe.prototype.charToGlyphIndex=function(f){return this.cmap.glyphIndexMap[f.codePointAt(0)]||0},Ue.prototype.charToGlyphIndex=function(f){return f=f.codePointAt(0),f=this.encoding[f],this.charset.indexOf(f)},Be.prototype.nameToGlyphIndex=function(f){return this.names.indexOf(f)},Be.prototype.glyphIndexToName=function(f){return this.names[f]};var Ve={line:function(f,w,C,A,N){f.beginPath(),f.moveTo(w,C),f.lineTo(A,N),f.stroke()}};function Xe(f){this.bindConstructorValues(f)}function st(f,w,C){Object.defineProperty(f,w,{get:function(){return f.path,f[C]},set:function(A){f[C]=A},enumerable:!0,configurable:!0})}function nt(f,w){if(this.font=f,this.glyphs={},Array.isArray(w))for(var C=0;C<w.length;C++)this.glyphs[C]=w[C];this.length=w&&w.length||0}Xe.prototype.bindConstructorValues=function(f){var w;this.index=f.index||0,this.name=f.name||null,this.unicode=f.unicode||void 0,this.unicodes=f.unicodes||f.unicode!==void 0?[f.unicode]:[],f.xMin&&(this.xMin=f.xMin),f.yMin&&(this.yMin=f.yMin),f.xMax&&(this.xMax=f.xMax),f.yMax&&(this.yMax=f.yMax),f.advanceWidth&&(this.advanceWidth=f.advanceWidth),Object.defineProperty(this,"path",(f=f.path,w=f||new Z,{configurable:!0,get:function(){return w=typeof w=="function"?w():w},set:function(C){w=C}}))},Xe.prototype.addUnicode=function(f){this.unicodes.length===0&&(this.unicode=f),this.unicodes.push(f)},Xe.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Xe.prototype.getPath=function(f,w,C,A,N){f=f!==void 0?f:0,w=w!==void 0?w:0,C=C!==void 0?C:72;for(var z,q,J=(A=A||{}).xScale,le=A.yScale,ae=((z=A.hinting&&N&&N.hinting?this.path&&N.hinting.exec(this,C):z)?(q=N.hinting.getCommands(z),f=Math.round(f),w=Math.round(w),J=le=1):(q=this.path.commands,A=1/this.path.unitsPerEm*C,J===void 0&&(J=A),le===void 0&&(le=A)),new Z),ve=0;ve<q.length;ve+=1){var Ce=q[ve];Ce.type==="M"?ae.moveTo(f+Ce.x*J,w+-Ce.y*le):Ce.type==="L"?ae.lineTo(f+Ce.x*J,w+-Ce.y*le):Ce.type==="Q"?ae.quadraticCurveTo(f+Ce.x1*J,w+-Ce.y1*le,f+Ce.x*J,w+-Ce.y*le):Ce.type==="C"?ae.curveTo(f+Ce.x1*J,w+-Ce.y1*le,f+Ce.x2*J,w+-Ce.y2*le,f+Ce.x*J,w+-Ce.y*le):Ce.type==="Z"&&ae.closePath()}return ae},Xe.prototype.getContours=function(){if(this.points===void 0)return[];for(var f=[],w=[],C=0;C<this.points.length;C+=1){var A=this.points[C];w.push(A),A.lastPointOfContour&&(f.push(w),w=[])}return I.argument(w.length===0,"There are still points left in the current contour."),f},Xe.prototype.getMetrics=function(){for(var f=this.path.commands,w=[],C=[],A=0;A<f.length;A+=1){var N=f[A];N.type!=="Z"&&(w.push(N.x),C.push(N.y)),N.type!=="Q"&&N.type!=="C"||(w.push(N.x1),C.push(N.y1)),N.type==="C"&&(w.push(N.x2),C.push(N.y2))}var z={xMin:Math.min.apply(null,w),yMin:Math.min.apply(null,C),xMax:Math.max.apply(null,w),yMax:Math.max.apply(null,C),leftSideBearing:this.leftSideBearing};return isFinite(z.xMin)||(z.xMin=0),isFinite(z.xMax)||(z.xMax=this.advanceWidth),isFinite(z.yMin)||(z.yMin=0),isFinite(z.yMax)||(z.yMax=0),z.rightSideBearing=this.advanceWidth-z.leftSideBearing-(z.xMax-z.xMin),z},Xe.prototype.draw=function(f,w,C,A,N){this.getPath(w,C,A,N).draw(f)},Xe.prototype.drawPoints=function(f,w,C,A){function N(ve,Ce,we,pe){var Re=2*Math.PI;f.beginPath();for(var Pe=0;Pe<ve.length;Pe+=1)f.moveTo(Ce+ve[Pe].x*pe,we+ve[Pe].y*pe),f.arc(Ce+ve[Pe].x*pe,we+ve[Pe].y*pe,2,0,Re,!1);f.closePath(),f.fill()}w=w!==void 0?w:0,C=C!==void 0?C:0;for(var A=1/this.path.unitsPerEm*(A=A!==void 0?A:24),z=[],q=[],J=this.path,le=0;le<J.commands.length;le+=1){var ae=J.commands[le];ae.x!==void 0&&z.push({x:ae.x,y:-ae.y}),ae.x1!==void 0&&q.push({x:ae.x1,y:-ae.y1}),ae.x2!==void 0&&q.push({x:ae.x2,y:-ae.y2})}f.fillStyle="blue",N(z,w,C,A),f.fillStyle="red",N(q,w,C,A)},Xe.prototype.drawMetrics=function(f,w,C,A){w=w!==void 0?w:0,C=C!==void 0?C:0,A=1/this.path.unitsPerEm*(A=A!==void 0?A:24),f.lineWidth=1,f.strokeStyle="black",Ve.line(f,w,-1e4,w,1e4),Ve.line(f,-1e4,C,1e4,C);var N=this.xMin||0,z=this.yMin||0,q=this.xMax||0,J=this.yMax||0,le=this.advanceWidth||0;f.strokeStyle="blue",Ve.line(f,w+N*A,-1e4,w+N*A,1e4),Ve.line(f,w+q*A,-1e4,w+q*A,1e4),Ve.line(f,-1e4,C+-z*A,1e4,C+-z*A),Ve.line(f,-1e4,C+-J*A,1e4,C+-J*A),f.strokeStyle="green",Ve.line(f,w+le*A,-1e4,w+le*A,1e4)},nt.prototype.get=function(f){return typeof this.glyphs[f]=="function"&&(this.glyphs[f]=this.glyphs[f]()),this.glyphs[f]},nt.prototype.push=function(f,w){this.glyphs[f]=w,this.length++};var Qe={GlyphSet:nt,glyphLoader:function(f,w){return new Xe({index:w,font:f})},ttfGlyphLoader:function(f,w,C,A,N,z){return function(){var q=new Xe({index:w,font:f});return q.path=function(){C(q,A,N);var J=z(f.glyphs,q);return J.unitsPerEm=f.unitsPerEm,J},st(q,"xMin","_xMin"),st(q,"xMax","_xMax"),st(q,"yMin","_yMin"),st(q,"yMax","_yMax"),q}},cffGlyphLoader:function(f,w,C,A){return function(){var N=new Xe({index:w,font:f});return N.path=function(){var z=C(f,N,A);return z.unitsPerEm=f.unitsPerEm,z},N}}};function ot(f){return f=f.length<1240?107:f.length<33900?1131:32768,f}function rt(f,w,C){var A,N=[],z=[],q=Ee.getCard16(f,w);if(q!==0){for(var J=Ee.getByte(f,w+2),le=w+(q+1)*J+2,ae=w+3,ve=0;ve<q+1;ve+=1)N.push(Ee.getOffset(f,ae,J)),ae+=J;A=le+N[q]}else A=w+2;for(var Ce=0;Ce<N.length-1;Ce+=1){var we=Ee.getBytes(f,le+N[Ce],le+N[Ce+1]);C&&(we=C(we)),z.push(we)}return{objects:z,startOffset:w,endOffset:A}}function wt(f,w){if(w===28)return f.parseByte()<<8|f.parseByte();if(w===29)return f.parseByte()<<24|f.parseByte()<<16|f.parseByte()<<8|f.parseByte();if(w===30){for(var C=f,A="",N=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var q=C.parseByte(),z=q>>4,q=15&q;if(z==15||(A+=N[z],q==15))break;A+=N[q]}return parseFloat(A)}if(32<=w&&w<=246)return w-139;if(247<=w&&w<=250)return 256*(w-247)+f.parseByte()+108;if(251<=w&&w<=254)return 256*-(w-251)-f.parseByte()-108;throw new Error("Invalid b0 "+w)}function Yt(f,w,C){var A=new Ee.Parser(f,w=w!==void 0?w:0),N=[],z=[];for(C=C!==void 0?C:f.length;A.relativeOffset<C;){var q=A.parseByte();q<=21?(q===12&&(q=1200+A.parseByte()),N.push([q,z]),z=[]):z.push(wt(A,q))}for(var J=N,le={},ae=0;ae<J.length;ae+=1){var ve=J[ae][0],Ce=J[ae][1],we=void 0,we=Ce.length===1?Ce[0]:Ce;if(le.hasOwnProperty(ve)&&!isNaN(le[ve]))throw new Error("Object "+le+" already has key "+ve);le[ve]=we}return le}function It(f,w){return w=w<=390?re[w]:f[w-391]}function mt(f,w,C){for(var A,N={},z=0;z<w.length;z+=1){var q=w[z];if(Array.isArray(q.type)){var J=[];J.length=q.type.length;for(var le=0;le<q.type.length;le++)(A=f[q.op]!==void 0?f[q.op][le]:void 0)===void 0&&(A=q.value!==void 0&&q.value[le]!==void 0?q.value[le]:null),q.type[le]==="SID"&&(A=It(C,A)),J[le]=A;N[q.name]=J}else(A=f[q.op])===void 0&&(A=q.value!==void 0?q.value:null),q.type==="SID"&&(A=It(C,A)),N[q.name]=A}return N}var St=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],dt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Wt(f,w,C,A){return mt(Yt(f,w,C),dt,A)}function Vt(f,w,C,A){for(var N=[],z=0;z<C.length;z+=1){var q=new DataView(new Uint8Array(C[z]).buffer),q=(J=A,mt(Yt(q,0,q.byteLength),St,J)),J=(q._subrs=[],q._subrsBias=0,q.private[0]),le=q.private[1];J!==0&&le!==0&&(J=Wt(f,le+w,J,A),q._defaultWidthX=J.defaultWidthX,q._nominalWidthX=J.nominalWidthX,J.subrs!==0&&(le=rt(f,le+J.subrs+w),q._subrs=le.objects,q._subrsBias=ot(q._subrs)),q._privateDict=J),N.push(q)}return N}function vt(f,w,C){var A,N,z,q,J,le,ae,ve,Ce,we=new Z,pe=[],Re=0,Pe=!1,Ae=!1,ke=0,Te=0,Je=(Ce=(f.isCIDFont?(J=f.tables.cff.topDict._fdSelect[w.index],J=f.tables.cff.topDict._fdArray[J],le=J._subrs,ae=J._subrsBias,ve=J._defaultWidthX,J):(le=f.tables.cff.topDict._subrs,ae=f.tables.cff.topDict._subrsBias,ve=f.tables.cff.topDict._defaultWidthX,f.tables.cff.topDict))._nominalWidthX,ve);function it(tt,at){Ae&&we.closePath(),we.moveTo(tt,at),Ae=!0}function et(){pe.length%2==0||Pe||(Je=pe.shift()+Ce),Re+=pe.length>>1,pe.length=0,Pe=!0}return function tt(at){for(var xt,At,Ft,Kt,Zt,ur,_t,Et,gt,Qt,Mt,Xt,Ct=0;Ct<at.length;){var Ht=at[Ct];switch(Ct+=1,Ht){case 1:case 3:et();break;case 4:1<pe.length&&!Pe&&(Je=pe.shift()+Ce,Pe=!0),Te+=pe.pop(),it(ke,Te);break;case 5:for(;0<pe.length;)ke+=pe.shift(),Te+=pe.shift(),we.lineTo(ke,Te);break;case 6:for(;0<pe.length&&(ke+=pe.shift(),we.lineTo(ke,Te),pe.length!==0);)Te+=pe.shift(),we.lineTo(ke,Te);break;case 7:for(;0<pe.length&&(Te+=pe.shift(),we.lineTo(ke,Te),pe.length!==0);)ke+=pe.shift(),we.lineTo(ke,Te);break;case 8:for(;0<pe.length;)A=ke+pe.shift(),N=Te+pe.shift(),z=A+pe.shift(),q=N+pe.shift(),ke=z+pe.shift(),Te=q+pe.shift(),we.curveTo(A,N,z,q,ke,Te);break;case 10:Zt=pe.pop()+ae,(ur=le[Zt])&&tt(ur);break;case 11:return;case 12:switch(Ht=at[Ct],Ct+=1,Ht){case 35:A=ke+pe.shift(),N=Te+pe.shift(),z=A+pe.shift(),q=N+pe.shift(),_t=z+pe.shift(),Et=q+pe.shift(),gt=_t+pe.shift(),Qt=Et+pe.shift(),Mt=gt+pe.shift(),Xt=Qt+pe.shift(),ke=Mt+pe.shift(),Te=Xt+pe.shift(),pe.shift(),we.curveTo(A,N,z,q,_t,Et),we.curveTo(gt,Qt,Mt,Xt,ke,Te);break;case 34:A=ke+pe.shift(),N=Te,z=A+pe.shift(),q=N+pe.shift(),_t=z+pe.shift(),Et=q,gt=_t+pe.shift(),Qt=q,Mt=gt+pe.shift(),Xt=Te,ke=Mt+pe.shift(),we.curveTo(A,N,z,q,_t,Et),we.curveTo(gt,Qt,Mt,Xt,ke,Te);break;case 36:A=ke+pe.shift(),N=Te+pe.shift(),z=A+pe.shift(),q=N+pe.shift(),_t=z+pe.shift(),Et=q,gt=_t+pe.shift(),Qt=q,Mt=gt+pe.shift(),Xt=Qt+pe.shift(),ke=Mt+pe.shift(),we.curveTo(A,N,z,q,_t,Et),we.curveTo(gt,Qt,Mt,Xt,ke,Te);break;case 37:A=ke+pe.shift(),N=Te+pe.shift(),z=A+pe.shift(),q=N+pe.shift(),_t=z+pe.shift(),Et=q+pe.shift(),gt=_t+pe.shift(),Qt=Et+pe.shift(),Mt=gt+pe.shift(),Xt=Qt+pe.shift(),Math.abs(Mt-ke)>Math.abs(Xt-Te)?ke=Mt+pe.shift():Te=Xt+pe.shift(),we.curveTo(A,N,z,q,_t,Et),we.curveTo(gt,Qt,Mt,Xt,ke,Te);break;default:console.log("Glyph "+w.index+": unknown operator 1200"+Ht),pe.length=0}break;case 14:0<pe.length&&!Pe&&(Je=pe.shift()+Ce,Pe=!0),Ae&&(we.closePath(),Ae=!1);break;case 18:et();break;case 19:case 20:et(),Ct+=Re+7>>3;break;case 21:2<pe.length&&!Pe&&(Je=pe.shift()+Ce,Pe=!0),Te+=pe.pop(),it(ke+=pe.pop(),Te);break;case 22:1<pe.length&&!Pe&&(Je=pe.shift()+Ce,Pe=!0),it(ke+=pe.pop(),Te);break;case 23:et();break;case 24:for(;2<pe.length;)A=ke+pe.shift(),N=Te+pe.shift(),z=A+pe.shift(),q=N+pe.shift(),ke=z+pe.shift(),Te=q+pe.shift(),we.curveTo(A,N,z,q,ke,Te);ke+=pe.shift(),Te+=pe.shift(),we.lineTo(ke,Te);break;case 25:for(;6<pe.length;)ke+=pe.shift(),Te+=pe.shift(),we.lineTo(ke,Te);A=ke+pe.shift(),N=Te+pe.shift(),z=A+pe.shift(),q=N+pe.shift(),ke=z+pe.shift(),Te=q+pe.shift(),we.curveTo(A,N,z,q,ke,Te);break;case 26:for(pe.length%2&&(ke+=pe.shift());0<pe.length;)A=ke,N=Te+pe.shift(),z=A+pe.shift(),q=N+pe.shift(),ke=z,Te=q+pe.shift(),we.curveTo(A,N,z,q,ke,Te);break;case 27:for(pe.length%2&&(Te+=pe.shift());0<pe.length;)A=ke+pe.shift(),N=Te,z=A+pe.shift(),q=N+pe.shift(),ke=z+pe.shift(),Te=q,we.curveTo(A,N,z,q,ke,Te);break;case 28:xt=at[Ct],At=at[Ct+1],pe.push((xt<<24|At<<16)>>16),Ct+=2;break;case 29:Zt=pe.pop()+f.gsubrsBias,(ur=f.gsubrs[Zt])&&tt(ur);break;case 30:for(;0<pe.length&&(A=ke,N=Te+pe.shift(),z=A+pe.shift(),q=N+pe.shift(),ke=z+pe.shift(),Te=q+(pe.length===1?pe.shift():0),we.curveTo(A,N,z,q,ke,Te),pe.length!==0);)A=ke+pe.shift(),N=Te,z=A+pe.shift(),q=N+pe.shift(),Te=q+pe.shift(),ke=z+(pe.length===1?pe.shift():0),we.curveTo(A,N,z,q,ke,Te);break;case 31:for(;0<pe.length&&(A=ke+pe.shift(),N=Te,z=A+pe.shift(),q=N+pe.shift(),Te=q+pe.shift(),ke=z+(pe.length===1?pe.shift():0),we.curveTo(A,N,z,q,ke,Te),pe.length!==0);)A=ke,N=Te+pe.shift(),z=A+pe.shift(),q=N+pe.shift(),ke=z+pe.shift(),Te=q+(pe.length===1?pe.shift():0),we.curveTo(A,N,z,q,ke,Te);break;default:Ht<32?console.log("Glyph "+w.index+": unknown operator "+Ht):Ht<247?pe.push(Ht-139):Ht<251?(xt=at[Ct],Ct+=1,pe.push(256*(Ht-247)+xt+108)):Ht<255?(xt=at[Ct],Ct+=1,pe.push(256*-(Ht-251)-xt-108)):(xt=at[Ct],At=at[Ct+1],Ft=at[Ct+2],Kt=at[Ct+3],Ct+=4,pe.push((xt<<24|At<<16|Ft<<8|Kt)/65536))}}}(C),w.advanceWidth=Je,we}function qt(f,w){var C,A=re.indexOf(f);return 0<=A&&(C=A),0<=(A=w.indexOf(f))?C=A+re.length:(C=re.length+w.length,w.push(f)),C}function rn(f,w,C){for(var A={},N=0;N<f.length;N+=1){var z=f[N],q=w[z.name];q===void 0||function J(le,ae){if(le===ae)return 1;if(Array.isArray(le)&&Array.isArray(ae)&&le.length===ae.length){for(var ve=0;ve<le.length;ve+=1)if(!J(le[ve],ae[ve]))return;return 1}}(q,z.value)||(z.type==="SID"&&(q=qt(q,C)),A[z.op]={name:z.name,type:z.type,value:q})}return A}function nn(f,w){var C=new Me.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return C.dict=rn(St,f,w),C}function on(f){var w=new Me.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return w.topDicts=[{name:"topDict_0",type:"TABLE",value:f}],w}function Ln(f){for(var w=new Me.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),C=0;C<f.length;C+=1){var A=f.get(C),N=function(z){for(var q=[],J=z.path,le=(q.push({name:"width",type:"NUMBER",value:z.advanceWidth}),0),ae=0,ve=0;ve<J.commands.length;ve+=1){var Ce,we,pe,Re,Pe=void 0,Ae=void 0,ke=J.commands[ve];(ke=ke.type==="Q"?{type:"C",x:ke.x,y:ke.y,x1:1/3*le+2/3*ke.x1,y1:1/3*ae+2/3*ke.y1,x2:1/3*ke.x+2/3*ke.x1,y2:1/3*ke.y+2/3*ke.y1}:ke).type==="M"?(Pe=Math.round(ke.x-le),Ae=Math.round(ke.y-ae),q.push({name:"dx",type:"NUMBER",value:Pe}),q.push({name:"dy",type:"NUMBER",value:Ae}),q.push({name:"rmoveto",type:"OP",value:21}),le=Math.round(ke.x),ae=Math.round(ke.y)):ke.type==="L"?(Pe=Math.round(ke.x-le),Ae=Math.round(ke.y-ae),q.push({name:"dx",type:"NUMBER",value:Pe}),q.push({name:"dy",type:"NUMBER",value:Ae}),q.push({name:"rlineto",type:"OP",value:5}),le=Math.round(ke.x),ae=Math.round(ke.y)):ke.type==="C"&&(Ce=Math.round(ke.x1-le),we=Math.round(ke.y1-ae),pe=Math.round(ke.x2-ke.x1),Re=Math.round(ke.y2-ke.y1),Pe=Math.round(ke.x-ke.x2),Ae=Math.round(ke.y-ke.y2),q.push({name:"dx1",type:"NUMBER",value:Ce}),q.push({name:"dy1",type:"NUMBER",value:we}),q.push({name:"dx2",type:"NUMBER",value:pe}),q.push({name:"dy2",type:"NUMBER",value:Re}),q.push({name:"dx",type:"NUMBER",value:Pe}),q.push({name:"dy",type:"NUMBER",value:Ae}),q.push({name:"rrcurveto",type:"OP",value:8}),le=Math.round(ke.x),ae=Math.round(ke.y))}return q.push({name:"endchar",type:"OP",value:14}),q}(A);w.charStrings.push({name:A.name,type:"CHARSTRING",value:N})}return w}var sn={parse:function(f,w,C){C.tables.cff={},J=f,A=w,(N={}).formatMajor=Ee.getCard8(J,A),N.formatMinor=Ee.getCard8(J,A+1),N.size=Ee.getCard8(J,A+2),N.offsetSize=Ee.getCard8(J,A+3),N.startOffset=A,N.endOffset=A+4;var J=rt(f,N.endOffset,Ee.bytesToString),A=rt(f,J.endOffset),N=rt(f,A.endOffset,Ee.bytesToString),J=rt(f,N.endOffset);if(C.gsubrs=J.objects,C.gsubrsBias=ot(C.gsubrs),(J=Vt(f,w,A.objects,N.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+J.length);if(A=J[0],(C.tables.cff.topDict=A)._privateDict&&(C.defaultWidthX=A._privateDict.defaultWidthX,C.nominalWidthX=A._privateDict.nominalWidthX),A.ros[0]!==void 0&&A.ros[1]!==void 0&&(C.isCIDFont=!0),C.isCIDFont){var J=A.fdArray,z=A.fdSelect;if(J===0||z===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");J=Vt(f,w,rt(f,J+=w).objects,N.objects),A._fdArray=J,A._fdSelect=function(we,pe,Re,Pe){var Ae,ke=[],Te=new Ee.Parser(we,pe);if((we=Te.parseCard8())===0)for(var Je=0;Je<Re;Je++){if(Pe<=(Ae=Te.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ae+" (FD count "+Pe+")");ke.push(Ae)}else{if(we!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+we);var it,et=Te.parseCard16(),tt=Te.parseCard16();if(tt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+tt);for(var at=0;at<et;at++){if(Ae=Te.parseCard8(),it=Te.parseCard16(),Pe<=Ae)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ae+" (FD count "+Pe+")");if(Re<it)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+it);for(;tt<it;tt++)ke.push(Ae);tt=it}if(it!==Re)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+it)}return ke}(f,z+=w,C.numGlyphs,J.length)}var z=w+A.private[1],J=Wt(f,z,A.private[0],N.objects),q=(C.defaultWidthX=J.defaultWidthX,C.nominalWidthX=J.nominalWidthX,J.subrs!==0?(z=rt(f,z+J.subrs),C.subrs=z.objects,C.subrsBias=ot(C.subrs)):(C.subrs=[],C.subrsBias=0),rt(f,w+A.charStrings)),J=(C.nGlyphs=q.objects.length,function(ve,Ce,we,pe){var Re=new Ee.Parser(ve,Ce),Pe=(--we,[".notdef"]);if((ve=Re.parseCard8())===0)for(var Ae=0;Ae<we;Ae+=1)ke=Re.parseSID(),Pe.push(It(pe,ke));else if(ve===1)for(;Pe.length<=we;)for(var ke=Re.parseSID(),Te=Re.parseCard8(),Je=0;Je<=Te;Je+=1)Pe.push(It(pe,ke)),ke+=1;else{if(ve!==2)throw new Error("Unknown charset format "+ve);for(;Pe.length<=we;){ke=Re.parseSID(),Te=Re.parseCard16();for(var it=0;it<=Te;it+=1)Pe.push(It(pe,ke)),ke+=1}}return Pe}(f,w+A.charset,C.nGlyphs,N.objects));A.encoding===0?C.cffEncoding=new Ue(Y,J):A.encoding===1?C.cffEncoding=new Ue(ne,J):C.cffEncoding=function(ve,Ce,we){var pe={},Re=new Ee.Parser(ve,Ce);if((ve=Re.parseCard8())===0)for(var Pe=Re.parseCard8(),Ae=0;Ae<Pe;Ae+=1)pe[Te=Re.parseCard8()]=Ae;else{if(ve!==1)throw new Error("Unknown encoding format "+ve);for(var ke=Re.parseCard8(),Te=1,Je=0;Je<ke;Je+=1)for(var it=Re.parseCard8(),et=Re.parseCard8(),tt=it;tt<=it+et;tt+=1)pe[tt]=Te,Te+=1}return new Ue(pe,we)}(f,w+A.encoding,J),C.encoding=C.encoding||C.cffEncoding,C.glyphs=new Qe.GlyphSet(C);for(var le=0;le<C.nGlyphs;le+=1){var ae=q.objects[le];C.glyphs.push(le,Qe.cffGlyphLoader(C,le,vt,ae))}},make:function(f,ve){for(var C,A=new Me.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),N=1/ve.unitsPerEm,N={version:ve.version,fullName:ve.fullName,familyName:ve.familyName,weight:ve.weightName,fontBBox:ve.fontBBox||[0,0,0,0],fontMatrix:[N,0,0,N,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},z=[],q=1;q<f.length;q+=1)C=f.get(q),z.push(C.name);var J,le,ae=[],ve=(A.header=new Me.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),A.nameIndex=function(we){var pe=new Me.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);pe.names=[];for(var Re=0;Re<we.length;Re+=1)pe.names.push({name:"name_"+Re,type:"NAME",value:we[Re]});return pe}([ve.postScriptName]),nn(N,ae)),Ce=(A.topDictIndex=on(ve),A.globalSubrIndex=new Me.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),A.charsets=function(we,pe){for(var Re=new Me.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Pe=0;Pe<we.length;Pe+=1){var Ae=qt(we[Pe],pe);Re.fields.push({name:"glyph_"+Pe,type:"SID",value:Ae})}return Re}(z,ae),A.charStringsIndex=Ln(f),A.privateDict=(Ce={},J=ae,(le=new Me.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=rn(dt,Ce,J),le),A.stringIndex=function(we){var pe=new Me.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);pe.strings=[];for(var Re=0;Re<we.length;Re+=1)pe.strings.push({name:"string_"+Re,type:"STRING",value:we[Re]});return pe}(ae),A.header.sizeOf()+A.nameIndex.sizeOf()+A.topDictIndex.sizeOf()+A.stringIndex.sizeOf()+A.globalSubrIndex.sizeOf());return N.charset=Ce,N.encoding=0,N.charStrings=N.charset+A.charsets.sizeOf(),N.private[1]=N.charStrings+A.charStringsIndex.sizeOf(),ve=nn(N,ae),A.topDictIndex=on(ve),A}},an={parse:function(A,w){var C={},A=new Ee.Parser(A,w);return C.version=A.parseVersion(),C.fontRevision=Math.round(1e3*A.parseFixed())/1e3,C.checkSumAdjustment=A.parseULong(),C.magicNumber=A.parseULong(),I.argument(C.magicNumber===1594834165,"Font header has wrong magic number."),C.flags=A.parseUShort(),C.unitsPerEm=A.parseUShort(),C.created=A.parseLongDateTime(),C.modified=A.parseLongDateTime(),C.xMin=A.parseShort(),C.yMin=A.parseShort(),C.xMax=A.parseShort(),C.yMax=A.parseShort(),C.macStyle=A.parseUShort(),C.lowestRecPPEM=A.parseUShort(),C.fontDirectionHint=A.parseShort(),C.indexToLocFormat=A.parseShort(),C.glyphDataFormat=A.parseShort(),C},make:function(f){var w=Math.round(new Date().getTime()/1e3)+2082844800,C=w;return f.createdTimestamp&&(C=f.createdTimestamp+2082844800),new Me.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:C},{name:"modified",type:"LONGDATETIME",value:w},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],f)}},fe={parse:function(A,w){var C={},A=new Ee.Parser(A,w);return C.version=A.parseVersion(),C.ascender=A.parseShort(),C.descender=A.parseShort(),C.lineGap=A.parseShort(),C.advanceWidthMax=A.parseUShort(),C.minLeftSideBearing=A.parseShort(),C.minRightSideBearing=A.parseShort(),C.xMaxExtent=A.parseShort(),C.caretSlopeRise=A.parseShort(),C.caretSlopeRun=A.parseShort(),C.caretOffset=A.parseShort(),A.relativeOffset+=8,C.metricDataFormat=A.parseShort(),C.numberOfHMetrics=A.parseUShort(),C},make:function(f){return new Me.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],f)}},Ne={parse:function(f,w,C,A,N){for(var z,q,J=new Ee.Parser(f,w),le=0;le<A;le+=1){le<C&&(z=J.parseUShort(),q=J.parseShort());var ae=N.get(le);ae.advanceWidth=z,ae.leftSideBearing=q}},make:function(f){for(var w=new Me.Table("hmtx",[]),C=0;C<f.length;C+=1){var N=f.get(C),A=N.advanceWidth||0,N=N.leftSideBearing||0;w.fields.push({name:"advanceWidth_"+C,type:"USHORT",value:A}),w.fields.push({name:"leftSideBearing_"+C,type:"SHORT",value:N})}return w}},Ke={make:function(f){for(var w=new Me.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:f.length}]),C="",A=12+4*f.length,N=0;N<f.length;++N){var z=C.indexOf(f[N]);z<0&&(z=C.length,C+=f[N]),w.fields.push({name:"offset "+N,type:"USHORT",value:A+z}),w.fields.push({name:"length "+N,type:"USHORT",value:f[N].length})}return w.fields.push({name:"stringPool",type:"CHARARRAY",value:C}),w},parse:function(f,w){for(var C=new Ee.Parser(f,w),A=C.parseULong(),N=(I.argument(A===1,"Unsupported ltag table version."),C.skip("uLong",1),C.parseULong()),z=[],q=0;q<N;q++){for(var J="",le=w+C.parseUShort(),ae=C.parseUShort(),ve=le;ve<le+ae;++ve)J+=String.fromCharCode(f.getInt8(ve));z.push(J)}return z}},De={parse:function(A,w){var C={},A=new Ee.Parser(A,w);return C.version=A.parseVersion(),C.numGlyphs=A.parseUShort(),C.version===1&&(C.maxPoints=A.parseUShort(),C.maxContours=A.parseUShort(),C.maxCompositePoints=A.parseUShort(),C.maxCompositeContours=A.parseUShort(),C.maxZones=A.parseUShort(),C.maxTwilightPoints=A.parseUShort(),C.maxStorage=A.parseUShort(),C.maxFunctionDefs=A.parseUShort(),C.maxInstructionDefs=A.parseUShort(),C.maxStackElements=A.parseUShort(),C.maxSizeOfInstructions=A.parseUShort(),C.maxComponentElements=A.parseUShort(),C.maxComponentDepth=A.parseUShort()),C},make:function(f){return new Me.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:f}])}},ut=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ie={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},ht={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},We={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},ct="utf-16",Ye={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Rt={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Nt(f,w,C){switch(f){case 0:return ct;case 1:return Rt[C]||Ye[w];case 3:if(w===1||w===10)return ct}}function Ot(f){var w,C={};for(w in f)C[f[w]]=parseInt(w);return C}function Gt(f,w,C,A,N,z){return new Me.Record("NameRecord",[{name:"platformID",type:"USHORT",value:f},{name:"encodingID",type:"USHORT",value:w},{name:"languageID",type:"USHORT",value:C},{name:"nameID",type:"USHORT",value:A},{name:"length",type:"USHORT",value:N},{name:"offset",type:"USHORT",value:z}])}function cr(f,w){if((C=function(z,q){var J=z.length,le=q.length-J+1;e:for(var ae=0;ae<le;ae++)for(;ae<le;ae++){for(var ve=0;ve<J;ve++)if(q[ae+ve]!==z[ve])continue e;return ae}return-1}(f,w))<0)for(var C=w.length,A=0,N=f.length;A<N;++A)w.push(f[A]);return C}var rr={parse:function(f,w,C){for(var A={},N=new Ee.Parser(f,w),w=N.parseUShort(),z=N.parseUShort(),q=N.offset+N.parseUShort(),J=0;J<z;J++){var Re=N.parseUShort(),le=N.parseUShort(),ae=N.parseUShort(),ve=N.parseUShort(),ve=ut[ve]||ve,Ce=N.parseUShort(),we=N.parseUShort(),pe=function(Ae,ke,Te){switch(Ae){case 0:if(ke===65535)return"und";if(Te)return Te[ke];break;case 1:return Ie[ke];case 3:return We[ke]}}(Re,ae,C),Re=Nt(Re,le,ae);Re!==void 0&&pe!==void 0&&(le=void 0,(le=Re===ct?B.UTF16(f,q+we,Ce):B.MACSTRING(f,q+we,Ce,Re))&&((ae=(ae=A[ve])===void 0?A[ve]={}:ae)[pe]=le))}return w===1&&N.parseUShort(),A},make:function(f,w){var C,A=[],N={},z=Ot(ut);for(C in f){var q=z[C];if(q===void 0&&(q=C),we=parseInt(q),isNaN(we))throw new Error('Name table entry "'+C+'" does not exist, see nameTableNames for complete list.');N[we]=f[C],A.push(we)}for(var J=Ot(Ie),le=Ot(We),ae=[],ve=[],Ce=0;Ce<A.length;Ce++){var we,pe,Re=N[we=A[Ce]];for(pe in Re){var Pe=Re[pe],it=1,Ae=J[pe],ke=ht[Ae],Te=Nt(it,ke,Ae),Te=W.MACSTRING(Pe,Te),Je=(Te===void 0&&(it=0,(Ae=w.indexOf(pe))<0&&(Ae=w.length,w.push(pe)),ke=4,Te=W.UTF16(Pe)),cr(Te,ve)),it=(ae.push(Gt(it,ke,Ae,we,Te.length,Je)),le[pe]);it!==void 0&&(Ae=cr(ke=W.UTF16(Pe),ve),ae.push(Gt(3,1,it,we,ke.length,Ae)))}}ae.sort(function(at,xt){return at.platformID-xt.platformID||at.encodingID-xt.encodingID||at.languageID-xt.languageID||at.nameID-xt.nameID});for(var et=new Me.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:ae.length},{name:"stringOffset",type:"USHORT",value:6+12*ae.length}]),tt=0;tt<ae.length;tt++)et.fields.push({name:"record_"+tt,type:"RECORD",value:ae[tt]});return et.fields.push({name:"strings",type:"LITERAL",value:ve}),et}},dr=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],zt={parse:function(f,w){var C={},A=new Ee.Parser(f,w);C.version=A.parseUShort(),C.xAvgCharWidth=A.parseShort(),C.usWeightClass=A.parseUShort(),C.usWidthClass=A.parseUShort(),C.fsType=A.parseUShort(),C.ySubscriptXSize=A.parseShort(),C.ySubscriptYSize=A.parseShort(),C.ySubscriptXOffset=A.parseShort(),C.ySubscriptYOffset=A.parseShort(),C.ySuperscriptXSize=A.parseShort(),C.ySuperscriptYSize=A.parseShort(),C.ySuperscriptXOffset=A.parseShort(),C.ySuperscriptYOffset=A.parseShort(),C.yStrikeoutSize=A.parseShort(),C.yStrikeoutPosition=A.parseShort(),C.sFamilyClass=A.parseShort(),C.panose=[];for(var N=0;N<10;N++)C.panose[N]=A.parseByte();return C.ulUnicodeRange1=A.parseULong(),C.ulUnicodeRange2=A.parseULong(),C.ulUnicodeRange3=A.parseULong(),C.ulUnicodeRange4=A.parseULong(),C.achVendID=String.fromCharCode(A.parseByte(),A.parseByte(),A.parseByte(),A.parseByte()),C.fsSelection=A.parseUShort(),C.usFirstCharIndex=A.parseUShort(),C.usLastCharIndex=A.parseUShort(),C.sTypoAscender=A.parseShort(),C.sTypoDescender=A.parseShort(),C.sTypoLineGap=A.parseShort(),C.usWinAscent=A.parseUShort(),C.usWinDescent=A.parseUShort(),1<=C.version&&(C.ulCodePageRange1=A.parseULong(),C.ulCodePageRange2=A.parseULong()),2<=C.version&&(C.sxHeight=A.parseShort(),C.sCapHeight=A.parseShort(),C.usDefaultChar=A.parseUShort(),C.usBreakChar=A.parseUShort(),C.usMaxContent=A.parseUShort()),C},make:function(f){return new Me.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],f)},unicodeRanges:dr,getUnicodeRange:function(f){for(var w=0;w<dr.length;w+=1){var C=dr[w];if(f>=C.begin&&f<C.end)return w}return-1}},Jo={parse:function(f,w){var C={},A=new Ee.Parser(f,w);switch(C.version=A.parseVersion(),C.italicAngle=A.parseFixed(),C.underlinePosition=A.parseShort(),C.underlineThickness=A.parseShort(),C.isFixedPitch=A.parseULong(),C.minMemType42=A.parseULong(),C.maxMemType42=A.parseULong(),C.minMemType1=A.parseULong(),C.maxMemType1=A.parseULong(),C.version){case 1:C.names=ge.slice();break;case 2:C.numberOfGlyphs=A.parseUShort(),C.glyphNameIndex=new Array(C.numberOfGlyphs);for(var N=0;N<C.numberOfGlyphs;N++)C.glyphNameIndex[N]=A.parseUShort();C.names=[];for(var z,q=0;q<C.numberOfGlyphs;q++)C.glyphNameIndex[q]>=ge.length&&(z=A.parseChar(),C.names.push(A.parseString(z)));break;case 2.5:C.numberOfGlyphs=A.parseUShort(),C.offset=new Array(C.numberOfGlyphs);for(var J=0;J<C.numberOfGlyphs;J++)C.offset[J]=A.parseChar()}return C},make:function(){return new Me.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},ar=new Array(9),Gr=(ar[1]=function(){var f=this.offset+this.relativeOffset,w=this.parseUShort();return w===1?{substFormat:1,coverage:this.parsePointer(_e.coverage),deltaGlyphId:this.parseUShort()}:w===2?{substFormat:2,coverage:this.parsePointer(_e.coverage),substitute:this.parseOffset16List()}:void I.assert(!1,"0x"+f.toString(16)+": lookup type 1 format must be 1 or 2.")},ar[2]=function(){var f=this.parseUShort();return I.argument(f===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:f,coverage:this.parsePointer(_e.coverage),sequences:this.parseListOfLists()}},ar[3]=function(){var f=this.parseUShort();return I.argument(f===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:f,coverage:this.parsePointer(_e.coverage),alternateSets:this.parseListOfLists()}},ar[4]=function(){var f=this.parseUShort();return I.argument(f===1,"GSUB ligature table identifier-format must be 1"),{substFormat:f,coverage:this.parsePointer(_e.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:_e.uShort,lookupListIndex:_e.uShort});ar[5]=function(){var f,w,C=this.offset+this.relativeOffset,A=this.parseUShort();return A===1?{substFormat:A,coverage:this.parsePointer(_e.coverage),ruleSets:this.parseListOfLists(function(){var N=this.parseUShort(),z=this.parseUShort();return{input:this.parseUShortList(N-1),lookupRecords:this.parseRecordList(z,Gr)}})}:A===2?{substFormat:A,coverage:this.parsePointer(_e.coverage),classDef:this.parsePointer(_e.classDef),classSets:this.parseListOfLists(function(){var N=this.parseUShort(),z=this.parseUShort();return{classes:this.parseUShortList(N-1),lookupRecords:this.parseRecordList(z,Gr)}})}:A===3?(f=this.parseUShort(),w=this.parseUShort(),{substFormat:A,coverages:this.parseList(f,_e.pointer(_e.coverage)),lookupRecords:this.parseRecordList(w,Gr)}):void I.assert(!1,"0x"+C.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},ar[6]=function(){var f=this.offset+this.relativeOffset,w=this.parseUShort();return w===1?{substFormat:1,coverage:this.parsePointer(_e.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Gr)}})}:w===2?{substFormat:2,coverage:this.parsePointer(_e.coverage),backtrackClassDef:this.parsePointer(_e.classDef),inputClassDef:this.parsePointer(_e.classDef),lookaheadClassDef:this.parsePointer(_e.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Gr)}})}:w===3?{substFormat:3,backtrackCoverage:this.parseList(_e.pointer(_e.coverage)),inputCoverage:this.parseList(_e.pointer(_e.coverage)),lookaheadCoverage:this.parseList(_e.pointer(_e.coverage)),lookupRecords:this.parseRecordList(Gr)}:void I.assert(!1,"0x"+f.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},ar[7]=function(){var f=this.parseUShort(),f=(I.argument(f===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),w=new _e(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:f,extension:ar[f].call(w)}},ar[8]=function(){var f=this.parseUShort();return I.argument(f===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:f,coverage:this.parsePointer(_e.coverage),backtrackCoverage:this.parseList(_e.pointer(_e.coverage)),lookaheadCoverage:this.parseList(_e.pointer(_e.coverage)),substitutes:this.parseUShortList()}};var Rn=new Array(9);Rn[1]=function(f){return f.substFormat===1?new Me.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Me.Coverage(f.coverage)},{name:"deltaGlyphID",type:"USHORT",value:f.deltaGlyphId}]):new Me.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Me.Coverage(f.coverage)}].concat(Me.ushortList("substitute",f.substitute)))},Rn[3]=function(f){return I.assert(f.substFormat===1,"Lookup type 3 substFormat must be 1."),new Me.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Me.Coverage(f.coverage)}].concat(Me.tableList("altSet",f.alternateSets,function(w){return new Me.Table("alternateSetTable",Me.ushortList("alternate",w))})))},Rn[4]=function(f){return I.assert(f.substFormat===1,"Lookup type 4 substFormat must be 1."),new Me.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Me.Coverage(f.coverage)}].concat(Me.tableList("ligSet",f.ligatureSets,function(w){return new Me.Table("ligatureSetTable",Me.tableList("ligature",w,function(C){return new Me.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:C.ligGlyph}].concat(Me.ushortList("component",C.components,C.components.length+1)))}))})))};var es={parse:function(f,w){return w=(f=new _e(f,w=w||0)).parseVersion(1),I.argument(w===1||w===1.1,"Unsupported GSUB table version."),w===1?{version:w,scripts:f.parseScriptList(),features:f.parseFeatureList(),lookups:f.parseLookupList(ar)}:{version:w,scripts:f.parseScriptList(),features:f.parseFeatureList(),lookups:f.parseLookupList(ar),variations:f.parseFeatureVariationsList()}},make:function(f){return new Me.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Me.ScriptList(f.scripts)},{name:"features",type:"TABLE",value:new Me.FeatureList(f.features)},{name:"lookups",type:"TABLE",value:new Me.LookupList(f.lookups,Rn)}])}},ts={parse:function(f,w){for(var C=new Ee.Parser(f,w),A=C.parseULong(),N=(I.argument(A===1,"Unsupported META table version."),C.parseULong(),C.parseULong(),C.parseULong()),z={},q=0;q<N;q++){var J=C.parseTag(),ae=C.parseULong(),le=C.parseULong(),ae=B.UTF8(f,w+ae,le);z[J]=ae}return z},make:function(f){var w,C=Object.keys(f).length,A="",N=16+12*C,z=new Me.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:N},{name:"numTags",type:"ULONG",value:C}]);for(w in f){var q=A.length;A+=f[w],z.fields.push({name:"tag "+w,type:"TAG",value:w}),z.fields.push({name:"offset "+w,type:"ULONG",value:N+q}),z.fields.push({name:"length "+w,type:"ULONG",value:f[w].length})}return z.fields.push({name:"stringPool",type:"CHARARRAY",value:A}),z}};function rs(f){return Math.log(f)/Math.log(2)|0}function to(f){for(;f.length%4!=0;)f.push(0);for(var w=0,C=0;C<f.length;C+=4)w+=(f[C]<<24)+(f[C+1]<<16)+(f[C+2]<<8)+f[C+3];return w%=Math.pow(2,32)}function ns(f,w,C,A){return new Me.Record("Table Record",[{name:"tag",type:"TAG",value:f!==void 0?f:""},{name:"checkSum",type:"ULONG",value:w!==void 0?w:0},{name:"offset",type:"ULONG",value:C!==void 0?C:0},{name:"length",type:"ULONG",value:A!==void 0?A:0}])}function os(f){for(var w=new Me.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),C=(w.tables=f,w.numTables=f.length,Math.pow(2,rs(w.numTables))),A=(w.searchRange=16*C,w.entrySelector=rs(C),w.rangeShift=16*w.numTables-w.searchRange,[]),N=[],z=w.sizeOf()+ns().sizeOf()*w.numTables;z%4!=0;)z+=1,N.push({name:"padding",type:"BYTE",value:0});for(var q=0;q<f.length;q+=1){var J=f[q],le=(I.argument(J.tableName.length===4,"Table name"+J.tableName+" is invalid."),J.sizeOf()),ae=ns(J.tableName,to(J.encode()),z,le);for(A.push({name:ae.tag+" Table Record",type:"RECORD",value:ae}),N.push({name:J.tableName+" table",type:"RECORD",value:J}),z+=le,I.argument(!isNaN(z),"Something went wrong calculating the offset.");z%4!=0;)z+=1,N.push({name:"padding",type:"BYTE",value:0})}return A.sort(function(ve,Ce){return ve.value.tag>Ce.value.tag?1:-1}),w.fields=w.fields.concat(A),w.fields=w.fields.concat(N),w}function ss(f,w,C){for(var A=0;A<w.length;A+=1){var N=f.charToGlyphIndex(w[A]);if(0<N)return f.glyphs.get(N).getMetrics()}return C}var fa={make:os,fontToTable:function(f){for(var w,C=[],A=[],N=[],z=[],q=[],J=[],le=[],ae=0,ve=0,Ce=0,we=0,pe=0,Re=0;Re<f.glyphs.length;Re+=1){var Pe=f.glyphs.get(Re),Ae=0|Pe.unicode;if(isNaN(Pe.advanceWidth))throw new Error("Glyph "+Pe.name+" ("+Re+"): advanceWidth is not a number.");(Ae<w||w===void 0)&&0<Ae&&(w=Ae),ae<Ae&&(ae=Ae);var Ae=zt.getUnicodeRange(Ae);if(Ae<32)ve|=1<<Ae;else if(Ae<64)Ce|=1<<Ae-32;else if(Ae<96)we|=1<<Ae-64;else{if(!(Ae<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");pe|=1<<Ae-96}Pe.name!==".notdef"&&(Ae=Pe.getMetrics(),C.push(Ae.xMin),A.push(Ae.yMin),N.push(Ae.xMax),z.push(Ae.yMax),J.push(Ae.leftSideBearing),le.push(Ae.rightSideBearing),q.push(Pe.advanceWidth))}var ke,Te={xMin:Math.min.apply(null,C),yMin:Math.min.apply(null,A),xMax:Math.max.apply(null,N),yMax:Math.max.apply(null,z),advanceWidthMax:Math.max.apply(null,q),advanceWidthAvg:function(Ht){for(var dn=0,Wr=0;Wr<Ht.length;Wr+=1)dn+=Ht[Wr];return dn/Ht.length}(q),minLeftSideBearing:Math.min.apply(null,J),maxLeftSideBearing:Math.max.apply(null,J),minRightSideBearing:Math.min.apply(null,le)},Je=(Te.ascender=f.ascender,Te.descender=f.descender,an.make({flags:3,unitsPerEm:f.unitsPerEm,xMin:Te.xMin,yMin:Te.yMin,xMax:Te.xMax,yMax:Te.yMax,lowestRecPPEM:3,createdTimestamp:f.createdTimestamp})),it=fe.make({ascender:Te.ascender,descender:Te.descender,advanceWidthMax:Te.advanceWidthMax,minLeftSideBearing:Te.minLeftSideBearing,minRightSideBearing:Te.minRightSideBearing,xMaxExtent:Te.maxLeftSideBearing+(Te.xMax-Te.xMin),numberOfHMetrics:f.glyphs.length}),et=De.make(f.glyphs.length),tt=zt.make({xAvgCharWidth:Math.round(Te.advanceWidthAvg),usWeightClass:f.tables.os2.usWeightClass,usWidthClass:f.tables.os2.usWidthClass,usFirstCharIndex:w,usLastCharIndex:ae,ulUnicodeRange1:ve,ulUnicodeRange2:Ce,ulUnicodeRange3:we,ulUnicodeRange4:pe,fsSelection:f.tables.os2.fsSelection,sTypoAscender:Te.ascender,sTypoDescender:Te.descender,sTypoLineGap:0,usWinAscent:Te.yMax,usWinDescent:Math.abs(Te.yMin),ulCodePageRange1:1,sxHeight:ss(f,"xyvw",{yMax:Math.round(Te.ascender/2)}).yMax,sCapHeight:ss(f,"HIKLEFJMNTZBDPRAGOQSUVWXY",Te).yMax,usDefaultChar:f.hasChar(" ")?32:0,usBreakChar:f.hasChar(" ")?32:0}),at=Ne.make(f.glyphs),xt=Q.make(f.glyphs),Et=f.getEnglishName("fontFamily"),gt=f.getEnglishName("fontSubfamily"),_t=Et+" "+gt,At=(At=f.getEnglishName("postScriptName"))||Et.replace(/\s/g,"")+"-"+gt,Ft={};for(ke in f.names)Ft[ke]=f.names[ke];Ft.uniqueID||(Ft.uniqueID={en:f.getEnglishName("manufacturer")+":"+_t}),Ft.postScriptName||(Ft.postScriptName={en:At}),Ft.preferredFamily||(Ft.preferredFamily=f.names.fontFamily),Ft.preferredSubfamily||(Ft.preferredSubfamily=f.names.fontSubfamily);var Zt=[],Kt=rr.make(Ft,Zt),Zt=0<Zt.length?Ke.make(Zt):void 0,ur=Jo.make(),_t=sn.make(f.glyphs,{version:f.getEnglishName("version"),fullName:_t,familyName:Et,weightName:gt,postScriptName:At,unitsPerEm:f.unitsPerEm,fontBBox:[0,Te.yMin,Te.ascender,Te.advanceWidthMax]}),Et=f.metas&&0<Object.keys(f.metas).length?ts.make(f.metas):void 0,gt=[Je,it,et,tt,Kt,xt,ur,_t,at];Zt&&gt.push(Zt),f.tables.gsub&&gt.push(es.make(f.tables.gsub)),Et&&gt.push(Et);for(var Qt=to((At=os(gt)).encode()),Mt=At.fields,Xt=!1,Ct=0;Ct<Mt.length;Ct+=1)if(Mt[Ct].name==="head table"){Mt[Ct].value.checkSumAdjustment=2981146554-Qt,Xt=!0;break}if(Xt)return At;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:to};function ro(f,w){for(var C=0,A=f.length-1;C<=A;){var N=C+A>>>1,z=f[N].tag;if(z===w)return N;z<w?C=1+N:A=N-1}return-C-1}function is(f,w){for(var C=0,A=f.length-1;C<=A;){var N=C+A>>>1,z=f[N];if(z===w)return N;z<w?C=1+N:A=N-1}return-C-1}function as(f,w){for(var C=0,A=f.length-1;C<=A;){var N,z=C+A>>>1,q=(N=f[z]).start;if(q===w)return N;q<w?C=1+z:A=z-1}if(0<C)return w>(N=f[C-1]).end?0:N}function In(f,w){this.font=f,this.tableName=w}function Dn(f){In.call(this,f,"gpos")}function hr(f){In.call(this,f,"gsub")}function ls(f,w,C){for(var A=f.subtables,N=0;N<A.length;N++){var z=A[N];if(z.substFormat===w)return z}if(C)return A.push(C),C}function us(f){for(var w=new ArrayBuffer(f.length),C=new Uint8Array(w),A=0;A<f.length;++A)C[A]=f[A];return w}function zr(f,w){if(!f)throw w}function cs(f,w,C,A,N){var z=0<(w&A)?(z=f.parseByte(),C+(z=w&N?z:-z)):0<(w&N)?C:C+f.parseShort();return z}function ma(f,w,C){var A,N=new Ee.Parser(w,C);if(f.numberOfContours=N.parseShort(),f._xMin=N.parseShort(),f._yMin=N.parseShort(),f._xMax=N.parseShort(),f._yMax=N.parseShort(),0<f.numberOfContours){for(var z=f.endPointIndices=[],q=0;q<f.numberOfContours;q+=1)z.push(N.parseUShort());f.instructionLength=N.parseUShort(),f.instructions=[];for(var J=0;J<f.instructionLength;J+=1)f.instructions.push(N.parseByte());for(var le=z[z.length-1]+1,ae=[],ve=0;ve<le;ve+=1)if(A=N.parseByte(),ae.push(A),0<(8&A))for(var Ce=N.parseByte(),we=0;we<Ce;we+=1)ae.push(A),ve+=1;if(I.argument(ae.length===le,"Bad flags."),0<z.length){var pe,Re=[];if(0<le){for(var Pe=0;Pe<le;Pe+=1)A=ae[Pe],(pe={}).onCurve=!!(1&A),pe.lastPointOfContour=0<=z.indexOf(Pe),Re.push(pe);for(var Ae=0,ke=0;ke<le;ke+=1)A=ae[ke],(pe=Re[ke]).x=cs(N,A,Ae,2,16),Ae=pe.x;for(var Te=0,Je=0;Je<le;Je+=1)A=ae[Je],(pe=Re[Je]).y=cs(N,A,Te,4,32),Te=pe.y}f.points=Re}else f.points=[]}else if(f.numberOfContours===0)f.points=[];else{f.isComposite=!0,f.points=[],f.components=[];for(var it=!0;it;){ae=N.parseUShort();var et={glyphIndex:N.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&ae)?0<(2&ae)?(et.dx=N.parseShort(),et.dy=N.parseShort()):et.matchedPoints=[N.parseUShort(),N.parseUShort()]:0<(2&ae)?(et.dx=N.parseChar(),et.dy=N.parseChar()):et.matchedPoints=[N.parseByte(),N.parseByte()],0<(8&ae)?et.xScale=et.yScale=N.parseF2Dot14():0<(64&ae)?(et.xScale=N.parseF2Dot14(),et.yScale=N.parseF2Dot14()):0<(128&ae)&&(et.xScale=N.parseF2Dot14(),et.scale01=N.parseF2Dot14(),et.scale10=N.parseF2Dot14(),et.yScale=N.parseF2Dot14()),f.components.push(et),it=!!(32&ae)}if(256&ae){f.instructionLength=N.parseUShort(),f.instructions=[];for(var tt=0;tt<f.instructionLength;tt+=1)f.instructions.push(N.parseByte())}}}function no(f,w){for(var C=[],A=0;A<f.length;A+=1){var N=f[A],N={x:w.xScale*N.x+w.scale01*N.y+w.dx,y:w.scale10*N.x+w.yScale*N.y+w.dy,onCurve:N.onCurve,lastPointOfContour:N.lastPointOfContour};C.push(N)}return C}function ds(f){var w=new Z;if(f)for(var C=function(Ce){for(var we=[],pe=[],Re=0;Re<Ce.length;Re+=1){var Pe=Ce[Re];pe.push(Pe),Pe.lastPointOfContour&&(we.push(pe),pe=[])}return I.argument(pe.length===0,"There are still points left in the current contour."),we}(f),A=0;A<C.length;++A){var N,z=C[A],q=z[z.length-1],J=z[0];q.onCurve?w.moveTo(q.x,q.y):J.onCurve?w.moveTo(J.x,J.y):(N={x:.5*(q.x+J.x),y:.5*(q.y+J.y)},w.moveTo(N.x,N.y));for(var le=0;le<z.length;++le){var ae,ve=q,q=J,J=z[(le+1)%z.length];q.onCurve?w.lineTo(q.x,q.y):(ae=J,ve.onCurve||(q.x,ve.x,q.y,ve.y),J.onCurve||(ae={x:.5*(q.x+J.x),y:.5*(q.y+J.y)}),w.quadraticCurveTo(q.x,q.y,ae.x,ae.y))}w.closePath()}return w}function ya(f,w){if(w.isComposite)for(var C=0;C<w.components.length;C+=1){var A=w.components[C],N=f.get(A.glyphIndex);if(N.getPath(),N.points){var z=void 0;if(A.matchedPoints===void 0)z=no(N.points,A);else{if(A.matchedPoints[0]>w.points.length-1||A.matchedPoints[1]>N.points.length-1)throw Error("Matched points out of range in "+w.name);var q=w.points[A.matchedPoints[0]],J=N.points[A.matchedPoints[1]],A={xScale:A.xScale,scale01:A.scale01,scale10:A.scale10,yScale:A.yScale,dx:0,dy:0},J=no([J],A)[0];A.dx=q.x-J.x,A.dy=q.y-J.y,z=no(N.points,A)}w.points=w.points.concat(z)}}return ds(w.points)}(Dn.prototype=In.prototype={searchTag:ro,binSearch:is,getTable:function(f){var w=this.font.tables[this.tableName];return w=!w&&f?this.font.tables[this.tableName]=this.createDefaultTable():w},getScriptNames:function(){var f=this.getTable();return f?f.scripts.map(function(w){return w.tag}):[]},getDefaultScriptName:function(){var f=this.getTable();if(f){for(var w=!1,C=0;C<f.scripts.length;C++){var A=f.scripts[C].tag;if(A==="DFLT")return A;A==="latn"&&(w=!0)}return w?"latn":void 0}},getScriptTable:function(f,w){var C,A=this.getTable(w);if(A)return C=A.scripts,0<=(A=ro(A.scripts,f=f||"DFLT"))?C[A].script:w?(C.splice(-1-A,0,w={tag:f,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),w.script):void 0},getLangSysTable:function(N,w,C){var A,N=this.getScriptTable(N,C);if(N)return w&&w!=="dflt"&&w!=="DFLT"?0<=(A=ro(N.langSysRecords,w))?N.langSysRecords[A].langSys:C?(N.langSysRecords.splice(-1-A,0,C={tag:w,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),C.langSys):void 0:N.defaultLangSys},getFeatureTable:function(f,w,C,A){if(f=this.getLangSysTable(f,w,A),f){for(var N,z=f.featureIndexes,q=this.font.tables[this.tableName].features,J=0;J<z.length;J++)if((N=q[z[J]]).tag===C)return N.feature;if(A)return w=q.length,I.assert(w===0||C>=q[w-1].tag,"Features must be added in alphabetical order."),q.push(N={tag:C,feature:{params:0,lookupListIndexes:[]}}),z.push(w),N.feature}},getLookupTables:function(z,w,C,A,N){var z=this.getFeatureTable(z,w,C,N),q=[];if(z){for(var J,le=z.lookupListIndexes,ae=this.font.tables[this.tableName].lookups,ve=0;ve<le.length;ve++)(J=ae[le[ve]]).lookupType===A&&q.push(J);if(q.length===0&&N)return w=ae.length,ae.push(J={lookupType:A,lookupFlag:0,subtables:[],markFilteringSet:void 0}),le.push(w),[J]}return q},getGlyphClass:function(f,w){switch(f.format){case 1:return f.startGlyph<=w&&w<f.startGlyph+f.classes.length?f.classes[w-f.startGlyph]:0;case 2:var C=as(f.ranges,w);return C?C.classId:0}},getCoverageIndex:function(f,w){switch(f.format){case 1:var C=is(f.glyphs,w);return 0<=C?C:-1;case 2:return C=as(f.ranges,w),C?C.index+w-C.start:-1}},expandCoverage:function(f){if(f.format===1)return f.glyphs;for(var w=[],C=f.ranges,A=0;A<C.length;A++)for(var N=C[A],z=N.start,q=N.end,J=z;J<=q;J++)w.push(J);return w}}).init=function(){var f=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(f)},Dn.prototype.getKerningValue=function(f,w,C){for(var A=0;A<f.length;A++)for(var N=f[A].subtables,z=0;z<N.length;z++){var q=N[z],J=this.getCoverageIndex(q.coverage,w);if(!(J<0))switch(q.posFormat){case 1:for(var le=q.pairSets[J],ae=0;ae<le.length;ae++){var ve=le[ae];if(ve.secondGlyph===C)return ve.value1&&ve.value1.xAdvance||0}break;case 2:var we=this.getGlyphClass(q.classDef1,w),Ce=this.getGlyphClass(q.classDef2,C),we=q.classRecords[we][Ce];return we.value1&&we.value1.xAdvance||0}}return 0},Dn.prototype.getKerningTables=function(f,w){if(this.font.tables.gpos)return this.getLookupTables(f,w,"kern",2)},(hr.prototype=In.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},hr.prototype.getSingle=function(f,w,C){for(var A=[],N=this.getLookupTables(w,C,f,1),z=0;z<N.length;z++)for(var q=N[z].subtables,J=0;J<q.length;J++){var le=q[J],ae=this.expandCoverage(le.coverage),ve=void 0;if(le.substFormat===1)for(var Ce=le.deltaGlyphId,ve=0;ve<ae.length;ve++){var we=ae[ve];A.push({sub:we,by:we+Ce})}else{var pe=le.substitute;for(ve=0;ve<ae.length;ve++)A.push({sub:ae[ve],by:pe[ve]})}}return A},hr.prototype.getAlternates=function(f,w,C){for(var A=[],N=this.getLookupTables(w,C,f,3),z=0;z<N.length;z++)for(var q=N[z].subtables,J=0;J<q.length;J++)for(var le=q[J],ae=this.expandCoverage(le.coverage),ve=le.alternateSets,Ce=0;Ce<ae.length;Ce++)A.push({sub:ae[Ce],by:ve[Ce]});return A},hr.prototype.getLigatures=function(f,w,C){for(var A=[],N=this.getLookupTables(w,C,f,4),z=0;z<N.length;z++)for(var q=N[z].subtables,J=0;J<q.length;J++)for(var le=q[J],ae=this.expandCoverage(le.coverage),ve=le.ligatureSets,Ce=0;Ce<ae.length;Ce++)for(var we=ae[Ce],pe=ve[Ce],Re=0;Re<pe.length;Re++){var Pe=pe[Re];A.push({sub:[we].concat(Pe.components),by:Pe.ligGlyph})}return A},hr.prototype.addSingle=function(f,w,C,A){C=ls(this.getLookupTables(C,A,f,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),I.assert(C.coverage.format===1,"Ligature: unable to modify coverage table format "+C.coverage.format),A=w.sub,f=this.binSearch(C.coverage.glyphs,A),f<0&&(C.coverage.glyphs.splice(f=-1-f,0,A),C.substitute.splice(f,0,0)),C.substitute[f]=w.by},hr.prototype.addAlternate=function(f,w,C,A){C=ls(this.getLookupTables(C,A,f,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),I.assert(C.coverage.format===1,"Ligature: unable to modify coverage table format "+C.coverage.format),A=w.sub,f=this.binSearch(C.coverage.glyphs,A),f<0&&(C.coverage.glyphs.splice(f=-1-f,0,A),C.alternateSets.splice(f,0,0)),C.alternateSets[f]=w.by},hr.prototype.addLigature=function(z,le,J,N){var J=this.getLookupTables(J,N,z,4,!0)[0],N=J.subtables[0],z=(N||(J.subtables[0]=N={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),I.assert(N.coverage.format===1,"Ligature: unable to modify coverage table format "+N.coverage.format),le.sub[0]),q=le.sub.slice(1),J={ligGlyph:le.by,components:q},le=this.binSearch(N.coverage.glyphs,z);if(0<=le){for(var ae=N.ligatureSets[le],ve=0;ve<ae.length;ve++)if(function(Ce,we){var pe=Ce.length;if(pe===we.length){for(var Re=0;Re<pe;Re++)if(Ce[Re]!==we[Re])return;return 1}}(ae[ve].components,q))return;ae.push(J)}else N.coverage.glyphs.splice(le=-1-le,0,z),N.ligatureSets.splice(le,0,[J])},hr.prototype.getFeature=function(f,w,C){if(/ss\d\d/.test(f))return this.getSingle(f,w,C);switch(f){case"aalt":case"salt":return this.getSingle(f,w,C).concat(this.getAlternates(f,w,C));case"dlig":case"liga":case"rlig":return this.getLigatures(f,w,C)}},hr.prototype.add=function(f,w,C,A){if(/ss\d\d/.test(f))return this.addSingle(f,w,C,A);switch(f){case"aalt":case"salt":return typeof w.by=="number"?this.addSingle(f,w,C,A):this.addAlternate(f,w,C,A);case"dlig":case"liga":case"rlig":return this.addLigature(f,w,C,A)}};var hs={getPath:ds,parse:function(f,w,C,A){for(var N=new Qe.GlyphSet(A),z=0;z<C.length-1;z+=1){var q=C[z];q!==C[z+1]?N.push(z,Qe.ttfGlyphLoader(A,z,ma,f,w+q,ya)):N.push(z,Qe.glyphLoader(A,z))}return N}};function ps(f){this.font=f,this.getCommands=function(w){return hs.getPath(w).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function ga(f){return f}function fs(f){return Math.sign(f)*Math.round(Math.abs(f))}function va(f){return Math.sign(f)*Math.round(Math.abs(2*f))/2}function ba(f){return Math.sign(f)*(Math.round(Math.abs(f)+.5)-.5)}function _a(f){return Math.sign(f)*Math.ceil(Math.abs(f))}function wa(f){return Math.sign(f)*Math.floor(Math.abs(f))}function ms(f){var w=this.srPeriod,C=this.srPhase,A=1;return f<0&&(f=-f,A=-1),f+=this.srThreshold-C,f=Math.trunc(f/w)*w,(f+=C)<0?C*A:f*A}var pr={x:1,y:0,axis:"x",distance:function(f,w,C,A){return(C?f.xo:f.x)-(A?w.xo:w.x)},interpolate:function(f,w,C,A){var N,z,q,J,le,ae,ve;if(!A||A===this)return N=f.xo-w.xo,z=f.xo-C.xo,le=w.x-w.xo,ae=C.x-C.xo,(ve=(q=Math.abs(N))+(J=Math.abs(z)))===0?void(f.x=f.xo+(le+ae)/2):void(f.x=f.xo+(le*J+ae*q)/ve);N=A.distance(f,w,!0,!0),z=A.distance(f,C,!0,!0),le=A.distance(w,w,!1,!0),ae=A.distance(C,C,!1,!0),(ve=(q=Math.abs(N))+(J=Math.abs(z)))===0?pr.setRelative(f,f,(le+ae)/2,A,!0):pr.setRelative(f,f,(le*J+ae*q)/ve,A,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(f,w,C,A,N){var z,q;A&&A!==this?(z=N?w.xo:w.x,q=N?w.yo:w.y,z+=C*A.x,q+=C*A.y,f.x=z+(f.y-q)/A.normalSlope):f.x=(N?w.xo:w.x)+C},slope:0,touch:function(f){f.xTouched=!0},touched:function(f){return f.xTouched},untouch:function(f){f.xTouched=!1}},vr={x:0,y:1,axis:"y",distance:function(f,w,C,A){return(C?f.yo:f.y)-(A?w.yo:w.y)},interpolate:function(f,w,C,A){var N,z,q,J,le,ae,ve;if(!A||A===this)return N=f.yo-w.yo,z=f.yo-C.yo,le=w.y-w.yo,ae=C.y-C.yo,(ve=(q=Math.abs(N))+(J=Math.abs(z)))===0?void(f.y=f.yo+(le+ae)/2):void(f.y=f.yo+(le*J+ae*q)/ve);N=A.distance(f,w,!0,!0),z=A.distance(f,C,!0,!0),le=A.distance(w,w,!1,!0),ae=A.distance(C,C,!1,!0),(ve=(q=Math.abs(N))+(J=Math.abs(z)))===0?vr.setRelative(f,f,(le+ae)/2,A,!0):vr.setRelative(f,f,(le*J+ae*q)/ve,A,!0)},normalSlope:0,setRelative:function(f,w,C,A,N){var z,q;A&&A!==this?(z=N?w.xo:w.x,q=N?w.yo:w.y,z+=C*A.x,q+=C*A.y,f.y=q+A.normalSlope*(f.x-z)):f.y=(N?w.yo:w.y)+C},slope:Number.POSITIVE_INFINITY,touch:function(f){f.yTouched=!0},touched:function(f){return f.yTouched},untouch:function(f){f.yTouched=!1}};function ln(f,w){this.x=f,this.y=w,this.axis=void 0,this.slope=w/f,this.normalSlope=-f/w,Object.freeze(this)}function un(f,w){var C=Math.sqrt(f*f+w*w);return w/=C,(f/=C)===1&&w===0?pr:f===0&&w===1?vr:new ln(f,w)}function br(f,w,C,A){this.x=this.xo=Math.round(64*f)/64,this.y=this.yo=Math.round(64*w)/64,this.lastPointOfContour=C,this.onCurve=A,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(pr),Object.freeze(vr),ln.prototype.distance=function(f,w,C,A){return this.x*pr.distance(f,w,C,A)+this.y*vr.distance(f,w,C,A)},ln.prototype.interpolate=function(f,N,z,A){var q=A.distance(f,N,!0,!0),J=A.distance(f,z,!0,!0),N=A.distance(N,N,!1,!0),z=A.distance(z,z,!1,!0),q=Math.abs(q),J=Math.abs(J),le=q+J;le===0?this.setRelative(f,f,(N+z)/2,A,!0):this.setRelative(f,f,(N*J+z*q)/le,A,!0)},ln.prototype.setRelative=function(f,z,le,ae,J){var q=J?z.xo:z.x,J=J?z.yo:z.y,z=q+le*(ae=ae||this).x,q=J+le*ae.y,J=ae.normalSlope,le=this.slope,ae=f.x,ve=f.y;f.x=(le*ae-J*z+q-ve)/(le-J),f.y=le*(f.x-ae)+ve},ln.prototype.touch=function(f){f.xTouched=!0,f.yTouched=!0},br.prototype.nextTouched=function(f){for(var w=this.nextPointOnContour;!f.touched(w)&&w!==this;)w=w.nextPointOnContour;return w},br.prototype.prevTouched=function(f){for(var w=this.prevPointOnContour;!f.touched(w)&&w!==this;)w=w.prevPointOnContour;return w};var cn=Object.freeze(new br(0,0)),xa={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Cr(f,w){switch(this.env=f,this.stack=[],this.prog=w,f){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=pr,this.round=fs}}function Fn(f){for(var w=f.tZone=new Array(f.gZone.length),C=0;C<w.length;C++)w[C]=new br(0,0)}function ys(f,w){var C,A=f.prog,N=f.ip,z=1;do if((C=A[++N])===88)z++;else if(C===89)z--;else if(C===64)N+=A[N+1]+1;else if(C===65)N+=2*A[N+1]+1;else if(176<=C&&C<=183)N+=C-176+1;else if(184<=C&&C<=191)N+=2*(C-184+1);else if(w&&z===1&&C===27)break;while(0<z);f.ip=N}function gs(f,w){d.DEBUG&&console.log(w.step,"SVTCA["+f.axis+"]"),w.fv=w.pv=w.dpv=f}function vs(f,w){d.DEBUG&&console.log(w.step,"SPVTCA["+f.axis+"]"),w.pv=w.dpv=f}function bs(f,w){d.DEBUG&&console.log(w.step,"SFVTCA["+f.axis+"]"),w.fv=f}function _s(f,w){var C,N=w.stack,A=N.pop(),N=N.pop(),z=w.z2[A],q=w.z1[N];d.DEBUG&&console.log("SPVTL["+f+"]",A,N),A=f?(C=z.y-q.y,q.x-z.x):(C=q.x-z.x,q.y-z.y),w.pv=w.dpv=un(C,A)}function ws(f,w){var C,N=w.stack,A=N.pop(),N=N.pop(),z=w.z2[A],q=w.z1[N];d.DEBUG&&console.log("SFVTL["+f+"]",A,N),A=f?(C=z.y-q.y,q.x-z.x):(C=q.x-z.x,q.y-z.y),w.fv=un(C,A)}function oo(f){d.DEBUG&&console.log(f.step,"POP[]"),f.stack.pop()}function xs(f,w){var C=w.stack.pop(),A=w.z0[C],N=w.fv,z=w.pv,q=(d.DEBUG&&console.log(w.step,"MDAP["+f+"]",C),z.distance(A,cn));f&&(q=w.round(q)),N.setRelative(A,cn,q,z),N.touch(A),w.rp0=w.rp1=C}function js(f,w){var C,A,N,z=w.z2,q=z.length-2;d.DEBUG&&console.log(w.step,"IUP["+f.axis+"]");for(var J=0;J<q;J++)C=z[J],f.touched(C)||(A=C.prevTouched(f))!==C&&(A===(N=C.nextTouched(f))&&f.setRelative(C,C,f.distance(A,A,!1,!0),f,!0),f.interpolate(C,A,N,f))}function Ss(f,w){for(var C=w.stack,A=f?w.rp1:w.rp2,N=(f?w.z0:w.z1)[A],z=w.fv,q=w.pv,J=w.loop,le=w.z2;J--;){var ae=C.pop(),ve=le[ae],Ce=q.distance(N,N,!1,!0);z.setRelative(ve,ve,Ce,q),z.touch(ve),d.DEBUG&&console.log(w.step,(1<w.loop?"loop "+(w.loop-J)+": ":"")+"SHP["+(f?"rp1":"rp2")+"]",ae)}w.loop=1}function Es(f,w){for(var C=w.stack,q=f?w.rp1:w.rp2,A=(f?w.z0:w.z1)[q],N=w.fv,z=w.pv,q=C.pop(),J=w.z2[w.contours[q]],le=J,ae=(d.DEBUG&&console.log(w.step,"SHC["+f+"]",q),z.distance(A,A,!1,!0));le!==A&&N.setRelative(le,le,ae,z),(le=le.nextPointOnContour)!==J;);}function Cs(f,w){var C,A,J=w.stack,N=f?w.rp1:w.rp2,N=(f?w.z0:w.z1)[N],z=w.fv,q=w.pv,J=J.pop();switch(d.DEBUG&&console.log(w.step,"SHZ["+f+"]",J),J){case 0:C=w.tZone;break;case 1:C=w.gZone;break;default:throw new Error("Invalid zone")}for(var le=q.distance(N,N,!1,!0),ae=C.length-2,ve=0;ve<ae;ve++)A=C[ve],z.setRelative(A,A,le,q)}function ks(f,w){var A=w.stack,C=A.pop()/64,A=A.pop(),N=w.z1[A],z=w.z0[w.rp0],q=w.fv,J=w.pv;q.setRelative(N,z,C,J),q.touch(N),d.DEBUG&&console.log(w.step,"MSIRP["+f+"]",C,A),w.rp1=w.rp0,w.rp2=A,f&&(w.rp0=A)}function Ts(f,w){var C=w.stack,J=C.pop(),C=C.pop(),A=w.z0[C],N=w.fv,z=w.pv,q=w.cvt[J],J=(d.DEBUG&&console.log(w.step,"MIAP["+f+"]",J,"(",q,")",C),z.distance(A,cn));f&&(Math.abs(J-q)<w.cvCutIn&&(J=q),J=w.round(J)),N.setRelative(A,cn,J,z),w.zp0===0&&(A.xo=A.x,A.yo=A.y),N.touch(A),w.rp0=w.rp1=C}function Ms(f,w){var C=w.stack,A=C.pop(),N=w.z2[A];d.DEBUG&&console.log(w.step,"GC["+f+"]",A),C.push(64*w.dpv.distance(N,cn,f,!1))}function Ps(f,w){var A=w.stack,C=A.pop(),A=A.pop(),N=w.z1[C],z=w.z0[A],z=w.dpv.distance(z,N,f,f);d.DEBUG&&console.log(w.step,"MD["+f+"]",C,A,"->",z),w.stack.push(Math.round(64*z))}function so(f,w){var C=w.stack,A=C.pop(),N=w.fv,z=w.pv,q=w.ppem,J=w.deltaBase+16*(f-1),le=w.deltaShift,ae=w.z0;d.DEBUG&&console.log(w.step,"DELTAP["+f+"]",A,C);for(var ve=0;ve<A;ve++){var Ce=C.pop(),we=C.pop();J+((240&we)>>4)===q&&(0<=(we=(15&we)-8)&&we++,d.DEBUG&&console.log(w.step,"DELTAPFIX",Ce,"by",we*le),Ce=ae[Ce],N.setRelative(Ce,Ce,we*le,z))}}function Un(f,w){var C=w.stack,A=C.pop();d.DEBUG&&console.log(w.step,"ROUND[]"),C.push(64*w.round(A/64))}function io(f,w){var C=w.stack,A=C.pop(),N=w.ppem,z=w.deltaBase+16*(f-1),q=w.deltaShift;d.DEBUG&&console.log(w.step,"DELTAC["+f+"]",A,C);for(var J=0;J<A;J++){var le=C.pop(),ae=C.pop();z+((240&ae)>>4)===N&&(0<=(ae=(15&ae)-8)&&ae++,ae=ae*q,d.DEBUG&&console.log(w.step,"DELTACFIX",le,"by",ae),w.cvt[le]+=ae)}}function Os(f,w){var C,N=w.stack,A=N.pop(),N=N.pop(),z=w.z2[A],q=w.z1[N];d.DEBUG&&console.log(w.step,"SDPVTL["+f+"]",A,N),A=f?(C=z.y-q.y,q.x-z.x):(C=q.x-z.x,q.y-z.y),w.dpv=un(C,A)}function kr(f,w){var C=w.stack,A=w.prog,N=w.ip;d.DEBUG&&console.log(w.step,"PUSHB["+f+"]");for(var z=0;z<f;z++)C.push(A[++N]);w.ip=N}function Tr(f,w){var C=w.ip,A=w.prog,N=w.stack;d.DEBUG&&console.log(w.ip,"PUSHW["+f+"]");for(var z=0;z<f;z++){var q=A[++C]<<8|A[++C];32768&q&&(q=-(1+(65535^q))),N.push(q)}w.ip=C}function $e(f,w,C,A,N,z){var q,J,ae=z.stack,le=f&&ae.pop(),ae=ae.pop(),ve=z.rp0,ve=z.z0[ve],Ce=z.z1[ae],we=z.minDis,pe=z.fv,Re=z.dpv,Pe=q=Re.distance(Ce,ve,!0,!0),Ae=0<=Pe?1:-1;Pe=Math.abs(Pe),f&&(J=z.cvt[le],A&&Math.abs(Pe-J)<z.cvCutIn&&(Pe=J)),C&&Pe<we&&(Pe=we),A&&(Pe=z.round(Pe)),pe.setRelative(Ce,ve,Ae*Pe,Re),pe.touch(Ce),d.DEBUG&&console.log(z.step,(f?"MIRP[":"MDRP[")+(w?"M":"m")+(C?">":"_")+(A?"R":"_")+(N===0?"Gr":N===1?"Bl":N===2?"Wh":"")+"]",f?le+"("+z.cvt[le]+","+J+")":"",ae,"(d =",q,"->",Ae*Pe,")"),z.rp1=z.rp0,z.rp2=ae,w&&(z.rp0=ae)}ps.prototype.exec=function(f,w){if(typeof w!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var C=this.font,A=this._prepState;if(!A||A.ppem!==w){var N=this._fpgmState;if(!N){Cr.prototype=xa,(N=this._fpgmState=new Cr("fpgm",C.tables.fpgm)).funcs=[],N.font=C,d.DEBUG&&(console.log("---EXEC FPGM---"),N.step=-1);try{Hr(N)}catch(ae){return console.log("Hinting error in FPGM:"+ae),void(this._errorState=3)}}Cr.prototype=N,(A=this._prepState=new Cr("prep",C.tables.prep)).ppem=w;var z=C.tables.cvt;if(z)for(var q=A.cvt=new Array(z.length),J=w/C.unitsPerEm,le=0;le<z.length;le++)q[le]=z[le]*J;else A.cvt=[];d.DEBUG&&(console.log("---EXEC PREP---"),A.step=-1);try{Hr(A)}catch(ae){this._errorState<2&&console.log("Hinting error in PREP:"+ae),this._errorState=2}}if(!(1<this._errorState))try{return ja(f,A)}catch(ae){this._errorState<1&&(console.log("Hinting error:"+ae),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var ja=function(f,w){var C=w.ppem/w.font.unitsPerEm,A=C,N=f.components;if(Cr.prototype=w,N){for(var z=w.font,q=[],J=[],le=0;le<N.length;le++){var ae=N[le],ve=z.glyphs.get(ae.glyphIndex),Ce=new Cr("glyf",ve.instructions);d.DEBUG&&(console.log("---EXEC COMP "+le+"---"),Ce.step=-1),As(ve,Ce,C,A);for(var we=Math.round(ae.dx*C),pe=Math.round(ae.dy*A),Re=Ce.gZone,Pe=Ce.contours,Ae=0;Ae<Re.length;Ae++){var ke=Re[Ae];ke.xTouched=ke.yTouched=!1,ke.xo=ke.x=ke.x+we,ke.yo=ke.y=ke.y+pe}var Te=q.length;q.push.apply(q,Re);for(var Je=0;Je<Pe.length;Je++)J.push(Pe[Je]+Te)}f.instructions&&!Ce.inhibitGridFit&&((Ce=new Cr("glyf",f.instructions)).gZone=Ce.z0=Ce.z1=Ce.z2=q,Ce.contours=J,q.push(new br(0,0),new br(Math.round(f.advanceWidth*C),0)),d.DEBUG&&(console.log("---EXEC COMPOSITE---"),Ce.step=-1),Hr(Ce),q.length-=2)}else Ce=new Cr("glyf",f.instructions),d.DEBUG&&(console.log("---EXEC GLYPH---"),Ce.step=-1),As(f,Ce,C,A),q=Ce.gZone;return q},As=function(f,w,C,A){for(var N,z,q,J=f.points||[],le=J.length,ae=w.gZone=w.z0=w.z1=w.z2=[],ve=w.contours=[],Ce=0;Ce<le;Ce++)N=J[Ce],ae[Ce]=new br(N.x*C,N.y*A,N.lastPointOfContour,N.onCurve);for(var we=0;we<le;we++)N=ae[we],z||(z=N,ve.push(we)),N.lastPointOfContour?((N.nextPointOnContour=z).prevPointOnContour=N,z=void 0):(q=ae[we+1],(N.nextPointOnContour=q).prevPointOnContour=N);if(!w.inhibitGridFit){if(d.DEBUG){console.log("PROCESSING GLYPH",w.stack);for(var pe=0;pe<le;pe++)console.log(pe,ae[pe].x,ae[pe].y)}if(ae.push(new br(0,0),new br(Math.round(f.advanceWidth*C),0)),Hr(w),ae.length-=2,d.DEBUG){console.log("FINISHED GLYPH",w.stack);for(var Re=0;Re<le;Re++)console.log(Re,ae[Re].x,ae[Re].y)}}},Hr=function(f){var w=f.prog;if(w){var C,A=w.length;for(f.ip=0;f.ip<A;f.ip++){if(d.DEBUG&&f.step++,!(C=Sa[w[f.ip]]))throw new Error("unknown instruction: 0x"+Number(w[f.ip]).toString(16));C(f)}}},Sa=[gs.bind(void 0,vr),gs.bind(void 0,pr),vs.bind(void 0,vr),vs.bind(void 0,pr),bs.bind(void 0,vr),bs.bind(void 0,pr),_s.bind(void 0,0),_s.bind(void 0,1),ws.bind(void 0,0),ws.bind(void 0,1),function(f){var w=(C=f.stack).pop(),C=C.pop();d.DEBUG&&console.log(f.step,"SPVFS[]",w,C),f.pv=f.dpv=un(C,w)},function(f){var w=(C=f.stack).pop(),C=C.pop();d.DEBUG&&console.log(f.step,"SPVFS[]",w,C),f.fv=un(C,w)},function(f){var w=f.stack,C=f.pv;d.DEBUG&&console.log(f.step,"GPV[]"),w.push(16384*C.x),w.push(16384*C.y)},function(f){var w=f.stack,C=f.fv;d.DEBUG&&console.log(f.step,"GFV[]"),w.push(16384*C.x),w.push(16384*C.y)},function(f){f.fv=f.pv,d.DEBUG&&console.log(f.step,"SFVTPV[]")},function(w){var C=(q=w.stack).pop(),A=q.pop(),N=q.pop(),z=q.pop(),q=q.pop(),le=w.z0,ve=w.z1,J=le[C],le=le[A],ae=ve[N],ve=ve[z],w=w.z2[q],C=(d.DEBUG&&console.log("ISECT[], ",C,A,N,z,q),J.x),A=J.y,N=le.x,z=le.y,q=ae.x,J=ae.y,le=ve.x,ae=ve.y,ve=(C-N)*(J-ae)-(A-z)*(q-le),Ce=C*z-A*N,we=q*ae-J*le;w.x=(Ce*(q-le)-we*(C-N))/ve,w.y=(Ce*(J-ae)-we*(A-z))/ve},function(f){f.rp0=f.stack.pop(),d.DEBUG&&console.log(f.step,"SRP0[]",f.rp0)},function(f){f.rp1=f.stack.pop(),d.DEBUG&&console.log(f.step,"SRP1[]",f.rp1)},function(f){f.rp2=f.stack.pop(),d.DEBUG&&console.log(f.step,"SRP2[]",f.rp2)},function(f){var w=f.stack.pop();switch(d.DEBUG&&console.log(f.step,"SZP0[]",w),f.zp0=w){case 0:f.tZone||Fn(f),f.z0=f.tZone;break;case 1:f.z0=f.gZone;break;default:throw new Error("Invalid zone pointer")}},function(f){var w=f.stack.pop();switch(d.DEBUG&&console.log(f.step,"SZP1[]",w),f.zp1=w){case 0:f.tZone||Fn(f),f.z1=f.tZone;break;case 1:f.z1=f.gZone;break;default:throw new Error("Invalid zone pointer")}},function(f){var w=f.stack.pop();switch(d.DEBUG&&console.log(f.step,"SZP2[]",w),f.zp2=w){case 0:f.tZone||Fn(f),f.z2=f.tZone;break;case 1:f.z2=f.gZone;break;default:throw new Error("Invalid zone pointer")}},function(f){var w=f.stack.pop();switch(d.DEBUG&&console.log(f.step,"SZPS[]",w),f.zp0=f.zp1=f.zp2=w){case 0:f.tZone||Fn(f),f.z0=f.z1=f.z2=f.tZone;break;case 1:f.z0=f.z1=f.z2=f.gZone;break;default:throw new Error("Invalid zone pointer")}},function(f){f.loop=f.stack.pop(),d.DEBUG&&console.log(f.step,"SLOOP[]",f.loop)},function(f){d.DEBUG&&console.log(f.step,"RTG[]"),f.round=fs},function(f){d.DEBUG&&console.log(f.step,"RTHG[]"),f.round=ba},function(f){var w=f.stack.pop();d.DEBUG&&console.log(f.step,"SMD[]",w),f.minDis=w/64},function(f){d.DEBUG&&console.log(f.step,"ELSE[]"),ys(f,!1)},function(f){var w=f.stack.pop();d.DEBUG&&console.log(f.step,"JMPR[]",w),f.ip+=w-1},function(f){var w=f.stack.pop();d.DEBUG&&console.log(f.step,"SCVTCI[]",w),f.cvCutIn=w/64},void 0,void 0,function(f){var w=f.stack;d.DEBUG&&console.log(f.step,"DUP[]"),w.push(w[w.length-1])},oo,function(f){d.DEBUG&&console.log(f.step,"CLEAR[]"),f.stack.length=0},function(f){var w=f.stack,C=w.pop(),A=w.pop();d.DEBUG&&console.log(f.step,"SWAP[]"),w.push(C),w.push(A)},function(f){var w=f.stack;d.DEBUG&&console.log(f.step,"DEPTH[]"),w.push(w.length)},function(f){var w=f.stack,C=w.pop();d.DEBUG&&console.log(f.step,"CINDEX[]",C),w.push(w[w.length-C])},function(f){var w=f.stack,C=w.pop();d.DEBUG&&console.log(f.step,"MINDEX[]",C),w.push(w.splice(w.length-C,1)[0])},void 0,void 0,void 0,function(f){var w=(A=f.stack).pop(),C=A.pop(),A=(d.DEBUG&&console.log(f.step,"LOOPCALL[]",w,C),f.ip),N=f.prog;f.prog=f.funcs[w];for(var z=0;z<C;z++)Hr(f),d.DEBUG&&console.log(++f.step,z+1<C?"next loopcall":"done loopcall",z);f.ip=A,f.prog=N},function(f){var w=f.stack.pop(),C=(d.DEBUG&&console.log(f.step,"CALL[]",w),f.ip),A=f.prog;f.prog=f.funcs[w],Hr(f),f.ip=C,f.prog=A,d.DEBUG&&console.log(++f.step,"returning from",w)},function(f){if(f.env!=="fpgm")throw new Error("FDEF not allowed here");var A=f.stack,w=f.prog,C=f.ip,A=A.pop(),N=C;for(d.DEBUG&&console.log(f.step,"FDEF[]",A);w[++C]!==45;);f.ip=C,f.funcs[A]=w.slice(N+1,C)},void 0,xs.bind(void 0,0),xs.bind(void 0,1),js.bind(void 0,vr),js.bind(void 0,pr),Ss.bind(void 0,0),Ss.bind(void 0,1),Es.bind(void 0,0),Es.bind(void 0,1),Cs.bind(void 0,0),Cs.bind(void 0,1),function(f){for(var w=f.stack,C=f.loop,A=f.fv,N=w.pop()/64,z=f.z2;C--;){var q=w.pop(),J=z[q];d.DEBUG&&console.log(f.step,(1<f.loop?"loop "+(f.loop-C)+": ":"")+"SHPIX[]",q,N),A.setRelative(J,J,N),A.touch(J)}f.loop=1},function(f){for(var w=f.stack,C=f.rp1,A=f.rp2,N=f.loop,z=f.z0[C],q=f.z1[A],J=f.fv,le=f.dpv,ae=f.z2;N--;){var ve=w.pop(),Ce=ae[ve];d.DEBUG&&console.log(f.step,(1<f.loop?"loop "+(f.loop-N)+": ":"")+"IP[]",ve,C,"<->",A),J.interpolate(Ce,z,q,le),J.touch(Ce)}f.loop=1},ks.bind(void 0,0),ks.bind(void 0,1),function(f){for(var w=f.stack,C=f.rp0,A=f.z0[C],N=f.loop,z=f.fv,q=f.pv,J=f.z1;N--;){var le=w.pop(),ae=J[le];d.DEBUG&&console.log(f.step,(1<f.loop?"loop "+(f.loop-N)+": ":"")+"ALIGNRP[]",le),z.setRelative(ae,A,0,q),z.touch(ae)}f.loop=1},function(f){d.DEBUG&&console.log(f.step,"RTDG[]"),f.round=va},Ts.bind(void 0,0),Ts.bind(void 0,1),function(f){var w=f.prog,C=f.ip,A=f.stack,N=w[++C];d.DEBUG&&console.log(f.step,"NPUSHB[]",N);for(var z=0;z<N;z++)A.push(w[++C]);f.ip=C},function(f){var w=f.ip,C=f.prog,A=f.stack,N=C[++w];d.DEBUG&&console.log(f.step,"NPUSHW[]",N);for(var z=0;z<N;z++){var q=C[++w]<<8|C[++w];32768&q&&(q=-(1+(65535^q))),A.push(q)}f.ip=w},function(f){var A=f.stack,w=(w=f.store)||(f.store=[]),C=A.pop(),A=A.pop();d.DEBUG&&console.log(f.step,"WS",C,A),w[A]=C},function(N){var w=N.stack,C=N.store,A=w.pop(),N=(d.DEBUG&&console.log(N.step,"RS",A),C&&C[A]||0);w.push(N)},function(f){var w=(C=f.stack).pop(),C=C.pop();d.DEBUG&&console.log(f.step,"WCVTP",w,C),f.cvt[C]=w/64},function(f){var w=f.stack,C=w.pop();d.DEBUG&&console.log(f.step,"RCVT",C),w.push(64*f.cvt[C])},Ms.bind(void 0,0),Ms.bind(void 0,1),void 0,Ps.bind(void 0,0),Ps.bind(void 0,1),function(f){d.DEBUG&&console.log(f.step,"MPPEM[]"),f.stack.push(f.ppem)},void 0,function(f){d.DEBUG&&console.log(f.step,"FLIPON[]"),f.autoFlip=!0},void 0,void 0,function(f){var w=f.stack,C=w.pop(),A=w.pop();d.DEBUG&&console.log(f.step,"LT[]",C,A),w.push(A<C?1:0)},function(f){var w=f.stack,C=w.pop(),A=w.pop();d.DEBUG&&console.log(f.step,"LTEQ[]",C,A),w.push(A<=C?1:0)},function(f){var w=f.stack,C=w.pop(),A=w.pop();d.DEBUG&&console.log(f.step,"GT[]",C,A),w.push(C<A?1:0)},function(f){var w=f.stack,C=w.pop(),A=w.pop();d.DEBUG&&console.log(f.step,"GTEQ[]",C,A),w.push(C<=A?1:0)},function(f){var w=f.stack,C=w.pop(),A=w.pop();d.DEBUG&&console.log(f.step,"EQ[]",C,A),w.push(C===A?1:0)},function(f){var w=f.stack,C=w.pop(),A=w.pop();d.DEBUG&&console.log(f.step,"NEQ[]",C,A),w.push(C!==A?1:0)},function(f){var w=f.stack,C=w.pop();d.DEBUG&&console.log(f.step,"ODD[]",C),w.push(Math.trunc(C)%2?1:0)},function(f){var w=f.stack,C=w.pop();d.DEBUG&&console.log(f.step,"EVEN[]",C),w.push(Math.trunc(C)%2?0:1)},function(f){var w=f.stack.pop();d.DEBUG&&console.log(f.step,"IF[]",w),w||(ys(f,!0),d.DEBUG&&console.log(f.step,"EIF[]"))},function(f){d.DEBUG&&console.log(f.step,"EIF[]")},function(f){var w=f.stack,C=w.pop(),A=w.pop();d.DEBUG&&console.log(f.step,"AND[]",C,A),w.push(C&&A?1:0)},function(f){var w=f.stack,C=w.pop(),A=w.pop();d.DEBUG&&console.log(f.step,"OR[]",C,A),w.push(C||A?1:0)},function(f){var w=f.stack,C=w.pop();d.DEBUG&&console.log(f.step,"NOT[]",C),w.push(C?0:1)},so.bind(void 0,1),function(f){var w=f.stack.pop();d.DEBUG&&console.log(f.step,"SDB[]",w),f.deltaBase=w},function(f){var w=f.stack.pop();d.DEBUG&&console.log(f.step,"SDS[]",w),f.deltaShift=Math.pow(.5,w)},function(f){var w=f.stack,C=w.pop(),A=w.pop();d.DEBUG&&console.log(f.step,"ADD[]",C,A),w.push(A+C)},function(f){var w=f.stack,C=w.pop(),A=w.pop();d.DEBUG&&console.log(f.step,"SUB[]",C,A),w.push(A-C)},function(f){var w=f.stack,C=w.pop(),A=w.pop();d.DEBUG&&console.log(f.step,"DIV[]",C,A),w.push(64*A/C)},function(f){var w=f.stack,C=w.pop(),A=w.pop();d.DEBUG&&console.log(f.step,"MUL[]",C,A),w.push(A*C/64)},function(f){var w=f.stack,C=w.pop();d.DEBUG&&console.log(f.step,"ABS[]",C),w.push(Math.abs(C))},function(f){var w=f.stack,C=w.pop();d.DEBUG&&console.log(f.step,"NEG[]",C),w.push(-C)},function(f){var w=f.stack,C=w.pop();d.DEBUG&&console.log(f.step,"FLOOR[]",C),w.push(64*Math.floor(C/64))},function(f){var w=f.stack,C=w.pop();d.DEBUG&&console.log(f.step,"CEILING[]",C),w.push(64*Math.ceil(C/64))},Un.bind(void 0,0),Un.bind(void 0,1),Un.bind(void 0,2),Un.bind(void 0,3),void 0,void 0,void 0,void 0,function(f){var w=(C=f.stack).pop(),C=C.pop();d.DEBUG&&console.log(f.step,"WCVTF[]",w,C),f.cvt[C]=w*f.ppem/f.font.unitsPerEm},so.bind(void 0,2),so.bind(void 0,3),io.bind(void 0,1),io.bind(void 0,2),io.bind(void 0,3),function(f){var w,C=f.stack.pop();switch(d.DEBUG&&console.log(f.step,"SROUND[]",C),f.round=ms,192&C){case 0:w=.5;break;case 64:w=1;break;case 128:w=2;break;default:throw new Error("invalid SROUND value")}switch(f.srPeriod=w,48&C){case 0:f.srPhase=0;break;case 16:f.srPhase=.25*w;break;case 32:f.srPhase=.5*w;break;case 48:f.srPhase=.75*w;break;default:throw new Error("invalid SROUND value")}f.srThreshold=(C&=15)===0?0:(C/8-.5)*w},function(f){var w,C=f.stack.pop();switch(d.DEBUG&&console.log(f.step,"S45ROUND[]",C),f.round=ms,192&C){case 0:w=Math.sqrt(2)/2;break;case 64:w=Math.sqrt(2);break;case 128:w=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(f.srPeriod=w,48&C){case 0:f.srPhase=0;break;case 16:f.srPhase=.25*w;break;case 32:f.srPhase=.5*w;break;case 48:f.srPhase=.75*w;break;default:throw new Error("invalid S45ROUND value")}f.srThreshold=(C&=15)===0?0:(C/8-.5)*w},void 0,void 0,function(f){d.DEBUG&&console.log(f.step,"ROFF[]"),f.round=ga},void 0,function(f){d.DEBUG&&console.log(f.step,"RUTG[]"),f.round=_a},function(f){d.DEBUG&&console.log(f.step,"RDTG[]"),f.round=wa},oo,oo,void 0,void 0,void 0,void 0,void 0,function(f){var w=f.stack.pop();d.DEBUG&&console.log(f.step,"SCANCTRL[]",w)},Os.bind(void 0,0),Os.bind(void 0,1),function(f){var w=f.stack,C=w.pop(),A=0;d.DEBUG&&console.log(f.step,"GETINFO[]",C),1&C&&(A=35),32&C&&(A|=4096),w.push(A)},void 0,function(f){var w=f.stack,C=w.pop(),A=w.pop(),N=w.pop();d.DEBUG&&console.log(f.step,"ROLL[]"),w.push(A),w.push(C),w.push(N)},function(f){var w=f.stack,C=w.pop(),A=w.pop();d.DEBUG&&console.log(f.step,"MAX[]",C,A),w.push(Math.max(A,C))},function(f){var w=f.stack,C=w.pop(),A=w.pop();d.DEBUG&&console.log(f.step,"MIN[]",C,A),w.push(Math.min(A,C))},function(f){var w=f.stack.pop();d.DEBUG&&console.log(f.step,"SCANTYPE[]",w)},function(f){var w=f.stack.pop(),C=f.stack.pop();switch(d.DEBUG&&console.log(f.step,"INSTCTRL[]",w,C),w){case 1:return void(f.inhibitGridFit=!!C);case 2:return void(f.ignoreCvt=!!C);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,kr.bind(void 0,1),kr.bind(void 0,2),kr.bind(void 0,3),kr.bind(void 0,4),kr.bind(void 0,5),kr.bind(void 0,6),kr.bind(void 0,7),kr.bind(void 0,8),Tr.bind(void 0,1),Tr.bind(void 0,2),Tr.bind(void 0,3),Tr.bind(void 0,4),Tr.bind(void 0,5),Tr.bind(void 0,6),Tr.bind(void 0,7),Tr.bind(void 0,8),$e.bind(void 0,0,0,0,0,0),$e.bind(void 0,0,0,0,0,1),$e.bind(void 0,0,0,0,0,2),$e.bind(void 0,0,0,0,0,3),$e.bind(void 0,0,0,0,1,0),$e.bind(void 0,0,0,0,1,1),$e.bind(void 0,0,0,0,1,2),$e.bind(void 0,0,0,0,1,3),$e.bind(void 0,0,0,1,0,0),$e.bind(void 0,0,0,1,0,1),$e.bind(void 0,0,0,1,0,2),$e.bind(void 0,0,0,1,0,3),$e.bind(void 0,0,0,1,1,0),$e.bind(void 0,0,0,1,1,1),$e.bind(void 0,0,0,1,1,2),$e.bind(void 0,0,0,1,1,3),$e.bind(void 0,0,1,0,0,0),$e.bind(void 0,0,1,0,0,1),$e.bind(void 0,0,1,0,0,2),$e.bind(void 0,0,1,0,0,3),$e.bind(void 0,0,1,0,1,0),$e.bind(void 0,0,1,0,1,1),$e.bind(void 0,0,1,0,1,2),$e.bind(void 0,0,1,0,1,3),$e.bind(void 0,0,1,1,0,0),$e.bind(void 0,0,1,1,0,1),$e.bind(void 0,0,1,1,0,2),$e.bind(void 0,0,1,1,0,3),$e.bind(void 0,0,1,1,1,0),$e.bind(void 0,0,1,1,1,1),$e.bind(void 0,0,1,1,1,2),$e.bind(void 0,0,1,1,1,3),$e.bind(void 0,1,0,0,0,0),$e.bind(void 0,1,0,0,0,1),$e.bind(void 0,1,0,0,0,2),$e.bind(void 0,1,0,0,0,3),$e.bind(void 0,1,0,0,1,0),$e.bind(void 0,1,0,0,1,1),$e.bind(void 0,1,0,0,1,2),$e.bind(void 0,1,0,0,1,3),$e.bind(void 0,1,0,1,0,0),$e.bind(void 0,1,0,1,0,1),$e.bind(void 0,1,0,1,0,2),$e.bind(void 0,1,0,1,0,3),$e.bind(void 0,1,0,1,1,0),$e.bind(void 0,1,0,1,1,1),$e.bind(void 0,1,0,1,1,2),$e.bind(void 0,1,0,1,1,3),$e.bind(void 0,1,1,0,0,0),$e.bind(void 0,1,1,0,0,1),$e.bind(void 0,1,1,0,0,2),$e.bind(void 0,1,1,0,0,3),$e.bind(void 0,1,1,0,1,0),$e.bind(void 0,1,1,0,1,1),$e.bind(void 0,1,1,0,1,2),$e.bind(void 0,1,1,0,1,3),$e.bind(void 0,1,1,1,0,0),$e.bind(void 0,1,1,1,0,1),$e.bind(void 0,1,1,1,0,2),$e.bind(void 0,1,1,1,0,3),$e.bind(void 0,1,1,1,1,0),$e.bind(void 0,1,1,1,1,1),$e.bind(void 0,1,1,1,1,2),$e.bind(void 0,1,1,1,1,3)],Ea=Array.from||function(f){return f.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function bt(f){(f=f||{}).empty||(zr(f.familyName,"When creating a new Font object, familyName is required."),zr(f.styleName,"When creating a new Font object, styleName is required."),zr(f.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),zr(f.ascender,"When creating a new Font object, ascender is required."),zr(f.descender,"When creating a new Font object, descender is required."),zr(f.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:f.familyName||" "},fontSubfamily:{en:f.styleName||" "},fullName:{en:f.fullName||f.familyName+" "+f.styleName},postScriptName:{en:f.postScriptName||(f.familyName+f.styleName).replace(/\s/g,"")},designer:{en:f.designer||" "},designerURL:{en:f.designerURL||" "},manufacturer:{en:f.manufacturer||" "},manufacturerURL:{en:f.manufacturerURL||" "},license:{en:f.license||" "},licenseURL:{en:f.licenseURL||" "},version:{en:f.version||"Version 0.1"},description:{en:f.description||" "},copyright:{en:f.copyright||" "},trademark:{en:f.trademark||" "}},this.unitsPerEm=f.unitsPerEm||1e3,this.ascender=f.ascender,this.descender=f.descender,this.createdTimestamp=f.createdTimestamp,this.tables={os2:{usWeightClass:f.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:f.widthClass||this.usWidthClasses.MEDIUM,fsSelection:f.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new Qe.GlyphSet(this,f.glyphs||[]),this.encoding=new xe(this),this.position=new Dn(this),this.substitution=new hr(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new ps(this):void 0)}})}function Ls(f,w){var C,A=JSON.stringify(f),N=256;for(C in w){var z=parseInt(C);if(z&&!(z<256)){if(JSON.stringify(w[C])===A)return z;N<=z&&(N=z+1)}}return w[N]=f,N}bt.prototype.hasChar=function(f){return this.encoding.charToGlyphIndex(f)!==null},bt.prototype.charToGlyphIndex=function(f){return this.encoding.charToGlyphIndex(f)},bt.prototype.charToGlyph=function(f){return f=this.charToGlyphIndex(f),this.glyphs.get(f)||this.glyphs.get(0)},bt.prototype.stringToGlyphs=function(f,w){w=w||this.defaultRenderOptions;for(var C=Ea(f),A=[],N=0;N<C.length;N+=1){var z=C[N];A.push(this.charToGlyphIndex(z))}var q=A.length;if(w.features){var f=w.script||this.substitution.getDefaultScriptName(),J=[];w.features.liga&&(J=J.concat(this.substitution.getFeature("liga",f,w.language))),w.features.rlig&&(J=J.concat(this.substitution.getFeature("rlig",f,w.language)));for(var le=0;le<q;le+=1)for(var ae=0;ae<J.length;ae++){for(var ve=J[ae],Ce=ve.sub,we=Ce.length,pe=0;pe<we&&Ce[pe]===A[le+pe];)pe++;pe===we&&(A.splice(le,we,ve.by),q=q-we+1)}}for(var Re=new Array(q),Pe=this.glyphs.get(0),Ae=0;Ae<q;Ae+=1)Re[Ae]=this.glyphs.get(A[Ae])||Pe;return Re},bt.prototype.nameToGlyphIndex=function(f){return this.glyphNames.nameToGlyphIndex(f)},bt.prototype.nameToGlyph=function(f){return f=this.nameToGlyphIndex(f),this.glyphs.get(f)||this.glyphs.get(0)},bt.prototype.glyphIndexToName=function(f){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(f):""},bt.prototype.getKerningValue=function(f,w){f=f.index||f,w=w.index||w;var C=this.position.defaultKerningTables;return C?this.position.getKerningValue(C,f,w):this.kerningPairs[f+","+w]||0},bt.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},bt.prototype.forEachGlyph=function(f,w,C,A,N,z){w=w!==void 0?w:0,C=C!==void 0?C:0,N=N||this.defaultRenderOptions;var q,J=1/this.unitsPerEm*(A=A!==void 0?A:72),le=this.stringToGlyphs(f,N);N.kerning&&(f=N.script||this.position.getDefaultScriptName(),q=this.position.getKerningTables(f,N.language));for(var ae=0;ae<le.length;ae+=1){var ve=le[ae];z.call(this,ve,w,C,A,N),ve.advanceWidth&&(w+=ve.advanceWidth*J),N.kerning&&ae<le.length-1&&(w+=(q?this.position.getKerningValue(q,ve.index,le[ae+1].index):this.getKerningValue(ve,le[ae+1]))*J),N.letterSpacing?w+=N.letterSpacing*A:N.tracking&&(w+=N.tracking/1e3*A)}return w},bt.prototype.getPath=function(f,w,C,A,N){var z=new Z;return this.forEachGlyph(f,w,C,A,N,function(q,J,le,ae){q=q.getPath(J,le,ae,N,this),z.extend(q)}),z},bt.prototype.getPaths=function(f,w,C,A,N){var z=[];return this.forEachGlyph(f,w,C,A,N,function(q,J,le,ae){q=q.getPath(J,le,ae,N,this),z.push(q)}),z},bt.prototype.getAdvanceWidth=function(f,w,C){return this.forEachGlyph(f,0,0,w,C,function(){})},bt.prototype.draw=function(f,w,C,A,N,z){this.getPath(w,C,A,N,z).draw(f)},bt.prototype.drawPoints=function(f,w,C,A,N,z){this.forEachGlyph(w,C,A,N,z,function(q,J,le,ae){q.drawPoints(f,J,le,ae)})},bt.prototype.drawMetrics=function(f,w,C,A,N,z){this.forEachGlyph(w,C,A,N,z,function(q,J,le,ae){q.drawMetrics(f,J,le,ae)})},bt.prototype.getEnglishName=function(f){if(f=this.names[f],f)return f.en},bt.prototype.validate=function(){var f=this;function w(C){C=f.getEnglishName(C),C&&C.trim().length}w("fontFamily"),w("weightName"),w("manufacturer"),w("copyright"),w("version"),this.unitsPerEm},bt.prototype.toTables=function(){return fa.fontToTable(this)},bt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},bt.prototype.toArrayBuffer=function(){for(var f=this.toTables().encode(),w=new ArrayBuffer(f.length),C=new Uint8Array(w),A=0;A<f.length;A++)C[A]=f[A];return w},bt.prototype.download=function(f){var w=this.getEnglishName("fontFamily"),C=this.getEnglishName("fontSubfamily"),A=(f=f||w.replace(/\s/g,"")+"-"+C+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,A.byteLength,function(N){N.root.getFile(f,{create:!0},function(z){z.createWriter(function(q){var J=new DataView(A),J=new Blob([J],{type:"font/opentype"});q.write(J),q.addEventListener("writeend",function(){location.href=z.toURL()},!1)})})},function(N){throw new Error(N.name+": "+N.message)})):(w=t("fs"),C=function(N){for(var z=new h(N.byteLength),q=new Uint8Array(N),J=0;J<z.length;++J)z[J]=q[J];return z}(A),w.writeFileSync(f,C))},bt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},bt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},bt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Ca={make:function(f,w){var C=new Me.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:f.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:f.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*f.axes.length}]);C.offsetToData=C.sizeOf();for(var A,N,z,q=0;q<f.axes.length;q++)C.fields=C.fields.concat((A=q,N=f.axes[q],z=w,z=Ls(N.name,w),[{name:"tag_"+A,type:"TAG",value:N.tag},{name:"minValue_"+A,type:"FIXED",value:N.minValue<<16},{name:"defaultValue_"+A,type:"FIXED",value:N.defaultValue<<16},{name:"maxValue_"+A,type:"FIXED",value:N.maxValue<<16},{name:"flags_"+A,type:"USHORT",value:0},{name:"nameID_"+A,type:"USHORT",value:z}]));for(var J=0;J<f.instances.length;J++)C.fields=C.fields.concat(function(le,ae,ve,Ce){for(var we=[{name:"nameID_"+le,type:"USHORT",value:Ls(ae.name,Ce)},{name:"flags_"+le,type:"USHORT",value:0}],pe=0;pe<ve.length;++pe){var Re=ve[pe].tag;we.push({name:"axis_"+le+" "+Re,type:"FIXED",value:ae.coordinates[Re]<<16})}return we}(J,f.instances[J],f.axes,w));return C},parse:function(f,w,C){for(var A,N,z,q,J=new Ee.Parser(f,w),le=J.parseULong(),ae=(I.argument(le===65536,"Unsupported fvar table version."),J.parseOffset16()),ve=(J.skip("uShort",1),J.parseUShort()),Ce=J.parseUShort(),we=J.parseUShort(),pe=J.parseUShort(),Re=[],Pe=0;Pe<ve;Pe++)Re.push((A=f,N=w+ae+Pe*Ce,z=C,q={},A=new Ee.Parser(A,N),q.tag=A.parseTag(),q.minValue=A.parseFixed(),q.defaultValue=A.parseFixed(),q.maxValue=A.parseFixed(),A.skip("uShort",1),q.name=z[A.parseUShort()]||{},q));for(var Ae=[],ke=w+ae+ve*Ce,Te=0;Te<we;Te++)Ae.push(function(Je,it,et,tt){var at={},xt=new Ee.Parser(Je,it);at.name=tt[xt.parseUShort()]||{},xt.skip("uShort",1),at.coordinates={};for(var At=0;At<et.length;++At)at.coordinates[et[At].tag]=xt.parseFixed();return at}(f,ke+Te*pe,Re,C));return{axes:Re,instances:Ae}}},lr=new Array(10);lr[1]=function(){var f=this.offset+this.relativeOffset,w=this.parseUShort();return w===1?{posFormat:1,coverage:this.parsePointer(_e.coverage),value:this.parseValueRecord()}:w===2?{posFormat:2,coverage:this.parsePointer(_e.coverage),values:this.parseValueRecordList()}:void I.assert(!1,"0x"+f.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},lr[2]=function(){var f,w,C,A,z=this.offset+this.relativeOffset,N=this.parseUShort(),z=(I.assert(N===1||N===2,"0x"+z.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(_e.coverage)),q=this.parseUShort(),J=this.parseUShort();return N===1?{posFormat:N,coverage:z,valueFormat1:q,valueFormat2:J,pairSets:this.parseList(_e.pointer(_e.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(q),value2:this.parseValueRecord(J)}})))}:N===2?(f=this.parsePointer(_e.classDef),w=this.parsePointer(_e.classDef),C=this.parseUShort(),A=this.parseUShort(),{posFormat:N,coverage:z,valueFormat1:q,valueFormat2:J,classDef1:f,classDef2:w,class1Count:C,class2Count:A,classRecords:this.parseList(C,_e.list(A,function(){return{value1:this.parseValueRecord(q),value2:this.parseValueRecord(J)}}))}):void 0},lr[3]=function(){return{error:"GPOS Lookup 3 not supported"}},lr[4]=function(){return{error:"GPOS Lookup 4 not supported"}},lr[5]=function(){return{error:"GPOS Lookup 5 not supported"}},lr[6]=function(){return{error:"GPOS Lookup 6 not supported"}},lr[7]=function(){return{error:"GPOS Lookup 7 not supported"}},lr[8]=function(){return{error:"GPOS Lookup 8 not supported"}},lr[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var ka=new Array(10),Ta={parse:function(f,w){return w=(f=new _e(f,w=w||0)).parseVersion(1),I.argument(w===1||w===1.1,"Unsupported GPOS table version "+w),w===1?{version:w,scripts:f.parseScriptList(),features:f.parseFeatureList(),lookups:f.parseLookupList(lr)}:{version:w,scripts:f.parseScriptList(),features:f.parseFeatureList(),lookups:f.parseLookupList(lr),variations:f.parseFeatureVariationsList()}},make:function(f){return new Me.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Me.ScriptList(f.scripts)},{name:"features",type:"TABLE",value:new Me.FeatureList(f.features)},{name:"lookups",type:"TABLE",value:new Me.LookupList(f.lookups,ka)}])}},Ma={parse:function(f,w){if(f=new Ee.Parser(f,w),(w=f.parseUShort())===0){var C=f,A={},Ce=(C.skip("uShort"),C.parseUShort()),N=(I.argument(Ce===0,"Unsupported kern sub-table version."),C.skip("uShort",2),C.parseUShort());C.skip("uShort",3);for(var z=0;z<N;z+=1){var q=C.parseUShort(),J=C.parseUShort(),le=C.parseShort();A[q+","+J]=le}return A}if(w!==1)throw new Error("Unsupported kern table version ("+w+").");var ae=f,ve={},Ce=(ae.skip("uShort"),1<ae.parseULong()&&console.warn("Only the first kern subtable is supported."),ae.skip("uLong"),255&ae.parseUShort());if(ae.skip("uShort"),Ce==0){var we=ae.parseUShort();ae.skip("uShort",3);for(var pe=0;pe<we;pe+=1){var Re=ae.parseUShort(),Pe=ae.parseUShort(),Ae=ae.parseShort();ve[Re+","+Pe]=Ae}}return ve}},Pa={parse:function(f,w,C,A){for(var N=new Ee.Parser(f,w),z=A?N.parseUShort:N.parseULong,q=[],J=0;J<C+1;J+=1){var le=z.call(N);A&&(le*=2),q.push(le)}return q}};function Oa(f,w){t("fs").readFile(f,function(C,A){if(C)return w(C.message);w(null,us(A))})}function Aa(f,w){var C=new XMLHttpRequest;C.open("get",f,!0),C.responseType="arraybuffer",C.onload=function(){return C.response?w(null,C.response):w("Font could not be loaded: "+C.statusText)},C.onerror=function(){w("Font could not be loaded")},C.send()}function Rs(f,w){for(var C=[],A=12,N=0;N<w;N+=1){var z=Ee.getTag(f,A),q=Ee.getULong(f,A+4),J=Ee.getULong(f,A+8),le=Ee.getULong(f,A+12);C.push({tag:z,checksum:q,offset:J,length:le,compression:!1}),A+=16}return C}function Dt(C,w){if(w.compression!=="WOFF")return{data:C,offset:w.offset};var C=new Uint8Array(C.buffer,w.offset+2,w.compressedLength-2),A=new Uint8Array(w.length);if(H(C,A),A.byteLength!==w.length)throw new Error("Decompression error: "+w.tag+" decompressed length doesn't match recorded length");return{data:new DataView(A.buffer,0),offset:0}}function ao(Te){var w,C,A,N,z,q,J,le,ae,ve,Ce,we,pe,Re,Pe=new bt({empty:!0}),Ae=new DataView(Te,0),ke=[],Te=Ee.getTag(Ae,0);if(Te==="\0\0\0"||Te==="true"||Te==="typ1")Pe.outlinesFormat="truetype",ke=Rs(Ae,A=Ee.getUShort(Ae,4));else if(Te==="OTTO")Pe.outlinesFormat="cff",ke=Rs(Ae,A=Ee.getUShort(Ae,4));else{if(Te!=="wOFF")throw new Error("Unsupported OpenType signature "+Te);var Je=Ee.getTag(Ae,4);if(Je==="\0\0\0")Pe.outlinesFormat="truetype";else{if(Je!=="OTTO")throw new Error("Unsupported OpenType flavor "+Te);Pe.outlinesFormat="cff"}ke=function(Et,gt){for(var Qt=[],Mt=44,Xt=0;Xt<gt;Xt+=1){var Ct=Ee.getTag(Et,Mt),Ht=Ee.getULong(Et,Mt+4),dn=Ee.getULong(Et,Mt+8),Wr=Ee.getULong(Et,Mt+12),Is=void 0,Is=dn<Wr&&"WOFF";Qt.push({tag:Ct,offset:Ht,compression:Is,compressedLength:dn,length:Wr}),Mt+=20}return Qt}(Ae,A=Ee.getUShort(Ae,12))}for(var it=0;it<A;it+=1){var et=ke[it],tt=void 0;switch(et.tag){case"cmap":tt=Dt(Ae,et),Pe.tables.cmap=Q.parse(tt.data,tt.offset),Pe.encoding=new Oe(Pe.tables.cmap);break;case"cvt ":tt=Dt(Ae,et),Re=new Ee.Parser(tt.data,tt.offset),Pe.tables.cvt=Re.parseShortList(et.length/2);break;case"fvar":z=et;break;case"fpgm":tt=Dt(Ae,et),Re=new Ee.Parser(tt.data,tt.offset),Pe.tables.fpgm=Re.parseByteList(et.length);break;case"head":tt=Dt(Ae,et),Pe.tables.head=an.parse(tt.data,tt.offset),Pe.unitsPerEm=Pe.tables.head.unitsPerEm,w=Pe.tables.head.indexToLocFormat;break;case"hhea":tt=Dt(Ae,et),Pe.tables.hhea=fe.parse(tt.data,tt.offset),Pe.ascender=Pe.tables.hhea.ascender,Pe.descender=Pe.tables.hhea.descender,Pe.numberOfHMetrics=Pe.tables.hhea.numberOfHMetrics;break;case"hmtx":ae=et;break;case"ltag":tt=Dt(Ae,et),C=Ke.parse(tt.data,tt.offset);break;case"maxp":tt=Dt(Ae,et),Pe.tables.maxp=De.parse(tt.data,tt.offset),Pe.numGlyphs=Pe.tables.maxp.numGlyphs;break;case"name":we=et;break;case"OS/2":tt=Dt(Ae,et),Pe.tables.os2=zt.parse(tt.data,tt.offset);break;case"post":tt=Dt(Ae,et),Pe.tables.post=Jo.parse(tt.data,tt.offset),Pe.glyphNames=new Be(Pe.tables.post);break;case"prep":tt=Dt(Ae,et),Re=new Ee.Parser(tt.data,tt.offset),Pe.tables.prep=Re.parseByteList(et.length);break;case"glyf":q=et;break;case"loca":Ce=et;break;case"CFF ":N=et;break;case"kern":ve=et;break;case"GPOS":J=et;break;case"GSUB":le=et;break;case"meta":pe=et}}if(Je=Dt(Ae,we),Pe.tables.name=rr.parse(Je.data,Je.offset,C),Pe.names=Pe.tables.name,q&&Ce)Te=w===0,Je=Dt(Ae,Ce),Je=Pa.parse(Je.data,Je.offset,Pe.numGlyphs,Te),Te=Dt(Ae,q),Pe.glyphs=hs.parse(Te.data,Te.offset,Je,Pe);else{if(!N)throw new Error("Font doesn't contain TrueType or CFF outlines.");Te=Dt(Ae,N),sn.parse(Te.data,Te.offset,Pe)}for(var Je=Dt(Ae,ae),at=(Ne.parse(Je.data,Je.offset,Pe.numberOfHMetrics,Pe.numGlyphs,Pe.glyphs),Pe),xt=at.tables.cmap.glyphIndexMap,At=Object.keys(xt),Ft=0;Ft<At.length;Ft+=1){var Kt,Zt=At[Ft],ur=xt[Zt];(Kt=at.glyphs.get(ur)).addUnicode(parseInt(Zt))}for(var _t=0;_t<at.glyphs.length;_t+=1)Kt=at.glyphs.get(_t),at.cffEncoding?at.isCIDFont?Kt.name="gid"+_t:Kt.name=at.cffEncoding.charset[_t]:at.glyphNames.names&&(Kt.name=at.glyphNames.glyphIndexToName(_t));return ve?(Te=Dt(Ae,ve),Pe.kerningPairs=Ma.parse(Te.data,Te.offset)):Pe.kerningPairs={},J&&(Je=Dt(Ae,J),Pe.tables.gpos=Ta.parse(Je.data,Je.offset),Pe.position.init()),le&&(Te=Dt(Ae,le),Pe.tables.gsub=es.parse(Te.data,Te.offset)),z&&(Je=Dt(Ae,z),Pe.tables.fvar=Ca.parse(Je.data,Je.offset,Pe.names)),pe&&(Te=Dt(Ae,pe),Pe.tables.meta=ts.parse(Te.data,Te.offset),Pe.metas=Pe.tables.meta),Pe}d.Font=bt,d.Glyph=Xe,d.Path=Z,d.BoundingBox=K,d._parse=Ee,d.parse=ao,d.load=function(f,w){(typeof window>"u"?Oa:Aa)(f,function(C,A){if(C)return w(C);var N;try{N=ao(A)}catch(z){return w(z,null)}return w(null,N)})},d.loadSync=function(f){return ao(us(t("fs").readFileSync(f)))},Object.defineProperty(d,"__esModule",{value:!0})},l(typeof j=="object"&&M!==void 0?j:y.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],255:[function(t,M,j){(function(h){function y(v,m){for(var n=0,i=v.length-1;0<=i;i--){var s=v[i];s==="."?v.splice(i,1):s===".."?(v.splice(i,1),n++):n&&(v.splice(i,1),n--)}if(m)for(;n--;)v.unshift("..");return v}function l(v,m){if(v.filter)return v.filter(m);for(var n=[],i=0;i<v.length;i++)m(v[i],i,v)&&n.push(v[i]);return n}j.resolve=function(){for(var v="",m=!1,n=arguments.length-1;-1<=n&&!m;n--){var i=0<=n?arguments[n]:h.cwd();if(typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");i&&(v=i+"/"+v,m=i.charAt(0)==="/")}return(m?"/":"")+(v=y(l(v.split("/"),function(s){return!!s}),!m).join("/"))||"."},j.normalize=function(v){var m=j.isAbsolute(v),n=d(v,-1)==="/";return(v=(v=y(l(v.split("/"),function(i){return!!i}),!m).join("/"))||m?v:".")&&n&&(v+="/"),(m?"/":"")+v},j.isAbsolute=function(v){return v.charAt(0)==="/"},j.join=function(){var v=Array.prototype.slice.call(arguments,0);return j.normalize(l(v,function(m,n){if(typeof m!="string")throw new TypeError("Arguments to path.join must be strings");return m}).join("/"))},j.relative=function(v,m){function n(p){for(var g=0;g<p.length&&p[g]==="";g++);for(var S=p.length-1;0<=S&&p[S]==="";S--);return S<g?[]:p.slice(g,S-g+1)}v=j.resolve(v).substr(1),m=j.resolve(m).substr(1);for(var i=n(v.split("/")),s=n(m.split("/")),a=Math.min(i.length,s.length),c=a,r=0;r<a;r++)if(i[r]!==s[r]){c=r;break}for(var u=[],r=c;r<i.length;r++)u.push("..");return(u=u.concat(s.slice(c))).join("/")},j.sep="/",j.delimiter=":",j.dirname=function(v){if(typeof v!="string"&&(v+=""),v.length===0)return".";for(var m=v.charCodeAt(0)===47,n=-1,i=!0,s=v.length-1;1<=s;--s)if(v.charCodeAt(s)===47){if(!i){n=s;break}}else i=!1;return n===-1?m?"/":".":m&&n===1?"/":v.slice(0,n)},j.basename=function(v,m){return v=function(n){typeof n!="string"&&(n+="");for(var i=0,s=-1,a=!0,c=n.length-1;0<=c;--c)if(n.charCodeAt(c)===47){if(!a){i=c+1;break}}else s===-1&&(a=!1,s=c+1);return s===-1?"":n.slice(i,s)}(v),v=m&&v.substr(-1*m.length)===m?v.substr(0,v.length-m.length):v},j.extname=function(v){typeof v!="string"&&(v+="");for(var m=-1,n=0,i=-1,s=!0,a=0,c=v.length-1;0<=c;--c){var r=v.charCodeAt(c);if(r===47){if(s)continue;n=c+1;break}i===-1&&(s=!1,i=c+1),r===46?m===-1?m=c:a!==1&&(a=1):m!==-1&&(a=-1)}return m===-1||i===-1||a===0||a===1&&m===i-1&&m===n+1?"":v.slice(m,i)};var d="ab".substr(-1)==="b"?function(v,m,n){return v.substr(m,n)}:function(v,m,n){return m<0&&(m=v.length+m),v.substr(m,n)}}).call(this,t("_process"))},{_process:256}],256:[function(t,l,j){var h,y,l=l.exports={};function d(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}try{h=typeof setTimeout=="function"?setTimeout:d}catch{h=d}try{y=typeof clearTimeout=="function"?clearTimeout:v}catch{y=v}function m(g){if(h===setTimeout)return setTimeout(g,0);if((h===d||!h)&&setTimeout)return(h=setTimeout)(g,0);try{return h(g,0)}catch{try{return h.call(null,g,0)}catch{return h.call(this,g,0)}}}var n,i=[],s=!1,a=-1;function c(){s&&n&&(s=!1,n.length?i=n.concat(i):a=-1,i.length&&r())}function r(){if(!s){for(var g=m(c),S=(s=!0,i.length);S;){for(n=i,i=[];++a<S;)n&&n[a].run();a=-1,S=i.length}n=null,s=!1,function(P){if(y===clearTimeout)return clearTimeout(P);if((y===v||!y)&&clearTimeout)return(y=clearTimeout)(P);try{y(P)}catch{try{return y.call(null,P)}catch{return y.call(this,P)}}}(g)}}function u(g,S){this.fun=g,this.array=S}function p(){}l.nextTick=function(g){var S=new Array(arguments.length-1);if(1<arguments.length)for(var P=1;P<arguments.length;P++)S[P-1]=arguments[P];i.push(new u(g,S)),i.length!==1||s||m(r)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=p,l.addListener=p,l.once=p,l.off=p,l.removeListener=p,l.removeAllListeners=p,l.emit=p,l.prependListener=p,l.prependOnceListener=p,l.listeners=function(g){return[]},l.binding=function(g){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(g){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],257:[function(t,M,j){M=function(h){var y,l=Object.prototype,d=l.hasOwnProperty,E=typeof Symbol=="function"?Symbol:{},v=E.iterator||"@@iterator",m=E.asyncIterator||"@@asyncIterator",n=E.toStringTag||"@@toStringTag";function i(X,B,G,W){var Z,oe,x,I,B=B&&B.prototype instanceof g?B:g,B=Object.create(B.prototype),W=new U(W||[]);return B._invoke=(Z=X,oe=G,x=W,I=a,function($,te){if(I===r)throw new Error("Generator is already running");if(I===u){if($==="throw")throw te;return V()}for(x.method=$,x.arg=te;;){var ie=x.delegate;if(ie&&(ie=function de(se,he){var ce=se.iterator[he.method];if(ce===y){if(he.delegate=null,he.method==="throw"){if(se.iterator.return&&(he.method="return",he.arg=y,de(se,he),he.method==="throw"))return p;he.method="throw",he.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}if(ce=s(ce,se.iterator,he.arg),ce.type==="throw")return he.method="throw",he.arg=ce.arg,he.delegate=null,p;if(ce=ce.arg,!ce)return he.method="throw",he.arg=new TypeError("iterator result is not an object"),he.delegate=null,p;{if(!ce.done)return ce;he[se.resultName]=ce.value,he.next=se.nextLoc,he.method!=="return"&&(he.method="next",he.arg=y)}return he.delegate=null,p}(ie,x),ie)){if(ie===p)continue;return ie}if(x.method==="next")x.sent=x._sent=x.arg;else if(x.method==="throw"){if(I===a)throw I=u,x.arg;x.dispatchException(x.arg)}else x.method==="return"&&x.abrupt("return",x.arg);if(I=r,ie=s(Z,oe,x),ie.type==="normal"){if(I=x.done?u:c,ie.arg!==p)return{value:ie.arg,done:x.done}}else ie.type==="throw"&&(I=u,x.method="throw",x.arg=ie.arg)}}),B}function s(X,H,G){try{return{type:"normal",arg:X.call(H,G)}}catch(K){return{type:"throw",arg:K}}}h.wrap=i;var a="suspendedStart",c="suspendedYield",r="executing",u="completed",p={};function g(){}function S(){}function P(){}var E={},T=(E[v]=function(){return this},Object.getPrototypeOf),T=T&&T(T(F([]))),O=(T&&T!==l&&d.call(T,v)&&(E=T),P.prototype=g.prototype=Object.create(E));function R(X){["next","throw","return"].forEach(function(H){X[H]=function(G){return this._invoke(H,G)}})}function k(X){var H;this._invoke=function(G,K){function Z(){return new Promise(function(oe,x){(function I(de,W,$,te){var ie,de=s(X[de],X,W);if(de.type!=="throw")return(W=(ie=de.arg).value)&&typeof W=="object"&&d.call(W,"__await")?Promise.resolve(W.__await).then(function(se){I("next",se,$,te)},function(se){I("throw",se,$,te)}):Promise.resolve(W).then(function(se){ie.value=se,$(ie)},function(se){return I("throw",se,$,te)});te(de.arg)})(G,K,oe,x)})}return H=H?H.then(Z,Z):Z()}}function D(X){var H={tryLoc:X[0]};1 in X&&(H.catchLoc=X[1]),2 in X&&(H.finallyLoc=X[2],H.afterLoc=X[3]),this.tryEntries.push(H)}function L(X){var H=X.completion||{};H.type="normal",delete H.arg,X.completion=H}function U(X){this.tryEntries=[{tryLoc:"root"}],X.forEach(D,this),this.reset(!0)}function F(X){if(X){var H,G=X[v];if(G)return G.call(X);if(typeof X.next=="function")return X;if(!isNaN(X.length))return H=-1,(G=function K(){for(;++H<X.length;)if(d.call(X,H))return K.value=X[H],K.done=!1,K;return K.value=y,K.done=!0,K}).next=G}return{next:V}}function V(){return{value:y,done:!0}}return(S.prototype=O.constructor=P).constructor=S,P[n]=S.displayName="GeneratorFunction",h.isGeneratorFunction=function(X){return X=typeof X=="function"&&X.constructor,!!X&&(X===S||(X.displayName||X.name)==="GeneratorFunction")},h.mark=function(X){return Object.setPrototypeOf?Object.setPrototypeOf(X,P):(X.__proto__=P,n in X||(X[n]="GeneratorFunction")),X.prototype=Object.create(O),X},h.awrap=function(X){return{__await:X}},R(k.prototype),k.prototype[m]=function(){return this},h.AsyncIterator=k,h.async=function(X,H,G,K){var Z=new k(i(X,H,G,K));return h.isGeneratorFunction(H)?Z:Z.next().then(function(oe){return oe.done?oe.value:Z.next()})},R(O),O[n]="Generator",O[v]=function(){return this},O.toString=function(){return"[object Generator]"},h.keys=function(X){var H,G=[];for(H in X)G.push(H);return G.reverse(),function K(){for(;G.length;){var Z=G.pop();if(Z in X)return K.value=Z,K.done=!1,K}return K.done=!0,K}},h.values=F,U.prototype={constructor:U,reset:function(X){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(L),!X)for(var H in this)H.charAt(0)==="t"&&d.call(this,H)&&!isNaN(+H.slice(1))&&(this[H]=y)},stop:function(){this.done=!0;var X=this.tryEntries[0].completion;if(X.type==="throw")throw X.arg;return this.rval},dispatchException:function(X){if(this.done)throw X;var H=this;function G(B,W){return oe.type="throw",oe.arg=X,H.next=B,W&&(H.method="next",H.arg=y),!!W}for(var K=this.tryEntries.length-1;0<=K;--K){var Z=this.tryEntries[K],oe=Z.completion;if(Z.tryLoc==="root")return G("end");if(Z.tryLoc<=this.prev){var x=d.call(Z,"catchLoc"),I=d.call(Z,"finallyLoc");if(x&&I){if(this.prev<Z.catchLoc)return G(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return G(Z.finallyLoc)}else if(x){if(this.prev<Z.catchLoc)return G(Z.catchLoc,!0)}else{if(!I)throw new Error("try statement without catch or finally");if(this.prev<Z.finallyLoc)return G(Z.finallyLoc)}}}},abrupt:function(X,H){for(var G=this.tryEntries.length-1;0<=G;--G){var K=this.tryEntries[G];if(K.tryLoc<=this.prev&&d.call(K,"finallyLoc")&&this.prev<K.finallyLoc){var Z=K;break}}var oe=(Z=Z&&(X==="break"||X==="continue")&&Z.tryLoc<=H&&H<=Z.finallyLoc?null:Z)?Z.completion:{};return oe.type=X,oe.arg=H,Z?(this.method="next",this.next=Z.finallyLoc,p):this.complete(oe)},complete:function(X,H){if(X.type==="throw")throw X.arg;return X.type==="break"||X.type==="continue"?this.next=X.arg:X.type==="return"?(this.rval=this.arg=X.arg,this.method="return",this.next="end"):X.type==="normal"&&H&&(this.next=H),p},finish:function(X){for(var H=this.tryEntries.length-1;0<=H;--H){var G=this.tryEntries[H];if(G.finallyLoc===X)return this.complete(G.completion,G.afterLoc),L(G),p}},catch:function(X){for(var H=this.tryEntries.length-1;0<=H;--H){var G,K,Z=this.tryEntries[H];if(Z.tryLoc===X)return(G=Z.completion).type==="throw"&&(K=G.arg,L(Z)),K}throw new Error("illegal catch attempt")},delegateYield:function(X,H,G){return this.delegate={iterator:F(X),resultName:H,nextLoc:G},this.method==="next"&&(this.arg=y),p}},h}(typeof M=="object"?M.exports:{});try{regeneratorRuntime=M}catch{Function("r","regeneratorRuntime = r")(M)}},{}],258:[function(t,M,j){(function(h){var y,l,d,v,m,n,i,s,a,c;function r(L){if(typeof L!="string"&&(L=String(L)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(L))throw new TypeError("Invalid character in header field name");return L.toLowerCase()}function u(L){return L=typeof L!="string"?String(L):L}function p(L){var U={next:function(){var F=L.shift();return{done:F===void 0,value:F}}};return l&&(U[Symbol.iterator]=function(){return U}),U}function g(L){this.map={},L instanceof g?L.forEach(function(U,F){this.append(F,U)},this):Array.isArray(L)?L.forEach(function(U){this.append(U[0],U[1])},this):L&&Object.getOwnPropertyNames(L).forEach(function(U){this.append(U,L[U])},this)}function S(L){if(L.bodyUsed)return Promise.reject(new TypeError("Already read"));L.bodyUsed=!0}function P(L){return new Promise(function(U,F){L.onload=function(){U(L.result)},L.onerror=function(){F(L.error)}})}function E(L){var U=new FileReader,F=P(U);return U.readAsArrayBuffer(L),F}function T(L){var U;return L.slice?L.slice(0):((U=new Uint8Array(L.byteLength)).set(new Uint8Array(L)),U.buffer)}function O(){return this.bodyUsed=!1,this._initBody=function(L){if(this._bodyInit=L)if(typeof L=="string")this._bodyText=L;else if(d&&Blob.prototype.isPrototypeOf(L))this._bodyBlob=L;else if(v&&FormData.prototype.isPrototypeOf(L))this._bodyFormData=L;else if(y&&URLSearchParams.prototype.isPrototypeOf(L))this._bodyText=L.toString();else if(m&&d&&i(L))this._bodyArrayBuffer=T(L.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m||!ArrayBuffer.prototype.isPrototypeOf(L)&&!s(L))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=T(L)}else this._bodyText="";this.headers.get("content-type")||(typeof L=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y&&URLSearchParams.prototype.isPrototypeOf(L)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d&&(this.blob=function(){var L=S(this);if(L)return L;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?S(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(E)}),this.text=function(){var L,U,F=S(this);if(F)return F;if(this._bodyBlob)return F=this._bodyBlob,L=new FileReader,U=P(L),L.readAsText(F),U;if(this._bodyArrayBuffer)return Promise.resolve(function(V){for(var X=new Uint8Array(V),H=new Array(X.length),G=0;G<X.length;G++)H[G]=String.fromCharCode(X[G]);return H.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function R(L,U){var F,V=(U=U||{}).body;if(L instanceof R){if(L.bodyUsed)throw new TypeError("Already read");this.url=L.url,this.credentials=L.credentials,U.headers||(this.headers=new g(L.headers)),this.method=L.method,this.mode=L.mode,V||L._bodyInit==null||(V=L._bodyInit,L.bodyUsed=!0)}else this.url=String(L);if(this.credentials=U.credentials||this.credentials||"omit",!U.headers&&this.headers||(this.headers=new g(U.headers)),this.method=(L=U.method||this.method||"GET",F=L.toUpperCase(),-1<a.indexOf(F)?F:L),this.mode=U.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&V)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(V)}function k(L){var U=new FormData;return L.trim().split("&").forEach(function(F){var V;F&&(V=(F=F.split("=")).shift().replace(/\+/g," "),F=F.join("=").replace(/\+/g," "),U.append(decodeURIComponent(V),decodeURIComponent(F)))}),U}function D(L,U){U=U||{},this.type="default",this.status=U.status===void 0?200:U.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in U?U.statusText:"OK",this.headers=new g(U.headers),this.url=U.url||"",this._initBody(L)}h.fetch||(y="URLSearchParams"in h,l="Symbol"in h&&"iterator"in Symbol,d="FileReader"in h&&"Blob"in h&&function(){try{return new Blob,!0}catch{return!1}}(),v="FormData"in h,(m="ArrayBuffer"in h)&&(n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=function(L){return L&&DataView.prototype.isPrototypeOf(L)},s=ArrayBuffer.isView||function(L){return L&&-1<n.indexOf(Object.prototype.toString.call(L))}),g.prototype.append=function(L,U){L=r(L),U=u(U);var F=this.map[L];this.map[L]=F?F+","+U:U},g.prototype.delete=function(L){delete this.map[r(L)]},g.prototype.get=function(L){return L=r(L),this.has(L)?this.map[L]:null},g.prototype.has=function(L){return this.map.hasOwnProperty(r(L))},g.prototype.set=function(L,U){this.map[r(L)]=u(U)},g.prototype.forEach=function(L,U){for(var F in this.map)this.map.hasOwnProperty(F)&&L.call(U,this.map[F],F,this)},g.prototype.keys=function(){var L=[];return this.forEach(function(U,F){L.push(F)}),p(L)},g.prototype.values=function(){var L=[];return this.forEach(function(U){L.push(U)}),p(L)},g.prototype.entries=function(){var L=[];return this.forEach(function(U,F){L.push([F,U])}),p(L)},l&&(g.prototype[Symbol.iterator]=g.prototype.entries),a=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],R.prototype.clone=function(){return new R(this,{body:this._bodyInit})},O.call(R.prototype),O.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},D.error=function(){var L=new D(null,{status:0,statusText:""});return L.type="error",L},c=[301,302,303,307,308],D.redirect=function(L,U){if(c.indexOf(U)===-1)throw new RangeError("Invalid status code");return new D(null,{status:U,headers:{location:L}})},h.Headers=g,h.Request=R,h.Response=D,h.fetch=function(L,U){return new Promise(function(F,V){var X=new R(L,U),H=new XMLHttpRequest;H.onload=function(){var G,K={status:H.status,statusText:H.statusText,headers:(K=H.getAllResponseHeaders()||"",G=new g,K.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(x){var x=x.split(":"),I=x.shift().trim();I&&(x=x.join(":").trim(),G.append(I,x))}),G)},Z=(K.url="responseURL"in H?H.responseURL:K.headers.get("X-Request-URL"),"response"in H?H.response:H.responseText);F(new D(Z,K))},H.onerror=function(){V(new TypeError("Network request failed"))},H.ontimeout=function(){V(new TypeError("Network request failed"))},H.open(X.method,X.url,!0),X.credentials==="include"?H.withCredentials=!0:X.credentials==="omit"&&(H.withCredentials=!1),"responseType"in H&&d&&(H.responseType="blob"),X.headers.forEach(function(G,K){H.setRequestHeader(K,G)}),H.send(X._bodyInit===void 0?null:X._bodyInit)})},h.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],259:[function(t,M,j){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h,y=d(t("../core/main")),l=d(t("../color/color_conversion"));function d(n){return n&&n.__esModule?n:{default:n}}var v=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],m=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];y.default.prototype._rgbColorName=function(a){var i,s,a=l.default._rgbaToHSBA(a),c=[(h=a)[0],a[1],a[2]];c[0]!==0&&(c[0]=Math.round(100*c[0]),(a=c[0].toString().split(""))[s=a.length-1]=parseInt(a[s]),a[s]<2.5?a[s]=0:2.5<=a[s]&&a[s]<7.5&&(a[s]=5),a.length===2?(a[0]=parseInt(a[0]),7.5<=a[s]&&(a[s]=0,a[0]=a[0]+1),c[0]=10*a[0]+a[1]):7.5<=a[s]?c[0]=10:c[0]=a[s]),c[2]=c[2]/255;for(var r=c.length-1;1<=r;r--)c[r]<=.25?c[r]=0:.25<c[r]&&c[r]<.75?c[r]=.5:c[r]=1;if(c[0]===0&&c[1]===0&&c[2]===1){for(var u=2;0<=u;u--)h[u]=Math.round(1e4*h[u])/1e4;for(var p=0;p<v.length;p++){if(v[p].h===h[0]&&v[p].s===h[1]&&v[p].b===h[2]){i=v[p].name;break}i="white"}}else for(var g=0;g<m.length;g++)if(m[g].h===c[0]&&m[g].s===c[1]&&m[g].b===c[2]){i=m[g].name;break}return i},t=y.default,j.default=t},{"../color/color_conversion":265,"../core/main":280,"core-js/modules/es.function.name":173,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203}],260:[function(t,M,j){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t},y="_Description",l="_fallbackDesc",d="_fallbackTable",v="_Label",m="_labelDesc",n="_labelTable";function i(s){if(s==="label"||s==="fallback")throw new Error("description should not be LABEL or FALLBACK");return s.endsWith(".")||s.endsWith(";")||s.endsWith(",")||s.endsWith("?")||s.endsWith("!")||(s+="."),s}h.default.prototype.describe=function(s,a){var c;h.default._validateParameters("describe",arguments),typeof s=="string"&&(c=this.canvas.id,s=i(s),this.dummyDOM||(this.dummyDOM=document.getElementById(c).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==s&&(this.descriptions.fallback.innerHTML=s):this._describeHTML("fallback",s),a===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==s&&(this.descriptions.label.innerHTML=s):this._describeHTML("label",s)))},h.default.prototype.describeElement=function(s,a,c){var r,u;h.default._validateParameters("describeElement",arguments),typeof a=="string"&&typeof s=="string"&&(r=this.canvas.id,a=i(a),u=function(p){if(p==="label"||p==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return p.endsWith(".")||p.endsWith(";")||p.endsWith(",")?p=p.replace(/.$/,":"):p.endsWith(":")||(p+=":"),p}(s),s=s.replace(/[^a-zA-Z0-9]/g,""),u='<th scope="row">'.concat(u,"</th><td>").concat(a,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(r).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[s]?this.descriptions.fallbackElements[s].innerHTML!==u&&(this.descriptions.fallbackElements[s].innerHTML=u):this._describeElementHTML("fallback",s,u),c===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[s]?this.descriptions.labelElements[s].innerHTML!==u&&(this.descriptions.labelElements[s].innerHTML=u):this._describeElementHTML("label",s,u)))},h.default.prototype._describeHTML=function(s,a){var c,r=this.canvas.id;s==="fallback"?(this.dummyDOM.querySelector("#".concat(r+y))?this.dummyDOM.querySelector("#"+r+d).insertAdjacentHTML("beforebegin",'<p id="'.concat(r+l,'"></p>')):(c='<div id="'.concat(r).concat(y,'" role="region" aria-label="Canvas Description"><p id="').concat(r).concat(l,'"></p></div>'),this.dummyDOM.querySelector("#".concat(r,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutput")).insertAdjacentHTML("beforebegin",c):this.dummyDOM.querySelector("#".concat(r)).innerHTML=c),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(r).concat(l)),this.descriptions.fallback.innerHTML=a):s==="label"&&(this.dummyDOM.querySelector("#".concat(r+v))?this.dummyDOM.querySelector("#".concat(r+n))&&this.dummyDOM.querySelector("#".concat(r+n)).insertAdjacentHTML("beforebegin",'<p id="'.concat(r).concat(m,'"></p>')):(c='<div id="'.concat(r).concat(v,'" class="p5Label"><p id="').concat(r).concat(m,'"></p></div>'),this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",c):this.dummyDOM.querySelector("#"+r).insertAdjacentHTML("afterend",c)),this.descriptions.label=this.dummyDOM.querySelector("#"+r+m),this.descriptions.label.innerHTML=a)},h.default.prototype._describeElementHTML=function(s,a,c){var r,u=this.canvas.id;s==="fallback"?(this.dummyDOM.querySelector("#".concat(u+y))?this.dummyDOM.querySelector("#"+u+d)||this.dummyDOM.querySelector("#"+u+l).insertAdjacentHTML("afterend",'<table id="'.concat(u).concat(d,'"><caption>Canvas elements and their descriptions</caption></table>')):(r='<div id="'.concat(u).concat(y,'" role="region" aria-label="Canvas Description"><table id="').concat(u).concat(d,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(u,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(u,"accessibleOutput")).insertAdjacentHTML("beforebegin",r):this.dummyDOM.querySelector("#"+u).innerHTML=r),(r=document.createElement("tr")).id=u+"_fte_"+a,this.dummyDOM.querySelector("#"+u+d).appendChild(r),this.descriptions.fallbackElements[a]=this.dummyDOM.querySelector("#".concat(u).concat("_fte_").concat(a)),this.descriptions.fallbackElements[a].innerHTML=c):s==="label"&&(this.dummyDOM.querySelector("#".concat(u+v))?this.dummyDOM.querySelector("#".concat(u+n))||this.dummyDOM.querySelector("#"+u+m).insertAdjacentHTML("afterend",'<table id="'.concat(u+n,'"></table>')):(r='<div id="'.concat(u).concat(v,'" class="p5Label"><table id="').concat(u).concat(n,'"></table></div>'),this.dummyDOM.querySelector("#".concat(u,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(u,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",r):this.dummyDOM.querySelector("#"+u).insertAdjacentHTML("afterend",r)),(s=document.createElement("tr")).id=u+"_lte_"+a,this.dummyDOM.querySelector("#"+u+n).appendChild(s),this.descriptions.labelElements[a]=this.dummyDOM.querySelector("#".concat(u).concat("_lte_").concat(a)),this.descriptions.labelElements[a].innerHTML=c)},t=h.default,j.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.replace":201}],261:[function(t,M,j){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateGridOutput=function(h){var y,l,d,v;this.dummyDOM.querySelector("#".concat(h,"_summary"))&&(y=this._accessibleOutputs[h],d=function(m,n,i,s){return n="".concat(n," canvas, ").concat(i," by ").concat(s," pixels, contains ").concat(m[0]),n=(m[0]===1?"".concat(n," shape: "):"".concat(n," shapes: ")).concat(m[1]),n}((l=function(m,n){var i,s="",a="",c=0;for(i in n){var r,u=0;for(r in n[i]){var p='<li id="'.concat(m,"shape").concat(c,'">').concat(n[i][r].color," ").concat(i,",");i==="line"?p+=" location = ".concat(n[i][r].pos,", length = ").concat(n[i][r].length," pixels"):(p+=" location = ".concat(n[i][r].pos),i!=="point"&&(p+=", area = ".concat(n[i][r].area," %")),p+="</li>"),s+=p,u++,c++}a=1<u?"".concat(a," ").concat(u," ").concat(i,"s"):"".concat(a," ").concat(u," ").concat(i)}return{numShapes:[c,a],details:s}}(h,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),v=function(m,n){var i,s,a=0,c="",r=Array.from(Array(10),function(){return Array(10)});for(i in n)for(var u in n[i]){var p=void 0;p=i!=="line"?'<a href="#'.concat(m,"shape").concat(a,'">').concat(n[i][u].color," ").concat(i,"</a>"):'<a href="#'.concat(m,"shape").concat(a,'">').concat(n[i][u].color," ").concat(i," midpoint</a>"),r[n[i][u].loc.locY][n[i][u].loc.locX]?r[n[i][u].loc.locY][n[i][u].loc.locX]=r[n[i][u].loc.locY][n[i][u].loc.locX]+"  "+p:r[n[i][u].loc.locY][n[i][u].loc.locX]=p,a++}for(s in r){var g,S="<tr>";for(g in r[s])S+="<td>",r[s][g]!==void 0&&(S+=r[s][g]),S+="</td>";c=c+S+"</tr>"}return c}(h,this.ingredients.shapes),d!==y.summary.innerHTML&&(y.summary.innerHTML=d),v!==y.map.innerHTML&&(y.map.innerHTML=v),l.details!==y.shapeDetails.innerHTML&&(y.shapeDetails.innerHTML=l.details),this._accessibleOutputs[h]=y)},t=t.default,j.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.map":167,"core-js/modules/es.string.iterator":197}],262:[function(t,M,j){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};function y(d){return function(v){if(Array.isArray(v)){for(var m=0,n=new Array(v.length);m<v.length;m++)n[m]=v[m];return n}}(d)||function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(d,v,m){return v=Math.floor(d[0]/v*10),d=Math.floor(d[1]/m*10),v===10&&(v-=1),d===10&&(d-=1),{locX:v,locY:d}}h.default.prototype.textOutput=function(d){h.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),d===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},h.default.prototype.gridOutput=function(d){h.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),d===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},h.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},h.default.prototype._createOutput=function(d,v){var m,n,i,s=this.canvas.id,a=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(s).parentNode),"");v==="Fallback"?(m=s+d,this.dummyDOM.querySelector("#".concat(n=s+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(s,"_Description"))?this.dummyDOM.querySelector("#".concat(s,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(n,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(s)).innerHTML='<div id="'.concat(n,'" role="region" aria-label="Canvas Outputs"></div>'))):v==="Label"&&(m=s+d+(a=v),this.dummyDOM.querySelector("#".concat(n=s+"accessibleOutput"+v))||(this.dummyDOM.querySelector("#".concat(s,"_Label"))?this.dummyDOM.querySelector("#".concat(s,"_Label")):this.dummyDOM.querySelector("#".concat(s))).insertAdjacentHTML("afterend",'<div id="'.concat(n,'"></div>'))),this._accessibleOutputs[m]={},d==="textOutput"?(a="#".concat(s,"gridOutput").concat(a),i='<div id="'.concat(m,'">Text Output<div id="').concat(m,'Summary" aria-label="text output summary"><p id="').concat(m,'_summary"></p><ul id="').concat(m,'_list"></ul></div><table id="').concat(m,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(a)?this.dummyDOM.querySelector(a).insertAdjacentHTML("beforebegin",i):this.dummyDOM.querySelector("#".concat(n)).innerHTML=i,this._accessibleOutputs[m].list=this.dummyDOM.querySelector("#".concat(m,"_list"))):d==="gridOutput"&&(a="#".concat(s,"textOutput").concat(a),i='<div id="'.concat(m,'">Grid Output<p id="').concat(m,'_summary" aria-label="grid output summary"><table id="').concat(m,'_map" summary="grid output content"></table><ul id="').concat(m,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(a)?this.dummyDOM.querySelector(a).insertAdjacentHTML("afterend",i):this.dummyDOM.querySelector("#".concat(n)).innerHTML=i,this._accessibleOutputs[m].map=this.dummyDOM.querySelector("#".concat(m,"_map"))),this._accessibleOutputs[m].shapeDetails=this.dummyDOM.querySelector("#".concat(m,"_shapeDetails")),this._accessibleOutputs[m].summary=this.dummyDOM.querySelector("#".concat(m,"_summary"))},h.default.prototype._updateAccsOutput=function(){var d=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(d+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(d+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(d+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(d+"gridOutputLabel"))},h.default.prototype._accsBackground=function(d){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==d&&(this.ingredients.colors.backgroundRGBA=d,this.ingredients.colors.background=this._rgbColorName(d))},h.default.prototype._accsCanvasColors=function(d,v){d==="fill"?this.ingredients.colors.fillRGBA!==v&&(this.ingredients.colors.fillRGBA=v,this.ingredients.colors.fill=this._rgbColorName(v)):d==="stroke"&&this.ingredients.colors.strokeRGBA!==v&&(this.ingredients.colors.strokeRGBA=v,this.ingredients.colors.stroke=this._rgbColorName(v))},h.default.prototype._accsOutput=function(d,v){d==="ellipse"&&v[2]===v[3]?d="circle":d==="rectangle"&&v[2]===v[3]&&(d="square");var m,n,i={},s=!0,a=function(r,u){var p;return r=r==="rectangle"||r==="ellipse"||r==="arc"||r==="circle"||r==="square"?(p=Math.round(u[0]+u[2]/2),Math.round(u[1]+u[3]/2)):r==="triangle"?(p=(u[0]+u[2]+u[4])/3,(u[1]+u[3]+u[5])/3):r==="quadrilateral"?(p=(u[0]+u[2]+u[4]+u[6])/4,(u[1]+u[3]+u[5]+u[7])/4):r==="line"?(p=(u[0]+u[2])/2,(u[1]+u[3])/2):(p=u[0],u[1]),[p,r]}(d,v);if(d==="line"?(i.color=this.ingredients.colors.stroke,i.length=Math.round(this.dist(v[0],v[1],v[2],v[3])),m=this._getPos(v[0],[1]),n=this._getPos(v[2],[3]),i.loc=l(a,this.width,this.height),i.pos=m===n?"at ".concat(m):"from ".concat(m," to ").concat(n)):(d==="point"?i.color=this.ingredients.colors.stroke:(i.color=this.ingredients.colors.fill,i.area=this._getArea(d,v)),i.pos=this._getPos.apply(this,y(a)),i.loc=l(a,this.width,this.height)),this.ingredients.shapes[d]){if(this.ingredients.shapes[d]!==[i]){for(var c in this.ingredients.shapes[d])JSON.stringify(this.ingredients.shapes[d][c])===JSON.stringify(i)&&(s=!1);s===!0&&this.ingredients.shapes[d].push(i)}}else this.ingredients.shapes[d]=[i]},h.default.prototype._getPos=function(n,m){var n=new DOMPointReadOnly(n,m),m=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),n=n.matrixTransform(m),m=n.x,n=n.y,i=this.width*this._pixelDensity,s=this.height*this._pixelDensity;return m<.4*i?n<.4*s?"top left":.6*s<n?"bottom left":"mid left":.6*i<m?n<.4*s?"top right":.6*s<n?"bottom right":"mid right":n<.4*s?"top middle":.6*s<n?"bottom middle":"middle"},h.default.prototype._getArea=function(d,v){var m,n,i=0,s=(d==="arc"?(i=(m=((v[5]-v[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*v[2]*v[3]/8,v[6]!=="open"&&v[6]!=="chord"||(n=v[0],u=v[1],s=v[0]+v[2]/2*Math.cos(v[4]).toFixed(2),p=v[1]+v[3]/2*Math.sin(v[4]).toFixed(2),c=v[0]+v[2]/2*Math.cos(v[5]).toFixed(2),a=v[1]+v[3]/2*Math.sin(v[5]).toFixed(2),n=Math.abs(n*(p-a)+s*(a-u)+c*(u-p))/2,m>Math.PI?i+=n:i-=n)):d==="ellipse"||d==="circle"?i=3.14*v[2]/2*v[3]/2:d==="line"||d==="point"?i=0:d==="quadrilateral"?i=Math.abs((v[6]+v[0])*(v[7]-v[1])+(v[0]+v[2])*(v[1]-v[3])+(v[2]+v[4])*(v[3]-v[5])+(v[4]+v[6])*(v[5]-v[7]))/2:d==="rectangle"||d==="square"?i=v[2]*v[3]:d==="triangle"&&(i=Math.abs(v[0]*(v[3]-v[5])+v[2]*(v[5]-v[1])+v[4]*(v[1]-v[3]))/2),this.width*this._pixelDensity),a=this.height*this._pixelDensity,c=[new DOMPoint(0,0),new DOMPoint(s,0),new DOMPoint(s,a),new DOMPoint(0,a)],r=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),u=c.map(function(g){return g.matrixTransform(r)}),p=Math.abs((u[3].x+u[0].x)*(u[3].y-u[0].y)+(u[0].x+u[1].x)*(u[0].y-u[1].y)+(u[1].x+u[2].x)*(u[1].y-u[2].y)+(u[2].x+u[3].x)*(u[2].y-u[3].y))/2;return Math.round(100*i/p)},t=h.default,j.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],263:[function(t,M,j){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.concat"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateTextOutput=function(h){var y,l,d,v;this.dummyDOM.querySelector("#".concat(h,"_summary"))&&(y=this._accessibleOutputs[h],d=function(m,n,i,s){return i="Your output is a, ".concat(i," by ").concat(s," pixels, ").concat(n," canvas containing the following"),i=m===1?"".concat(i," shape:"):"".concat(i," ").concat(m," shapes:"),i}((l=function(m,n){var i,s="",a=0;for(i in n)for(var c in n[i]){var r='<li><a href="#'.concat(m,"shape").concat(a,'">').concat(n[i][c].color," ").concat(i,"</a>");i==="line"?r+=", ".concat(n[i][c].pos,", ").concat(n[i][c].length," pixels long.</li>"):(r+=", at ".concat(n[i][c].pos),i!=="point"&&(r+=", covering ".concat(n[i][c].area,"% of the canvas")),r+=".</li>"),s+=r,a++}return{numShapes:a,listShapes:s}}(h,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),v=function(m,n){var i,s="",a=0;for(i in n)for(var c in n[i]){var r='<tr id="'.concat(m,"shape").concat(a,'"><th>').concat(n[i][c].color," ").concat(i,"</th>");i==="line"?r+="<td>location = ".concat(n[i][c].pos,"</td><td>length = ").concat(n[i][c].length," pixels</td></tr>"):(r+="<td>location = ".concat(n[i][c].pos,"</td>"),i!=="point"&&(r+="<td> area = ".concat(n[i][c].area,"%</td>")),r+="</tr>"),s+=r,a++}return s}(h,this.ingredients.shapes),d!==y.summary.innerHTML&&(y.summary.innerHTML=d),l.listShapes!==y.list.innerHTML&&(y.list.innerHTML=l.listShapes),v!==y.shapeDetails.innerHTML&&(y.shapeDetails.innerHTML=v),this._accessibleOutputs[h]=y)},t=t.default,j.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152}],264:[function(t,M,j){var h=(h=t("./core/main"))&&h.__esModule?h:{default:h};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.DataArray"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Framebuffer"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),M.exports=h.default},{"./accessibility/color_namer":259,"./accessibility/describe":260,"./accessibility/gridOutput":261,"./accessibility/outputs":262,"./accessibility/textOutput":263,"./color/color_conversion":265,"./color/creating_reading":266,"./color/p5.Color":267,"./color/setting":268,"./core/constants":269,"./core/environment":270,"./core/friendly_errors/fes_core":271,"./core/friendly_errors/file_errors":272,"./core/friendly_errors/sketch_reader":273,"./core/friendly_errors/stacktrace":274,"./core/friendly_errors/validate_params":275,"./core/helpers":276,"./core/init":277,"./core/legacy":279,"./core/main":280,"./core/p5.Element":281,"./core/p5.Graphics":282,"./core/p5.Renderer":283,"./core/p5.Renderer2D":284,"./core/preload":285,"./core/rendering":286,"./core/shape/2d_primitives":287,"./core/shape/attributes":288,"./core/shape/curves":289,"./core/shape/vertex":290,"./core/shim":291,"./core/structure":292,"./core/transform":293,"./data/local_storage.js":294,"./data/p5.TypedDict":295,"./dom/dom":296,"./events/acceleration":297,"./events/keyboard":298,"./events/mouse":299,"./events/touch":300,"./image/filters":301,"./image/image":302,"./image/loading_displaying":303,"./image/p5.Image":304,"./image/pixels":305,"./io/files":306,"./io/p5.Table":307,"./io/p5.TableRow":308,"./io/p5.XML":309,"./math/calculation":310,"./math/math":311,"./math/noise":312,"./math/p5.Vector":313,"./math/random":314,"./math/trigonometry":315,"./typography/attributes":316,"./typography/loading_displaying":317,"./typography/p5.Font":318,"./utilities/array_functions":319,"./utilities/conversion":320,"./utilities/string_functions":321,"./utilities/time_date":322,"./webgl/3d_primitives":323,"./webgl/interaction":325,"./webgl/light":326,"./webgl/loading":327,"./webgl/material":328,"./webgl/p5.Camera":329,"./webgl/p5.DataArray":330,"./webgl/p5.Framebuffer":331,"./webgl/p5.Geometry":332,"./webgl/p5.Matrix":333,"./webgl/p5.RenderBuffer":334,"./webgl/p5.RendererGL":337,"./webgl/p5.RendererGL.Immediate":335,"./webgl/p5.RendererGL.Retained":336,"./webgl/p5.Shader":338,"./webgl/p5.Texture":339,"./webgl/text":340}],265:[function(t,M,j){Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.ColorConversion={_hsbaToHSLA:function(h){var y=h[0],l=h[1],d=h[2],v=(2-l)*d/2;return v!=0&&(v==1?l=0:v<.5?l/=2-l:l=l*d/(2-2*v)),[y,l,v,h[3]]},_hsbaToRGBA:function(h){var y,l,d,v,m,n=6*h[0],i=h[1],s=h[2];return i===0?[s,s,s,h[3]]:(l=s*(1-i),d=s*(1-i*(n-(y=Math.floor(n)))),i=s*(1-i*(1+y-n)),n=y===1?(v=d,m=s,l):y===2?(v=l,m=s,i):y===3?(v=l,m=d,s):y===4?(v=i,m=l,s):y===5?(v=s,m=l,d):(v=s,m=i,l),[v,m,n,h[3]])},_hslaToHSBA:function(h){var y=h[0],l=h[1],d=h[2],v=d<.5?(1+l)*d:d+l-d*l;return[y,l=2*(v-d)/v,v,h[3]]},_hslaToRGBA:function(h){var y,l=6*h[0],d=h[1],v=h[2];return d===0?[v,v,v,h[3]]:[(y=function(m,n,i){return m<0?m+=6:6<=m&&(m-=6),m<1?n+(i-n)*m:m<3?i:m<4?n+(i-n)*(4-m):n})(2+l,d=2*v-(v=v<.5?(1+d)*v:v+d-v*d),v),y(l,d,v),y(l-2,d,v),h[3]]},_rgbaToHSBA:function(h){var y,l,d=h[0],v=h[1],m=h[2],n=Math.max(d,v,m),i=n-Math.min(d,v,m);return i==0?l=y=0:(l=i/n,d===n?y=(v-m)/i:v===n?y=2+(m-d)/i:m===n&&(y=4+(d-v)/i),y<0?y+=6:6<=y&&(y-=6)),[y/6,l,n,h[3]]},_rgbaToHSLA:function(h){var y,l,d=h[0],v=h[1],m=h[2],n=Math.max(d,v,m),s=Math.min(d,v,m),i=n+s,s=n-s;return s==0?l=y=0:(l=i<1?s/i:s/(2-i),d===n?y=(v-m)/s:v===n?y=2+(m-d)/s:m===n&&(y=4+(d-v)/s),y<0?y+=6:6<=y&&(y-=6)),[y/6,l,i/2,h[3]]}},t=t.default.ColorConversion,j.default=t},{"../core/main":280}],266:[function(t,M,j){function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(n)}function y(n){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(i){return h(i)}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":h(i)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.map"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(m=t("../core/main"))&&m.__esModule?m:{default:m},d=function(n){if(n&&n.__esModule)return n;if(n===null||y(n)!=="object"&&typeof n!="function")return{default:n};var i=v();if(i&&i.has(n))return i.get(n);var s,a={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in n){var r;Object.prototype.hasOwnProperty.call(n,s)&&((r=c?Object.getOwnPropertyDescriptor(n,s):null)&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=n[s])}return a.default=n,i&&i.set(n,a),a}(t("../core/constants"));function v(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,v=function(){return n},n)}t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),l.default.prototype.alpha=function(n){return l.default._validateParameters("alpha",arguments),this.color(n)._getAlpha()},l.default.prototype.blue=function(n){return l.default._validateParameters("blue",arguments),this.color(n)._getBlue()},l.default.prototype.brightness=function(n){return l.default._validateParameters("brightness",arguments),this.color(n)._getBrightness()},l.default.prototype.color=function(){for(var n,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return l.default._validateParameters("color",s),s[0]instanceof l.default.Color?s[0]:(n=Array.isArray(s[0])?s[0]:s,new l.default.Color(this,n))},l.default.prototype.green=function(n){return l.default._validateParameters("green",arguments),this.color(n)._getGreen()},l.default.prototype.hue=function(n){return l.default._validateParameters("hue",arguments),this.color(n)._getHue()},l.default.prototype.lerpColor=function(n,i,s){l.default._validateParameters("lerpColor",arguments);var a,c,r,u=this._colorMode,p=this._colorMaxes;if(u===d.RGB)c=n.levels.map(function(g){return g/255}),r=i.levels.map(function(g){return g/255});else if(u===d.HSB)n._getBrightness(),i._getBrightness(),c=n.hsba,r=i.hsba;else{if(u!==d.HSL)throw new Error("".concat(u," cannot be used for interpolation."));n._getLightness(),i._getLightness(),c=n.hsla,r=i.hsla}return s=Math.max(Math.min(s,1),0),this.lerp===void 0&&(this.lerp=function(g,S,P){return P*(S-g)+g}),u===d.RGB?a=this.lerp(c[0],r[0],s):(.5<Math.abs(c[0]-r[0])&&(c[0]>r[0]?r[0]+=1:c[0]+=1),1<=(a=this.lerp(c[0],r[0],s))&&--a),n=this.lerp(c[1],r[1],s),i=this.lerp(c[2],r[2],s),c=this.lerp(c[3],r[3],s),a*=p[u][0],n*=p[u][1],i*=p[u][2],c*=p[u][3],this.color(a,n,i,c)},l.default.prototype.lightness=function(n){return l.default._validateParameters("lightness",arguments),this.color(n)._getLightness()},l.default.prototype.red=function(n){return l.default._validateParameters("red",arguments),this.color(n)._getRed()},l.default.prototype.saturation=function(n){return l.default._validateParameters("saturation",arguments),this.color(n)._getSaturation()};var m=l.default;j.default=m},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],267:[function(a,M,j){function h(g){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(g)}function y(g){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(S){return h(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":h(S)})(g)}a("core-js/modules/es.symbol"),a("core-js/modules/es.symbol.description"),a("core-js/modules/es.symbol.iterator"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.get-own-property-descriptor"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.iterator"),a("core-js/modules/es.string.trim"),a("core-js/modules/es.weak-map"),a("core-js/modules/web.dom-collections.iterator"),a("core-js/modules/es.array.includes"),a("core-js/modules/es.array.join"),a("core-js/modules/es.array.map"),a("core-js/modules/es.array.slice"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.regexp.constructor"),a("core-js/modules/es.regexp.exec"),a("core-js/modules/es.regexp.to-string"),a("core-js/modules/es.string.includes"),a("core-js/modules/es.string.trim"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=n(a("../core/main")),d=function(g){if(g&&g.__esModule)return g;if(g===null||y(g)!=="object"&&typeof g!="function")return{default:g};var S=m();if(S&&S.has(g))return S.get(g);var P,E={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(P in g){var O;Object.prototype.hasOwnProperty.call(g,P)&&((O=T?Object.getOwnPropertyDescriptor(g,P):null)&&(O.get||O.set)?Object.defineProperty(E,P,O):E[P]=g[P])}return E.default=g,S&&S.set(g,E),E}(a("../core/constants")),v=n(a("./color_conversion"));function m(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,m=function(){return g},g)}function n(g){return g&&g.__esModule?g:{default:g}}function i(g,S){for(var P=0;P<S.length;P++){var E=S[P];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}var s={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},a=/\s*/,p=/(\d{1,3})/,c=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,r=new RegExp("".concat(c.source,"%")),u={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",p.source,",",p.source,",",p.source,"\\)$"].join(a.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",r.source,",",r.source,",",r.source,"\\)$"].join(a.source),"i"),RGBA:new RegExp(["^rgba\\(",p.source,",",p.source,",",p.source,",",c.source,"\\)$"].join(a.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",r.source,",",r.source,",",r.source,",",c.source,"\\)$"].join(a.source),"i"),HSL:new RegExp(["^hsl\\(",p.source,",",r.source,",",r.source,"\\)$"].join(a.source),"i"),HSLA:new RegExp(["^hsla\\(",p.source,",",r.source,",",r.source,",",c.source,"\\)$"].join(a.source),"i"),HSB:new RegExp(["^hsb\\(",p.source,",",r.source,",",r.source,"\\)$"].join(a.source),"i"),HSBA:new RegExp(["^hsba\\(",p.source,",",r.source,",",r.source,",",c.source,"\\)$"].join(a.source),"i")},p=(l.default.Color=function(){function g(T,O){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(T._colorMode,T._colorMaxes),![d.RGB,d.HSL,d.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=g._parseInputs.apply(this,O),this._calculateLevels()}var S,P,E;return S=g,E=[{key:"_parseInputs",value:function(T,O,R,k){var D,L=arguments.length,U=this.mode,F=this.maxes[U],V=[];if(3<=L){for(V[0]=T/F[0],V[1]=O/F[1],V[2]=R/F[2],V[3]=typeof k=="number"?k/F[3]:1,D=V.length-1;0<=D;--D){var X=V[D];X<0?V[D]=0:1<X&&(V[D]=1)}return U===d.HSL?v.default._hslaToRGBA(V):U===d.HSB?v.default._hsbaToRGBA(V):V}if(L===1&&typeof T=="string"){if(R=T.trim().toLowerCase(),s[R])return g._parseInputs.call(this,s[R]);if(u.HEX3.test(R))return(V=u.HEX3.exec(R).slice(1).map(function(H){return parseInt(H+H,16)/255}))[3]=1,V;if(u.HEX6.test(R))return(V=u.HEX6.exec(R).slice(1).map(function(H){return parseInt(H,16)/255}))[3]=1,V;if(u.HEX4.test(R))return V=u.HEX4.exec(R).slice(1).map(function(H){return parseInt(H+H,16)/255});if(u.HEX8.test(R))return V=u.HEX8.exec(R).slice(1).map(function(H){return parseInt(H,16)/255});if(u.RGB.test(R))return(V=u.RGB.exec(R).slice(1).map(function(H){return H/255}))[3]=1,V;if(u.RGB_PERCENT.test(R))return(V=u.RGB_PERCENT.exec(R).slice(1).map(function(H){return parseFloat(H)/100}))[3]=1,V;if(u.RGBA.test(R))return V=u.RGBA.exec(R).slice(1).map(function(H,G){return G===3?parseFloat(H):H/255});if(u.RGBA_PERCENT.test(R))return V=u.RGBA_PERCENT.exec(R).slice(1).map(function(H,G){return G===3?parseFloat(H):parseFloat(H)/100});if(u.HSL.test(R)?(V=u.HSL.exec(R).slice(1).map(function(H,G){return G===0?parseInt(H,10)/360:parseInt(H,10)/100}))[3]=1:u.HSLA.test(R)&&(V=u.HSLA.exec(R).slice(1).map(function(H,G){return G===0?parseInt(H,10)/360:G===3?parseFloat(H):parseInt(H,10)/100})),(V=V.map(function(H){return Math.max(Math.min(H,1),0)})).length)return v.default._hslaToRGBA(V);if(u.HSB.test(R)?(V=u.HSB.exec(R).slice(1).map(function(H,G){return G===0?parseInt(H,10)/360:parseInt(H,10)/100}))[3]=1:u.HSBA.test(R)&&(V=u.HSBA.exec(R).slice(1).map(function(H,G){return G===0?parseInt(H,10)/360:G===3?parseFloat(H):parseInt(H,10)/100})),V.length){for(D=V.length-1;0<=D;--D)V[D]=Math.max(Math.min(V[D],1),0);return v.default._hsbaToRGBA(V)}V=[1,1,1,1]}else{if(L!==1&&L!==2||typeof T!="number")throw new Error("".concat(arguments,"is not a valid color representation."));V[0]=T/F[2],V[1]=T/F[2],V[2]=T/F[2],V[3]=typeof O=="number"?O/F[3]:1,V=V.map(function(H){return Math.max(Math.min(H,1),0)})}return V}}],(P=[{key:"toString",value:function(T){var O=this.levels,R=this._array,k=R[3];switch(T){case"#rrggbb":return"#".concat(O[0]<16?"0".concat(O[0].toString(16)):O[0].toString(16),O[1]<16?"0".concat(O[1].toString(16)):O[1].toString(16),O[2]<16?"0".concat(O[2].toString(16)):O[2].toString(16));case"#rrggbbaa":return"#".concat(O[0]<16?"0".concat(O[0].toString(16)):O[0].toString(16),O[1]<16?"0".concat(O[1].toString(16)):O[1].toString(16),O[2]<16?"0".concat(O[2].toString(16)):O[2].toString(16),O[3]<16?"0".concat(O[3].toString(16)):O[3].toString(16));case"#rgb":return"#".concat(Math.round(15*R[0]).toString(16),Math.round(15*R[1]).toString(16),Math.round(15*R[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*R[0]).toString(16),Math.round(15*R[1]).toString(16),Math.round(15*R[2]).toString(16),Math.round(15*R[3]).toString(16));case"rgb":return"rgb(".concat(O[0],", ",O[1],", ",O[2],")");case"rgb%":return"rgb(".concat((100*R[0]).toPrecision(3),"%, ",(100*R[1]).toPrecision(3),"%, ",(100*R[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*R[0]).toPrecision(3),"%, ",(100*R[1]).toPrecision(3),"%, ",(100*R[2]).toPrecision(3),"%, ",(100*R[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=v.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[d.HSB][0],", ",this.hsba[1]*this.maxes[d.HSB][1],", ",this.hsba[2]*this.maxes[d.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=v.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=v.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[d.HSB][0],", ",this.hsba[1]*this.maxes[d.HSB][1],", ",this.hsba[2]*this.maxes[d.HSB][2],", ",k,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=v.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=v.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[d.HSL][0],", ",this.hsla[1]*this.maxes[d.HSL][1],", ",this.hsla[2]*this.maxes[d.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=v.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=v.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[d.HSL][0],", ",this.hsla[1]*this.maxes[d.HSL][1],", ",this.hsla[2]*this.maxes[d.HSL][2],", ",k,")");case"hsla%":return this.hsla||(this.hsla=v.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");default:return"rgba(".concat(O[0],",",O[1],",",O[2],",",k,")")}}},{key:"setRed",value:function(T){this._array[0]=T/this.maxes[d.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(T){this._array[1]=T/this.maxes[d.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(T){this._array[2]=T/this.maxes[d.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(T){this._array[3]=T/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var T=this._array,O=this.levels=new Array(T.length),R=T.length-1;0<=R;--R)O[R]=Math.round(255*T[R]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(T,O){this.mode=T,this.maxes=O}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[d.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=v.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[d.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[d.RGB][1]}},{key:"_getHue",value:function(){return this.mode===d.HSB?(this.hsba||(this.hsba=v.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[d.HSB][0]):(this.hsla||(this.hsla=v.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[d.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=v.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[d.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[d.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===d.HSB?(this.hsba||(this.hsba=v.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[d.HSB][1]):(this.hsla||(this.hsla=v.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[d.HSL][1])}}])&&i(S.prototype,P),E&&i(S,E),g}(),l.default.Color);j.default=p},{"../core/constants":269,"../core/main":280,"./color_conversion":265,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],268:[function(t,M,j){function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(n)}function y(n){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(i){return h(i)}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":h(i)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.fill"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(m=t("../core/main"))&&m.__esModule?m:{default:m},d=function(n){if(n&&n.__esModule)return n;if(n===null||y(n)!=="object"&&typeof n!="function")return{default:n};var i=v();if(i&&i.has(n))return i.get(n);var s,a={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in n){var r;Object.prototype.hasOwnProperty.call(n,s)&&((r=c?Object.getOwnPropertyDescriptor(n,s):null)&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=n[s])}return a.default=n,i&&i.set(n,a),a}(t("../core/constants"));function v(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,v=function(){return n},n)}t("./p5.Color"),l.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},l.default.prototype.endClip=function(){this._renderer.endClip()},l.default.prototype.clip=function(n,i){this._renderer.beginClip(i),n(),this._renderer.endClip(i)},l.default.prototype.background=function(){var n;return(n=this._renderer).background.apply(n,arguments),this},l.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},l.default.prototype.colorMode=function(n,i,s,a,c){return l.default._validateParameters("colorMode",arguments),n!==d.RGB&&n!==d.HSB&&n!==d.HSL||(this._colorMode=n,n=this._colorMaxes[n],arguments.length===2?(n[0]=i,n[1]=i,n[2]=i,n[3]=i):arguments.length===4?(n[0]=i,n[1]=s,n[2]=a):arguments.length===5&&(n[0]=i,n[1]=s,n[2]=a,n[3]=c)),this},l.default.prototype.fill=function(){var n;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(n=this._renderer).fill.apply(n,arguments),this},l.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},l.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},l.default.prototype.stroke=function(){var n;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(n=this._renderer).stroke.apply(n,arguments),this},l.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},l.default.prototype.noErase=function(){return this._renderer.noErase(),this};var m=l.default;j.default=m},{"../core/constants":269,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],269:[function(t,M,j){Object.defineProperty(j,"__esModule",{value:!0}),j.QUADRATIC=j.LINEAR=j._CTX_MIDDLE=j._DEFAULT_LEADMULT=j._DEFAULT_TEXT_FILL=j.WORD=j.CHAR=j.BOLDITALIC=j.BOLD=j.ITALIC=j.NORMAL=j.BLUR=j.ERODE=j.DILATE=j.POSTERIZE=j.INVERT=j.OPAQUE=j.GRAY=j.THRESHOLD=j.BURN=j.DODGE=j.SOFT_LIGHT=j.HARD_LIGHT=j.OVERLAY=j.REPLACE=j.SCREEN=j.MULTIPLY=j.EXCLUSION=j.SUBTRACT=j.DIFFERENCE=j.LIGHTEST=j.DARKEST=j.ADD=j.REMOVE=j.BLEND=j.UP_ARROW=j.TAB=j.SHIFT=j.RIGHT_ARROW=j.RETURN=j.OPTION=j.LEFT_ARROW=j.ESCAPE=j.ENTER=j.DOWN_ARROW=j.DELETE=j.CONTROL=j.BACKSPACE=j.ALT=j.AUTO=j.HSL=j.HSB=j.RGB=j.MITER=j.BEVEL=j.ROUND=j.SQUARE=j.PROJECT=j.PIE=j.CHORD=j.OPEN=j.CLOSE=j.TESS=j.QUAD_STRIP=j.QUADS=j.TRIANGLE_STRIP=j.TRIANGLE_FAN=j.TRIANGLES=j.LINE_LOOP=j.LINE_STRIP=j.LINES=j.POINTS=j.BASELINE=j.BOTTOM=j.TOP=j.CENTER=j.LEFT=j.RIGHT=j.RADIUS=j.CORNERS=j.CORNER=j.RAD_TO_DEG=j.DEG_TO_RAD=j.RADIANS=j.DEGREES=j.TWO_PI=j.TAU=j.QUARTER_PI=j.PI=j.HALF_PI=j.WAIT=j.TEXT=j.MOVE=j.HAND=j.CROSS=j.ARROW=j.WEBGL2=j.WEBGL=j.P2D=j.VERSION=void 0,j.RGBA=j.HALF_FLOAT=j.FLOAT=j.UNSIGNED_INT=j.UNSIGNED_BYTE=j.COVER=j.CONTAIN=j.FALLBACK=j.LABEL=j.AXES=j.GRID=j._DEFAULT_FILL=j._DEFAULT_STROKE=j.PORTRAIT=j.LANDSCAPE=j.SMOOTH=j.FLAT=j.MIRROR=j.CLAMP=j.REPEAT=j.NEAREST=j.IMAGE=j.IMMEDIATE=j.TEXTURE=j.FILL=j.STROKE=j.CURVE=j.BEZIER=void 0;var h=Math.PI,y=(j.VERSION="1.9.1",j.P2D="p2d",j.WEBGL="webgl",j.WEBGL2="webgl2",j.ARROW="default",j.CROSS="crosshair",j.HAND="pointer",j.MOVE="move",j.TEXT="text",j.WAIT="wait",h/2),y=(j.HALF_PI=y,h),y=(j.PI=y,h/4),y=(j.QUARTER_PI=y,2*h),y=(j.TAU=y,2*h),y=(j.TWO_PI=y,j.DEGREES="degrees",j.RADIANS="radians",h/180),y=(j.DEG_TO_RAD=y,180/h);j.RAD_TO_DEG=y,j.CORNER="corner",j.CORNERS="corners",j.RADIUS="radius",j.RIGHT="right",j.LEFT="left",j.CENTER="center",j.TOP="top",j.BOTTOM="bottom",j.BASELINE="alphabetic",j.POINTS=0,j.LINES=1,j.LINE_STRIP=3,j.LINE_LOOP=2,j.TRIANGLES=4,j.TRIANGLE_FAN=6,j.TRIANGLE_STRIP=5,j.QUADS="quads",j.QUAD_STRIP="quad_strip",j.TESS="tess",j.CLOSE="close",j.OPEN="open",j.CHORD="chord",j.PIE="pie",j.PROJECT="square",j.SQUARE="butt",j.ROUND="round",j.BEVEL="bevel",j.MITER="miter",j.RGB="rgb",j.HSB="hsb",j.HSL="hsl",j.AUTO="auto",j.ALT=18,j.BACKSPACE=8,j.CONTROL=17,j.DELETE=46,j.DOWN_ARROW=40,j.ENTER=13,j.ESCAPE=27,j.LEFT_ARROW=37,j.OPTION=18,j.RETURN=13,j.RIGHT_ARROW=39,j.SHIFT=16,j.TAB=9,j.UP_ARROW=38,j.BLEND="source-over",j.REMOVE="destination-out",j.ADD="lighter",j.DARKEST="darken",j.LIGHTEST="lighten",j.DIFFERENCE="difference",j.SUBTRACT="subtract",j.EXCLUSION="exclusion",j.MULTIPLY="multiply",j.SCREEN="screen",j.REPLACE="copy",j.OVERLAY="overlay",j.HARD_LIGHT="hard-light",j.SOFT_LIGHT="soft-light",j.DODGE="color-dodge",j.BURN="color-burn",j.THRESHOLD="threshold",j.GRAY="gray",j.OPAQUE="opaque",j.INVERT="invert",j.POSTERIZE="posterize",j.DILATE="dilate",j.ERODE="erode",j.BLUR="blur",j.NORMAL="normal",j.ITALIC="italic",j.BOLD="bold",j.BOLDITALIC="bold italic",j.CHAR="CHAR",j.WORD="WORD",j._DEFAULT_TEXT_FILL="#000000",j._DEFAULT_LEADMULT=1.25,j._CTX_MIDDLE="middle",j.LINEAR="linear",j.QUADRATIC="quadratic",j.BEZIER="bezier",j.CURVE="curve",j.STROKE="stroke",j.FILL="fill",j.TEXTURE="texture",j.IMMEDIATE="immediate",j.IMAGE="image",j.NEAREST="nearest",j.REPEAT="repeat",j.CLAMP="clamp",j.MIRROR="mirror",j.FLAT="flat",j.SMOOTH="smooth",j.LANDSCAPE="landscape",j.PORTRAIT="portrait",j._DEFAULT_STROKE="#000000",j._DEFAULT_FILL="#FFFFFF",j.GRID="grid",j.AXES="axes",j.LABEL="label",j.FALLBACK="fallback",j.CONTAIN="contain",j.COVER="cover",j.UNSIGNED_BYTE="unsigned-byte",j.UNSIGNED_INT="unsigned-int",j.FLOAT="float",j.HALF_FLOAT="half-float",j.RGBA="rgba"},{}],270:[function(t,M,j){function h(c){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(c)}function y(c){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(r){return h(r)}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":h(r)})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(d=t("./main"))&&d.__esModule?d:{default:d},d=function(c){if(c&&c.__esModule)return c;if(c===null||y(c)!=="object"&&typeof c!="function")return{default:c};var r=v();if(r&&r.has(c))return r.get(c);var u,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in c){var S;Object.prototype.hasOwnProperty.call(c,u)&&((S=g?Object.getOwnPropertyDescriptor(c,u):null)&&(S.get||S.set)?Object.defineProperty(p,u,S):p[u]=c[u])}return p.default=c,r&&r.set(c,p),p}(t("./constants"));function v(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,v=function(){return c},c)}var m=[d.ARROW,d.CROSS,d.HAND,d.MOVE,d.TEXT,d.WAIT],n=(l.default.prototype._frameRate=0,l.default.prototype._lastFrameTime=window.performance.now(),l.default.prototype._targetFrameRate=60,window.print),i=!1;function s(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function a(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}l.default.prototype.print=function(){var c;arguments.length?(c=console).log.apply(c,arguments):i||(n(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(i=!0))},l.default.prototype.frameCount=0,l.default.prototype.deltaTime=0,l.default.prototype.focused=document.hasFocus(),l.default.prototype.cursor=function(c,r,u){var p,g="auto",S=this._curElement.elt;m.includes(c)?g=c:typeof c=="string"&&(p="",r&&u&&typeof r=="number"&&typeof u=="number"&&(p="".concat(r," ").concat(u)),g=c.substring(0,7)==="http://"||c.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(c)?"url(".concat(c,") ").concat(p,", auto"):c),S.style.cursor=g},l.default.prototype.frameRate=function(c){return l.default._validateParameters("frameRate",arguments),typeof c!="number"||c<0?this._frameRate:(this._setProperty("_targetFrameRate",c),c===0&&this._setProperty("_frameRate",c),this)},l.default.prototype.getFrameRate=function(){return this.frameRate()},l.default.prototype.setFrameRate=function(c){return this.frameRate(c)},l.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},l.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},l.default.prototype.webglVersion=d.P2D,l.default.prototype.displayWidth=screen.width,l.default.prototype.displayHeight=screen.height,l.default.prototype.windowWidth=s(),l.default.prototype.windowHeight=a(),l.default.prototype._onresize=function(c){this._setProperty("windowWidth",s()),this._setProperty("windowHeight",a());var r=this._isGlobal?window:this;typeof r.windowResized!="function"||(r=r.windowResized(c))===void 0||r||c.preventDefault()},l.default.prototype.width=0,l.default.prototype.height=0,l.default.prototype.fullscreen=function(c){if(l.default._validateParameters("fullscreen",arguments),c===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(c){if(c=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");c.requestFullscreen?c.requestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullscreen?c.webkitRequestFullscreen():c.msRequestFullscreen&&c.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},l.default.prototype.pixelDensity=function(c){var r;return l.default._validateParameters("pixelDensity",arguments),typeof c=="number"?(c!==this._pixelDensity&&(this._pixelDensity=c),(r=this).resizeCanvas(this.width,this.height,!0)):r=this._pixelDensity,r},l.default.prototype.displayDensity=function(){return window.devicePixelRatio},l.default.prototype.getURL=function(){return location.href},l.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(c){return c!==""})},l.default.prototype.getURLParams=function(){for(var c,r=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,u={};(c=r.exec(location.search))!=null;)c.index===r.lastIndex&&r.lastIndex++,u[c[1]]=c[2];return u},t=l.default,j.default=t},{"./constants":269,"./main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.search":202,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],271:[function(t,M,j){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(m=t("../main"))&&m.__esModule?m:{default:m};t("../internationalization");function y(n,i){i=i||console.log.bind(console),l||v(),l.some(function(s){var a;if(n.message&&n.message.match("\\W?".concat(s.name,"\\W"))!==null)return a=s.type==="function"?"".concat(s.name,"()"):s.name,i("Did you just try to use p5.js's ".concat(a," ").concat(s.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(d)),!0})}var l=null,v=null,d=(h.default._friendlyError=h.default._checkForUserDefinedFunctions=h.default._fesErrorMonitor=function(){},l=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),v=function(){function n(s){return Object.getOwnPropertyNames(s).filter(function(a){return a[0]!=="_"&&!(a in i)&&(i[a]=!0)}).map(function(a){var c=typeof s[a]=="function"?"function":a===a.toUpperCase()?"constant":"variable";return{name:a,type:c}})}var i={};(l=[].concat(n(h.default.prototype),n(t("../constants")))).sort(function(s,a){return a.name.length-s.name.length})},m=(h.default.prototype._helpForMisusedAtTopLevelCode=y,document.readyState!=="complete"&&(window.addEventListener("error",y,!1),window.addEventListener("load",function(){window.removeEventListener("error",y,!1)})),h.default);j.default=m},{"../constants":269,"../internationalization":278,"../main":280,"./browser_errors":void 0,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.starts-with":204,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],272:[function(t,M,j){Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(h=t("../main"))&&h.__esModule?h:{default:h};t("../internationalization"),h.default._friendlyFileLoadError=function(){},t=h.default,j.default=t},{"../internationalization":278,"../main":280}],273:[function(t,M,j){function h(i){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(i)}function y(i){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(s){return h(s)}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":h(s)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=m(t("../main"));t("../internationalization"),v(t("../constants"));function d(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,d=function(){return i},i)}function v(i){if(i&&i.__esModule)return i;if(i===null||y(i)!=="object"&&typeof i!="function")return{default:i};var s=d();if(s&&s.has(i))return s.get(i);var a,c,r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&((c=u?Object.getOwnPropertyDescriptor(i,a):null)&&(c.get||c.set)?Object.defineProperty(r,a,c):r[a]=i[a]);return r.default=i,s&&s.set(i,r),r}function m(i){return i&&i.__esModule?i:{default:i}}l.default._fesCodeReader=function(){};var n=l.default;j.default=n},{"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],274:[function(t,M,j){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,t=(t=t("../main"))&&t.__esModule?t:{default:t};function h(){var y=/(^|@)\S+:\d+/,l=/^\s*at .*(\S+:\d+|\(native\))/m,d=/^(eval@)?(\[native code])?$/;return{parse:function(v){return v.stacktrace!==void 0||v["opera#sourceloc"]!==void 0?this.parseOpera(v):v.stack&&v.stack.match(l)?this.parseV8OrIE(v):v.stack?this.parseFFOrSafari(v):void 0},extractLocation:function(v){return v.indexOf(":")===-1?[v]:[(v=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(v.replace(/[()]/g,"")))[1],v[2]||void 0,v[3]||void 0]},parseV8OrIE:function(v){return v.stack.split(`
`).filter(function(m){return!!m.match(l)},this).map(function(m){var n=(m=-1<m.indexOf("(eval ")?m.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):m).replace(/^\s+/,"").replace(/\(eval code/g,"("),i=n.match(/ (\((.+):(\d+):(\d+)\)$)/),n=(n=i?n.replace(i[0],""):n).split(/\s+/).slice(1),i=this.extractLocation(i?i[1]:n.pop());return{functionName:n.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(i[0])?void 0:i[0],lineNumber:i[1],columnNumber:i[2],source:m}},this)},parseFFOrSafari:function(v){return v.stack.split(`
`).filter(function(m){return!m.match(d)},this).map(function(m){var n,i;return(m=-1<m.indexOf(" > eval")?m.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):m).indexOf("@")===-1&&m.indexOf(":")===-1?{functionName:m}:{functionName:(i=m.match(n=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&i[1]?i[1]:void 0,fileName:(i=this.extractLocation(m.replace(n,"")))[0],lineNumber:i[1],columnNumber:i[2],source:m}},this)},parseOpera:function(v){return!v.stacktrace||-1<v.message.indexOf(`
`)&&v.message.split(`
`).length>v.stacktrace.split(`
`).length?this.parseOpera9(v):v.stack?this.parseOpera11(v):this.parseOpera10(v)},parseOpera9:function(v){for(var m=/Line (\d+).*script (?:in )?(\S+)/i,n=v.message.split(`
`),i=[],s=2,a=n.length;s<a;s+=2){var c=m.exec(n[s]);c&&i.push({fileName:c[2],lineNumber:c[1],source:n[s]})}return i},parseOpera10:function(v){for(var m=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=v.stacktrace.split(`
`),i=[],s=0,a=n.length;s<a;s+=2){var c=m.exec(n[s]);c&&i.push({functionName:c[3]||void 0,fileName:c[2],lineNumber:c[1],source:n[s]})}return i},parseOpera11:function(v){return v.stack.split(`
`).filter(function(m){return!!m.match(y)&&!m.match(/^Error created at/)},this).map(function(m){var n,s=m.split("@"),i=this.extractLocation(s.pop()),s=s.shift()||"";return{functionName:s.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(n=s.match(/\(([^)]*)\)/)?s.replace(/^[^(]+\(([^)]*)\)$/,"$1"):n)===void 0||n==="[arguments not available]"?void 0:n.split(","),fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:m}},this)}}}t.default._getErrorStackParser=function(){return new h},t=t.default,j.default=t},{"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],275:[function(t,M,j){function h(v){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var y=(y=t("../main"))&&y.__esModule?y:{default:y};(function(v){if(!(v&&v.__esModule)&&!(v===null||d(v)!=="object"&&typeof v!="function")){var m=l();if(m&&m.has(v))return m.get(v);var n,i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in v){var a;Object.prototype.hasOwnProperty.call(v,n)&&((a=s?Object.getOwnPropertyDescriptor(v,n):null)&&(a.get||a.set)?Object.defineProperty(i,n,a):i[n]=v[n])}i.default=v,m&&m.set(v,i)}})(t("../constants")),t("../internationalization");function l(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,l=function(){return v},v)}function d(v){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(m){return h(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":h(m)})(v)}y.default._validateParameters=y.default._clearValidateParamsCache=function(){},t=y.default,j.default=t},{"../../../docs/parameterData.json":void 0,"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],276:[function(t,M,j){function h(v){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(v)}function y(v){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(m){return h(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":h(m)})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=function(v){if(v&&v.__esModule)return v;if(v===null||y(v)!=="object"&&typeof v!="function")return{default:v};var m=d();if(m&&m.has(v))return m.get(v);var n,i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in v){var a;Object.prototype.hasOwnProperty.call(v,n)&&((a=s?Object.getOwnPropertyDescriptor(v,n):null)&&(a.get||a.set)?Object.defineProperty(i,n,a):i[n]=v[n])}return i.default=v,m&&m.set(v,i),i}(t("./constants"));function d(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,d=function(){return v},v)}j.default={modeAdjust:function(v,m,n,i,s){return s===l.CORNER?{x:v,y:m,w:n,h:i}:s===l.CORNERS?{x:v,y:m,w:n-v,h:i-m}:s===l.RADIUS?{x:v-n,y:m-i,w:2*n,h:2*i}:s===l.CENTER?{x:v-.5*n,y:m-.5*i,w:n,h:i}:void 0}}},{"./constants":269,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],277:[function(t,M,j){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var h=(y=t("../core/main"))&&y.__esModule?y:{default:y};t("./internationalization");var y=Promise.resolve();Promise.all([new Promise(function(l,d){document.readyState==="complete"?l():window.addEventListener("load",l,!1)}),y]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!h.default.instance&&new h.default})},{"../core/main":280,"./internationalization":278,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/web.dom-collections.iterator":243}],278:[function(t,M,j){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.setTranslatorLanguage=j.currentTranslatorLanguage=j.availableTranslatorLanguages=j.initialize=j.translator=void 0;var h,y,l=v(t("i18next")),d=v(t("i18next-browser-languagedetector"));function v(i){return i&&i.__esModule?i:{default:i}}function m(i,s){for(var a=0;a<s.length;a++){var c=s[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}var n=function(){function i(c,r){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.init(c,r)}var s,a;return s=i,(a=[{key:"fetchWithTimeout",value:function(c,r){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(c,r),new Promise(function(p,g){return setTimeout(function(){return g(new Error("timeout"))},u)})])}},{key:"init",value:function(c){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=c,this.options=r}},{key:"read",value:function(c,r,u){var p=this.options.loadPath;c===this.options.fallback?u(null,h[c][r]):y.includes(c)?(p=this.services.interpolator.interpolate(p,{lng:c,ns:r}),this.loadUrl(p,u)):u("Not found",!1)}},{key:"loadUrl",value:function(c,r){this.fetchWithTimeout(c).then(function(u){if(u.ok)return u.json();throw new Error("failed loading ".concat(c))},function(){throw new Error("failed loading ".concat(c))}).then(function(u){return r(null,u)}).catch(r)}}])&&m(s.prototype,a),i}();n.type="backend",j.translator=function(i,s){console.debug("p5.js translator called before translations were loaded"),l.default.t(i,s)},j.initialize=function(){return l.default.use(d.default).use(n).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:h}).then(function(i){j.translator=i},function(i){return console.debug("Translations failed to load (".concat(i,")"))})},j.availableTranslatorLanguages=function(){return l.default.languages},j.currentTranslatorLanguage=function(i){return l.default.language},j.setTranslatorLanguage=function(i){return l.default.changeLanguage(i||void 0,function(s){return console.debug("Translations failed to load (".concat(s,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243,i18next:3,"i18next-browser-languagedetector":3}],279:[function(t,M,j){Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},t.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},t.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},t.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},t=t.default,j.default=t},{"./main":280}],280:[function(t,M,j){function h(i){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(i)}function y(i){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(s){return h(s)}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":h(s)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,t("./shim");var l=function(i){if(i&&i.__esModule)return i;if(i===null||y(i)!=="object"&&typeof i!="function")return{default:i};var s=d();if(s&&s.has(i))return s.get(i);var a,c={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in i){var u;Object.prototype.hasOwnProperty.call(i,a)&&((u=r?Object.getOwnPropertyDescriptor(i,a):null)&&(u.get||u.set)?Object.defineProperty(c,a,u):c[a]=i[a])}return c.default=i,s&&s.set(i,c),c}(t("./constants"));function d(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,d=function(){return i},i)}function v(i,s){for(var a=0;a<s.length;a++){var c=s[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}var m,n=function(){function i(c,p){var u=this;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=p,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var p=Object.getOwnPropertyNames(i.prototype._registeredMethods),g=!0,S=!1,P=void 0;try{for(var E,T=p[Symbol.iterator]();!(g=(E=T.next()).done);g=!0){var O=E.value;this._registeredMethods[O]=i.prototype._registeredMethods[O].slice()}}catch(H){S=!0,P=H}finally{try{g||T.return==null||T.return()}finally{if(S)throw P}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),i.prototype.callRegisteredHooksFor=function(H){var G=this||i.prototype,K=this._isGlobal?window:this;if(G._registeredMethods.hasOwnProperty(H)){var G=G._registeredMethods[H],Z=!0,H=!1,oe=void 0;try{for(var x,I=G[Symbol.iterator]();!(Z=(x=I.next()).done);Z=!0){var B=x.value;typeof B=="function"&&B.call(K)}}catch(te){H=!0,oe=te}finally{try{Z||I.return==null||I.return()}finally{if(H)throw oe}}}},this._start=function(){u._userNode&&typeof u._userNode=="string"&&(u._userNode=document.getElementById(u._userNode));var H=u._isGlobal?window:u;if(H.preload){u.callRegisteredHooksFor("beforePreload");var G,K=document.getElementById(u._loadingScreenId),Z=(K||((K=document.createElement("div")).innerHTML="Loading...",K.style.position="absolute",K.id=u._loadingScreenId,(u._userNode||document.body).appendChild(K)),u._preloadMethods);for(G in Z){Z[G]=Z[G]||i;var oe=Z[G];oe!==i.prototype&&oe!==i||(u._isGlobal&&(window[G]=u._wrapPreload(u,G)),oe=u),u._registeredPreloadMethods[G]=oe[G],oe[G]=u._wrapPreload(oe,G)}H.preload(),u._runIfPreloadsAreDone()}else u._setup(),u._recording||u._draw()},this._runIfPreloadsAreDone=function(){var H,G=this._isGlobal?window:this;G._preloadCount===0&&((H=document.getElementById(G._loadingScreenId))&&H.parentNode.removeChild(H),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),G._setup(),this._recording||G._draw()))},this._decrementPreload=function(){var H=this._isGlobal?window:this;H._preloadDone||typeof H.preload!="function"||(H._setProperty("_preloadCount",H._preloadCount-1),H._runIfPreloadsAreDone())},this._wrapPreload=function(H,G){var K=this;return function(){K._incrementPreload();for(var Z=arguments.length,oe=new Array(Z),x=0;x<Z;x++)oe[x]=arguments[x];return K._registeredPreloadMethods[G].apply(H,oe)}},this._incrementPreload=function(){var H=this._isGlobal?window:this;H._preloadDone||H._setProperty("_preloadCount",H._preloadCount+1)},this._setup=function(){u.callRegisteredHooksFor("beforeSetup"),u.createCanvas(u._defaultCanvasSize.width,u._defaultCanvasSize.height,"p2d");var H=u._isGlobal?window:u;if(typeof H.preload=="function")for(var G in u._preloadMethods)H[G]=u._preloadMethods[G][G],H[G]&&u&&(H[G]=H[G].bind(u));u._millisStart=window.performance.now(),H._preloadDone=!0,typeof H.setup=="function"&&H.setup();var K=document.getElementsByTagName("canvas"),Z=!0,oe=!1,x=void 0;try{for(var I,B=K[Symbol.iterator]();!(Z=(I=B.next()).done);Z=!0){var W=I.value;W.dataset.hidden==="true"&&(W.style.visibility="",delete W.dataset.hidden)}}catch($){oe=!0,x=$}finally{try{Z||B.return==null||B.return()}finally{if(oe)throw x}}u._lastTargetFrameTime=window.performance.now(),u._lastRealFrameTime=window.performance.now(),u._setupDone=!0,(u._accessibleOutputs.grid||u._accessibleOutputs.text)&&u._updateAccsOutput(),u.callRegisteredHooksFor("afterSetup")},this._draw=function(){var H=window.performance.now(),G=H-u._lastTargetFrameTime,K=1e3/u._targetFrameRate;(!u._loop||K-5<=G)&&(u.deltaTime=H-u._lastRealFrameTime,u._setProperty("deltaTime",u.deltaTime),u._frameRate=1e3/u.deltaTime,u.redraw(),u._lastTargetFrameTime=Math.max(u._lastTargetFrameTime+K,H),u._lastRealFrameTime=H,u._updateMouseCoords!==void 0&&(u._updateMouseCoords(),u._setProperty("movedX",0),u._setProperty("movedY",0))),u._loop&&(u._requestAnimId=window.requestAnimationFrame(u._draw))},this._setProperty=function(H,G){u[H]=G,u._isGlobal&&(window[H]=G)},this.remove=function(){u._startListener&&window.removeEventListener("load",u._startListener,!1);var H=document.getElementById(u._loadingScreenId);if(H&&(H.parentNode.removeChild(H),u._incrementPreload()),u._curElement){for(var G in u._loop=!1,u._requestAnimId&&window.cancelAnimationFrame(u._requestAnimId),u._events)window.removeEventListener(G,u._events[G]);var K=!0,H=!1,Z=void 0;try{for(var oe,x=u._elements[Symbol.iterator]();!(K=(oe=x.next()).done);K=!0){var I,B=oe.value;for(I in B.elt&&B.elt.parentNode&&B.elt.parentNode.removeChild(B.elt),B._events)B.elt.removeEventListener(I,B._events[I])}}catch(de){H=!0,Z=de}finally{try{K||x.return==null||x.return()}finally{if(H)throw Z}}var W=u;u._registeredMethods.remove.forEach(function(de){de!==void 0&&de.call(W)})}if(u._isGlobal){for(var $ in i.prototype)try{delete window[$]}catch{window[$]=void 0}for(var te in u)if(u.hasOwnProperty(te))try{delete window[te]}catch{window[te]=void 0}i.instance=null}},this._registeredMethods.init.forEach(function(H){H!==void 0&&H.call(this)},this),this._setupPromisePreloads();var R,k,D=this._createFriendlyGlobalFunctionBinder();if(c)c(this),i._checkForUserDefinedFunctions(this);else{for(var L in this._isGlobal=!0,i.instance=this,i.prototype)typeof i.prototype[L]=="function"?(R=L.substring(2),this._events.hasOwnProperty(R)||(Math.hasOwnProperty(L)&&Math[L]===i.prototype[L]?D(L,i.prototype[L]):D(L,i.prototype[L].bind(this)))):D(L,i.prototype[L]);for(var U in this)this.hasOwnProperty(U)&&D(U,this[U])}for(k in this._events){var F=this["_on".concat(k)];F&&(F=F.bind(this),window.addEventListener(k,F,{passive:!1}),this._events[k]=F)}function V(){u._setProperty("focused",!0)}function X(){u._setProperty("focused",!1)}window.addEventListener("focus",V),window.addEventListener("blur",X),this.registerMethod("remove",function(){window.removeEventListener("focus",V),window.removeEventListener("blur",X)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var s,a;return s=i,(a=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=l.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(c,r){i.prototype._preloadMethods.hasOwnProperty(c)||(i.prototype._preloadMethods[c]=r)}},{key:"registerMethod",value:function(c,r){var u=this||i.prototype;u._registeredMethods.hasOwnProperty(c)||(u._registeredMethods[c]=[]),u._registeredMethods[c].push(r)}},{key:"unregisterMethod",value:function(c,r){var u=this||i.prototype;if(u._registeredMethods.hasOwnProperty(c)){for(var p=u._registeredMethods[c],g=[],S=0;S<p.length;S++)p[S]===r&&g.push(S);for(var P=g.length-1;0<=P;P--)p.splice(g[P],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},r=c.globalObject||window;return c.log||console.log.bind(console),function(u,p){i.disableFriendlyErrors,r[u]=p}}}])&&v(s.prototype,a),i}();for(m in n.instance=null,n.disableFriendlyErrors=!1,l)n.prototype[m]=l[m];n.VERSION=l.VERSION,n.prototype._preloadMethods={loadJSON:n.prototype,loadImage:n.prototype,loadStrings:n.prototype,loadXML:n.prototype,loadBytes:n.prototype,loadTable:n.prototype,loadFont:n.prototype,loadModel:n.prototype,loadShader:n.prototype},n.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},n.prototype._registeredPreloadMethods={},j.default=n},{"./constants":269,"./shim":291,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],281:[function(t,M,j){Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(t=t("./main"))&&t.__esModule?t:{default:t};function y(l,d){for(var v=0;v<d.length;v++){var m=d[v];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}h.default.Element=function(){function l(n,i){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.elt=n,this._pInst=this._pixelsState=i,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var d,v,m;return d=l,m=[{key:"_adjustListener",value:function(n,i,s){return i===!1?h.default.Element._detachListener(n,s):h.default.Element._attachListener(n,i,s),this}},{key:"_attachListener",value:function(n,i,s){s._events[n]&&h.default.Element._detachListener(n,s),i=i.bind(s),s.elt.addEventListener(n,i,!1),s._events[n]=i}},{key:"_detachListener",value:function(n,i){var s=i._events[n];i.elt.removeEventListener(n,s,!1),i._events[n]=null}}],(v=[{key:"parent",value:function(n){return n===void 0?this.elt.parentNode:(typeof n=="string"?(n[0]==="#"&&(n=n.substring(1)),n=document.getElementById(n)):n instanceof h.default.Element&&(n=n.elt),n.appendChild(this.elt),this)}},{key:"id",value:function(n){return n===void 0?this.elt.id:(this.elt.id=n,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(n){return n===void 0?this.elt.className:(this.elt.className=n,this)}},{key:"mousePressed",value:function(n){return h.default.Element._adjustListener("mousedown",function(i){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(i),n.call(this,i)},this),this}},{key:"doubleClicked",value:function(n){return h.default.Element._adjustListener("dblclick",n,this),this}},{key:"mouseWheel",value:function(n){return h.default.Element._adjustListener("wheel",n,this),this}},{key:"mouseReleased",value:function(n){return h.default.Element._adjustListener("mouseup",n,this),this}},{key:"mouseClicked",value:function(n){return h.default.Element._adjustListener("click",n,this),this}},{key:"mouseMoved",value:function(n){return h.default.Element._adjustListener("mousemove",n,this),this}},{key:"mouseOver",value:function(n){return h.default.Element._adjustListener("mouseover",n,this),this}},{key:"mouseOut",value:function(n){return h.default.Element._adjustListener("mouseout",n,this),this}},{key:"touchStarted",value:function(n){return h.default.Element._adjustListener("touchstart",n,this),this}},{key:"touchMoved",value:function(n){return h.default.Element._adjustListener("touchmove",n,this),this}},{key:"touchEnded",value:function(n){return h.default.Element._adjustListener("touchend",n,this),this}},{key:"dragOver",value:function(n){return h.default.Element._adjustListener("dragover",n,this),this}},{key:"dragLeave",value:function(n){return h.default.Element._adjustListener("dragleave",n,this),this}},{key:"_setProperty",value:function(n,i){this[n]=i}}])&&y(d.prototype,v),m&&y(d,m),l}(),t=h.default.Element,j.default=t},{"./main":280}],282:[function(t,M,j){function h(u){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function y(u){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(p){return h(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":h(p)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(r=t("./main"))&&r.__esModule?r:{default:r},d=function(u){if(u&&u.__esModule)return u;if(u===null||y(u)!=="object"&&typeof u!="function")return{default:u};var p=v();if(p&&p.has(u))return p.get(u);var g,S={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in u){var E;Object.prototype.hasOwnProperty.call(u,g)&&((E=P?Object.getOwnPropertyDescriptor(u,g):null)&&(E.get||E.set)?Object.defineProperty(S,g,E):S[g]=u[g])}return S.default=u,p&&p.set(u,S),S}(t("./constants"));function v(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,v=function(){return u},u)}function m(u,p){for(var g=0;g<p.length;g++){var S=p[g];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(u,S.key,S)}}function n(u,p){return(n=Object.setPrototypeOf||function(g,S){return g.__proto__=S,g})(u,p)}function i(u){return function(){var p,g=c(u);return s(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(p=c(this).constructor,Reflect.construct(g,arguments,p)):g.apply(this,arguments))}}function s(u,p){return!p||y(p)!=="object"&&typeof p!="function"?a(u):p}function a(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function c(u){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)})(u)}l.default.Graphics=function(u){var p=S;if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(u&&u.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),u&&n(p,u);var g=i(S);function S(P,E,U,O,R){var k;if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");L=R||document.createElement("canvas"),(k=g.call(this,L,O)).canvas=L;var D,L=U||d.P2D,U=O._userNode||document.body;for(D in R||U.appendChild(k.canvas),l.default.prototype)k[D]||(typeof l.default.prototype[D]=="function"?k[D]=l.default.prototype[D].bind(a(k)):k[D]=l.default.prototype[D]);return l.default.prototype._initializeInstanceVariables.apply(a(k)),k.width=P,k.height=E,k._pixelDensity=O._pixelDensity,L===d.WEBGL?k._renderer=new l.default.RendererGL(k.canvas,a(k),!1):k._renderer=new l.default.Renderer2D(k.canvas,a(k),!1),O._elements.push(a(k)),Object.defineProperty(a(k),"deltaTime",{get:function(){return this._pInst.deltaTime}}),k._renderer.resize(P,E),k._renderer._applyDefaults(),s(k,a(k))}return p=S,(u=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var P,E=this._pInst._elements.indexOf(this);for(P in E!==-1&&this._pInst._elements.splice(E,1),this._events)this.elt.removeEventListener(P,this._events[P])}},{key:"createFramebuffer",value:function(P){return new l.default.Framebuffer(this,P)}}])&&m(p.prototype,u),S}(l.default.Element);var r=l.default.Graphics;j.default=r},{"./constants":269,"./main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],283:[function(t,M,j){function h(u){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var y=(c=t("./main"))&&c.__esModule?c:{default:c},l=function(u){if(u&&u.__esModule)return u;if(u===null||v(u)!=="object"&&typeof u!="function")return{default:u};var p=d();if(p&&p.has(u))return p.get(u);var g,S={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in u){var E;Object.prototype.hasOwnProperty.call(u,g)&&((E=P?Object.getOwnPropertyDescriptor(u,g):null)&&(E.get||E.set)?Object.defineProperty(S,g,E):S[g]=u[g])}return S.default=u,p&&p.set(u,S),S}(t("../core/constants"));function d(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,d=function(){return u},u)}function v(u){return(v=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(p){return h(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":h(p)})(u)}function m(u,p){for(var g=0;g<p.length;g++){var S=p[g];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(u,S.key,S)}}function n(u,p){return(n=Object.setPrototypeOf||function(g,S){return g.__proto__=S,g})(u,p)}function i(u){return function(){var p,g,S=a(u);return p=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(p=a(this).constructor,Reflect.construct(S,arguments,p)):S.apply(this,arguments),S=this,!(g=p)||v(g)!=="object"&&typeof g!="function"?s(S):g}}function s(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function a(u){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)})(u)}var c=function(u){var p=S;if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(u&&u.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),u&&n(p,u);var g=i(S);function S(P,E,T){var O;if(this instanceof S)return(O=g.call(this,P,E)).canvas=P,O._pixelsState=E,T?(O._isMainCanvas=!0,O._pInst._setProperty("_curElement",s(O)),O._pInst._setProperty("canvas",O.canvas),O._pInst._setProperty("width",O.width),O._pInst._setProperty("height",O.height)):(O.canvas.style.display="none",O._styles=[]),O._clipping=!1,O._clipInvert=!1,O._textSize=12,O._textLeading=15,O._textFont="sans-serif",O._textStyle=l.NORMAL,O._textAscent=null,O._textDescent=null,O._textAlign=l.LEFT,O._textBaseline=l.BASELINE,O._textWrap=l.WORD,O._rectMode=l.CORNER,O._ellipseMode=l.CENTER,O._curveTightness=0,O._imageMode=l.CORNER,O._tint=null,O._doStroke=!0,O._doFill=!0,O._strokeSet=!1,O._fillSet=!1,O._leadingSet=!1,O._pushPopDepth=0,O;throw new TypeError("Cannot call a class as a function")}return p=S,(u=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(P){this._pushPopDepth--,P.properties&&Object.assign(this,P.properties)}},{key:"beginClip",value:function(){var P=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=P.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(P,E){this.width=P,this.height=E,this.elt.width=P*this._pInst._pixelDensity,this.elt.height=E*this._pInst._pixelDensity,this.elt.style.width="".concat(P,"px"),this.elt.style.height="".concat(E,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(P,E,T,O){var R=this._pixelsState,k=R._pixelDensity,D=this.canvas;if(P===void 0&&E===void 0)P=E=0,T=R.width,O=R.height;else if(P*=k,E*=k,T===void 0&&O===void 0)return P<0||E<0||P>=D.width||E>=D.height?[0,0,0,0]:this._getPixel(P,E);return R=new y.default.Image(T*k,O*k),R.pixelDensity(k),R.canvas.getContext("2d").drawImage(D,P,E,T*k,O*k,0,0,T*k,O*k),R}},{key:"textLeading",value:function(P){return typeof P=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",P),this._pInst):this._textLeading}},{key:"textStyle",value:function(P){return P?(P!==l.NORMAL&&P!==l.ITALIC&&P!==l.BOLD&&P!==l.BOLDITALIC||this._setProperty("_textStyle",P),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(P,E){return P!==void 0?(this._setProperty("_textAlign",P),E!==void 0&&this._setProperty("_textBaseline",E),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(P){return this._setProperty("_textWrap",P),this._textWrap}},{key:"text",value:function(P,E,T,O,R){var k,D,L,U,F=this._pInst,V=this._textWrap,X=Number.MAX_VALUE,H=T;if((this._doFill||this._doStroke)&&P!==void 0){if(k=(P=(P=typeof P!="string"?P.toString():P).replace(/(\t)/g,"  ")).split(`
`),O!==void 0){switch(this._rectMode===l.CENTER&&(E-=O/2),this._textAlign){case l.CENTER:E+=O/2;break;case l.RIGHT:E+=O}if(R!==void 0){this._rectMode===l.CENTER&&(T-=R/2,H-=R/2);var P=T,G=F.textAscent();switch(this._textBaseline){case l.BOTTOM:U=T+R,T=Math.max(U,T),H+=G;break;case l.CENTER:U=T+R/2,T=Math.max(U,T),H+=G/2}X=T+R-G,this._textBaseline===l.CENTER&&(X=P+R-G/2)}else this._textBaseline!==l.BOTTOM&&this._textBaseline!==l.CENTER||(H=T-(P=F.textSize()*this._textLeading)/2,X=T+P/2);if(V===l.WORD){for(var K=[],Z=0;Z<k.length;Z++){for(var oe="",x=k[Z].split(" "),I=0;I<x.length;I++)D="".concat(oe+x[I])+" ",oe=O<(L=this.textWidth(D))&&0<oe.length?(K.push(oe),"".concat(x[I])+" "):D;K.push(oe)}var B=0;this._textBaseline===l.CENTER?B=(K.length-1)*F.textLeading()/2:this._textBaseline===l.BOTTOM&&(B=(K.length-1)*F.textLeading());for(var W=0;W<k.length;W++){oe="",x=k[W].split(" ");for(var $=0;$<x.length;$++)D="".concat(oe+x[$])+" ",O<(L=this.textWidth(D))&&0<oe.length?(this._renderText(F,oe.trim(),E,T-B,X,H),oe="".concat(x[$])+" ",T+=F.textLeading()):oe=D;this._renderText(F,oe.trim(),E,T-B,X,H),T+=F.textLeading()}}else{for(var te=[],ie=0;ie<k.length;ie++)for(var de=k[ie].split(oe=""),se=0;se<de.length;se++)D="".concat(oe+de[se]),(L=this.textWidth(D))<=O?oe+=de[se]:O<L&&0<oe.length&&(te.push(oe),oe="".concat(de[se]));te.push(oe);var he=0;this._textBaseline===l.CENTER?he=(te.length-1)*F.textLeading()/2:this._textBaseline===l.BOTTOM&&(he=(te.length-1)*F.textLeading());for(var ce=0;ce<k.length;ce++){de=k[ce].split(oe="");for(var ee=0;ee<de.length;ee++)D="".concat(oe+de[ee]),(L=this.textWidth(D))<=O?oe+=de[ee]:O<L&&0<oe.length&&(this._renderText(F,oe.trim(),E,T-he,X,H),T+=F.textLeading(),oe="".concat(de[ee]))}this._renderText(F,oe.trim(),E,T-he,X,H),T+=F.textLeading()}}else{var ue=0;this._textBaseline===l.CENTER?ue=(k.length-1)*F.textLeading()/2:this._textBaseline===l.BOTTOM&&(ue=(k.length-1)*F.textLeading());for(var me=0;me<k.length;me++)this._renderText(F,k[me],E,T-ue,X,H-ue),T+=F.textLeading()}return F}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var P=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return v(P)==="object"&&P.font&&P.font.supported}},{key:"_updateTextMetrics",value:function(){var P,E,T,O,R,k;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((P=document.createElement("span")).style.fontFamily=this._textFont,P.style.fontSize="".concat(this._textSize,"px"),P.innerHTML="ABCjgq|",(k=document.createElement("div")).style.display="inline-block",k.style.width="1px",k.style.height="0px",O=((E=document.createElement("div")).appendChild(P),E.appendChild(k),E.style.height="0px",E.style.overflow="hidden",document.body.appendChild(E),k.style.verticalAlign="baseline",r(k)),R=r(P),T=O[1]-R[1],O=(k.style.verticalAlign="bottom",r(k)),R=r(P),k=O[1]-R[1]-T,document.body.removeChild(E),this._setProperty("_textAscent",T),this._setProperty("_textDescent",k)),this}}])&&m(p.prototype,u),S}(y.default.Element);function r(u){var p=0,g=0;if(u.offsetParent)for(;p+=u.offsetLeft,g+=u.offsetTop,u=u.offsetParent;);else p+=u.offsetLeft,g+=u.offsetTop;return[p,g]}c.prototype.textSize=function(u){return typeof u=="number"?(this._setProperty("_textSize",u),this._leadingSet||this._setProperty("_textLeading",u*l._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},y.default.Renderer=c,t=y.default.Renderer,j.default=t},{"../core/constants":269,"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],284:[function(u,M,j){function h(p){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}function y(p){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(g){return h(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":h(g)})(p)}u("core-js/modules/es.symbol"),u("core-js/modules/es.symbol.description"),u("core-js/modules/es.symbol.iterator"),u("core-js/modules/es.array.concat"),u("core-js/modules/es.array.fill"),u("core-js/modules/es.array.for-each"),u("core-js/modules/es.array.iterator"),u("core-js/modules/es.array.join"),u("core-js/modules/es.array.slice"),u("core-js/modules/es.function.name"),u("core-js/modules/es.number.to-fixed"),u("core-js/modules/es.object.get-own-property-descriptor"),u("core-js/modules/es.object.get-prototype-of"),u("core-js/modules/es.object.to-string"),u("core-js/modules/es.reflect.construct"),u("core-js/modules/es.reflect.get"),u("core-js/modules/es.regexp.to-string"),u("core-js/modules/es.string.iterator"),u("core-js/modules/es.weak-map"),u("core-js/modules/web.dom-collections.iterator"),u("core-js/modules/es.array.concat"),u("core-js/modules/es.array.fill"),u("core-js/modules/es.array.for-each"),u("core-js/modules/es.array.join"),u("core-js/modules/es.array.slice"),u("core-js/modules/es.function.name"),u("core-js/modules/es.number.to-fixed"),u("core-js/modules/es.object.get-prototype-of"),u("core-js/modules/es.object.to-string"),u("core-js/modules/es.regexp.to-string"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(r=u("./main"))&&r.__esModule?r:{default:r},d=function(p){if(p&&p.__esModule)return p;if(p===null||y(p)!=="object"&&typeof p!="function")return{default:p};var g=v();if(g&&g.has(p))return g.get(p);var S,P={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in p){var T;Object.prototype.hasOwnProperty.call(p,S)&&((T=E?Object.getOwnPropertyDescriptor(p,S):null)&&(T.get||T.set)?Object.defineProperty(P,S,T):P[S]=p[S])}return P.default=p,g&&g.set(p,P),P}(u("./constants"));function v(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,v=function(){return p},p)}function m(p,g){for(var S=0;S<g.length;S++){var P=g[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(p,P.key,P)}}function n(p,g,S){return(n=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(O,E,T){var O=function(R,k){for(;!Object.prototype.hasOwnProperty.call(R,k)&&(R=a(R))!==null;);return R}(O,E);if(O)return(O=Object.getOwnPropertyDescriptor(O,E)).get?O.get.call(T):O.value})(p,g,S||p)}function i(p,g){return(i=Object.setPrototypeOf||function(S,P){return S.__proto__=P,S})(p,g)}function s(p){return function(){var g,S=a(p),S=(g=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(g=a(this).constructor,Reflect.construct(S,arguments,g)):S.apply(this,arguments),this);if(!g||y(g)!=="object"&&typeof g!="function"){if(S!==void 0)return S;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return g}}function a(p){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(p)}u("./p5.Renderer");var c="rgba(0,0,0,0)",r=function(p){var g=P;if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),p&&i(g,p);var S=s(P);function P(E,T,O){if(this instanceof P)return(E=S.call(this,E,T,O)).drawingContext=E.canvas.getContext("2d"),E._pInst._setProperty("drawingContext",E.drawingContext),E;throw new TypeError("Cannot call a class as a function")}return g=P,(p=[{key:"getFilterGraphicsLayer",value:function(){var E;return this.filterGraphicsLayer||(E=(this._pInst instanceof l.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new l.default.Graphics(this.width,this.height,d.WEBGL,E)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=d.BLEND,this._setFill(d._DEFAULT_FILL),this._setStroke(d._DEFAULT_STROKE),this.drawingContext.lineCap=d.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(E,T){n(a(P.prototype),"resize",this).call(this,E,T),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var E,T;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof l.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(E=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(E,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(E=this._getFill(),T=(T=this._pInst).color.apply(T,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(T.levels),T=T.toString(),this._setFill(T),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(E),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setFill(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",E.levels)}},{key:"stroke",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setStroke(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",E.levels)}},{key:"erase",value:function(E,T){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,E=this._pInst.color(255,E).toString(),this.drawingContext.fillStyle=E,this._cachedStrokeStyle=this.drawingContext.strokeStyle,E=this._pInst.color(255,T).toString(),this.drawingContext.strokeStyle=E,T=this._cachedBlendMode,this.blendMode(d.REMOVE),this._cachedBlendMode=T,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},E=(n(a(P.prototype),"beginClip",this).call(this,E),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),E=(this.drawingContext.fillStyle=E,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),E=(this.drawingContext.strokeStyle=E,this._cachedBlendMode);this.blendMode(d.BLEND),this._cachedBlendMode=E,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),n(a(P.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(E,T,O,R,k,D,L,U,F){E.gifProperties&&E._animateGif(this._pInst);try{l.default.MediaElement&&E instanceof l.default.MediaElement&&E._ensureCanvas();var V=(V=this._tint&&E.canvas?this._getTintedImageCanvas(E):V)||E.canvas||E.elt,X=1;E.width&&0<E.width&&(X=V.width/E.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(V,X*T,X*O,X*R,X*k,D,L,U,F),this._isErasing&&this._pInst.erase()}catch(H){if(H.name!=="NS_ERROR_NOT_AVAILABLE")throw H}}},{key:"_getTintedImageCanvas",value:function(E){if(!E.canvas)return E;E.tintCanvas||(E.tintCanvas=document.createElement("canvas")),E.tintCanvas.width!==E.canvas.width&&(E.tintCanvas.width=E.canvas.width),E.tintCanvas.height!==E.canvas.height&&(E.tintCanvas.height=E.canvas.height);var T=E.tintCanvas.getContext("2d");return T.save(),T.clearRect(0,0,E.canvas.width,E.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(T.drawImage(E.canvas,0,0),T.globalCompositeOperation="luminosity",T.drawImage(E.canvas,0,0),T.globalCompositeOperation="color",T.drawImage(E.canvas,0,0),T.globalCompositeOperation="multiply",T.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),T.fillRect(0,0,E.canvas.width,E.canvas.height),T.globalCompositeOperation="destination-in"),T.globalAlpha=this._tint[3]/255,T.drawImage(E.canvas,0,0),T.restore(),E.tintCanvas}},{key:"blendMode",value:function(E){if(E===d.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(E!==d.BLEND&&E!==d.REMOVE&&E!==d.DARKEST&&E!==d.LIGHTEST&&E!==d.DIFFERENCE&&E!==d.MULTIPLY&&E!==d.EXCLUSION&&E!==d.SCREEN&&E!==d.REPLACE&&E!==d.OVERLAY&&E!==d.HARD_LIGHT&&E!==d.SOFT_LIGHT&&E!==d.DODGE&&E!==d.BURN&&E!==d.ADD)throw new Error("Mode ".concat(E," not recognized."));this._cachedBlendMode=E,this.drawingContext.globalCompositeOperation=E}}},{key:"blend",value:function(){for(var E=this.drawingContext.globalCompositeOperation,T=arguments.length,O=new Array(T),R=0;R<T;R++)O[R]=arguments[R];var k=O[O.length-1],D=Array.prototype.slice.call(O,0,O.length-1);this.drawingContext.globalCompositeOperation=k,l.default.prototype.copy.apply(this,D),this.drawingContext.globalCompositeOperation=E}},{key:"_getPixel",value:function(E,T){return E=this.drawingContext.getImageData(E,T,1,1).data,[E[0],E[1],E[2],E[3]]}},{key:"loadPixels",value:function(){var E=this._pixelsState,T=E._pixelDensity,O=this.width*T,T=this.height*T,O=this.drawingContext.getImageData(0,0,O,T);E._setProperty("imageData",O),E._setProperty("pixels",O.data)}},{key:"set",value:function(E,T,O){E=Math.floor(E),T=Math.floor(T);var R=this._pixelsState;if(O instanceof l.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(R._pixelDensity,R._pixelDensity),this.drawingContext.clearRect(E,T,O.width,O.height),this.drawingContext.drawImage(O.canvas,E,T),this.drawingContext.restore();else{var k=0,D=0,L=0,U=0,F=4*(T*R._pixelDensity*(this.width*R._pixelDensity)+E*R._pixelDensity);if(R.imageData||R.loadPixels(),typeof O=="number")F<R.pixels.length&&(L=D=k=O,U=255);else if(Array.isArray(O)){if(O.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");F<R.pixels.length&&(k=O[0],D=O[1],L=O[2],U=O[3])}else O instanceof l.default.Color&&F<R.pixels.length&&(k=O.levels[0],D=O.levels[1],L=O.levels[2],U=O.levels[3]);for(var V=0;V<R._pixelDensity;V++)for(var X=0;X<R._pixelDensity;X++)F=4*((T*R._pixelDensity+X)*this.width*R._pixelDensity+(E*R._pixelDensity+V)),R.pixels[F]=k,R.pixels[F+1]=D,R.pixels[F+2]=L,R.pixels[F+3]=U}}},{key:"updatePixels",value:function(E,T,O,R){var k=this._pixelsState,D=k._pixelDensity;E===void 0&&T===void 0&&O===void 0&&R===void 0&&(T=E=0,O=this.width,R=this.height),E*=D,T*=D,O*=D,R*=D,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=k.imageData),this.drawingContext.putImageData(k.imageData,E,T,0,0,O,R)}},{key:"_acuteArcToBezier",value:function(E,T){var D=T/2,O=Math.cos(D),U=Math.sin(D),R=1/Math.tan(D),D=E+D,k=Math.cos(D),D=Math.sin(D),L=(4-O)/3,U=U+(O-L)*R;return{ax:Math.cos(E).toFixed(7),ay:Math.sin(E).toFixed(7),bx:(L*k+U*D).toFixed(7),by:(L*D-U*k).toFixed(7),cx:(L*k-U*D).toFixed(7),cy:(L*D+U*k).toFixed(7),dx:Math.cos(E+T).toFixed(7),dy:Math.sin(E+T).toFixed(7)}}},{key:"arc",value:function(E,T,O,R,k,D,L){var U,F=this.drawingContext,V=O/2,X=R/2,H=[];for(E+=V,T+=X;1e-5<=D-k;)U=Math.min(D-k,d.HALF_PI),H.push(this._acuteArcToBezier(k,U)),k+=U;return this._doFill&&(this._clipping||F.beginPath(),H.forEach(function(G,K){K===0&&F.moveTo(E+G.ax*V,T+G.ay*X),F.bezierCurveTo(E+G.bx*V,T+G.by*X,E+G.cx*V,T+G.cy*X,E+G.dx*V,T+G.dy*X)}),L!==d.PIE&&L!=null||F.lineTo(E,T),F.closePath(),this._clipping||F.fill()),this._doStroke&&(this._clipping||F.beginPath(),H.forEach(function(G,K){K===0&&F.moveTo(E+G.ax*V,T+G.ay*X),F.bezierCurveTo(E+G.bx*V,T+G.by*X,E+G.cx*V,T+G.cy*X,E+G.dx*V,T+G.dy*X)}),L===d.PIE?(F.lineTo(E,T),F.closePath()):L===d.CHORD&&F.closePath(),this._clipping||F.stroke()),this}},{key:"ellipse",value:function(U){var T=this.drawingContext,O=this._doFill,R=this._doStroke,k=parseFloat(U[0]),D=parseFloat(U[1]),L=parseFloat(U[2]),U=parseFloat(U[3]);if(O&&!R){if(this._getFill()===c)return this}else if(!O&&R&&this._getStroke()===c)return this;k+=L/2,D+=U/2,L/=2,U/=2,this._clipping||T.beginPath(),T.ellipse(k,D,L,U,0,0,2*Math.PI),!this._clipping&&O&&T.fill(),!this._clipping&&R&&T.stroke()}},{key:"line",value:function(E,T,O,R){var k=this.drawingContext;return this._doStroke&&this._getStroke()!==c&&(this._clipping||k.beginPath(),k.moveTo(E,T),k.lineTo(O,R),k.stroke()),this}},{key:"point",value:function(E,T){var O,R,k=this.drawingContext;return!this._doStroke||this._getStroke()===c?this:(O=this._getStroke(),R=this._getFill(),this._clipping||this._setFill(O),this._clipping||k.beginPath(),k.arc(E,T,k.lineWidth/2,0,d.TWO_PI,!1),void(this._clipping||(k.fill(),this._setFill(R))))}},{key:"quad",value:function(E,T,O,R,k,D,L,U){var F=this.drawingContext,V=this._doFill,X=this._doStroke;if(V&&!X){if(this._getFill()===c)return this}else if(!V&&X&&this._getStroke()===c)return this;return this._clipping||F.beginPath(),F.moveTo(E,T),F.lineTo(O,R),F.lineTo(k,D),F.lineTo(L,U),F.closePath(),!this._clipping&&V&&F.fill(),!this._clipping&&X&&F.stroke(),this}},{key:"rect",value:function(X){var T,O,R=X[0],k=X[1],D=X[2],L=X[3],U=X[4],F=X[5],V=X[6],X=X[7],H=this.drawingContext,G=this._doFill,K=this._doStroke;if(G&&!K){if(this._getFill()===c)return this}else if(!G&&K&&this._getStroke()===c)return this;return this._clipping||H.beginPath(),U===void 0?H.rect(R,k,D,L):(F===void 0&&(F=U),V===void 0&&(V=F),X===void 0&&(X=V),K=(G=Math.abs(D))/2,O=(T=Math.abs(L))/2,T<2*(U=G<2*U?K:U)&&(U=O),T<2*(F=G<2*F?K:F)&&(F=O),T<2*(V=G<2*V?K:V)&&(V=O),T<2*(X=G<2*X?K:X)&&(X=O),this._clipping||H.beginPath(),H.moveTo(R+U,k),H.arcTo(R+D,k,R+D,k+L,F),H.arcTo(R+D,k+L,R,k+L,V),H.arcTo(R,k+L,R,k,X),H.arcTo(R,k,R+D,k,U),H.closePath()),!this._clipping&&this._doFill&&H.fill(),!this._clipping&&this._doStroke&&H.stroke(),this}},{key:"triangle",value:function(V){var T=this.drawingContext,O=this._doFill,R=this._doStroke,k=V[0],D=V[1],L=V[2],U=V[3],F=V[4],V=V[5];if(O&&!R){if(this._getFill()===c)return this}else if(!O&&R&&this._getStroke()===c)return this;this._clipping||T.beginPath(),T.moveTo(k,D),T.lineTo(L,U),T.lineTo(F,V),T.closePath(),!this._clipping&&O&&T.fill(),!this._clipping&&R&&T.stroke()}},{key:"endShape",value:function(E,T,O,R,k,D,L){if(T.length!==0&&(this._doStroke||this._doFill)){var U,F,V,X=E===d.CLOSE,H=(X&&!D&&T.push(T[0]),T.length);if(O&&L===null){if(3<H){var G=[],K=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[1][0],T[1][1]),F=1;F+2<H;F++)U=T[F],G[0]=[U[0],U[1]],G[1]=[U[0]+(K*T[F+1][0]-K*T[F-1][0])/6,U[1]+(K*T[F+1][1]-K*T[F-1][1])/6],G[2]=[T[F+1][0]+(K*T[F][0]-K*T[F+2][0])/6,T[F+1][1]+(K*T[F][1]-K*T[F+2][1])/6],G[3]=[T[F+1][0],T[F+1][1]],this.drawingContext.bezierCurveTo(G[1][0],G[1][1],G[2][0],G[2][1],G[3][0],G[3][1]);X&&this.drawingContext.lineTo(T[F+1][0],T[F+1][1]),this._doFillStrokeClose(X)}}else if(R&&L===null){for(this._clipping||this.drawingContext.beginPath(),F=0;F<H;F++)T[F].isVert?T[F].moveTo?this.drawingContext.moveTo(T[F][0],T[F][1]):this.drawingContext.lineTo(T[F][0],T[F][1]):this.drawingContext.bezierCurveTo(T[F][0],T[F][1],T[F][2],T[F][3],T[F][4],T[F][5]);this._doFillStrokeClose(X)}else if(k&&L===null){for(this._clipping||this.drawingContext.beginPath(),F=0;F<H;F++)T[F].isVert?T[F].moveTo?this.drawingContext.moveTo(T[F][0],T[F][1]):this.drawingContext.lineTo(T[F][0],T[F][1]):this.drawingContext.quadraticCurveTo(T[F][0],T[F][1],T[F][2],T[F][3]);this._doFillStrokeClose(X)}else if(L===d.POINTS)for(F=0;F<H;F++)U=T[F],this._doStroke&&this._pInst.stroke(U[6]),this._pInst.point(U[0],U[1]);else if(L===d.LINES)for(F=0;F+1<H;F+=2)U=T[F],this._doStroke&&this._pInst.stroke(T[F+1][6]),this._pInst.line(U[0],U[1],T[F+1][0],T[F+1][1]);else if(L===d.TRIANGLES)for(F=0;F+2<H;F+=3)U=T[F],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(U[0],U[1]),this.drawingContext.lineTo(T[F+1][0],T[F+1][1]),this.drawingContext.lineTo(T[F+2][0],T[F+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(T[F+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(T[F+2][6]),this.drawingContext.stroke());else if(L===d.TRIANGLE_STRIP)for(F=0;F+1<H;F++)U=T[F],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[F+1][0],T[F+1][1]),this.drawingContext.lineTo(U[0],U[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[F+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(T[F+1][5]),F+2<H&&(this.drawingContext.lineTo(T[F+2][0],T[F+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[F+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(T[F+2][5])),this._doFillStrokeClose(X);else if(L===d.TRIANGLE_FAN){if(2<H){for(this._clipping||this.drawingContext.beginPath(),F=2;F<H;F++)U=T[F],this.drawingContext.moveTo(T[0][0],T[0][1]),this.drawingContext.lineTo(T[F-1][0],T[F-1][1]),this.drawingContext.lineTo(U[0],U[1]),this.drawingContext.lineTo(T[0][0],T[0][1]),F<H-1&&(this._doFill&&U[5]!==T[F+1][5]||this._doStroke&&U[6]!==T[F+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(U[5]),this.drawingContext.fill(),this._pInst.fill(T[F+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(U[6]),this.drawingContext.stroke(),this._pInst.stroke(T[F+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(X)}}else if(L===d.QUADS)for(F=0;F+3<H;F+=4){for(U=T[F],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(U[0],U[1]),V=1;V<4;V++)this.drawingContext.lineTo(T[F+V][0],T[F+V][1]);this.drawingContext.lineTo(U[0],U[1]),!this._clipping&&this._doFill&&this._pInst.fill(T[F+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[F+3][6]),this._doFillStrokeClose(X)}else if(L===d.QUAD_STRIP){if(3<H)for(F=0;F+1<H;F+=2)U=T[F],this._clipping||this.drawingContext.beginPath(),F+3<H?(this.drawingContext.moveTo(T[F+2][0],T[F+2][1]),this.drawingContext.lineTo(U[0],U[1]),this.drawingContext.lineTo(T[F+1][0],T[F+1][1]),this.drawingContext.lineTo(T[F+3][0],T[F+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(T[F+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[F+3][6])):(this.drawingContext.moveTo(U[0],U[1]),this.drawingContext.lineTo(T[F+1][0],T[F+1][1])),this._doFillStrokeClose(X)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[0][0],T[0][1]),F=1;F<H;F++)(U=T[F]).isVert&&(U.moveTo?(X&&this.drawingContext.closePath(),this.drawingContext.moveTo(U[0],U[1])):this.drawingContext.lineTo(U[0],U[1]));this._doFillStrokeClose(X)}D=k=R=O=!1,X&&T.pop()}return this}},{key:"strokeCap",value:function(E){return E!==d.ROUND&&E!==d.SQUARE&&E!==d.PROJECT||(this.drawingContext.lineCap=E),this}},{key:"strokeJoin",value:function(E){return E!==d.ROUND&&E!==d.BEVEL&&E!==d.MITER||(this.drawingContext.lineJoin=E),this}},{key:"strokeWeight",value:function(E){return this.drawingContext.lineWidth=E===void 0||E===0?1e-4:E,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(E){E!==this._cachedFillStyle&&(this.drawingContext.fillStyle=E,this._cachedFillStyle=E)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(E){E!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=E,this._cachedStrokeStyle=E)}},{key:"bezier",value:function(E,T,O,R,k,D,L,U){return this._pInst.beginShape(),this._pInst.vertex(E,T),this._pInst.bezierVertex(O,R,k,D,L,U),this._pInst.endShape(),this}},{key:"curve",value:function(E,T,O,R,k,D,L,U){return this._pInst.beginShape(),this._pInst.curveVertex(E,T),this._pInst.curveVertex(O,R),this._pInst.curveVertex(k,D),this._pInst.curveVertex(L,U),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(E){E&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(E,T,O,R,k,D){this.drawingContext.transform(E,T,O,R,k,D)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(E){this.drawingContext.rotate(E)}},{key:"scale",value:function(E,T){return this.drawingContext.scale(E,T),this}},{key:"translate",value:function(E,T){return E instanceof l.default.Vector&&(T=E.y,E=E.x),this.drawingContext.translate(E,T),this}},{key:"_renderText",value:function(E,T,O,R,k,D){if(!(R<D||k<=R))return E.push(),this._isOpenType()?this._textFont._renderPath(T,O,R,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(T,O,R),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(d._DEFAULT_TEXT_FILL),this.drawingContext.fillText(T,O,R))),E.pop(),E}},{key:"textWidth",value:function(E){return this._isOpenType()?this._textFont._textWidth(E,this._textSize):this.drawingContext.measureText(E).width}},{key:"_applyTextProperties",value:function(){var E,T=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),E=this._textFont,this._isOpenType()&&(E=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,'px "').concat(E||"sans-serif",'"'),this.drawingContext.textAlign=this._textAlign,this._textBaseline===d.CENTER?this.drawingContext.textBaseline=d._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,T}},{key:"push",value:function(){return this.drawingContext.save(),n(a(P.prototype),"push",this).call(this)}},{key:"pop",value:function(E){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,n(a(P.prototype),"pop",this).call(this,E)}}])&&m(g.prototype,p),P}(l.default.Renderer),u=(r.prototype.text=function(p,g,S,O,E){O!==void 0&&this.drawingContext.textBaseline===d.BASELINE&&(T=!0,this.drawingContext.textBaseline=d.TOP);var T,O=l.default.Renderer.prototype.text.apply(this,arguments);return T&&(this.drawingContext.textBaseline=d.BASELINE),O},l.default.Renderer2D=r,l.default.Renderer2D);j.default=u},{"./constants":269,"./main":280,"./p5.Renderer":283,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],285:[function(t,M,j){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var h=(t=t("./main"))&&t.__esModule?t:{default:t};h.default.prototype._promisePreloads=[];function y(){return{}}var l=!(h.default.prototype.registerPromisePreload=function(d){h.default.prototype._promisePreloads.push(d)});h.default.prototype._setupPromisePreloads=function(){var d=!0,v=!1,m=void 0;try{for(var n,i=this._promisePreloads[Symbol.iterator]();!(d=(n=i.next()).done);d=!0){var s=n.value,a=this,c=s.method,r=s.addCallbacks,u=s.legacyPreloadSetup,p=s.target||this,g=p[c].bind(p);if(p===h.default.prototype){if(l)continue;a=null,g=p[c]}p[c]=this._wrapPromisePreload(a,g,r),u&&(p[u.method]=this._legacyPreloadGenerator(a,u,p[c]))}}catch(S){v=!0,m=S}finally{try{d||i.return==null||i.return()}finally{if(v)throw m}}l=!0},h.default.prototype._wrapPromisePreload=function(d,v,m){var n=function(){for(var i=this,s=(this._incrementPreload(),null),a=null,c=arguments.length,r=new Array(c),u=0;u<c;u++)r[u]=arguments[u];if(m)for(var p=r.length-1;0<=p&&!a&&typeof r[p]=="function";p--)a=s,s=r.pop();var g=Promise.resolve(v.apply(this,r));return s&&g.then(s),a&&g.catch(a),g.then(function(){return i._decrementPreload()}),g};return n=d?n.bind(d):n},h.default.prototype._legacyPreloadGenerator=function(d,i,m){var n=i.createBaseObject||y,i=function(){var s=this;this._incrementPreload();for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];var u=n.apply(this,c);return m.apply(this,c).then(function(p){Object.assign(u,p),s._decrementPreload()}),u};return i=d?i.bind(d):i}},{"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],286:[function(t,M,j){function h(i){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var y=(n=t("./main"))&&n.__esModule?n:{default:n},l=function(i){if(i&&i.__esModule)return i;if(i===null||v(i)!=="object"&&typeof i!="function")return{default:i};var s=d();if(s&&s.has(i))return s.get(i);var a,c={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in i){var u;Object.prototype.hasOwnProperty.call(i,a)&&((u=r?Object.getOwnPropertyDescriptor(i,a):null)&&(u.get||u.set)?Object.defineProperty(c,a,u):c[a]=i[a])}return c.default=i,s&&s.set(i,c),c}(t("./constants"));function d(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,d=function(){return i},i)}function v(i){return(v=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(s){return h(s)}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":h(s)})(i)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var m="defaultCanvas0",n=(y.default.prototype.createCanvas=function(i,s,a,c){var r,u,p;if(y.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(a=l.P2D,c=arguments[2]):r=a||l.P2D,c)(p=document.getElementById(m))&&p.parentNode.removeChild(p),p=c,this._defaultGraphicsCreated=!1;else{if(r===l.WEBGL)(p=document.getElementById(m))&&(p.parentNode.removeChild(p),u=this._renderer,this._elements=this._elements.filter(function(S){return S!==u})),(p=document.createElement("canvas")).id=m,p.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)p=this.canvas;else{p=c||document.createElement("canvas");for(var g=0;document.getElementById("defaultCanvas".concat(g));)g++;m="defaultCanvas".concat(g),p.id=m,p.classList.add("p5Canvas")}this._setupDone||(p.dataset.hidden=!0,p.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(a=document.createElement("main"),document.body.appendChild(a)),document.getElementsByTagName("main")[0])).appendChild(p)}return r===l.WEBGL?(this._setProperty("_renderer",new y.default.RendererGL(p,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new y.default.Renderer2D(p,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(i,s),this._renderer._applyDefaults(),this._renderer},y.default.prototype.resizeCanvas=function(i,s,a){if(y.default._validateParameters("resizeCanvas",arguments),this._renderer){var c,r,u={};for(c in this.drawingContext){var p=this.drawingContext[c];v(p)!=="object"&&typeof p!="function"&&(u[c]=p)}for(r in this.width=i,this.height=s,this._renderer.resize(i,s),u)try{this.drawingContext[r]=u[r]}catch{}a||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},y.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},y.default.prototype.createGraphics=function(i,s){for(var a=arguments.length,c=new Array(2<a?a-2:0),r=2;r<a;r++)c[r-2]=arguments[r];return c[0]instanceof HTMLCanvasElement&&(c[1]=c[0],c[0]=l.P2D),y.default._validateParameters("createGraphics",arguments),new y.default.Graphics(i,s,c[0],this,c[1])},y.default.prototype.createFramebuffer=function(i){return new y.default.Framebuffer(this,i)},y.default.prototype.clearDepth=function(i){this._assert3d("clearDepth"),this._renderer.clearDepth(i)},y.default.prototype.blendMode=function(i){y.default._validateParameters("blendMode",arguments),i===l.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),i=l.BLEND),this._renderer.blendMode(i)},y.default);j.default=n},{"../webgl/p5.RendererGL":337,"./constants":269,"./main":280,"./p5.Graphics":282,"./p5.Renderer2D":284,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],287:[function(t,M,j){function h(s){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(s)}function y(s){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(a){return h(a)}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":h(a)})(s)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=n(t("../main")),d=function(s){if(s&&s.__esModule)return s;if(s===null||y(s)!=="object"&&typeof s!="function")return{default:s};var a=m();if(a&&a.has(s))return a.get(s);var c,r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var p;Object.prototype.hasOwnProperty.call(s,c)&&((p=u?Object.getOwnPropertyDescriptor(s,c):null)&&(p.get||p.set)?Object.defineProperty(r,c,p):r[c]=s[c])}return r.default=s,a&&a.set(s,r),r}(t("../constants")),v=n(t("../helpers"));function m(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,m=function(){return s},s)}function n(s){return s&&s.__esModule?s:{default:s}}function i(s){return function(a){if(Array.isArray(a)){for(var c=0,r=new Array(a.length);c<a.length;c++)r[c]=a[c];return r}}(s)||function(a){if(Symbol.iterator in Object(a)||Object.prototype.toString.call(a)==="[object Arguments]")return Array.from(a)}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),l.default.prototype._normalizeArcAngles=function(s,a,c,r,u){var p;return s-=d.TWO_PI*Math.floor(s/d.TWO_PI),a-=d.TWO_PI*Math.floor(a/d.TWO_PI),p=Math.min(Math.abs(s-a),d.TWO_PI-Math.abs(s-a)),u&&(s=s<=d.HALF_PI?Math.atan(c/r*Math.tan(s)):s>d.HALF_PI&&s<=3*d.HALF_PI?Math.atan(c/r*Math.tan(s))+d.PI:Math.atan(c/r*Math.tan(s))+d.TWO_PI,a=a<=d.HALF_PI?Math.atan(c/r*Math.tan(a)):a>d.HALF_PI&&a<=3*d.HALF_PI?Math.atan(c/r*Math.tan(a))+d.PI:Math.atan(c/r*Math.tan(a))+d.TWO_PI),a<s&&(a+=d.TWO_PI),{start:s,stop:a,correspondToSamePoint:p<1e-5}},l.default.prototype.arc=function(s,a,c,r,u,p,g,S){return l.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&u!==p&&(u=this._toRadians(u),p=this._toRadians(p),c=Math.abs(c),r=Math.abs(r),s=v.default.modeAdjust(s,a,c,r,this._renderer._ellipseMode),(a=this._normalizeArcAngles(u,p,s.w,s.h,!0)).correspondToSamePoint?this._renderer.ellipse([s.x,s.y,s.w,s.h,S]):(this._renderer.arc(s.x,s.y,s.w,s.h,a.start,a.stop,g,S),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[s.x,s.y,s.w,s.h,a.start,a.stop,g]))),this},l.default.prototype.ellipse=function(s,a,c,r,u){return l.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},l.default.prototype.circle=function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];l.default._validateParameters("circle",a);var r=a.slice(0,2);return r.push(a[2],a[2]),this._renderEllipse.apply(this,i(r))},l.default.prototype._renderEllipse=function(s,a,c,r,u){return(this._renderer._doStroke||this._renderer._doFill)&&(c<0&&(c=Math.abs(c)),r===void 0?r=c:r<0&&(r=Math.abs(r)),s=v.default.modeAdjust(s,a,c,r,this._renderer._ellipseMode),this._renderer.ellipse([s.x,s.y,s.w,s.h,u]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[s.x,s.y,s.w,s.h])),this},l.default.prototype.line=function(){for(var s,a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return l.default._validateParameters("line",c),this._renderer._doStroke&&(s=this._renderer).line.apply(s,c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",c),this},l.default.prototype.point=function(){for(var s,a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return l.default._validateParameters("point",c),this._renderer._doStroke&&(c.length===1&&c[0]instanceof l.default.Vector?this._renderer.point.call(this._renderer,c[0].x,c[0].y,c[0].z):((s=this._renderer).point.apply(s,c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",c))),this},l.default.prototype.quad=function(){for(var s,a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return l.default._validateParameters("quad",c),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&c.length<12?this._renderer.quad.call(this._renderer,c[0],c[1],0,c[2],c[3],0,c[4],c[5],0,c[6],c[7],0,c[8],c[9]):((s=this._renderer).quad.apply(s,c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",c))),this},l.default.prototype.rect=function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return l.default._validateParameters("rect",a),this._renderRect.apply(this,a)},l.default.prototype.square=function(s,a,c,r,u,p,g){return l.default._validateParameters("square",arguments),this._renderRect.call(this,s,a,c,c,r,u,p,g)},l.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var s=v.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),a=[s.x,s.y,s.w,s.h],c=4;c<arguments.length;c++)a[c]=arguments[c];this._renderer.rect(a),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[s.x,s.y,s.w,s.h])}return this},l.default.prototype.triangle=function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return l.default._validateParameters("triangle",a),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(a),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",a),this},t=l.default,j.default=t},{"../constants":269,"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../helpers":276,"../main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],288:[function(t,M,j){function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(n)}function y(n){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(i){return h(i)}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":h(i)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(m=t("../main"))&&m.__esModule?m:{default:m},d=function(n){if(n&&n.__esModule)return n;if(n===null||y(n)!=="object"&&typeof n!="function")return{default:n};var i=v();if(i&&i.has(n))return i.get(n);var s,a={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in n){var r;Object.prototype.hasOwnProperty.call(n,s)&&((r=c?Object.getOwnPropertyDescriptor(n,s):null)&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=n[s])}return a.default=n,i&&i.set(n,a),a}(t("../constants"));function v(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,v=function(){return n},n)}l.default.prototype.ellipseMode=function(n){return l.default._validateParameters("ellipseMode",arguments),n!==d.CORNER&&n!==d.CORNERS&&n!==d.RADIUS&&n!==d.CENTER||(this._renderer._ellipseMode=n),this},l.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},l.default.prototype.rectMode=function(n){return l.default._validateParameters("rectMode",arguments),n!==d.CORNER&&n!==d.CORNERS&&n!==d.RADIUS&&n!==d.CENTER||(this._renderer._rectMode=n),this},l.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},l.default.prototype.strokeCap=function(n){return l.default._validateParameters("strokeCap",arguments),n!==d.ROUND&&n!==d.SQUARE&&n!==d.PROJECT||this._renderer.strokeCap(n),this},l.default.prototype.strokeJoin=function(n){return l.default._validateParameters("strokeJoin",arguments),n!==d.ROUND&&n!==d.BEVEL&&n!==d.MITER||this._renderer.strokeJoin(n),this},l.default.prototype.strokeWeight=function(n){return l.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(n),this};var m=l.default;j.default=m},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],289:[function(t,M,j){Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(y=t("../main"))&&y.__esModule?y:{default:y};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),h.default.prototype.bezier=function(){for(var l,d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return h.default._validateParameters("bezier",v),(this._renderer._doStroke||this._renderer._doFill)&&(l=this._renderer).bezier.apply(l,v),this},h.default.prototype.bezierDetail=function(l){return h.default._validateParameters("bezierDetail",arguments),this._bezierDetail=l,this},h.default.prototype.bezierPoint=function(l,d,v,m,n){h.default._validateParameters("bezierPoint",arguments);var i=1-n;return Math.pow(i,3)*l+3*Math.pow(i,2)*n*d+3*i*Math.pow(n,2)*v+Math.pow(n,3)*m},h.default.prototype.bezierTangent=function(l,d,v,m,n){h.default._validateParameters("bezierTangent",arguments);var i=1-n;return 3*m*Math.pow(n,2)-3*v*Math.pow(n,2)+6*v*i*n-6*d*i*n+3*d*Math.pow(i,2)-3*l*Math.pow(i,2)},h.default.prototype.curve=function(){for(var l,d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return h.default._validateParameters("curve",v),this._renderer._doStroke&&(l=this._renderer).curve.apply(l,v),this},h.default.prototype.curveDetail=function(l){return h.default._validateParameters("curveDetail",arguments),this._curveDetail=l<3?3:l,this},h.default.prototype.curveTightness=function(l){return h.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=l,this},h.default.prototype.curvePoint=function(l,d,v,m,n){h.default._validateParameters("curvePoint",arguments);var i=this._renderer._curveTightness,s=n*n*n,a=n*n;return l*((i-1)/2*s+(1-i)*a+(i-1)/2*n)+d*((i+3)/2*s+(-5-i)/2*a+1)+v*((-3-i)/2*s+(i+2)*a+(1-i)/2*n)+m*((1-i)/2*s+(i-1)/2*a)},h.default.prototype.curveTangent=function(l,d,v,m,a){h.default._validateParameters("curveTangent",arguments);var i=this._renderer._curveTightness,s=a*a*3,a=2*a;return l*((i-1)/2*s+(1-i)*a+(i-1)/2)+d*((i+3)/2*s+(-5-i)/2*a)+v*((-3-i)/2*s+(i+2)*a+(1-i)/2)+m*((1-i)/2*s+(i-1)/2*a)};var y=h.default;j.default=y},{"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../main":280}],290:[function(t,M,j){function h(g){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(g)}function y(g){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(S){return h(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":h(S)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(p=t("../main"))&&p.__esModule?p:{default:p},d=function(g){if(g&&g.__esModule)return g;if(g===null||y(g)!=="object"&&typeof g!="function")return{default:g};var S=v();if(S&&S.has(g))return S.get(g);var P,E={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(P in g){var O;Object.prototype.hasOwnProperty.call(g,P)&&((O=T?Object.getOwnPropertyDescriptor(g,P):null)&&(O.get||O.set)?Object.defineProperty(E,P,O):E[P]=g[P])}return E.default=g,S&&S.set(g,E),E}(t("../constants"));function v(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,v=function(){return g},g)}var m=null,n=[],i=[],s=!1,a=!1,c=!1,r=!1,u=!0,p=(l.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(i=[],r=!0),this},l.default.prototype.beginShape=function(g){var S;return l.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(S=this._renderer).beginShape.apply(S,arguments):(m=g===d.POINTS||g===d.LINES||g===d.TRIANGLES||g===d.TRIANGLE_FAN||g===d.TRIANGLE_STRIP||g===d.QUADS||g===d.QUAD_STRIP?g:null,n=[],i=[]),this},l.default.prototype.bezierVertex=function(){for(var g,S=arguments.length,P=new Array(S),E=0;E<S;E++)P[E]=arguments[E];if(l.default._validateParameters("bezierVertex",P),this._renderer.isP3D)(g=this._renderer).bezierVertex.apply(g,P);else if(n.length===0)l.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{s=!0;for(var T=[],O=0;O<P.length;O++)T[O]=P[O];T.isVert=!1,(r?i:n).push(T)}return this},l.default.prototype.curveVertex=function(){for(var g,S=arguments.length,P=new Array(S),E=0;E<S;E++)P[E]=arguments[E];return l.default._validateParameters("curveVertex",P),this._renderer.isP3D?(g=this._renderer).curveVertex.apply(g,P):(a=!0,this.vertex(P[0],P[1])),this},l.default.prototype.endContour=function(){if(!this._renderer.isP3D){var g=i[0].slice();g.isVert=i[0].isVert,g.moveTo=!1,i.push(g),u&&(n.push(n[0]),u=!1);for(var S=0;S<i.length;S++)n.push(i[S])}return this},l.default.prototype.endShape=function(g){var S=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(l.default._validateParameters("endShape",arguments),S<1&&(console.log("🌸 p5.js says: You can not have less than one instance"),S=1),this._renderer.isP3D)this._renderer.endShape(g,a,s,c,r,m,S);else{if(S!==1&&console.log("🌸 p5.js says: Instancing is only supported in WebGL2 mode"),n.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;S=g===d.CLOSE,S&&!r&&n.push(n[0]),this._renderer.endShape(g,n,a,s,c,r,m),u=!(r=c=s=a=!1),S&&n.pop()}return this},l.default.prototype.quadraticVertex=function(){for(var g,S=arguments.length,P=new Array(S),E=0;E<S;E++)P[E]=arguments[E];if(l.default._validateParameters("quadraticVertex",P),this._renderer.isP3D)(g=this._renderer).quadraticVertex.apply(g,P);else{if(this._contourInited)return(g={}).x=P[0],g.y=P[1],g.x3=P[2],g.y3=P[3],g.type=d.QUADRATIC,this._contourVertices.push(g),this;if(0<n.length){c=!0;for(var T=[],O=0;O<P.length;O++)T[O]=P[O];T.isVert=!1,(r?i:n).push(T)}else l.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},l.default.prototype.vertex=function(g,S,P,E,T){var O;return this._renderer.isP3D?(O=this._renderer).vertex.apply(O,arguments):((O=[]).isVert=!0,O[0]=g,O[1]=S,O[2]=0,O[3]=0,O[4]=0,O[5]=this._renderer._getFill(),O[6]=this._renderer._getStroke(),P&&(O.moveTo=P),(r?(i.length===0&&(O.moveTo=!0),i):n).push(O)),this},l.default.prototype.normal=function(g,S,P){var E;return this._assert3d("normal"),l.default._validateParameters("normal",arguments),(E=this._renderer).normal.apply(E,arguments),this},l.default);j.default=p},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],291:[function(t,M,j){},{}],292:[function(t,M,j){t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.assign"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.noLoop=function(){this._loop=!1},t.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},t.default.prototype.isLooping=function(){return this._loop},t.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},t.default.prototype.pop=function(){var h=this._styles.pop();h?(this._renderer.pop(h.renderer),Object.assign(this,h.props)):console.warn("pop() was called without matching push()")},t.default.prototype.redraw=function(h){if(!this._inUserDraw&&this._setupDone){var y=parseInt(h),l=((isNaN(y)||y<1)&&(y=1),this._isGlobal?window:this);if(typeof l.draw=="function"){l.setup===void 0&&l.scale(l._pixelDensity,l._pixelDensity);for(var d=0;d<y;d++){l.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),l._renderer.isP3D&&l._renderer._update(),l._setProperty("frameCount",l.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{l.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},t=t.default,j.default=t},{"./main":280,"core-js/modules/es.object.assign":181}],293:[function(t,M,j){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(t=t("./main"))&&t.__esModule?t:{default:t};function y(l){return function(d){if(Array.isArray(d)){for(var v=0,m=new Array(d.length);v<d.length;v++)m[v]=d[v];return m}}(l)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}h.default.prototype.applyMatrix=function(){var l=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||l?(l=this._renderer).applyMatrix.apply(l,y(arguments.length<=0?void 0:arguments[0])):(l=this._renderer).applyMatrix.apply(l,arguments),this},h.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},h.default.prototype.rotate=function(l,d){return h.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(l),d),this},h.default.prototype.rotateX=function(l){return this._assert3d("rotateX"),h.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(l)),this},h.default.prototype.rotateY=function(l){return this._assert3d("rotateY"),h.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(l)),this},h.default.prototype.rotateZ=function(l){return this._assert3d("rotateZ"),h.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(l)),this},h.default.prototype.scale=function(l,d,v){var m;return h.default._validateParameters("scale",arguments),l instanceof h.default.Vector?(l=(m=l).x,d=m.y,v=m.z):Array.isArray(l)&&(l=(m=l)[0],d=m[1],v=m[2]||1),isNaN(d)?d=v=l:isNaN(v)&&(v=1),this._renderer.scale(l,d,v),this},h.default.prototype.shearX=function(l){return h.default._validateParameters("shearX",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,0,Math.tan(l),1,0,0),this},h.default.prototype.shearY=function(l){return h.default._validateParameters("shearY",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,Math.tan(l),0,1,0,0),this},h.default.prototype.translate=function(l,d,v){return h.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(l,d,v):this._renderer.translate(l,d),this},t=h.default,j.default=t},{"./main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243}],294:[function(t,M,j){function h(v){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var y=(t=t("../core/main"))&&t.__esModule?t:{default:t};function l(v){return function(m){if(Array.isArray(m)){for(var n=0,i=new Array(m.length);n<m.length;n++)i[n]=m[n];return i}}(v)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(v){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(m){return h(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":h(m)})(v)}y.default.prototype.storeItem=function(v,m){typeof v!="string"&&console.log("The argument that you passed to storeItem() - ".concat(v," is not a string.")),v.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(v," must not end with 'p5TypeID'.")),m===void 0&&console.log("You cannot store undefined variables using storeItem().");var n=d(m);switch(n){case"number":case"boolean":m=m.toString();break;case"object":m instanceof y.default.Color?n="p5.Color":m instanceof y.default.Vector&&(n="p5.Vector",m=[m.x,m.y,m.z]),m=JSON.stringify(m)}localStorage.setItem(v,m),v="".concat(v,"p5TypeID"),localStorage.setItem(v,n)},y.default.prototype.getItem=function(v){var m=localStorage.getItem(v),n=localStorage.getItem("".concat(v,"p5TypeID"));if(n===void 0)console.log("Unable to determine type of item stored under ".concat(v,"in local storage. Did you save the item with something other than setItem()?"));else if(m!==null)switch(n){case"number":m=parseFloat(m);break;case"boolean":m=m==="true";break;case"object":m=JSON.parse(m);break;case"p5.Color":m=JSON.parse(m),m=this.color.apply(this,l(m.levels));break;case"p5.Vector":m=JSON.parse(m),m=this.createVector.apply(this,l(m))}return m},y.default.prototype.clearStorage=function(){localStorage.clear()},y.default.prototype.removeItem=function(v){typeof v!="string"&&console.log("The argument that you passed to removeItem() - ".concat(v," is not a string.")),localStorage.removeItem(v),localStorage.removeItem("".concat(v,"p5TypeID"))}},{"../core/main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],295:[function(t,M,j){function h(c){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(c)}function y(c){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(r){return h(r)}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":h(r)})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.object.keys"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(t=t("../core/main"))&&t.__esModule?t:{default:t};function d(c,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(r&&r.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),r&&v(c,r)}function v(c,r){return(v=Object.setPrototypeOf||function(u,p){return u.__proto__=p,u})(c,r)}function m(c){return function(){var r,u=n(c),u=(r=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(r=n(this).constructor,Reflect.construct(u,arguments,r)):u.apply(this,arguments),this);if(!r||y(r)!=="object"&&typeof r!="function"){if(u!==void 0)return u;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return r}}function n(c){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(c)}function i(c,r){if(!(c instanceof r))throw new TypeError("Cannot call a class as a function")}function s(c,r){for(var u=0;u<r.length;u++){var p=r[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}function a(c,r,u){r&&s(c.prototype,r),u&&s(c,u)}l.default.prototype.createStringDict=function(c,r){return l.default._validateParameters("createStringDict",arguments),new l.default.StringDict(c,r)},l.default.prototype.createNumberDict=function(c,r){return l.default._validateParameters("createNumberDict",arguments),new l.default.NumberDict(c,r)},l.default.TypedDict=function(){function c(r,u){return i(this,c),r instanceof Object?this.data=r:(this.data={},this.data[r]=u),this}return a(c,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(r){return this.data.hasOwnProperty(r)}},{key:"get",value:function(r){if(this.data.hasOwnProperty(r))return this.data[r];console.log("".concat(r," does not exist in this Dictionary"))}},{key:"set",value:function(r,u){this._validate(u)?this.data[r]=u:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(r){for(var u in r)this.set(u,r[u])}},{key:"create",value:function(r,u){r instanceof Object&&u===void 0?this._addObj(r):r!==void 0?this.set(r,u):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(r){if(!this.data.hasOwnProperty(r))throw new Error("".concat(r," does not exist in this Dictionary"));delete this.data[r]}},{key:"print",value:function(){for(var r in this.data)console.log("key:".concat(r," value:").concat(this.data[r]))}},{key:"saveTable",value:function(r){var u,p="";for(u in this.data)p+="".concat(u,",").concat(this.data[u],`
`);var g=new Blob([p],{type:"text/csv"});l.default.prototype.downloadFile(g,r||"mycsv","csv")}},{key:"saveJSON",value:function(r,u){l.default.prototype.saveJSON(this.data,r,u)}},{key:"_validate",value:function(r){return!0}}]),c}(),l.default.StringDict=function(){d(r,l.default.TypedDict);var c=m(r);function r(){i(this,r);for(var u=arguments.length,p=new Array(u),g=0;g<u;g++)p[g]=arguments[g];return c.call.apply(c,[this].concat(p))}return a(r,[{key:"_validate",value:function(u){return typeof u=="string"}}]),r}(),l.default.NumberDict=function(){d(r,l.default.TypedDict);var c=m(r);function r(){i(this,r);for(var u=arguments.length,p=new Array(u),g=0;g<u;g++)p[g]=arguments[g];return c.call.apply(c,[this].concat(p))}return a(r,[{key:"_validate",value:function(u){return typeof u=="number"}},{key:"add",value:function(u,p){this.data.hasOwnProperty(u)?this.data[u]+=p:console.log("The key - ".concat(u," does not exist in this dictionary."))}},{key:"sub",value:function(u,p){this.add(u,-p)}},{key:"mult",value:function(u,p){this.data.hasOwnProperty(u)?this.data[u]*=p:console.log("The key - ".concat(u," does not exist in this dictionary."))}},{key:"div",value:function(u,p){this.data.hasOwnProperty(u)?this.data[u]/=p:console.log("The key - ".concat(u," does not exist in this dictionary."))}},{key:"_valueTest",value:function(u){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var p,g=this.data[Object.keys(this.data)[0]];for(p in this.data)this.data[p]*u<g*u&&(g=this.data[p]);return g}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(u){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var p=Object.keys(this.data)[0],g=1;g<Object.keys(this.data).length;g++)Object.keys(this.data)[g]*u<p*u&&(p=Object.keys(this.data)[g]);return p}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),r}(),t=l.default.TypedDict,j.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],296:[function(t,M,j){function h(p){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var y=(t=t("../core/main"))&&t.__esModule?t:{default:t};function l(p,g){for(var S=0;S<g.length;S++){var P=g[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(p,P.key,P)}}function d(p,g,S){g&&l(p.prototype,g),S&&l(p,S)}function v(p,g){return(v=Object.setPrototypeOf||function(S,P){return S.__proto__=P,S})(p,g)}function m(p){return function(){var g,S,P=i(p);return g=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(g=i(this).constructor,Reflect.construct(P,arguments,g)):P.apply(this,arguments),P=this,!(S=g)||a(S)!=="object"&&typeof S!="function"?n(P):S}}function n(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function i(p){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(p)}function s(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function a(p){return(a=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(g){return h(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":h(g)})(p)}function c(p,g,S){return(g._userNode||document.body).appendChild(p),S=new(S?y.default.MediaElement:y.default.Element)(p,g),g._elements.push(S),S}function r(p,O,S,P){var E=document.createElement(O),T=(typeof(S=S||"")=="string"&&(S=[S]),!0),O=!1,R=void 0;try{for(var k,D=S[Symbol.iterator]();!(T=(k=D.next()).done);T=!0){var L=k.value,U=document.createElement("source");U.setAttribute("src",L),E.appendChild(U)}}catch(V){O=!0,R=V}finally{try{T||D.return==null||D.return()}finally{if(O)throw R}}typeof P=="function"&&E.addEventListener("canplaythrough",function V(){P(),E.removeEventListener("canplaythrough",V)});var F=c(E,p,!0);return F.loadedmetadata=!1,E.addEventListener("loadedmetadata",function(){F.width=E.videoWidth,F.height=E.videoHeight,F.elt.width===0&&(F.elt.width=E.videoWidth),F.elt.height===0&&(F.elt.height=E.videoHeight),F.presetPlaybackRate&&(F.elt.playbackRate=F.presetPlaybackRate,delete F.presetPlaybackRate),F.loadedmetadata=!0}),F}y.default.prototype.select=function(p,g){return y.default._validateParameters("select",arguments),g=this._getContainer(g).querySelector(p),g?this._wrapElement(g):null},y.default.prototype.selectAll=function(p,g){y.default._validateParameters("selectAll",arguments);var S=[],P=this._getContainer(g).querySelectorAll(p);if(P)for(var E=0;E<P.length;E++){var T=this._wrapElement(P[E]);S.push(T)}return S},y.default.prototype._getContainer=function(p){var g=document;return typeof p=="string"?g=document.querySelector(p)||document:p instanceof y.default.Element?g=p.elt:p instanceof HTMLElement&&(g=p),g},y.default.prototype._wrapElement=function(p){var g,S=Array.prototype.slice.call(p.children);return p.tagName==="INPUT"&&p.type==="checkbox"?((g=new y.default.Element(p,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},g):p.tagName==="VIDEO"||p.tagName==="AUDIO"?new y.default.MediaElement(p,this):p.tagName==="SELECT"?this.createSelect(new y.default.Element(p,this)):0<S.length&&S.every(function(P){return P.tagName==="INPUT"||P.tagName==="LABEL"})?this.createRadio(new y.default.Element(p,this)):new y.default.Element(p,this)},y.default.prototype.removeElements=function(p){y.default._validateParameters("removeElements",arguments),this._elements.filter(function(g){return!(g.elt instanceof HTMLCanvasElement)}).map(function(g){return g.remove()})},y.default.Element.prototype.changed=function(p){return y.default.Element._adjustListener("change",p,this),this},y.default.Element.prototype.input=function(p){return y.default.Element._adjustListener("input",p,this),this},y.default.prototype.createDiv=function(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",g=document.createElement("div");return g.innerHTML=p,c(g,this)},y.default.prototype.createP=function(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",g=document.createElement("p");return g.innerHTML=p,c(g,this)},y.default.prototype.createSpan=function(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",g=document.createElement("span");return g.innerHTML=p,c(g,this)},y.default.prototype.createImg=function(){y.default._validateParameters("createImg",arguments);var p,g=document.createElement("img"),S=arguments;return 1<S.length&&typeof S[1]=="string"&&(g.alt=S[1]),2<S.length&&typeof S[2]=="string"&&(g.crossOrigin=S[2]),g.src=S[0],p=c(g,this),g.addEventListener("load",function(){p.width=g.offsetWidth||g.width,p.height=g.offsetHeight||g.height;var P=S[S.length-1];typeof P=="function"&&P(p)}),p},y.default.prototype.createA=function(p,g,S){y.default._validateParameters("createA",arguments);var P=document.createElement("a");return P.href=p,P.innerHTML=g,S&&(P.target=S),c(P,this)},y.default.prototype.createSlider=function(p,g,S,P){y.default._validateParameters("createSlider",arguments);var E=document.createElement("input");return E.type="range",E.min=p,E.max=g,P===0?E.step=1e-18:P&&(E.step=P),typeof S=="number"&&(E.value=S),c(E,this)},y.default.prototype.createButton=function(p,g){y.default._validateParameters("createButton",arguments);var S=document.createElement("button");return S.innerHTML=p,g&&(S.value=g),c(S,this)},y.default.prototype.createCheckbox=function(){for(var p=arguments.length,g=new Array(p),S=0;S<p;S++)g[S]=arguments[S];y.default._validateParameters("createCheckbox",g);var P=document.createElement("div"),E=document.createElement("input"),T=(E.type="checkbox",document.createElement("label")),O=(T.appendChild(E),P.appendChild(T),c(P,this));return O.checked=function(){var R=O.elt.firstElementChild.getElementsByTagName("input")[0];if(R){if(arguments.length===0)return R.checked;R.checked=!(arguments.length<=0||!arguments[0])}return O},this.value=function(R){return O.value=R,this},g[0]&&(O.value(g[0]),(P=document.createElement("span")).innerHTML=g[0],T.appendChild(P)),g[1]&&(E.checked=!0),O},y.default.prototype.createSelect=function(){for(var p,g=arguments.length,S=new Array(g),P=0;P<g;P++)S[P]=arguments[P];y.default._validateParameters("createSelect",S);var E,T=S[0];return T instanceof y.default.Element&&T.elt instanceof HTMLSelectElement?this.elt=(p=T).elt:T instanceof HTMLSelectElement?(p=c(T,this),this.elt=T):(E=document.createElement("select"),T&&typeof T=="boolean"&&E.setAttribute("multiple","true"),p=c(E,this),this.elt=E),p.option=function(O,R){var k;if(O!==void 0){for(var D,L=0;L<this.elt.length;L+=1)if(this.elt[L].textContent===O){k=L;break}k!==void 0?R===!1?this.elt.remove(k):this.elt[k].value=R:((D=document.createElement("option")).textContent=O,D.value=R===void 0?O:R,this.elt.appendChild(D),this._pInst._elements.push(D))}},p.selected=function(O){if(O!==void 0){for(var R=0;R<this.elt.length;R+=1)this.elt[R].value.toString()===O.toString()&&(this.elt.selectedIndex=R);return this}if(this.elt.getAttribute("multiple")){var k=[],D=!0,L=!1,U=void 0;try{for(var F,V=this.elt.selectedOptions[Symbol.iterator]();!(D=(F=V.next()).done);D=!0){var X=F.value;k.push(X.value)}}catch(H){L=!0,U=H}finally{try{D||V.return==null||V.return()}finally{if(L)throw U}}return k}return this.elt.value},p.disable=function(O){if(typeof O=="string")for(var R=0;R<this.elt.length;R++)this.elt[R].value.toString()===O&&(this.elt[R].disabled=!0,this.elt[R].selected=!1);else this.elt.disabled=!0;return this},p.enable=function(O){if(typeof O=="string")for(var R=0;R<this.elt.length;R++)this.elt[R].value.toString()===O&&(this.elt[R].disabled=!1,this.elt[R].selected=!1);else{this.elt.disabled=!1;for(var k=0;k<this.elt.length;k++)this.elt[k].disabled=!1,this.elt[k].selected=!1}return this},p},y.default.prototype.createRadio=function(){function p(O){return O instanceof HTMLInputElement&&O.type==="radio"}function g(O){return O instanceof HTMLLabelElement}var S,P,E,T=arguments.length<=0?void 0:arguments[0];return T instanceof y.default.Element&&(T.elt instanceof HTMLDivElement||T.elt instanceof HTMLSpanElement)?(S=T,this.elt=T.elt):T instanceof HTMLDivElement||T instanceof HTMLSpanElement?(S=c(T,this),P=this.elt=T,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(E=arguments.length<=1?void 0:arguments[1])):(typeof T=="string"&&(E=T),P=document.createElement("div"),S=c(P,this),this.elt=P),S._name=E||"radioOption",S._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(O){return p(O)||g(O)&&p(O.firstElementChild)}).map(function(O){return p(O)?O:O.firstElementChild})},S.option=function(O,R){var k,D,L,U=!0,F=!1,V=void 0;try{for(var X,H=S._getOptionsArray()[Symbol.iterator]();!(U=(X=H.next()).done);U=!0){var G=X.value;if(G.value===O){k=G;break}}}catch(K){F=!0,V=K}finally{try{U||H.return==null||H.return()}finally{if(F)throw V}}return k===void 0&&((k=document.createElement("input")).setAttribute("type","radio"),k.setAttribute("value",O)),k.setAttribute("name",S._name),g(k.parentElement)?D=k.parentElement:(D=document.createElement("label")).insertAdjacentElement("afterbegin",k),D.lastElementChild instanceof HTMLSpanElement?L=D.lastElementChild:(L=document.createElement("span"),k.insertAdjacentElement("afterend",L)),L.innerHTML=R===void 0?O:R,this.elt.appendChild(D),k},S.remove=function(O){var R=!0,k=!1,D=void 0;try{for(var L,U=S._getOptionsArray()[Symbol.iterator]();!(R=(L=U.next()).done);R=!0){var F=L.value;if(F.value===O)return void(g(F.parentElement)?F.parentElement:F).remove()}}catch(V){k=!0,D=V}finally{try{R||U.return==null||U.return()}finally{if(k)throw D}}},S.value=function(){var O="",R=!0,k=!1,D=void 0;try{for(var L,U=S._getOptionsArray()[Symbol.iterator]();!(R=(L=U.next()).done);R=!0){var F=L.value;if(F.checked){O=F.value;break}}}catch(V){k=!0,D=V}finally{try{R||U.return==null||U.return()}finally{if(k)throw D}}return O},S.selected=function(O){var R=null;if(O===void 0){var k=!0,D=!1,L=void 0;try{for(var U,F=S._getOptionsArray()[Symbol.iterator]();!(k=(U=F.next()).done);k=!0){var V=U.value;if(V.checked){R=V;break}}}catch(Z){D=!0,L=Z}finally{try{k||F.return==null||F.return()}finally{if(D)throw L}}}else{S._getOptionsArray().forEach(function(x){x.checked=!1,x.removeAttribute("checked")});var X=!0,D=!1,L=void 0;try{for(var H,G=S._getOptionsArray()[Symbol.iterator]();!(X=(H=G.next()).done);X=!0){var K=H.value;K.value===O&&(K.setAttribute("checked",!0),K.checked=!0,R=K)}}catch(x){D=!0,L=x}finally{try{X||G.return==null||G.return()}finally{if(D)throw L}}}return R},S.disable=function(){var O=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],R=!0,k=!1,D=void 0;try{for(var L,U=S._getOptionsArray()[Symbol.iterator]();!(R=(L=U.next()).done);R=!0)L.value.setAttribute("disabled",O)}catch(F){k=!0,D=F}finally{try{R||U.return==null||U.return()}finally{if(k)throw D}}},S},y.default.prototype.createColorPicker=function(p){y.default._validateParameters("createColorPicker",arguments);var g=document.createElement("input");return g.type="color",p?p instanceof y.default.Color?g.value=p.toString("#rrggbb"):(y.default.prototype._colorMode="rgb",y.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},g.value=y.default.prototype.color(p).toString("#rrggbb")):g.value="#000000",(g=c(g,this)).color=function(){return p&&(p.mode&&(y.default.prototype._colorMode=p.mode),p.maxes&&(y.default.prototype._colorMaxes=p.maxes)),y.default.prototype.color(this.elt.value)},g},y.default.prototype.createInput=function(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",S=(y.default._validateParameters("createInput",arguments),document.createElement("input"));return S.setAttribute("value",p),S.setAttribute("type",g),c(S,this)},y.default.prototype.createFileInput=function(p){var g,S=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(y.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(g=document.createElement("input")).setAttribute("type","file"),S&&g.setAttribute("multiple",!0),g.addEventListener("change",function(P){var E=!0,T=!1,O=void 0;try{for(var R,k=P.target.files[Symbol.iterator]();!(E=(R=k.next()).done);E=!0){var D=R.value;y.default.File._load(D,p)}}catch(L){T=!0,O=L}finally{try{E||k.return==null||k.return()}finally{if(T)throw O}}},!1),c(g,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},y.default.prototype.createVideo=function(p,g){return y.default._validateParameters("createVideo",arguments),r(this,"video",p,g)},y.default.prototype.createAudio=function(p,g){return y.default._validateParameters("createAudio",arguments),r(this,"audio",p,g)},y.default.prototype.VIDEO="video",y.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(p){var g=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return g?new Promise(function(S,P){g.call(navigator,p,S,P)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),y.default.prototype.createCapture=function(){for(var p=arguments.length,g=new Array(p),S=0;S<p;S++)g[S]=arguments[S];if(y.default._validateParameters("createCapture",g),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var P,E=!0,T=!0,O=!1,R=0,k=g;R<k.length;R++){var D=k[R];D===y.default.prototype.VIDEO?T=!1:D===y.default.prototype.AUDIO?E=!1:a(D)==="object"?(D.flipped!==void 0&&(O=D.flipped,delete D.flipped),L=Object.assign({},L,D)):typeof D=="function"&&(P=D)}var L=Object.assign({},{video:E,audio:T},L),U=document.createElement("video"),F=(U.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(L).then(function(V){try{"srcObject"in U?U.srcObject=V:U.src=window.URL.createObjectURL(V)}catch{U.src=V}},console.error),c(U,this,!0));return F.loadedmetadata=!1,U.addEventListener("loadedmetadata",function(){U.play(),U.width?(F.width=U.width,F.height=U.height,O&&(F.elt.style.transform="scaleX(-1)")):(F.width=F.elt.width=U.videoWidth,F.height=F.elt.height=U.videoHeight),F.loadedmetadata=!0,P&&P(U.srcObject)}),F.flipped=O,F},y.default.prototype.createElement=function(p,g){return y.default._validateParameters("createElement",arguments),p=document.createElement(p),g!==void 0&&(p.innerHTML=g),c(p,this)},y.default.Element.prototype.addClass=function(p){return this.elt.className?this.hasClass(p)||(this.elt.className=this.elt.className+" "+p):this.elt.className=p,this},y.default.Element.prototype.removeClass=function(p){return this.elt.classList.remove(p),this},y.default.Element.prototype.hasClass=function(p){return this.elt.classList.contains(p)},y.default.Element.prototype.toggleClass=function(p){return this.elt.classList.contains(p)?this.elt.classList.remove(p):this.elt.classList.add(p),this},y.default.Element.prototype.child=function(p){return p===void 0?this.elt.childNodes:(typeof p=="string"?(p[0]==="#"&&(p=p.substring(1)),p=document.getElementById(p)):p instanceof y.default.Element&&(p=p.elt),p instanceof HTMLElement&&this.elt.appendChild(p),this)},y.default.Element.prototype.center=function(p){var g=this.elt.style.display,S=this.elt.style.display==="none",P=this.parent().style.display==="none",E={x:this.elt.offsetLeft,y:this.elt.offsetTop},T=(S&&this.show(),P&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),O=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return p==="both"||p===void 0?this.position(T/2+this.parent().offsetLeft,O/2+this.parent().offsetTop):p==="horizontal"?this.position(T/2+this.parent().offsetLeft,E.y):p==="vertical"&&this.position(E.x,O/2+this.parent().offsetTop),this.style("display",g),S&&this.hide(),P&&this.parent().hide(),this},y.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},y.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},y.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var p="";return this.elt.style.transform&&(p=(p=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=p,this},y.default.Element.prototype._rotate=function(){var p="";return this.elt.style.transform&&(p=(p=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=p,this},y.default.Element.prototype.style=function(p,g){if((g=g instanceof y.default.Color?"rgba("+g.levels[0]+","+g.levels[1]+","+g.levels[2]+","+g.levels[3]/255+")":g)===void 0){if(p.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(p);for(var S=p.split(";"),P=0;P<S.length;P++){var E=S[P].split(":");E[0]&&E[1]&&(this.elt.style[E[0].trim()]=E[1].trim())}}else this.elt.style[p]=g,p!=="width"&&p!=="height"&&p!=="left"&&p!=="top"||(g=window.getComputedStyle(this.elt).getPropertyValue(p).replace(/[^\d.]/g,""),this[p]=Math.round(parseFloat(g,10)));return this},y.default.Element.prototype.attribute=function(p,g){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return g===void 0?this.elt.getAttribute(p):(this.elt.setAttribute(p,g),this);if(g===void 0)return this.elt.firstChild.getAttribute(p);for(var S=0;S<this.elt.childNodes.length;S++)this.elt.childNodes[S].setAttribute(p,g)},y.default.Element.prototype.removeAttribute=function(p){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var g=0;g<this.elt.childNodes.length;g++)this.elt.childNodes[g].removeAttribute(p);return this.elt.removeAttribute(p),this},y.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},y.default.Element.prototype.show=function(){return this.elt.style.display="block",this},y.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},y.default.Element.prototype.size=function(p,g){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var S=p,P=g,E=y.default.prototype.AUTO;if(S!==E||P!==E){if(S===E?S=g*this.width/this.height:P===E&&(P=p*this.height/this.width),this.elt instanceof HTMLCanvasElement){var T,O={},R=this.elt.getContext("2d");for(T in R)O[T]=R[T];for(T in this.elt.setAttribute("width",S*this._pInst._pixelDensity),this.elt.setAttribute("height",P*this._pInst._pixelDensity),this.elt.style.width=S+"px",this.elt.style.height=P+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),O)this.elt.getContext("2d")[T]=O[T]}else this.elt.style.width=S+"px",this.elt.style.height=P+"px",this.elt.width=S,this.elt.height=P;this.width=S,this.height=P,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",S),this._pInst._setProperty("height",P))}return this},y.default.Element.prototype.remove=function(){this instanceof y.default.MediaElement&&(this.stop(),(g=this.elt.srcObject)!==null&&g.getTracks().forEach(function(S){S.stop()}));var p,g=this._pInst._elements.indexOf(this);for(p in g!==-1&&this._pInst._elements.splice(g,1),this._events)this.elt.removeEventListener(p,this._events[p]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},y.default.Element.prototype.drop=function(p,g){var S;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",S=function(P){P.preventDefault()}),this.elt.addEventListener("dragleave",S)),y.default.Element._attachListener("drop",function(E){E.preventDefault(),typeof g=="function"&&g.call(this,E);var E=E.dataTransfer.files,T=!0,O=!1,R=void 0;try{for(var k,D=E[Symbol.iterator]();!(T=(k=D.next()).done);T=!0){var L=k.value;y.default.File._load(L,p)}}catch(U){O=!0,R=U}finally{try{T||D.return==null||D.return()}finally{if(O)throw R}}},this)):console.log("The File APIs are not fully supported in this browser."),this},y.default.Element.prototype.draggable=function(p){var g,S="ontouchstart"in window,P=0,E=0,T=0,O=0,R=S?"touchend":"mouseup",k=S?"touchmove":"mousemove";function D(U){var F;U=U||window.event,O=S?(F=U.changedTouches,P=T-parseInt(F[0].clientX),E=O-parseInt(F[0].clientY),T=parseInt(F[0].clientX),parseInt(F[0].clientY)):(P=T-parseInt(U.clientX),E=O-parseInt(U.clientY),T=parseInt(U.clientX),parseInt(U.clientY)),p.style.left=p.offsetLeft-P+"px",p.style.top=p.offsetTop-E+"px"}function L(){document.removeEventListener(R,L,!1),document.removeEventListener(k,D,!1)}return p===void 0?g=p=this.elt:p!==this.elt&&p.elt!==this.elt&&(p=p.elt,g=this.elt),g.addEventListener(S?"touchstart":"mousedown",function(U){{var F;U=U||window.event,O=S?(F=U.changedTouches,T=parseInt(F[0].clientX),parseInt(F[0].clientY)):(T=parseInt(U.clientX),parseInt(U.clientY))}return document.addEventListener(R,L,!1),document.addEventListener(k,D,!1),!1},!1),g.style.cursor="move",this};function u(p,g,S,P){s(this,u),this.callback=p,this.time=g,this.id=S,this.val=P}t=function(p){var g=P;if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),p&&v(g,p);var S=m(P);function P(E,T){s(this,P);var O=n(T=S.call(this,E,T));return T.elt.crossOrigin="anonymous",T._prevTime=0,T._cueIDCounter=0,T._cues=[],T.pixels=[],T._pixelsState=n(T),T._pixelDensity=1,T._modified=!1,T._frameOnCanvas=-1,Object.defineProperty(O,"src",{get:function(){var R=O.elt.children[0].src,k=O.elt.src===window.location.href?"":O.elt.src;return R===window.location.href?k:R},set:function(R){for(var k=0;k<O.elt.children.length;k++)O.elt.removeChild(O.elt.children[k]);var D=document.createElement("source");D.src=R,E.appendChild(D),O.elt.src=R,O.modified=!0}}),O._onended=function(){},O.elt.onended=function(){O._onended(O)},T}return d(P,[{key:"play",value:function(){var E;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(E=this.elt.play())&&E.catch&&E.catch(function(T){T.name==="NotAllowedError"?console.error(T):console.error("Media play method encountered an unexpected error",T)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var E=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(E)},{passive:!0,once:!0})}},{key:"autoplay",value:function(E){var T=this,O=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",E),E&&!O&&(E=function(){return T._setupAutoplayFailDetection()},this.elt.readyState===4?E():this.elt.addEventListener("canplay",E,{passive:!0,once:!0})),this}},{key:"volume",value:function(E){if(E===void 0)return this.elt.volume;this.elt.volume=E}},{key:"speed",value:function(E){if(E===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=E:this.presetPlaybackRate=E}},{key:"time",value:function(E){return E===void 0?this.elt.currentTime:(this.elt.currentTime=E,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var E=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&E&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var E=arguments.length,T=new Array(E),O=0;O<E;O++)T[O]=arguments[O];return y.default.Renderer2D.prototype.loadPixels.apply(this,T)}},{key:"updatePixels",value:function(E,T,O,R){return this.loadedmetadata&&(this._ensureCanvas(),y.default.Renderer2D.prototype.updatePixels.call(this,E,T,O,R)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var E=arguments.length,T=new Array(E),O=0;O<E;O++)T[O]=arguments[O];return y.default.Renderer2D.prototype.get.apply(this,T)}},{key:"_getPixel",value:function(){this.loadPixels();for(var E=arguments.length,T=new Array(E),O=0;O<E;O++)T[O]=arguments[O];return y.default.Renderer2D.prototype._getPixel.apply(this,T)}},{key:"set",value:function(E,T,O){this.loadedmetadata&&(this._ensureCanvas(),y.default.Renderer2D.prototype.set.call(this,E,T,O),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var E=arguments.length,T=new Array(E),O=0;O<E;O++)T[O]=arguments[O];y.default.prototype.copy.apply(this,T)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var E=arguments.length,T=new Array(E),O=0;O<E;O++)T[O]=arguments[O];y.default.Image.prototype.mask.apply(this,T)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(E){this._modified=E}},{key:"onended",value:function(E){return this._onended=E,this}},{key:"connect",value:function(E){var T,O;if(typeof y.default.prototype.getAudioContext=="function")T=y.default.prototype.getAudioContext(),O=y.default.soundOut.input;else try{O=(T=E.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=T.createMediaElementSource(this.elt),this.audioSourceNode.connect(O)),E?E.input?this.audioSourceNode.connect(E.input):this.audioSourceNode.connect(E):this.audioSourceNode.connect(O)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(E,k,O){var R=this._cueIDCounter++,k=new u(k,E,R,O);return this._cues.push(k),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),R}},{key:"removeCue",value:function(E){for(var T=0;T<this._cues.length;T++)this._cues[T].id===E&&(console.log(E),this._cues.splice(T,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var E=this.time(),T=0;T<this._cues.length;T++){var O=this._cues[T].time,R=this._cues[T].val;this._prevTime<O&&O<=E&&this._cues[T].callback(R)}this._prevTime=E}}]),P}(y.default.Element),y.default.MediaElement=t,t=function(){function p(g,S){s(this,p),this.file=g,this._pInst=S,S=g.type.split("/"),this.type=S[0],this.subtype=S[1],this.name=g.name,this.size=g.size,this.data=void 0}return d(p,null,[{key:"_createLoader",value:function(g,S){var P=new FileReader;return P.onload=function(E){var T,O=new y.default.File(g);O.file.type==="application/json"?O.data=JSON.parse(E.target.result):O.file.type==="text/xml"?(T=new DOMParser().parseFromString(E.target.result,"text/xml"),O.data=new y.default.XML(T.documentElement)):O.data=E.target.result,S(O)},P}},{key:"_load",value:function(g,S){var P;/^text\//.test(g.type)||g.type==="application/json"?y.default.File._createLoader(g,S).readAsText(g):/^(video|audio)\//.test(g.type)?((P=new y.default.File(g)).data=URL.createObjectURL(g),S(P)):y.default.File._createLoader(g,S).readAsDataURL(g)}}]),p}(),y.default.File=t,t=y.default,j.default=t},{"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245}],297:[function(a,M,j){Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(a=a("../core/main"))&&a.__esModule?a:{default:a};h.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",h.default.prototype.accelerationX=0,h.default.prototype.accelerationY=0,h.default.prototype.accelerationZ=0,h.default.prototype.pAccelerationX=0,h.default.prototype.pAccelerationY=0,h.default.prototype.pAccelerationZ=0,h.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},h.default.prototype.rotationX=0,h.default.prototype.rotationY=0,h.default.prototype.rotationZ=0,h.default.prototype.pRotationX=0,h.default.prototype.pRotationY=0;var y=h.default.prototype.pRotationZ=0,l=0,d=0,v="clockwise",m="clockwise",n="clockwise",i=(h.default.prototype.pRotateDirectionX=void 0,h.default.prototype.pRotateDirectionY=void 0,h.default.prototype.pRotateDirectionZ=void 0,h.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},h.default.prototype.turnAxis=void 0,.5),s=30,a=(h.default.prototype.setMoveThreshold=function(c){h.default._validateParameters("setMoveThreshold",arguments),i=c},h.default.prototype.setShakeThreshold=function(c){h.default._validateParameters("setShakeThreshold",arguments),s=c},h.default.prototype._ondeviceorientation=function(c){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(c.beta)),this._setProperty("rotationY",this._fromDegrees(c.gamma)),this._setProperty("rotationZ",this._fromDegrees(c.alpha)),this._handleMotion()},h.default.prototype._ondevicemotion=function(c){this._updatePAccelerations(),this._setProperty("accelerationX",2*c.acceleration.x),this._setProperty("accelerationY",2*c.acceleration.y),this._setProperty("accelerationZ",2*c.acceleration.z),this._handleMotion()},h.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var c,r,u,p,g,S=this._isGlobal?window:this;typeof S.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>i||Math.abs(this.accelerationY-this.pAccelerationY)>i||Math.abs(this.accelerationZ-this.pAccelerationZ)>i)&&S.deviceMoved(),typeof S.deviceTurned=="function"&&(r=this._toDegrees(this.rotationX)+180,u=this._toDegrees(this.pRotationX)+180,c=y+180,0<r-u&&r-u<270||r-u<-270?v="clockwise":(r-u<0||270<r-u)&&(v="counter-clockwise"),v!==this.pRotateDirectionX&&(c=r),90<Math.abs(r-c)&&Math.abs(r-c)<270&&(c=r,this._setProperty("turnAxis","X"),S.deviceTurned()),this.pRotateDirectionX=v,y=c-180,u=this._toDegrees(this.rotationY)+180,r=this._toDegrees(this.pRotationY)+180,c=l+180,0<u-r&&u-r<270||u-r<-270?m="clockwise":(u-r<0||270<u-this.pRotationY)&&(m="counter-clockwise"),m!==this.pRotateDirectionY&&(c=u),90<Math.abs(u-c)&&Math.abs(u-c)<270&&(c=u,this._setProperty("turnAxis","Y"),S.deviceTurned()),this.pRotateDirectionY=m,l=c-180,0<(r=this._toDegrees(this.rotationZ))-(u=this._toDegrees(this.pRotationZ))&&r-u<270||r-u<-270?n="clockwise":(r-u<0||270<r-u)&&(n="counter-clockwise"),n!==this.pRotateDirectionZ&&(d=r),90<Math.abs(r-d)&&Math.abs(r-d)<270&&(d=r,this._setProperty("turnAxis","Z"),S.deviceTurned()),this.pRotateDirectionZ=n,this._setProperty("turnAxis",void 0)),typeof S.deviceShaken=="function"&&(this.pAccelerationX!==null&&(p=Math.abs(this.accelerationX-this.pAccelerationX),g=Math.abs(this.accelerationY-this.pAccelerationY)),s<p+g&&S.deviceShaken())},h.default);j.default=a},{"../core/main":280}],298:[function(t,M,j){Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};h.default.prototype.isKeyPressed=!1,h.default.prototype.keyIsPressed=!1,h.default.prototype.key="",h.default.prototype.keyCode=0,h.default.prototype._onkeydown=function(y){var l;this._downKeys[y.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",y.which),this._downKeys[y.which]=!0,this._setProperty("key",y.key||String.fromCharCode(y.which)||y.which),typeof(l=this._isGlobal?window:this).keyPressed!="function"||y.charCode||l.keyPressed(y)===!1&&y.preventDefault())},h.default.prototype._onkeyup=function(y){this._downKeys[y.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",y.key||String.fromCharCode(y.which)||y.which),this._setProperty("keyCode",y.which);var l=this._isGlobal?window:this;typeof l.keyReleased=="function"&&l.keyReleased(y)===!1&&y.preventDefault()},h.default.prototype._onkeypress=function(y){var l;y.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",y.which),this._setProperty("key",y.key||String.fromCharCode(y.which)||y.which),typeof(l=this._isGlobal?window:this).keyTyped=="function"&&l.keyTyped(y)===!1&&y.preventDefault())},h.default.prototype._onblur=function(y){this._downKeys={}},h.default.prototype.keyIsDown=function(y){return h.default._validateParameters("keyIsDown",arguments),this._downKeys[y]||!1},h.default.prototype._areDownKeys=function(){for(var y in this._downKeys)if(this._downKeys.hasOwnProperty(y)&&this._downKeys[y]===!0)return!0;return!1},t=h.default,j.default=t},{"../core/main":280}],299:[function(t,M,j){function h(m){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(m)}function y(m){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(n){return h(n)}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":h(n)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(l=t("../core/main"))&&l.__esModule?l:{default:l},d=function(m){if(m&&m.__esModule)return m;if(m===null||y(m)!=="object"&&typeof m!="function")return{default:m};var n=v();if(n&&n.has(m))return n.get(m);var i,s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in m){var c;Object.prototype.hasOwnProperty.call(m,i)&&((c=a?Object.getOwnPropertyDescriptor(m,i):null)&&(c.get||c.set)?Object.defineProperty(s,i,c):s[i]=m[i])}return s.default=m,n&&n.set(m,s),s}(t("../core/constants"));function v(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,v=function(){return m},m)}l.default.prototype.movedX=0,l.default.prototype.movedY=0,l.default.prototype._hasMouseInteracted=!1,l.default.prototype.mouseX=0,l.default.prototype.mouseY=0,l.default.prototype.pmouseX=0,l.default.prototype.pmouseY=0,l.default.prototype.winMouseX=0,l.default.prototype.winMouseY=0,l.default.prototype.pwinMouseX=0,l.default.prototype.pwinMouseY=0,l.default.prototype.mouseButton=0,l.default.prototype.mouseIsPressed=!1,l.default.prototype._updateNextMouseCoords=function(m){var n,i,s,a,c;this._curElement!==null&&(!m.touches||0<m.touches.length)&&(n=this._curElement.elt,i=this.width,s=this.height,(a=m)&&!a.clientX&&(a.touches?a=a.touches[0]:a.changedTouches&&(a=a.changedTouches[0])),c=n.getBoundingClientRect(),i=n.scrollWidth/i||1,n=n.scrollHeight/s||1,s={x:(a.clientX-c.left)/i,y:(a.clientY-c.top)/n,winX:a.clientX,winY:a.clientY,id:a.identifier},this._setProperty("movedX",m.movementX),this._setProperty("movedY",m.movementY),this._setProperty("mouseX",s.x),this._setProperty("mouseY",s.y),this._setProperty("winMouseX",s.winX),this._setProperty("winMouseY",s.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},l.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},l.default.prototype._setMouseButton=function(m){m.button===1?this._setProperty("mouseButton",d.CENTER):m.button===2?this._setProperty("mouseButton",d.RIGHT):this._setProperty("mouseButton",d.LEFT)},l.default.prototype._onmousemove=function(m){var n=this._isGlobal?window:this;this._updateNextMouseCoords(m),this.mouseIsPressed?typeof n.mouseDragged=="function"?n.mouseDragged(m)===!1&&m.preventDefault():typeof n.touchMoved=="function"&&n.touchMoved(m)===!1&&m.preventDefault():typeof n.mouseMoved=="function"&&n.mouseMoved(m)===!1&&m.preventDefault()},l.default.prototype._onmousedown=function(m){var n=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(m),this._updateNextMouseCoords(m),this.touchstart||(typeof n.mousePressed=="function"?n.mousePressed(m)===!1&&m.preventDefault():typeof n.touchStarted=="function"&&n.touchStarted(m)===!1&&m.preventDefault(),this.touchstart=!1)},l.default.prototype._onmouseup=function(m){var n=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof n.mouseReleased=="function"?n.mouseReleased(m)===!1&&m.preventDefault():typeof n.touchEnded=="function"&&n.touchEnded(m)===!1&&m.preventDefault(),this.touchend=!1)},l.default.prototype._ondragend=l.default.prototype._onmouseup,l.default.prototype._ondragover=l.default.prototype._onmousemove,l.default.prototype._onclick=function(m){var n=this._isGlobal?window:this;typeof n.mouseClicked=="function"&&n.mouseClicked(m)===!1&&m.preventDefault()},l.default.prototype._ondblclick=function(m){var n=this._isGlobal?window:this;typeof n.doubleClicked=="function"&&n.doubleClicked(m)===!1&&m.preventDefault()},l.default.prototype._mouseWheelDeltaY=0,l.default.prototype._pmouseWheelDeltaY=0,l.default.prototype._onwheel=function(m){var n=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",m.deltaY),typeof n.mouseWheel=="function"&&(m.delta=m.deltaY,n.mouseWheel(m)===!1&&m.preventDefault())},l.default.prototype.requestPointerLock=function(){var m=this._curElement.elt;return m.requestPointerLock=m.requestPointerLock||m.mozRequestPointerLock,m.requestPointerLock?(m.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},l.default.prototype.exitPointerLock=function(){document.exitPointerLock()},t=l.default,j.default=t},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],300:[function(t,M,j){Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.touches=[],t.default.prototype._updateTouchCoords=function(h){if(this._curElement!==null){for(var y=[],l=0;l<h.touches.length;l++)y[l]=function(c,a,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=c.getBoundingClientRect(),a=c.scrollWidth/a||1,c=c.scrollHeight/r||1,r=n.touches[i]||n.changedTouches[i];return{x:(r.clientX-s.left)/a,y:(r.clientY-s.top)/c,winX:r.clientX,winY:r.clientY,id:r.identifier}}(this._curElement.elt,this.width,this.height,h,l);this._setProperty("touches",y)}},t.default.prototype._ontouchstart=function(h){var y=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(h),this._updateNextMouseCoords(h),this._updateMouseCoords(),typeof y.touchStarted=="function"&&(y.touchStarted(h)===!1&&h.preventDefault(),this.touchstart=!0)},t.default.prototype._ontouchmove=function(h){var y=this._isGlobal?window:this;this._updateTouchCoords(h),this._updateNextMouseCoords(h),typeof y.touchMoved=="function"?y.touchMoved(h)===!1&&h.preventDefault():typeof y.mouseDragged=="function"&&y.mouseDragged(h)===!1&&h.preventDefault()},t.default.prototype._ontouchend=function(h){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(h),this._updateNextMouseCoords(h);var y=this._isGlobal?window:this;typeof y.touchEnded=="function"&&(y.touchEnded(h)===!1&&h.preventDefault(),this.touchend=!0)},t=t.default,j.default=t},{"../core/main":280}],301:[function(t,M,j){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h,y,l,d,v={_toPixels:function(m){var n,i;return m instanceof ImageData?m.data:m.getContext("2d")?m.getContext("2d").getImageData(0,0,m.width,m.height).data:m.getContext("webgl")?(i=(n=m.getContext("webgl")).drawingBufferWidth*n.drawingBufferHeight*4,i=new Uint8Array(i),n.readPixels(0,0,m.width,m.height,n.RGBA,n.UNSIGNED_BYTE,i),i):void 0},_getARGB:function(m,n){return n*=4,m[3+n]<<24&4278190080|m[n]<<16&16711680|m[1+n]<<8&65280|255&m[2+n]},_setPixels:function(m,n){for(var i,s=0,a=m.length;s<a;s++)m[0+(i=4*s)]=(16711680&n[s])>>>16,m[1+i]=(65280&n[s])>>>8,m[2+i]=255&n[s],m[3+i]=(4278190080&n[s])>>>24},_toImageData:function(m){return m instanceof ImageData?m:m.getContext("2d").getImageData(0,0,m.width,m.height)},_createImageData:function(m,n){return v._tmpCanvas=document.createElement("canvas"),v._tmpCtx=v._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(m,n)},apply:function(m,c,i){var s=m.getContext("2d"),a=s.getImageData(0,0,m.width,m.height),c=c(a,i);c instanceof ImageData?s.putImageData(c,0,0,0,0,m.width,m.height):s.putImageData(a,0,0,0,0,m.width,m.height)},threshold:function(m){for(var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,i=v._toPixels(m),s=Math.floor(255*n),a=0;a<i.length;a+=4){var c=void 0,c=s<=.2126*i[a]+.7152*i[a+1]+.0722*i[a+2]?255:0;i[a]=i[a+1]=i[a+2]=c}},gray:function(m){for(var n=v._toPixels(m),i=0;i<n.length;i+=4){var s=n[i],a=n[i+1],c=n[i+2];n[i]=n[i+1]=n[i+2]=.2126*s+.7152*a+.0722*c}},opaque:function(m){for(var n=v._toPixels(m),i=0;i<n.length;i+=4)n[i+3]=255;return n},invert:function(m){for(var n=v._toPixels(m),i=0;i<n.length;i+=4)n[i]=255-n[i],n[i+1]=255-n[i+1],n[i+2]=255-n[i+2]},posterize:function(m){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,i=v._toPixels(m);if(n<2||255<n)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var s=n-1,a=0;a<i.length;a+=4){var c=i[a],r=i[a+1],u=i[a+2];i[a]=255*(c*n>>8)/s,i[a+1]=255*(r*n>>8)/s,i[a+2]=255*(u*n>>8)/s}},dilate:function(m){for(var n,i,s,a,c,r,u,p,g,S=v._toPixels(m),P=0,E=S.length?S.length/4:0,T=new Int32Array(E);P<E;)for(i=(n=P)+m.width;P<i;)a=s=v._getARGB(S,P),(g=P-1)<n&&(g=P),i<=(p=P+1)&&(p=P),(c=P-m.width)<0&&(c=0),E<=(r=P+m.width)&&(r=P),c=v._getARGB(S,c),g=v._getARGB(S,g),r=v._getARGB(S,r),(a=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))<(u=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(s=g,a=u),a<(u=77*((g=v._getARGB(S,p))>>16&255)+151*(g>>8&255)+28*(255&g))&&(s=g,a=u),a<(p=77*(c>>16&255)+151*(c>>8&255)+28*(255&c))&&(s=c,a=p),a<(g=77*(r>>16&255)+151*(r>>8&255)+28*(255&r))&&(s=r,a=g),T[P++]=s;v._setPixels(S,T)},erode:function(m){for(var n,i,s,a,c,r,u,p,g,S=v._toPixels(m),P=0,E=S.length?S.length/4:0,T=new Int32Array(E);P<E;)for(i=(n=P)+m.width;P<i;)a=s=v._getARGB(S,P),(g=P-1)<n&&(g=P),i<=(p=P+1)&&(p=P),(c=P-m.width)<0&&(c=0),E<=(r=P+m.width)&&(r=P),c=v._getARGB(S,c),g=v._getARGB(S,g),r=v._getARGB(S,r),(u=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<(a=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))&&(s=g,a=u),(u=77*((g=v._getARGB(S,p))>>16&255)+151*(g>>8&255)+28*(255&g))<a&&(s=g,a=u),(p=77*(c>>16&255)+151*(c>>8&255)+28*(255&c))<a&&(s=c,a=p),(g=77*(r>>16&255)+151*(r>>8&255)+28*(255&r))<a&&(s=r,a=g),T[P++]=s;v._setPixels(S,T)},blur:function(m,n){for(var i,s,a,c,r,u,p,g,S,P,E=v._toPixels(m),T=m.width,O=m.height,R=T*O,k=new Int32Array(R),D=0;D<R;D++)k[D]=v._getARGB(E,D);var L,U,F,V,X,H,G,K,Z=new Int32Array(R),oe=new Int32Array(R),x=new Int32Array(R),I=new Int32Array(R),B=0,W=3.5*n|0;if(h!==(W=W<1?1:W<248?W:248)){y=1+(h=W)<<1,l=new Int32Array(y),d=new Array(y);for(var $=0;$<y;$++)d[$]=new Int32Array(256);for(var te=1,ie=W-1;te<W;te++){l[W+te]=l[ie]=H=ie*ie,G=d[W+te],K=d[ie--];for(var de=0;de<256;de++)G[de]=K[de]=H*de}X=l[W]=W*W,G=d[W];for(var se=0;se<256;se++)G[se]=X*se}for(U=0;U<O;U++){for(L=0;L<T;L++){if(c=a=s=r=i=0,(u=L-h)<0)P=-u,u=0;else{if(T<=u)break;P=0}for(F=P;F<y&&!(T<=u);F++){var he=k[u+B];V=d[F],r+=V[(-16777216&he)>>>24],s+=V[(16711680&he)>>16],a+=V[(65280&he)>>8],c+=V[255&he],i+=l[F],u++}Z[p=B+L]=r/i,oe[p]=s/i,x[p]=a/i,I[p]=c/i}B+=T}for(S=(g=-h)*T,U=B=0;U<O;U++){for(L=0;L<T;L++){if(c=a=s=r=i=0,g<0)P=p=-g,u=L;else{if(O<=g)break;P=0,p=g,u=L+S}for(F=P;F<y&&!(O<=p);F++)V=d[F],r+=V[Z[u]],s+=V[oe[u]],a+=V[x[u]],c+=V[I[u]],i+=l[F],p++,u+=T;k[L+B]=r/i<<24|s/i<<16|a/i<<8|c/i}B+=T,S+=T,g++}v._setPixels(E,k)}};j.default=v},{"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int32-array":222,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239}],302:[function(t,M,j){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=l(t("../core/main")),y=l(t("omggif"));function l(v){return v&&v.__esModule?v:{default:v}}function d(v){return function(m){if(Array.isArray(m)){for(var n=0,i=new Array(m.length);n<m.length;n++)i[n]=m[n];return i}}(v)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}h.default.prototype.createImage=function(v,m){return h.default._validateParameters("createImage",arguments),new h.default.Image(v,m)},h.default.prototype.saveCanvas=function(){for(var v,m,n,i,s,a,c=arguments.length,r=new Array(c),u=0;u<c;u++)r[u]=arguments[u];switch(h.default._validateParameters("saveCanvas",r),r[0]instanceof HTMLCanvasElement?(v=r[0],r.shift()):r[0]instanceof h.default.Element?(v=r[0].elt,r.shift()):r[0]instanceof h.default.Framebuffer?(i=r[0],(s=this.createGraphics(i.width,i.height)).pixelDensity(pixelDensity()),i.loadPixels(),s.loadPixels(),s.pixels.set(i.pixels),s.updatePixels(),v=s.elt,r.shift()):v=this._curElement&&this._curElement.elt,1<=r.length&&(m=r[0]),n=(n=2<=r.length?r[1]:n)||h.default.prototype._checkFileExtension(m,n)[1]||"png"){default:a="image/png";break;case"jpeg":case"jpg":a="image/jpeg"}v.toBlob(function(p){h.default.prototype.downloadFile(p,m,n),s&&s.remove()},a)},h.default.prototype.encodeAndDownloadGif=function(v,m){for(var n=v.gifProperties,i=n.loopLimit,s=(i===1?i=null:i===null&&(i=0),new Uint8Array(v.width*v.height*n.numFrames)),a=[],c={},r=0;r<n.numFrames;r++){for(var u=new Set,p=n.frames[r].image.data,g=p.length,S=new Uint32Array(v.width*v.height),P=0,E=0;P<g;P+=4,E++){var T=p[P+0]<<16|p[P+1]<<8|p[P+2]<<0;u.add(T),S[E]=T}var O=d(u).sort().toString();c[O]===void 0?c[O]={freq:1,frames:[r]}:(c[O].freq+=1,c[O].frames.push(r)),a.push(S)}for(var D=[],R=Object.keys(c).sort(function(x,I){return c[I].freq-c[x].freq}),k=R[0].split(",").map(function(x){return parseInt(x)}),D=D.concat(c[k].frames),L=new Set(k),U=1;U<R.length;U++){var F=R[U].split(",").map(function(x){return parseInt(x)}).filter(function(x){return!L.has(x)});if(k.length+F.length<=256){for(var V=0;V<F.length;V++)k.push(F[V]),L.add(F[V]);D=D.concat(c[R[U]].frames)}}D=new Set(D);for(var X={},H=0;H<k.length;H++)X[k[H]]||(X[k[H]]=H);for(var G=1;G<k.length;)G<<=1;k.length=G;for(var i={loop:i,palette:new Uint32Array(k)},K=new y.default.GifWriter(s,v.width,v.height,i),Z={},oe=0;oe<n.numFrames;oe++)(function(I){var B=!D.has(I),W=B?[]:k,$=new Uint8Array(v.width*v.height),te={},ie=new Set,de=(a[I].forEach(function(ue,me){B?(te[ue]===void 0&&(te[ue]=W.length,W.push(ue)),$[me]=te[ue]):$[me]=X[ue],0<I&&a[I-1][me]!==ue&&ie.add(ue)}),{}),se=W.filter(function(ue){return!ie.has(ue)});if(0<se.length){var se=se[0],he=(B?te:X)[se];if(0<I){for(var ce=0;ce<a[I].length;ce++)a[I-1][ce]===a[I][ce]&&($[ce]=he);de.transparent=he,Z.frameOpts.disposal=1}}if(de.delay=n.frames[I].delay/10,B){for(var ee=1;ee<W.length;)ee<<=1;W.length=ee,de.palette=new Uint32Array(W)}0<I&&K.addFrame(0,0,v.width,v.height,Z.pixelPaletteIndex,Z.frameOpts),Z={pixelPaletteIndex:$,frameOpts:de}})(oe);Z.frameOpts.disposal=1,K.addFrame(0,0,v.width,v.height,Z.pixelPaletteIndex,Z.frameOpts),i=new Blob([s.slice(0,K.end())],{type:"image/gif"}),h.default.prototype.downloadFile(i,m,"gif")},h.default.prototype.saveFrames=function(v,m,n,a,s){h.default._validateParameters("saveFrames",arguments),n=h.default.prototype.constrain(n=n||3,0,15),n*=1e3;var a=h.default.prototype.constrain(a||15,0,22),c=0,r=h.default.prototype._makeFrame,u=this._curElement.elt,p=[],g=setInterval(function(){p.push(r(v+c,m,u)),c++},1e3/a);setTimeout(function(){if(clearInterval(g),s)s(p);else for(var S=0,P=p;S<P.length;S++){var E=P[S];h.default.prototype.downloadFile(E.imageData,E.filename,E.ext)}p=[]},.01+n)},h.default.prototype._makeFrame=function(v,m,s){var i,s=this?this._curElement.elt:s;if(m)switch(m.toLowerCase()){case"png":i="image/png";break;case"jpeg":case"jpg":i="image/jpeg";break;default:i="image/png"}else m="png",i="image/png";var s=(s=s.toDataURL(i)).replace(i,"image/octet-stream"),a={};return a.imageData=s,a.filename=v,a.ext=m,a},t=h.default,j.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,omggif:253}],303:[function(t,M,j){function h(u){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function y(u){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(p){return h(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":h(p)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,t("regenerator-runtime/runtime");var l=s(t("../core/main")),d=s(t("../core/helpers")),v=function(u){if(u&&u.__esModule)return u;if(u===null||y(u)!=="object"&&typeof u!="function")return{default:u};var p=i();if(p&&p.has(u))return p.get(u);var g,S={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in u){var E;Object.prototype.hasOwnProperty.call(u,g)&&((E=P?Object.getOwnPropertyDescriptor(u,g):null)&&(E.get||E.set)?Object.defineProperty(S,g,E):S[g]=u[g])}return S.default=u,p&&p.set(u,S),S}(t("../core/constants")),m=s(t("omggif")),n=t("gifenc");function i(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,i=function(){return u},u)}function s(u){return u&&u.__esModule?u:{default:u}}function a(u,p,g,S,P,E,T){try{var O=u[E](T),R=O.value}catch(k){return void g(k)}O.done?p(R):Promise.resolve(R).then(S,P)}function c(u,p,g,S,P,E,T,O,R,k,D){var L,U,F,V,X,H,G,K,Z;return u===v.COVER&&(L=p,F=g,G=E,K=T,H=O,Z=R,U=k,V=D,X=Math.max(G/U,K/V),G/=X,K/=X,X=H,H=Z,L===v.CENTER?X+=(U-G)/2:L===v.RIGHT&&(X+=U-G),F===v.CENTER?H+=(V-K)/2:F===v.BOTTOM&&(H+=V-K),O=(Z={x:X,y:H,w:G,h:K}).x,R=Z.y,k=Z.w,D=Z.h),u===v.CONTAIN&&(L=p,U=g,F=S,V=P,X=E,H=T,G=k,K=D,Z=Math.max(G/X,K/H),G/=Z,K/=Z,Z=F,F=V,L===v.CENTER?Z+=(X-G)/2:L===v.RIGHT&&(Z+=X-G),U===v.CENTER?F+=(H-K)/2:U===v.BOTTOM&&(F+=H-K),S=(u={x:Z,y:F,w:G,h:K}).x,P=u.y,E=u.w,T=u.h),{sx:O,sy:R,sw:k,sh:D,dx:S,dy:P,dw:E,dh:T}}function r(u,p){return 0<u&&u<p?u:p}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),l.default.prototype.loadImage=function(u,p,g){l.default._validateParameters("loadImage",arguments);var S=new l.default.Image(1,1,this),P=this,E=new Request(u,{method:"GET",mode:"cors"});return fetch(u,E).then(function(T){var O,R=T.headers.get("content-type");R===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),R&&R.includes("image/gif")?T.arrayBuffer().then(function(k){if(k){for(var k=new Uint8Array(k),D=S,L=p,U=g,F=(function(B){P._decrementPreload()}).bind(P),V=new m.default.GifReader(k),X=(D.width=D.canvas.width=V.width,D.height=D.canvas.height=V.height,[]),H=V.numFrames(),G=new Uint8ClampedArray(D.width*D.height*4),K=0;K<H;K++){var Z=V.frameInfo(K),oe=D.drawingContext.getImageData(0,0,D.width,D.height),x=(G=oe.data.slice(),function(B,W){try{W.decodeAndBlitFrameRGBA(B,G)}catch($){l.default._friendlyFileLoadError(8,D.src),typeof U=="function"?U($):console.error($)}}(K,V),new ImageData(G,D.width,D.height)),x=(D.drawingContext.putImageData(x,0,0),Z.delay);x===0&&(x=10),X.push({image:D.drawingContext.getImageData(0,0,D.width,D.height),delay:10*x}),Z.disposal===2?D.drawingContext.clearRect(Z.x,Z.y,Z.width,Z.height):Z.disposal===3&&D.drawingContext.putImageData(oe,0,0,Z.x,Z.y,Z.width,Z.height)}(k=V.loopCount())===null?k=1:k===0&&(k=null),D.drawingContext.putImageData(X[0].image,0,0),1<X.length&&(D.gifProperties={displayIndex:0,loopLimit:k,loopCount:0,frames:X,numFrames:H,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof L=="function"&&L(D),F()}},function(k){typeof g=="function"?(g(k),P._decrementPreload()):console.error(k)}):((O=new Image).onload=function(){S.width=S.canvas.width=O.width,S.height=S.canvas.height=O.height,S.drawingContext.drawImage(O,0,0),S.modified=!0,typeof p=="function"&&p(S),P._decrementPreload()},O.onerror=function(k){l.default._friendlyFileLoadError(0,O.src),typeof g=="function"?(g(k),P._decrementPreload()):console.error(k)},u.indexOf("data:image/")!==0&&(O.crossOrigin="Anonymous"),O.src=u),S.modified=!0}).catch(function(T){l.default._friendlyFileLoadError(0,u),typeof g=="function"?(g(T),P._decrementPreload()):console.error(T)}),S},l.default.prototype.saveGif=function(){u=regeneratorRuntime.mark(function g(S,P){var E,T,O,R,k,D,L,U,F,V,X,H,G,K,Z,oe,x,I,B,W,$,te,ie,de,se,he,ce=arguments;return regeneratorRuntime.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(E=2<ce.length&&ce[2]!==void 0?ce[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof S!="string")throw TypeError("fileName parameter must be a string");ee.next=3;break;case 3:if(typeof P!="number")throw TypeError("Duration parameter must be a number");ee.next=5;break;case 5:if(T=E&&E.delay||0,O=E&&E.units||"seconds",R=E&&E.silent||!1,k=E&&E.notificationDuration||0,D=E&&E.notificationID||"progressBar",typeof T!="number")throw TypeError("Delay parameter must be a number");ee.next=12;break;case 12:if(O!=="seconds"&&O!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');ee.next=14;break;case 14:if(typeof R!="boolean")throw TypeError("Silent parameter must be a boolean");ee.next=16;break;case 16:if(typeof k!="number")throw TypeError("Notification duration parameter must be a number");ee.next=18;break;case 18:if(typeof D!="string")throw TypeError("Notification ID parameter must be a string");ee.next=20;break;case 20:return this._recording=!0,V=this._targetFrameRate,L=(L=1/(V=V!==1/0&&V!==void 0&&V!==0?V:60)*1e3)<20?20:L,F=(U=O==="seconds"?P*V:P)+(V=O==="seconds"?T*V:T),V=V,this.frameCount=V,X=this._pixelDensity,this.pixelDensity(1),H=[],document.getElementById(D)!==null&&document.getElementById(D).remove(),R||((G=this.createP("")).id(D),G.style("font-size","16px"),G.style("font-family","Montserrat"),G.style("background-color","#ffffffa0"),G.style("padding","8px"),G.style("border-radius","10px"),G.position(0,0)),this._renderer instanceof l.default.RendererGL&&(Z=this.drawingContext,K=new Uint8Array(Z.drawingBufferWidth*Z.drawingBufferHeight*4)),this.noLoop(),ee.next=39,Promise.resolve();case 39:if(V<F)return this.redraw(),de=void 0,de=this._renderer instanceof l.default.RendererGL?(K=new Uint8Array(Z.drawingBufferWidth*Z.drawingBufferHeight*4),Z.readPixels(0,0,Z.drawingBufferWidth,Z.drawingBufferHeight,Z.RGBA,Z.UNSIGNED_BYTE,K),function(ue,me,je){for(var ye=parseInt(je/2),be=4*me,Se=new Uint8Array(4*me),Fe=0;Fe<ye;++Fe){var Me=Fe*be,Ze=(je-Fe-1)*be;Se.set(ue.subarray(Me,Me+be)),ue.copyWithin(Me,Ze,Ze+be),ue.set(Se,Ze)}return ue}(K,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,H.push(de),V++,R||G.html("Saved frame <b>"+H.length.toString()+"</b> out of "+U.toString()),ee.next=48,new Promise(function(ue){return setTimeout(ue,0)});ee.next=50;break;case 48:ee.next=39;break;case 50:R||G.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(X),oe=(0,n.GIFEncoder)(),x=function(ue){for(var me=new Uint8Array(ue.length*ue[0].length),je=0;je<ue.length;je++)me.set(ue[je],je*ue[0].length);var ye=(0,n.quantize)(me,256,{format:"rgba4444",oneBitAlpha:!0});return ye.length===256?ye[ye.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:ye.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),ye}(H),I={},B=function(ue){for(var me=ue.length/4,je=new Uint8Array(me),ye=0;ye<me;ye++){var be=ue[4*ye]<<24|ue[4*ye+1]<<16|ue[4*ye+2]<<8|ue[4*ye+3];I[be]===void 0&&(I[be]=(0,n.nearestColorIndex)(x,ue.slice(4*ye,4*(ye+1)))),je[ye]=I[be]}return je},W=x.length-1,$=[],te=0;case 60:if(!(te<H.length)){ee.next=71;break}if(ie=B(H[te]),de=ie.slice(),te===0)oe.writeFrame(ie,this.width,this.height,{palette:x,delay:L,dispose:1});else{for(se=0;se<ie.length;se++)ie[se]===$[se]&&(ie[se]=W);oe.writeFrame(ie,this.width,this.height,{delay:L,transparent:!0,transparentIndex:W,dispose:1})}return $=de,R||G.html("Rendered frame <b>"+te.toString()+"</b> out of "+U.toString()),ee.next=68,new Promise(function(ue){return setTimeout(ue,0)});case 68:te++,ee.next=60;break;case 71:oe.finish(),he=oe.bytesView(),he=new Blob([he],{type:"image/gif"}),H=[],this._recording=!1,this.loop(),R||(G.html("Done. Downloading your gif!🌸"),0<k&&setTimeout(function(){return G.remove()},1e3*k)),l.default.prototype.downloadFile(he,S,"gif");case 80:case"end":return ee.stop()}},g,this)});var u,p=function(){var g=this,S=arguments;return new Promise(function(P,E){var T=u.apply(g,S);function O(k){a(T,P,E,O,R,"next",k)}function R(k){a(T,P,E,O,R,"throw",k)}O(void 0)})};return function(g,S){return p.apply(this,arguments)}}(),l.default.prototype.image=function(u,p,g,S,V,X,H,G,Z,k,D,L){l.default._validateParameters("image",arguments);var K=u.width,U=u.height,F=(L=L||v.CENTER,D=D||v.CENTER,u.elt&&(K=K!==void 0?K:u.elt.width,U=U!==void 0?U:u.elt.height),u.elt&&u.elt.videoWidth&&!u.canvas&&(K=K!==void 0?K:u.elt.videoWidth,U=U!==void 0?U:u.elt.videoHeight),S||K),V=V||U,X=X||0,H=H||0,G=r(G!==void 0?G:K,K),K=r(Z!==void 0?Z:U,U),Z=1;u.elt&&!u.canvas&&u.elt.style.width&&(Z=u.elt.videoWidth&&!S?u.elt.videoWidth:u.elt.width,Z/=parseInt(u.elt.style.width,10)),X*=Z,H*=Z,K*=Z,G*=Z,U=c(k,D,L,(U=d.default.modeAdjust(p,g,F,V,this._renderer._imageMode)).x,U.y,U.w,U.h,X,H,G,K),this._renderer.image(u,U.sx,U.sy,U.sw,U.sh,U.dx,U.dy,U.dw,U.dh)},l.default.prototype.tint=function(){for(var u=arguments.length,p=new Array(u),g=0;g<u;g++)p[g]=arguments[g];l.default._validateParameters("tint",p);var S=this.color.apply(this,p);this._renderer._tint=S.levels},l.default.prototype.noTint=function(){this._renderer._tint=null},l.default.prototype._getTintedImageCanvas=l.default.Renderer2D.prototype._getTintedImageCanvas,l.default.prototype.imageMode=function(u){l.default._validateParameters("imageMode",arguments),u!==v.CORNER&&u!==v.CORNERS&&u!==v.CENTER||(this._renderer._imageMode=u)},t=l.default,j.default=t},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/helpers":276,"../core/main":280,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,gifenc:250,omggif:253,"regenerator-runtime/runtime":257}],304:[function(t,M,j){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=l(t("../core/main")),y=l(t("./filters"));function l(v){return v&&v.__esModule?v:{default:v}}function d(v,m){for(var n=0;n<m.length;n++){var i=m[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(v,i.key,i)}}h.default.Image=function(){function v(i,s){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this.width=i,this.height=s,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var m,n;return m=v,(n=[{key:"pixelDensity",value:function(i){return i!==void 0?(i<=0&&(h.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),i=1),this._pixelDensity=i,this.width/=i,this.height/=i,this):this._pixelDensity}},{key:"_animateGif",value:function(c){var s,a=this.gifProperties,c=c._lastRealFrameTime;a.lastChangeTime===0&&(a.lastChangeTime=c),a.playing&&(a.timeDisplayed=c-a.lastChangeTime,s=a.frames[a.displayIndex].delay,a.timeDisplayed>=s&&(s=Math.floor(a.timeDisplayed/s),a.timeDisplayed=0,a.lastChangeTime=c,a.displayIndex+=s,a.loopCount=Math.floor(a.displayIndex/a.numFrames),a.loopLimit!==null&&a.loopCount>=a.loopLimit?a.playing=!1:(c=a.displayIndex%a.numFrames,this.drawingContext.putImageData(a.frames[c].image,0,0),a.displayIndex=c,this.setModified(!0))))}},{key:"_setProperty",value:function(i,s){this[i]=s,this.setModified(!0)}},{key:"loadPixels",value:function(){h.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(i,s,a,c){h.default.Renderer2D.prototype.updatePixels.call(this,i,s,a,c),this.setModified(!0)}},{key:"get",value:function(i,s,a,c){return h.default._validateParameters("p5.Image.get",arguments),h.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return h.default.Renderer2D.prototype._getPixel.apply(this,s)}},{key:"set",value:function(i,s,a){h.default.Renderer2D.prototype.set.call(this,i,s,a),this.setModified(!0)}},{key:"resize",value:function(i,s){i===0&&s===0?(i=this.canvas.width,s=this.canvas.height):i===0?i=this.canvas.width*s/this.canvas.height:s===0&&(s=this.canvas.height*i/this.canvas.width),i=Math.floor(i),s=Math.floor(s);var a=document.createElement("canvas");if(a.width=i,a.height=s,this.gifProperties)for(var c=this.gifProperties,r=0;r<c.numFrames;r++){for(var u=this.drawingContext.createImageData(i,s),p=(T=T=E=P=S=void 0,c.frames[r].image),g=u,S=0,P=0;P<g.height;P++)for(var E=0;E<g.width;E++){var T=Math.floor(E*p.width/g.width),T=4*(Math.floor(P*p.height/g.height)*p.width+T);g.data[S++]=p.data[T++],g.data[S++]=p.data[T++],g.data[S++]=p.data[T++],g.data[S++]=p.data[+T]}c.frames[r].image=u}a.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,a.width,a.height),this.canvas.width=this.width=i,this.canvas.height=this.height=s,this.drawingContext.drawImage(a,0,0,i,s,0,0,i,s),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];h.default.prototype.copy.apply(this,s)}},{key:"mask",value:function(i){var s=this.drawingContext.globalCompositeOperation,a=1,c=[i=i===void 0?this:i,0,0,(a=i instanceof h.default.Renderer?i._pInst._pixelDensity:a)*i.width,a*i.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var r=0;r<this.gifProperties.frames.length;r++)this.drawingContext.putImageData(this.gifProperties.frames[r].image,0,0),this.copy.apply(this,c),this.gifProperties.frames[r].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,c);this.drawingContext.globalCompositeOperation=s,this.setModified(!0)}},{key:"filter",value:function(i,s){y.default.apply(this.canvas,y.default[i],s),this.setModified(!0)}},{key:"blend",value:function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];h.default._validateParameters("p5.Image.blend",arguments),h.default.prototype.blend.apply(this,s),this.setModified(!0)}},{key:"setModified",value:function(i){this._modified=i}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(i,s){this.gifProperties?h.default.prototype.encodeAndDownloadGif(this,i):h.default.prototype.saveCanvas(this.canvas,i,s)}},{key:"reset",value:function(){var i;this.gifProperties&&((i=this.gifProperties).playing=!0,i.timeSinceStart=0,i.timeDisplayed=0,i.lastChangeTime=0,i.loopCount=0,i.displayIndex=0,this.drawingContext.putImageData(i.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var i;if(this.gifProperties)return(i=this.gifProperties).displayIndex%i.numFrames}},{key:"setFrame",value:function(i){var s;this.gifProperties&&(i<(s=this.gifProperties).numFrames&&0<=i?(s.timeDisplayed=0,s.lastChangeTime=0,s.displayIndex=i,this.drawingContext.putImageData(s.frames[i].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(i,s){if(this.gifProperties){var a=this.gifProperties;if(s<a.numFrames&&0<=s)a.frames[s].delay=i;else{var c=!0,s=!1,r=void 0;try{for(var u,p=a.frames[Symbol.iterator]();!(c=(u=p.next()).done);c=!0)u.value.delay=i}catch(S){s=!0,r=S}finally{try{c||p.return==null||p.return()}finally{if(s)throw r}}}}}}])&&d(m.prototype,n),v}(),t=h.default.Image,j.default=t},{"../core/main":280,"./filters":301,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],305:[function(t,M,j){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=l(t("../core/main")),y=l(t("./filters"));function l(d){return d&&d.__esModule?d:{default:d}}t("../color/p5.Color"),h.default.prototype.pixels=[],h.default.prototype.blend=function(){for(var d,v=arguments.length,m=new Array(v),n=0;n<v;n++)m[n]=arguments[n];h.default._validateParameters("blend",m),this._renderer?(d=this._renderer).blend.apply(d,m):h.default.Renderer2D.prototype.blend.apply(this,m)},h.default.prototype.copy=function(){for(var d,v,m,n,i,s,a,c,r,u=arguments.length,p=new Array(u),g=0;g<u;g++)p[g]=arguments[g];if(h.default._validateParameters("copy",p),p.length===9)d=p[0],v=p[1],m=p[2],n=p[3],i=p[4],s=p[5],a=p[6],c=p[7],r=p[8];else{if(p.length!==8)throw new Error("Signature not supported");d=this,v=p[0],m=p[1],n=p[2],i=p[3],s=p[4],a=p[5],c=p[6],r=p[7]}h.default.prototype._copyHelper(this,d,v,m,n,i,s,a,c,r)},h.default.prototype._copyHelper=function(d,v,m,n,i,s,a,c,r,u){var p=v.canvas.width/v.width,g=0,S=0;v._renderer&&v._renderer.isP3D&&(g=v.width/2,S=v.height/2),d._renderer&&d._renderer.isP3D?(d.push(),d.resetMatrix(),d.noLights(),d.blendMode(d.BLEND),d.imageMode(d.CORNER),h.default.RendererGL.prototype.image.call(d._renderer,v,m+g,n+S,i,s,a,c,r,u),d.pop()):d.drawingContext.drawImage(v.canvas,p*(m+g),p*(n+S),p*i,p*s,a,c,r,u)},h.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},h.default.prototype.filter=function(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];h.default._validateParameters("filter",v);var a=(function(){var c,r={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof h.default.Shader?r.shader=arguments.length<=0?void 0:arguments[0]:(r.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(r.value=arguments.length<=1?void 0:arguments[1]),((c=arguments.length-1)<0||arguments.length<=c?void 0:arguments[c])===!1&&(r.useWebGL=!1)),r}).apply(void 0,v),n=a.shader,i=a.operation,s=a.value,a=a.useWebGL;this._renderer.isP3D&&n?h.default.RendererGL.prototype.filter.call(this._renderer,n):a||this._renderer.isP3D?(!a&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?h.default.RendererGL.prototype.filter.call(this._renderer,i,s):((n=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),n.filter.apply(n,v),this.copy(n._renderer,0,0,this.width,this.height,0,0,this.width,this.height),n.clear())):this.canvas!==void 0?y.default.apply(this.canvas,y.default[i],s):y.default.apply(this.elt,y.default[i],s)},h.default.prototype.get=function(d,v,m,n){var i;return h.default._validateParameters("get",arguments),(i=this._renderer).get.apply(i,arguments)},h.default.prototype.loadPixels=function(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];h.default._validateParameters("loadPixels",v),this._renderer.loadPixels()},h.default.prototype.set=function(d,v,m){this._renderer.set(d,v,m)},h.default.prototype.updatePixels=function(d,v,m,n){h.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(d,v,m,n)},t=h.default,j.default=t},{"../color/p5.Color":267,"../core/main":280,"./filters":301,"core-js/modules/es.array.filter":156}],306:[function(t,M,j){function h(s){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(s)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var y=v(t("../core/main")),l=(t("whatwg-fetch"),t("es6-promise/auto"),v(t("fetch-jsonp"))),d=v(t("file-saver"));function v(s){return s&&s.__esModule?s:{default:s}}function m(s){return(m=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(a){return h(a)}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":h(a)})(s)}function n(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function i(s,a){a&&a!==!0&&a!=="true"||(a="");var c="";return(s=s||"untitled")&&s.includes(".")&&(c=s.split(".").pop()),a&&c!==a&&(c=a,s="".concat(s,".").concat(c)),[s,c]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),y.default.prototype.loadJSON=function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];y.default._validateParameters("loadJSON",a);for(var r,u,p,g=a[0],S={},P="json",E=1;E<a.length;E++){var T=a[E];typeof T=="string"?T!=="jsonp"&&T!=="json"||(P=T):typeof T=="function"?r?u=T:r=T:m(T)==="object"&&(T.hasOwnProperty("jsonpCallback")||T.hasOwnProperty("jsonpCallbackFunction"))&&(P="jsonp",p=T)}var O=this;return this.httpDo(g,"GET",p,P,function(R){for(var k in R)S[k]=R[k];r!==void 0&&r(R),O._decrementPreload()},function(R){if(y.default._friendlyFileLoadError(5,g),!u)throw R;u(R)}),S},y.default.prototype.loadStrings=function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];y.default._validateParameters("loadStrings",a);for(var r,u,p=[],g=1;g<a.length;g++){var S=a[g];typeof S=="function"&&(r===void 0?r=S:u===void 0&&(u=S))}var P=this;return y.default.prototype.httpDo.call(this,a[0],"GET","text",function(E){for(var T=E.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),O=0,R=T.length;O<R;O+=32768)Array.prototype.push.apply(p,T.slice(O,Math.min(O+32768,R)));r!==void 0&&r(p),P._decrementPreload()},function(E){if(y.default._friendlyFileLoadError(3,E),!u)throw E;u(E)}),p},y.default.prototype.loadTable=function(s){var a,c,r,u=!1,p=s.substring(s.lastIndexOf(".")+1,s.length);p==="csv"?r=",":p==="ssv"?r=";":p==="tsv"&&(r="	");for(var g=1;g<arguments.length;g++)typeof arguments[g]=="function"?a===void 0?a=arguments[g]:c===void 0&&(c=arguments[g]):typeof arguments[g]=="string"&&(arguments[g]==="header"&&(u=!0),arguments[g]==="csv"?r=",":arguments[g]==="ssv"?r=";":arguments[g]==="tsv"&&(r="	"));var S=new y.default.Table,P=this;return this.httpDo(s,"GET","table",function(E){for(var T,O,R={},k=0,D=[],L=0,U=null,F=function(){R.currentState=k,R.token=""},V=function(){U.push(R.token),F()},X=function(){R.currentState=4,D.push(U),U=null};;){if((T=E[L++])==null){if(R.escaped)throw new Error("Unclosed quote in file.");if(U){V(),X();break}}if(U===null&&(R.escaped=!1,U=[],F()),R.currentState===k){if(T==='"'){R.escaped=!0,R.currentState=1;continue}R.currentState=1}if(R.currentState===1&&R.escaped)if(T==='"')E[L]==='"'?(R.token+='"',L++):(R.escaped=!1,R.currentState=2);else{if(T==="\r")continue;R.token+=T}else T==="\r"?(E[L]===`
`&&L++,V(),X()):T===`
`?(V(),X()):T===r?V():R.currentState===1&&(R.token+=T)}if(u)S.columns=D.shift();else for(var H=0;H<D[0].length;H++)S.columns[H]="null";for(var G=0;G<D.length;G++)(D[G].length!==1||D[G][0]!=="undefined"&&D[G][0]!=="")&&((O=new y.default.TableRow).arr=D[G],O.obj=function(K,Z){if((Z=Z||[])===void 0)for(var oe=0;oe<K.length;oe++)Z[oe.toString()]=oe;return Object.fromEntries(Z.map(function(x,I){return[x,K[I]]}))}(D[G],S.columns),S.addRow(O));typeof a=="function"&&a(S),P._decrementPreload()},function(E){y.default._friendlyFileLoadError(2,s),c?c(E):console.error(E)}),S},y.default.prototype.loadXML=function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];for(var r,u,p=new y.default.XML,g=1;g<a.length;g++){var S=a[g];typeof S=="function"&&(r===void 0?r=S:u===void 0&&(u=S))}var P=this;return this.httpDo(a[0],"GET","xml",function(E){for(var T in E)p[T]=E[T];r!==void 0&&r(p),P._decrementPreload()},function(E){if(y.default._friendlyFileLoadError(1,E),!u)throw E;u(E)}),p},y.default.prototype.loadBytes=function(s,a,c){var r={},u=this;return this.httpDo(s,"GET","arrayBuffer",function(p){r.bytes=new Uint8Array(p),typeof a=="function"&&a(r),u._decrementPreload()},function(p){if(y.default._friendlyFileLoadError(6,s),!c)throw p;c(p)}),r},y.default.prototype.httpGet=function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return y.default._validateParameters("httpGet",a),a.splice(1,0,"GET"),y.default.prototype.httpDo.apply(this,a)},y.default.prototype.httpPost=function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return y.default._validateParameters("httpPost",a),a.splice(1,0,"POST"),y.default.prototype.httpDo.apply(this,a)},y.default.prototype.httpDo=function(){for(var s,a,c,r={},u=0,p="text/plain",g=arguments.length-1;0<g&&typeof(g<0||arguments.length<=g?void 0:arguments[g])=="function";g--)u++;var S=arguments.length-u,P=arguments.length<=0?void 0:arguments[0];if(S==2&&typeof P=="string"&&m(arguments.length<=1?void 0:arguments[1])==="object")D=new Request(P,arguments.length<=1?void 0:arguments[1]),a=arguments.length<=2?void 0:arguments[2],c=arguments.length<=3?void 0:arguments[3];else{for(var E,T="GET",O=1;O<arguments.length;O++){var R=O<0||arguments.length<=O?void 0:arguments[O];if(typeof R=="string")R==="GET"||R==="POST"||R==="PUT"||R==="DELETE"?T=R:R==="json"||R==="jsonp"||R==="binary"||R==="arrayBuffer"||R==="xml"||R==="text"||R==="table"?s=R:E=R;else if(typeof R=="number")E=R.toString();else if(m(R)==="object")if(R.hasOwnProperty("jsonpCallback")||R.hasOwnProperty("jsonpCallbackFunction"))for(var k in R)r[k]=R[k];else p=R instanceof y.default.XML?(E=R.serialize(),"application/xml"):(E=JSON.stringify(R),"application/json");else typeof R=="function"&&(a?c=R:a=R)}var S=T==="GET"?new Headers:new Headers({"Content-Type":p}),D=new Request(P,{method:T,mode:"cors",body:E,headers:S})}return(S=(S=(s=s||(P.includes("json")?"json":P.includes("xml")?"xml":"text"))==="jsonp"?(0,l.default)(P,r):fetch(D)).then(function(L){if(!L.ok)throw(U=new Error(L.body)).status=L.status,U.ok=!1,U;var U=0;switch((U=s!=="jsonp"?L.headers.get("content-length"):U)&&64e6<U&&y.default._friendlyFileLoadError(7,P),s){case"json":case"jsonp":return L.json();case"binary":return L.blob();case"arrayBuffer":return L.arrayBuffer();case"xml":return L.text().then(function(F){return F=new DOMParser().parseFromString(F,"text/xml"),new y.default.XML(F.documentElement)});default:return L.text()}})).then(a||function(){}),S.catch(c||console.error),S},window.URL=window.URL||window.webkitURL,y.default.prototype._pWriters=[],y.default.prototype.createWriter=function(s,a){var c,r;for(r in y.default.prototype._pWriters)if(y.default.prototype._pWriters[r].name===s)return c=new y.default.PrintWriter(s+this.millis(),a),y.default.prototype._pWriters.push(c),c;return c=new y.default.PrintWriter(s,a),y.default.prototype._pWriters.push(c),c},y.default.PrintWriter=function(s,a){var c=this;this.name=s,this.content="",this.write=function(r){this.content+=r},this.print=function(r){this.content+="".concat(r,`
`)},this.clear=function(){this.content=""},this.close=function(){var r,u=[];for(r in u.push(this.content),y.default.prototype.writeFile(u,s,a),y.default.prototype._pWriters)y.default.prototype._pWriters[r].name===this.name&&y.default.prototype._pWriters.splice(r,1);c.clear(),c={}}},y.default.prototype.save=function(s,a,c){var r=arguments,u=(this._curElement||this).elt;if(r.length===0)y.default.prototype.saveCanvas(u);else if(r[0]instanceof y.default.Renderer||r[0]instanceof y.default.Graphics)y.default.prototype.saveCanvas(r[0].elt,r[1],r[2]);else if(r.length===1&&typeof r[0]=="string")y.default.prototype.saveCanvas(u,r[0]);else switch(i(r[1],r[2])[1]){case"json":return void y.default.prototype.saveJSON(r[0],r[1],r[2]);case"txt":return void y.default.prototype.saveStrings(r[0],r[1],r[2]);default:r[0]instanceof Array?y.default.prototype.saveStrings(r[0],r[1],r[2]):r[0]instanceof y.default.Table?y.default.prototype.saveTable(r[0],r[1],r[2]):r[0]instanceof y.default.Image?y.default.prototype.saveCanvas(r[0].canvas,r[1]):r[0]instanceof y.default.SoundFile&&y.default.prototype.saveSound(r[0],r[1],r[2],r[3])}},y.default.prototype.saveJSON=function(s,a,c){y.default._validateParameters("saveJSON",arguments),c=c?JSON.stringify(s):JSON.stringify(s,void 0,2),this.saveStrings(c.split(`
`),a,"json")},y.default.prototype.saveJSONObject=y.default.prototype.saveJSON,y.default.prototype.saveJSONArray=y.default.prototype.saveJSON,y.default.prototype.saveStrings=function(s,a,c,r){y.default._validateParameters("saveStrings",arguments);for(var u=this.createWriter(a,c||"txt"),p=0;p<s.length;p++)r?u.write(s[p]+`\r
`):u.write(s[p]+`
`);u.close(),u.clear()},y.default.prototype.saveTable=function(s,a,c){y.default._validateParameters("saveTable",arguments),r=c===void 0?a.substring(a.lastIndexOf(".")+1,a.length):c;var r,u=this.createWriter(a,r),p=s.columns,g=r==="tsv"?"	":",";if(r!=="html"){if(p[0]!=="0"){for(var S=0;S<p.length;S++)S<p.length-1?u.write(p[S]+g):u.write(p[S]);u.write(`
`)}for(var P=0;P<s.rows.length;P++){for(var E=void 0,E=0;E<s.rows[P].arr.length;E++)E<s.rows[P].arr.length-1?r==="csv"&&String(s.rows[P].arr[E]).includes(",")?u.write('"'+s.rows[P].arr[E]+'"'+g):u.write(s.rows[P].arr[E]+g):r==="csv"&&String(s.rows[P].arr[E]).includes(",")?u.write('"'+s.rows[P].arr[E]+'"'):u.write(s.rows[P].arr[E]);u.write(`
`)}}else{if(u.print("<html>"),u.print("<head>"),u.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),u.print("</head>"),u.print("<body>"),u.print("  <table>"),p[0]!=="0"){u.print("    <tr>");for(var T=0;T<p.length;T++){var O=n(p[T]);u.print("      <td>".concat(O)),u.print("      </td>")}u.print("    </tr>")}for(var R=0;R<s.rows.length;R++){u.print("    <tr>");for(var k=0;k<s.columns.length;k++){var D=n(s.rows[R].getString(k));u.print("      <td>".concat(D)),u.print("      </td>")}u.print("    </tr>")}u.print("  </table>"),u.print("</body>"),u.print("</html>")}u.close(),u.clear()},y.default.prototype.writeFile=function(u,a,c){var r="application/octet-stream",u=(y.default.prototype._isSafari()&&(r="text/plain"),new Blob(u,{type:r}));y.default.prototype.downloadFile(u,a,c)},y.default.prototype.downloadFile=function(s,u,p){var r,u=i(u,p),p=u[0];s instanceof Blob?d.default.saveAs(s,p):((r=document.createElement("a")).href=s,r.download=p,r.onclick=function(g){document.body.removeChild(g.target),g.stopPropagation()},r.style.display="none",document.body.appendChild(r),y.default.prototype._isSafari()&&(s=(s=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(u[1],'"'),alert(s)),r.click())},y.default.prototype._checkFileExtension=i,y.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},t=y.default,j.default=t},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245,"es6-promise/auto":246,"fetch-jsonp":248,"file-saver":249,"whatwg-fetch":258}],307:[function(t,M,j){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};function y(l,d){for(var v=0;v<d.length;v++){var m=d[v];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}h.default.Table=function(){function l(m){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=[]}var d,v;return d=l,(v=[{key:"addRow",value:function(m){if(m=m||new h.default.TableRow,m.arr===void 0||m.obj===void 0)throw new Error("invalid TableRow: ".concat(m));return(m.table=this).rows.push(m),m}},{key:"removeRow",value:function(m){this.rows[m].table=null,m=this.rows.splice(m+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(m)}},{key:"getRow",value:function(m){return this.rows[m]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(m,n){if(typeof n=="string"){for(var i=0;i<this.rows.length;i++)if(this.rows[i].obj[n]===m)return this.rows[i]}else for(var s=0;s<this.rows.length;s++)if(this.rows[s].arr[n]===m)return this.rows[s];return null}},{key:"findRows",value:function(m,n){var i=[];if(typeof n=="string")for(var s=0;s<this.rows.length;s++)this.rows[s].obj[n]===m&&i.push(this.rows[s]);else for(var a=0;a<this.rows.length;a++)this.rows[a].arr[n]===m&&i.push(this.rows[a]);return i}},{key:"matchRow",value:function(m,n){if(typeof n=="number"){for(var i=0;i<this.rows.length;i++)if(this.rows[i].arr[n].match(m))return this.rows[i]}else for(var s=0;s<this.rows.length;s++)if(this.rows[s].obj[n].match(m))return this.rows[s];return null}},{key:"matchRows",value:function(m,n){var i=[];if(typeof n=="number")for(var s=0;s<this.rows.length;s++)this.rows[s].arr[n].match(m)&&i.push(this.rows[s]);else for(var a=0;a<this.rows.length;a++)this.rows[a].obj[n].match(m)&&i.push(this.rows[a]);return i}},{key:"getColumn",value:function(m){var n=[];if(typeof m=="string")for(var i=0;i<this.rows.length;i++)n.push(this.rows[i].obj[m]);else for(var s=0;s<this.rows.length;s++)n.push(this.rows[s].arr[m]);return n}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(m){this.columns.push(m||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(m,n){for(var i=[],s=0;s<m.length;s++)i.push(m.charAt(s).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var a=new RegExp(i.join("|"),"g");if(n===void 0)for(var c=0;c<this.columns.length;c++)for(var r=0;r<this.rows.length;r++){var u=(u=this.rows[r].arr[c]).replace(a,"");this.rows[r].arr[c]=u,this.rows[r].obj[this.columns[c]]=u}else if(typeof n=="string")for(var p=0;p<this.rows.length;p++){var g=(g=this.rows[p].obj[n]).replace(a,""),S=(this.rows[p].obj[n]=g,this.columns.indexOf(n));this.rows[p].arr[S]=g}else for(var P=0;P<this.rows.length;P++){var E=(E=this.rows[P].arr[n]).replace(a,"");this.rows[P].arr[n]=E,this.rows[P].obj[this.columns[n]]=E}}},{key:"trim",value:function(m){var n=new RegExp(" ","g");if(m===void 0)for(var i=0;i<this.columns.length;i++)for(var s=0;s<this.rows.length;s++){var a=(a=this.rows[s].arr[i]).replace(n,"");this.rows[s].arr[i]=a,this.rows[s].obj[this.columns[i]]=a}else if(typeof m=="string")for(var c=0;c<this.rows.length;c++){var r=(r=this.rows[c].obj[m]).replace(n,""),u=(this.rows[c].obj[m]=r,this.columns.indexOf(m));this.rows[c].arr[u]=r}else for(var p=0;p<this.rows.length;p++){var g=(g=this.rows[p].arr[m]).replace(n,"");this.rows[p].arr[m]=g,this.rows[p].obj[this.columns[m]]=g}}},{key:"removeColumn",value:function(s){typeof s=="string"?i=this.columns.indexOf(n=s):n=this.columns[i=s];var n,i,s=this.columns.splice(i+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(s);for(var a=0;a<this.rows.length;a++){var c=this.rows[a].arr,r=c.splice(i+1,c.length);c.pop(),this.rows[a].arr=c.concat(r),delete this.rows[a].obj[n]}}},{key:"set",value:function(m,n,i){this.rows[m].set(n,i)}},{key:"setNum",value:function(m,n,i){this.rows[m].setNum(n,i)}},{key:"setString",value:function(m,n,i){this.rows[m].setString(n,i)}},{key:"get",value:function(m,n){return this.rows[m].get(n)}},{key:"getNum",value:function(m,n){return this.rows[m].getNum(n)}},{key:"getString",value:function(m,n){return this.rows[m].getString(n)}},{key:"getObject",value:function(m){for(var n,i={},s=0;s<this.rows.length;s++)if(n=this.rows[s].obj,typeof m=="string"){if(!(0<=this.columns.indexOf(m)))throw new Error('This table has no column named "'.concat(m,'"'));i[n[m]]=n}else i[s]=this.rows[s].obj;return i}},{key:"getArray",value:function(){for(var m=[],n=0;n<this.rows.length;n++)m.push(this.rows[n].arr);return m}}])&&y(d.prototype,v),l}(),t=h.default,j.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.splice":170,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201}],308:[function(t,M,j){t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function h(y,l){for(var d=0;d<l.length;d++){var v=l[d];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,v.key,v)}}t.default.TableRow=function(){function y(v,m){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");var n=[];v&&(n=v.split(m=m||",")),this.arr=n,this.obj=Object.fromEntries(n.entries()),this.table=null}var l,d;return l=y,(d=[{key:"set",value:function(v,m){if(typeof v=="string"){var n=this.table.columns.indexOf(v);if(!(0<=n))throw new Error('This table has no column named "'.concat(v,'"'));this.obj[v]=m,this.arr[n]=m}else{if(!(v<this.table.columns.length))throw new Error("Column #".concat(v," is out of the range of this table"));this.arr[v]=m,n=this.table.columns[v],this.obj[n]=m}}},{key:"setNum",value:function(v,m){m=parseFloat(m),this.set(v,m)}},{key:"setString",value:function(v,m){m=m.toString(),this.set(v,m)}},{key:"get",value:function(v){return(typeof v=="string"?this.obj:this.arr)[v]}},{key:"getNum",value:function(v){var m=parseFloat(typeof v=="string"?this.obj[v]:this.arr[v]);if(m.toString()==="NaN")throw"Error: ".concat(this.obj[v]," is NaN (Not a Number)");return m}},{key:"getString",value:function(v){return(typeof v=="string"?this.obj:this.arr)[v].toString()}}])&&h(l.prototype,d),y}(),t=t.default,j.default=t},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243}],309:[function(t,M,j){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};function y(d,v){for(var m=0;m<v.length;m++){var n=v[m];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(d,n.key,n)}}function l(d){for(var v=[],m=0;m<d.length;m++)v.push(new h.default.XML(d[m]));return v}h.default.XML=function(){function d(n){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");n?this.DOM=n:(n=document.implementation.createDocument(null,"doc"),this.DOM=n.createElement("root"))}var v,m;return v=d,(m=[{key:"getParent",value:function(){return new h.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(n){var i=this.DOM.innerHTML,s=this.DOM.attributes,a=document.implementation.createDocument(null,"default").createElement(n);a.innerHTML=i;for(var c=0;c<s.length;c++)a.setAttribute(s[c].nodeName,s.nodeValue);this.DOM=a}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var n=[],i=0;i<this.DOM.childNodes.length;i++)n.push(this.DOM.childNodes[i].nodeName);return n}},{key:"getChildren",value:function(n){return l(n?this.DOM.getElementsByTagName(n):this.DOM.children)}},{key:"getChild",value:function(n){if(typeof n!="string")return new h.default.XML(this.DOM.children[n]);var i=!0,s=!1,a=void 0;try{for(var c,r=this.DOM.children[Symbol.iterator]();!(i=(c=r.next()).done);i=!0){var u=c.value;if(u.tagName===n)return new h.default.XML(u)}}catch(p){s=!0,a=p}finally{try{i||r.return==null||r.return()}finally{if(s)throw a}}}},{key:"addChild",value:function(n){n instanceof h.default.XML&&this.DOM.appendChild(n.DOM)}},{key:"removeChild",value:function(n){var i=-1;if(typeof n=="string"){for(var s=0;s<this.DOM.children.length;s++)if(this.DOM.children[s].tagName===n){i=s;break}}else i=n;i!==-1&&this.DOM.removeChild(this.DOM.children[i])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var n=[],i=!0,s=!1,a=void 0;try{for(var c,r=this.DOM.attributes[Symbol.iterator]();!(i=(c=r.next()).done);i=!0){var u=c.value;n.push(u.nodeName)}}catch(p){s=!0,a=p}finally{try{i||r.return==null||r.return()}finally{if(s)throw a}}return n}},{key:"hasAttribute",value:function(n){var i={},s=!0,a=!1,c=void 0;try{for(var r,u=this.DOM.attributes[Symbol.iterator]();!(s=(r=u.next()).done);s=!0){var p=r.value;i[p.nodeName]=p.nodeValue}}catch(g){a=!0,c=g}finally{try{s||u.return==null||u.return()}finally{if(a)throw c}}return!!i[n]}},{key:"getNum",value:function(n,i){var s={},a=!0,c=!1,r=void 0;try{for(var u,p=this.DOM.attributes[Symbol.iterator]();!(a=(u=p.next()).done);a=!0){var g=u.value;s[g.nodeName]=g.nodeValue}}catch(S){c=!0,r=S}finally{try{a||p.return==null||p.return()}finally{if(c)throw r}}return Number(s[n])||i||0}},{key:"getString",value:function(n,i){var s={},a=!0,c=!1,r=void 0;try{for(var u,p=this.DOM.attributes[Symbol.iterator]();!(a=(u=p.next()).done);a=!0){var g=u.value;s[g.nodeName]=g.nodeValue}}catch(S){c=!0,r=S}finally{try{a||p.return==null||p.return()}finally{if(c)throw r}}return s[n]?String(s[n]):i||null}},{key:"setAttribute",value:function(n,i){this.DOM.setAttribute(n,i)}},{key:"getContent",value:function(n){var i=this.DOM.textContent;return(i=i.replace(/\s\s+/g,","))||n||null}},{key:"setContent",value:function(n){this.DOM.children.length||(this.DOM.textContent=n)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&y(v.prototype,m),d}(),t=h.default,j.default=t},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],310:[function(t,M,j){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.string.includes"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};function y(l){return function(d){if(Array.isArray(d)){for(var v=0,m=new Array(d.length);v<d.length;v++)m[v]=d[v];return m}}(l)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}h.default.prototype.abs=Math.abs,h.default.prototype.ceil=Math.ceil,h.default.prototype.constrain=function(l,d,v){return h.default._validateParameters("constrain",arguments),Math.max(Math.min(l,v),d)},h.default.prototype.dist=function(){for(var l=arguments.length,d=new Array(l),v=0;v<l;v++)d[v]=arguments[v];return h.default._validateParameters("dist",d),d.length===4?Math.hypot(d[2]-d[0],d[3]-d[1]):d.length===6?Math.hypot(d[3]-d[0],d[4]-d[1],d[5]-d[2]):void 0},h.default.prototype.exp=Math.exp,h.default.prototype.floor=Math.floor,h.default.prototype.lerp=function(l,d,v){return h.default._validateParameters("lerp",arguments),v*(d-l)+l},h.default.prototype.log=Math.log,h.default.prototype.mag=function(l,d){return h.default._validateParameters("mag",arguments),Math.hypot(l,d)},h.default.prototype.map=function(l,d,v,m,n,i){return h.default._validateParameters("map",arguments),l=(l-d)/(v-d)*(n-m)+m,i?m<n?this.constrain(l,m,n):this.constrain(l,n,m):l},h.default.prototype.max=function(){for(var l=function(n){return Math.max.apply(Math,y(n))},d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return Array.isArray(v[0])?l(v[0]):l(v)},h.default.prototype.min=function(){for(var l=function(n){return Math.min.apply(Math,y(n))},d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return Array.isArray(v[0])?l(v[0]):l(v)},h.default.prototype.norm=function(l,d,v){return h.default._validateParameters("norm",arguments),this.map(l,d,v,0,1)},h.default.prototype.pow=Math.pow,h.default.prototype.round=function(l,d){return d?(d=Math.pow(10,d),Math.round(l*d)/d):Math.round(l)},h.default.prototype.sq=function(l){return l*l},h.default.prototype.sqrt=Math.sqrt,h.default.prototype.fract=function(m){h.default._validateParameters("fract",arguments);var d,v=0,m=Number(m);return isNaN(m)||Math.abs(m)===1/0?m:(m<0&&(m=-m,v=1),String(m).includes(".")&&!String(m).includes("e")?(d=String(m),d=+("0"+d.slice(d.indexOf("."))),Math.abs(v-d)):m<1?Math.abs(v-m):0)},t=h.default,j.default=t},{"../core/main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],311:[function(t,M,j){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};function y(d,v,m){return(y=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(n,i,s){var a=[null];return a.push.apply(a,i),i=new(Function.bind.apply(n,a)),s&&l(i,s.prototype),i}).apply(null,arguments)}function l(d,v){return(l=Object.setPrototypeOf||function(m,n){return m.__proto__=n,m})(d,v)}h.default.prototype.createVector=function(d,v,m){return this instanceof h.default?y(h.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new h.default.Vector(d,v,m)},t=h.default,j.default=t},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193}],312:[function(m,M,j){Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,m=(m=m("../core/main"))&&m.__esModule?m:{default:m};function h(n){return .5*(1-Math.cos(n*Math.PI))}var y,l=4095,d=4,v=.5,m=(m.default.prototype.noise=function(n){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(y==null){y=new Array(4096);for(var a=0;a<4096;a++)y[a]=Math.random()}n<0&&(n=-n),i<0&&(i=-i),s<0&&(s=-s);for(var c,r,u=Math.floor(n),p=Math.floor(i),g=Math.floor(s),S=n-u,P=i-p,E=s-g,T=0,O=.5,R=0;R<d;R++){var k=u+(p<<4)+(g<<8),D=h(S),L=h(P),U=y[k&l];U+=D*(y[k+1&l]-U),c=y[k+16&l],U+=L*((c+=D*(y[k+16+1&l]-c))-U),c=y[(k+=256)&l],c+=D*(y[k+1&l]-c),r=y[k+16&l],c+=L*((r+=D*(y[k+16+1&l]-r))-c),T+=(U+=h(E)*(c-U))*O,O*=v,u<<=1,p<<=1,g<<=1,1<=(S*=2)&&(u++,S--),1<=(P*=2)&&(p++,P--),1<=(E*=2)&&(g++,E--)}return T},m.default.prototype.noiseDetail=function(n,i){0<n&&(d=n),0<i&&(v=i)},m.default.prototype.noiseSeed=function(n){a=4294967296;var i,s,a,c={setSeed:function(u){s=i=(u??Math.random()*a)>>>0},getSeed:function(){return i},rand:function(){return(s=(1664525*s+1013904223)%a)/a}};c.setSeed(n),y=new Array(4096);for(var r=0;r<4096;r++)y[r]=c.rand()},m.default);j.default=m},{"../core/main":280}],313:[function(t,M,j){function h(i){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(i)}function y(i){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(s){return h(s)}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":h(s)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.string.sub"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(n=t("../core/main"))&&n.__esModule?n:{default:n},d=function(i){if(i&&i.__esModule)return i;if(i===null||y(i)!=="object"&&typeof i!="function")return{default:i};var s=v();if(s&&s.has(i))return s.get(i);var a,c={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in i){var u;Object.prototype.hasOwnProperty.call(i,a)&&((u=r?Object.getOwnPropertyDescriptor(i,a):null)&&(u.get||u.set)?Object.defineProperty(c,a,u):c[a]=i[a])}return c.default=i,s&&s.set(i,c),c}(t("../core/constants"));function v(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,v=function(){return i},i)}function m(i,s){for(var a=0;a<s.length;a++){var c=s[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}l.default.Vector=function(){function i(){var g=this,r=i;if(!(g instanceof r))throw new TypeError("Cannot call a class as a function");var u,p,g=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],u=(arguments.length<=2?void 0:arguments[2])||0,p=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(u=(arguments.length<=0?void 0:arguments[0])||0,p=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=u,this.y=p,this.z=g}var s,a,c;return s=i,c=[{key:"fromAngle",value:function(r,u){return new l.default.Vector((u=u===void 0?1:u)*Math.cos(r),u*Math.sin(r),0)}},{key:"fromAngles",value:function(E,S,p){p===void 0&&(p=1);var g=Math.cos(S),S=Math.sin(S),P=Math.cos(E),E=Math.sin(E);return new l.default.Vector(p*E*S,-p*P,p*E*g)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*d.TWO_PI)}},{key:"random3D",value:function(){var r=Math.random()*d.TWO_PI,u=2*Math.random()-1,g=Math.sqrt(1-u*u),p=g*Math.cos(r),g=g*Math.sin(r);return new l.default.Vector(p,g,u)}},{key:"copy",value:function(r){return r.copy(r)}},{key:"add",value:function(r,u,p){return p?p.set(r):(p=r.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),p.add(u),p}},{key:"rem",value:function(r,u){if(r instanceof l.default.Vector&&u instanceof l.default.Vector)return(r=r.copy()).rem(u),r}},{key:"sub",value:function(r,u,p){return p?p.set(r):(p=r.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),p.sub(u),p}},{key:"mult",value:function(r,u,p){return p?p.set(r):(p=r.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),p.mult(u),p}},{key:"rotate",value:function(r,u,p){return arguments.length===2?p=r.copy():(p instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),p.set(r)),p.rotate(u),p}},{key:"div",value:function(r,u,p){return p?p.set(r):(p=r.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),p.div(u),p}},{key:"dot",value:function(r,u){return r.dot(u)}},{key:"cross",value:function(r,u){return r.cross(u)}},{key:"dist",value:function(r,u){return r.dist(u)}},{key:"lerp",value:function(r,u,p,g){return g?g.set(r):(g=r.copy(),arguments.length===4&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),g.lerp(u,p),g}},{key:"slerp",value:function(r,u,p,g){return g?g.set(r):(g=r.copy(),arguments.length===4&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),g.slerp(u,p),g}},{key:"mag",value:function(r){return r.mag()}},{key:"magSq",value:function(r){return r.magSq()}},{key:"normalize",value:function(r,u){return arguments.length<2?u=r.copy():(u instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),u.set(r)),u.normalize()}},{key:"limit",value:function(r,u,p){return arguments.length<3?p=r.copy():(p instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),p.set(r)),p.limit(u)}},{key:"setMag",value:function(r,u,p){return arguments.length<3?p=r.copy():(p instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),p.set(r)),p.setMag(u)}},{key:"heading",value:function(r){return r.heading()}},{key:"angleBetween",value:function(r,u){return r.angleBetween(u)}},{key:"reflect",value:function(r,u,p){return arguments.length<3?p=r.copy():(p instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),p.set(r)),p.reflect(u)}},{key:"array",value:function(r){return r.array()}},{key:"equals",value:function(r,u){var p;return r instanceof l.default.Vector?p=r:Array.isArray(r)?p=new l.default.Vector().set(r):l.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),p.equals(u)}}],(a=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(r,u,p){return r instanceof l.default.Vector?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0):Array.isArray(r)?(this.x=r[0]||0,this.y=r[1]||0,this.z=r[2]||0):(this.x=r||0,this.y=u||0,this.z=p||0),this}},{key:"copy",value:function(){return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new l.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(r,u,p){return r instanceof l.default.Vector?(this.x+=r.x||0,this.y+=r.y||0,this.z+=r.z||0):Array.isArray(r)?(this.x+=r[0]||0,this.y+=r[1]||0,this.z+=r[2]||0):(this.x+=r||0,this.y+=u||0,this.z+=p||0),this}},{key:"calculateRemainder2D",value:function(r,u){return r!==0&&(this.x=this.x%r),u!==0&&(this.y=this.y%u),this}},{key:"calculateRemainder3D",value:function(r,u,p){return r!==0&&(this.x=this.x%r),u!==0&&(this.y=this.y%u),p!==0&&(this.z=this.z%p),this}},{key:"rem",value:function(r,u,p){var g;if(r instanceof l.default.Vector){if([r.x,r.y,r.z].every(Number.isFinite))return S=parseFloat(r.x),P=parseFloat(r.y),g=parseFloat(r.z),this.calculateRemainder3D(S,P,g)}else if(Array.isArray(r)){if(r.every(function(E){return Number.isFinite(E)}))return r.length===2?this.calculateRemainder2D(r[0],r[1]):r.length===3?this.calculateRemainder3D(r[0],r[1],r[2]):void 0}else if(arguments.length===1){if(Number.isFinite(r)&&r!==0)return this.x=this.x%r,this.y=this.y%r,this.z=this.z%r,this}else if(arguments.length===2){var S=Array.prototype.slice.call(arguments);if(S.every(function(E){return Number.isFinite(E)})&&S.length===2)return this.calculateRemainder2D(S[0],S[1])}else if(arguments.length===3){var P=Array.prototype.slice.call(arguments);if(P.every(function(E){return Number.isFinite(E)})&&P.length===3)return this.calculateRemainder3D(P[0],P[1],P[2])}}},{key:"sub",value:function(r,u,p){return r instanceof l.default.Vector?(this.x-=r.x||0,this.y-=r.y||0,this.z-=r.z||0):Array.isArray(r)?(this.x-=r[0]||0,this.y-=r[1]||0,this.z-=r[2]||0):(this.x-=r||0,this.y-=u||0,this.z-=p||0),this}},{key:"mult",value:function(r,u,p){var g;return r instanceof l.default.Vector?Number.isFinite(r.x)&&Number.isFinite(r.y)&&Number.isFinite(r.z)&&typeof r.x=="number"&&typeof r.y=="number"&&typeof r.z=="number"?(this.x*=r.x,this.y*=r.y,this.z*=r.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(r)?r.every(function(S){return Number.isFinite(S)})&&r.every(function(S){return typeof S=="number"})?r.length===1?(this.x*=r[0],this.y*=r[0],this.z*=r[0]):r.length===2?(this.x*=r[0],this.y*=r[1]):r.length===3&&(this.x*=r[0],this.y*=r[1],this.z*=r[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(g=Array.prototype.slice.call(arguments)).every(function(S){return Number.isFinite(S)})&&g.every(function(S){return typeof S=="number"})?(arguments.length===1&&(this.x*=r,this.y*=r,this.z*=r),arguments.length===2&&(this.x*=r,this.y*=u),arguments.length===3&&(this.x*=r,this.y*=u,this.z*=p)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(r,u,p){if(r instanceof l.default.Vector)if(Number.isFinite(r.x)&&Number.isFinite(r.y)&&Number.isFinite(r.z)&&typeof r.x=="number"&&typeof r.y=="number"&&typeof r.z=="number"){var g=r.z===0&&this.z===0;if(r.x===0||r.y===0||!g&&r.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=r.x,this.y/=r.y,g||(this.z/=r.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(r))if(r.every(function(S){return Number.isFinite(S)})&&r.every(function(S){return typeof S=="number"})){if(r.some(function(S){return S===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;r.length===1?(this.x/=r[0],this.y/=r[0],this.z/=r[0]):r.length===2?(this.x/=r[0],this.y/=r[1]):r.length===3&&(this.x/=r[0],this.y/=r[1],this.z/=r[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(g=Array.prototype.slice.call(arguments),g.every(function(S){return Number.isFinite(S)})&&g.every(function(S){return typeof S=="number"})){if(g.some(function(S){return S===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=r,this.y/=r,this.z/=r),arguments.length===2&&(this.x/=r,this.y/=u),arguments.length===3&&(this.x/=r,this.y/=u,this.z/=p)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var r=this.x,u=this.y,p=this.z;return r*r+u*u+p*p}},{key:"dot",value:function(r,u,p){return r instanceof l.default.Vector?this.dot(r.x,r.y,r.z):this.x*(r||0)+this.y*(u||0)+this.z*(p||0)}},{key:"cross",value:function(g){var u=this.y*g.z-this.z*g.y,p=this.z*g.x-this.x*g.z,g=this.x*g.y-this.y*g.x;return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,u,p,g):new l.default.Vector(u,p,g)}},{key:"dist",value:function(r){return r.copy().sub(this).mag()}},{key:"normalize",value:function(){var r=this.mag();return r!==0&&this.mult(1/r),this}},{key:"limit",value:function(r){var u=this.magSq();return r*r<u&&this.div(Math.sqrt(u)).mult(r),this}},{key:"setMag",value:function(r){return this.normalize().mult(r)}},{key:"heading",value:function(){var r=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(r):r}},{key:"setHeading",value:function(r){this.isPInst&&(r=this._toRadians(r));var u=this.mag();return this.x=u*Math.cos(r),this.y=u*Math.sin(r),this}},{key:"rotate",value:function(u){var u=this.heading()+u,p=(this.isPInst&&(u=this._toRadians(u)),this.mag());return this.x=Math.cos(u)*p,this.y=Math.sin(u)*p,this}},{key:"angleBetween",value:function(r){var u;return this.magSq()*r.magSq()==0?NaN:(u=this.cross(r),r=Math.atan2(u.mag(),this.dot(r))*Math.sign(u.z||1),this.isPInst?this._fromRadians(r):r)}},{key:"lerp",value:function(r,u,p,g){return r instanceof l.default.Vector?this.lerp(r.x,r.y,r.z,u):(this.x+=(r-this.x)*g||0,this.y+=(u-this.y)*g||0,this.z+=(p-this.z)*g||0,this)}},{key:"slerp",value:function(r,u){if(u!==0){if(u===1)return this.set(r);var p=this.mag(),g=r.mag();if(p*g==0)this.mult(1-u).add(r.x*u,r.y*u,r.z*u);else{var S=this.cross(r),P=S.mag(),E=Math.atan2(P,this.dot(r));if(0<P)S.x/=P,S.y/=P,S.z/=P;else{if(E<.5*Math.PI)return this.mult(1-u).add(r.x*u,r.y*u,r.z*u),this;this.z===0&&r.z===0?S.set(0,0,1):this.x!==0?S.set(this.y,-this.x,0).normalize():S.set(1,0,0)}P=S.cross(this),r=1-u+u*g/p,S=r*Math.cos(u*E),g=r*Math.sin(u*E),this.x=this.x*S+P.x*g,this.y=this.y*S+P.y*g,this.z=this.z*S+P.z*g}}return this}},{key:"reflect",value:function(r){return r.normalize(),this.sub(r.mult(2*this.dot(r)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(P,u,p){var g,S,P=P instanceof l.default.Vector?(g=P.x||0,S=P.y||0,P.z||0):Array.isArray(P)?(g=P[0]||0,S=P[1]||0,P[2]||0):(g=P||0,S=u||0,p||0);return this.x===g&&this.y===S&&this.z===P}}])&&m(s.prototype,a),c&&m(s,c),i}();var n=l.default.Vector;j.default=n},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.every":154,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.constructor":178,"core-js/modules/es.number.is-finite":179,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],314:[function(v,M,j){Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(v=v("../core/main"))&&v.__esModule?v:{default:v},y="_lcg_random_state",l=4294967296,d=0,v=(h.default.prototype._lcg=function(m){return this[m]=(1664525*this[m]+1013904223)%l,this[m]/l},h.default.prototype._lcgSetSeed=function(m,n){this[m]=(n??Math.random()*l)>>>0},h.default.prototype.randomSeed=function(m){this._lcgSetSeed(y,m),this._gaussian_previous=!1},h.default.prototype.random=function(m,n){var i,s;return h.default._validateParameters("random",arguments),i=this[y]!=null?this._lcg(y):Math.random(),m===void 0?i:n===void 0?Array.isArray(m)?m[Math.floor(i*m.length)]:i*m:(n<m&&(s=m,m=n,n=s),i*(n-m)+m)},h.default.prototype.randomGaussian=function(m){var n,i,s,a,c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)n=d,this._gaussian_previous=!1;else{for(;1<=(a=(i=this.random(2)-1)*i+(s=this.random(2)-1)*s););n=i*(a=Math.sqrt(-2*Math.log(a)/a)),d=s*a,this._gaussian_previous=!0}return n*c+(m||0)},h.default);j.default=v},{"../core/main":280}],315:[function(t,M,j){function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(n)}function y(n){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(i){return h(i)}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":h(i)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(m=t("../core/main"))&&m.__esModule?m:{default:m},d=function(n){if(n&&n.__esModule)return n;if(n===null||y(n)!=="object"&&typeof n!="function")return{default:n};var i=v();if(i&&i.has(n))return i.get(n);var s,a={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in n){var r;Object.prototype.hasOwnProperty.call(n,s)&&((r=c?Object.getOwnPropertyDescriptor(n,s):null)&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=n[s])}return a.default=n,i&&i.set(n,a),a}(t("../core/constants"));function v(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,v=function(){return n},n)}l.default.prototype._angleMode=d.RADIANS,l.default.prototype.acos=function(n){return this._fromRadians(Math.acos(n))},l.default.prototype.asin=function(n){return this._fromRadians(Math.asin(n))},l.default.prototype.atan=function(n){return this._fromRadians(Math.atan(n))},l.default.prototype.atan2=function(n,i){return this._fromRadians(Math.atan2(n,i))},l.default.prototype.cos=function(n){return Math.cos(this._toRadians(n))},l.default.prototype.sin=function(n){return Math.sin(this._toRadians(n))},l.default.prototype.tan=function(n){return Math.tan(this._toRadians(n))},l.default.prototype.degrees=function(n){return n*d.RAD_TO_DEG},l.default.prototype.radians=function(n){return n*d.DEG_TO_RAD},l.default.prototype.angleMode=function(n){if(l.default._validateParameters("angleMode",arguments),n===void 0)return this._angleMode;n!==d.DEGREES&&n!==d.RADIANS||n!==this._angleMode&&(n===d.RADIANS?(this._setProperty("pRotationX",this.pRotationX*d.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*d.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*d.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*d.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*d.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*d.RAD_TO_DEG)),this._angleMode=n)},l.default.prototype._toRadians=function(n){return this._angleMode===d.DEGREES?n*d.DEG_TO_RAD:n},l.default.prototype._toDegrees=function(n){return this._angleMode===d.RADIANS?n*d.RAD_TO_DEG:n},l.default.prototype._fromRadians=function(n){return this._angleMode===d.DEGREES?n*d.RAD_TO_DEG:n},l.default.prototype._fromDegrees=function(n){return this._angleMode===d.RADIANS?n*d.DEG_TO_RAD:n};var m=l.default;j.default=m},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],316:[function(t,M,j){t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};h.default.prototype.textAlign=function(y,l){var d;return h.default._validateParameters("textAlign",arguments),(d=this._renderer).textAlign.apply(d,arguments)},h.default.prototype.textLeading=function(y){var l;return h.default._validateParameters("textLeading",arguments),(l=this._renderer).textLeading.apply(l,arguments)},h.default.prototype.textSize=function(y){var l;return h.default._validateParameters("textSize",arguments),(l=this._renderer).textSize.apply(l,arguments)},h.default.prototype.textStyle=function(y){var l;return h.default._validateParameters("textStyle",arguments),(l=this._renderer).textStyle.apply(l,arguments)},h.default.prototype.textWidth=function(){for(var y=arguments.length,l=new Array(y),d=0;d<y;d++)l[d]=arguments[d];if(l[0]+="",h.default._validateParameters("textWidth",l),l[0].length===0)return 0;for(var v=l[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),m=[],n=0;n<v.length;n++)m.push(this._renderer.textWidth(v[n]));return Math.max.apply(Math,m)},h.default.prototype.textAscent=function(){for(var y=arguments.length,l=new Array(y),d=0;d<y;d++)l[d]=arguments[d];return h.default._validateParameters("textAscent",l),this._renderer.textAscent()},h.default.prototype.textDescent=function(){for(var y=arguments.length,l=new Array(y),d=0;d<y;d++)l[d]=arguments[d];return h.default._validateParameters("textDescent",l),this._renderer.textDescent()},h.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},h.default.prototype.textWrap=function(y){if(y!=="WORD"&&y!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(y)},t=h.default,j.default=t},{"../core/main":280,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],317:[function(t,M,j){function h(s){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(s)}function y(s){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(a){return h(a)}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":h(a)})(s)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(i=t("../core/main"))&&i.__esModule?i:{default:i},d=n(t("../core/constants")),v=n(t("opentype.js"));function m(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,m=function(){return s},s)}function n(s){if(s&&s.__esModule)return s;if(s===null||y(s)!=="object"&&typeof s!="function")return{default:s};var a=m();if(a&&a.has(s))return a.get(s);var c,r,u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&((r=p?Object.getOwnPropertyDescriptor(s,c):null)&&(r.get||r.set)?Object.defineProperty(u,c,r):u[c]=s[c]);return u.default=s,a&&a.set(s,u),u}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),l.default.prototype.loadFont=function(s,a,c){l.default._validateParameters("loadFont",arguments);var r=new l.default.Font(this),u=this;return v.load(s,function(S,P){if(S)return l.default._friendlyFileLoadError(4,s),c!==void 0?c(S):void console.error(S,s);r.font=P,a!==void 0&&a(r),u._decrementPreload();var S=s.split("\\").pop().split("/").pop(),P=S.lastIndexOf("."),E=P<1?null:S.slice(P+1);["ttf","otf","woff","woff2"].includes(E)&&(E=S.slice(0,P!==-1?P:0),(S=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(E,`;
src: url(`).concat(s,`);
}
`))),document.head.appendChild(S))}),r},l.default.prototype.text=function(s,a,c,r,u){var p;return l.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(p=this._renderer).text.apply(p,arguments):this},l.default.prototype.textFont=function(s,a){if(l.default._validateParameters("textFont",arguments),arguments.length){if(s)return this._renderer._setProperty("_textFont",s),a&&(this._renderer._setProperty("_textSize",a),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",a*d._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var i=l.default;j.default=i},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,"opentype.js":254}],318:[function(t,M,j){function h(T){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(T)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var y=(y=t("../core/main"))&&y.__esModule?y:{default:y},l=function(T){if(T&&T.__esModule)return T;if(T===null||v(T)!=="object"&&typeof T!="function")return{default:T};var O=d();if(O&&O.has(T))return O.get(T);var R,k={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(R in T){var L;Object.prototype.hasOwnProperty.call(T,R)&&((L=D?Object.getOwnPropertyDescriptor(T,R):null)&&(L.get||L.set)?Object.defineProperty(k,R,L):k[R]=T[R])}return k.default=T,O&&O.set(T,k),k}(t("../core/constants"));function d(){var T;return typeof WeakMap!="function"?null:(T=new WeakMap,d=function(){return T},T)}function v(T){return(v=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(O){return h(O)}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":h(O)})(T)}function m(T,O){for(var R=0;R<O.length;R++){var k=O[R];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(T,k.key,k)}}function n(T,O){var R=T.length;return T[O<0?O%R+R:O%R]}function i(T,O,R,k){var D,L,U;return k?(i.tmpPoint1===void 0&&(i.tmpPoint1=[],i.tmpPoint2=[]),L=i.tmpPoint1,U=i.tmpPoint2,L.x=O.x-T.x,L.y=O.y-T.y,U.x=R.x-O.x,U.y=R.y-O.y,D=L.x*U.x+L.y*U.y,L=Math.sqrt(L.x*L.x+L.y*L.y),U=Math.sqrt(U.x*U.x+U.y*U.y),Math.acos(D/(L*U))<k):(O[0]-T[0])*(R[1]-T[1])-(R[0]-T[0])*(O[1]-T[1])==0}function s(I,W,B,$,te,L,U,F,V){var X=1-V,G=Math.pow(X,3),K=Math.pow(X,2),x=V*V,Z=x*V,H=G*I+3*K*V*B+3*X*V*V*te+Z*U,G=G*W+3*K*V*$+3*X*V*V*L+Z*F,K=I+2*V*(B-I)+x*(te-2*B+I),Z=W+2*V*($-W)+x*(L-2*$+W),oe=B+2*V*(te-B)+x*(U-2*te+B),x=$+2*V*(L-$)+x*(F-2*L+$),I=X*I+V*B,B=X*W+V*$,W=X*te+V*U,$=X*L+V*F,te=90-180*Math.atan2(K-oe,Z-x)/Math.PI;return(oe<K||Z<x)&&(te+=180),{x:H,y:G,m:{x:K,y:Z},n:{x:oe,y:x},start:{x:I,y:B},end:{x:W,y:$},alpha:te}}function a(T,O,R,k,D,L,U,F,V){return V==null?P(T,O,R,k,D,L,U,F):s(T,O,R,k,D,L,U,F,function(X,H,G,K,Z,oe,x,I,B){if(!(B<0||P(X,H,G,K,Z,oe,x,I)<B)){var W,$=.5,te=1-$;for(W=P(X,H,G,K,Z,oe,x,I,te);.01<Math.abs(W-B);)W=P(X,H,G,K,Z,oe,x,I,te+=(W<B?1:-1)*($/=2));return te}}(T,O,R,k,D,L,U,F,V))}function c(T,O,R){for(var k,D,L,U,F,V=0,X=0,H=(T=function(G,K){function Z(ye,be,Se){var Fe,Me;if(!ye)return["C",be.x,be.y,be.x,be.y,be.x,be.y];switch(ye[0]in{T:1,Q:1}||(be.qx=be.qy=null),ye[0]){case"M":be.X=ye[1],be.Y=ye[2];break;case"A":ye=["C"].concat(u.apply(0,[be.x,be.y].concat(ye.slice(1))));break;case"S":Me=Se==="C"||Se==="S"?(Fe=2*be.x-be.bx,2*be.y-be.by):(Fe=be.x,be.y),ye=["C",Fe,Me].concat(ye.slice(1));break;case"T":Se==="Q"||Se==="T"?(be.qx=2*be.x-be.qx,be.qy=2*be.y-be.qy):(be.qx=be.x,be.qy=be.y),ye=["C"].concat(S(be.x,be.y,be.qx,be.qy,ye[1],ye[2]));break;case"Q":be.qx=ye[1],be.qy=ye[2],ye=["C"].concat(S(be.x,be.y,ye[1],ye[2],ye[3],ye[4]));break;case"L":ye=["C"].concat(g(be.x,be.y,ye[1],ye[2]));break;case"H":ye=["C"].concat(g(be.x,be.y,ye[1],be.y));break;case"V":ye=["C"].concat(g(be.x,be.y,be.x,ye[1]));break;case"Z":ye=["C"].concat(g(be.x,be.y,be.X,be.Y))}return ye}function oe(ye,be){if(7<ye[be].length){ye[be].shift();for(var Se=ye[be];Se.length;)ie[be]="A",W&&(de[be]="A"),ye.splice(be++,0,["C"].concat(Se.splice(0,6)));ye.splice(be,1),I=Math.max(B.length,W&&W.length||0)}}function x(ye,be,Se,Fe,Me){ye&&be&&ye[Me][0]==="M"&&be[Me][0]!=="M"&&(be.splice(Me,0,["M",Fe.x,Fe.y]),Se.bx=0,Se.by=0,Se.x=ye[Me][1],Se.y=ye[Me][2],I=Math.max(B.length,W&&W.length||0))}var I,B=r(G),W=K&&r(K),$={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},te={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ie=[],de=[],se="",he="";I=Math.max(B.length,W&&W.length||0);for(var ce=0;ce<I;ce++){(se=B[ce]?B[ce][0]:se)!=="C"&&(ie[ce]=se,ce&&(he=ie[ce-1])),B[ce]=Z(B[ce],$,he),ie[ce]!=="A"&&se==="C"&&(ie[ce]="C"),oe(B,ce),W&&((se=W[ce]?W[ce][0]:se)!=="C"&&(de[ce]=se,ce&&(he=de[ce-1])),W[ce]=Z(W[ce],te,he),de[ce]!=="A"&&se==="C"&&(de[ce]="C"),oe(W,ce)),x(B,W,$,te,ce),x(W,B,te,$,ce);var ee=B[ce],ue=W&&W[ce],me=ee.length,je=W&&ue.length;$.x=ee[me-2],$.y=ee[me-1],$.bx=parseFloat(ee[me-4])||$.x,$.by=parseFloat(ee[me-3])||$.y,te.bx=W&&(parseFloat(ue[je-4])||te.x),te.by=W&&(parseFloat(ue[je-3])||te.y),te.x=W&&ue[je-2],te.y=W&&ue[je-1]}return W?[B,W]:B}(T)).length;X<H;X++){if((L=T[X])[0]==="M")k=+L[1],D=+L[2];else{if(O<V+(U=a(k,D,L[1],L[2],L[3],L[4],L[5],L[6]))&&!R)return{x:(F=a(k,D,L[1],L[2],L[3],L[4],L[5],L[6],O-V)).x,y:F.y,alpha:F.alpha};V+=U,k=+L[5],D=+L[6]}L.shift()}return F=(F=R?V:s(k,D,L[0],L[1],L[2],L[3],L[4],L[5],1)).alpha?{x:F.x,y:F.y,alpha:F.alpha}:F}function r(T){var O=[],R=0,k=0,D=0,L=0,U=0;if(T){T[0][0]==="M"&&(D=R=+T[0][1],L=k=+T[0][2],U++,O[0]=["M",R,k]);for(var F,V,X=T.length===3&&T[0][0]==="M"&&T[1][0].toUpperCase()==="R"&&T[2][0].toUpperCase()==="Z",H=U,G=T.length;H<G;H++){if(O.push(F=[]),(V=T[H])[0]!==V[0].toUpperCase())switch(F[0]=V[0].toUpperCase(),F[0]){case"A":F[1]=V[1],F[2]=V[2],F[3]=V[3],F[4]=V[4],F[5]=V[5],F[6]=+(V[6]+R),F[7]=+(V[7]+k);break;case"V":F[1]=+V[1]+k;break;case"H":F[1]=+V[1]+R;break;case"R":for(var K,Z=2,oe=(K=[R,k].concat(V.slice(1))).length;Z<oe;Z++)K[Z]=+K[Z]+R,K[++Z]=+K[Z]+k;O.pop(),O=O.concat(p(K,X));break;case"M":D=+V[1]+R,L=+V[2]+k;break;default:for(var x=1,I=V.length;x<I;x++)F[x]=+V[x]+(x%2?R:k)}else if(V[0]==="R")K=[R,k].concat(V.slice(1)),O.pop(),O=O.concat(p(K,X)),F=["R"].concat(V.slice(-2));else for(var B=0,W=V.length;B<W;B++)F[B]=V[B];switch(F[0]){case"Z":R=D,k=L;break;case"H":R=F[1];break;case"V":k=F[1];break;case"M":D=F[F.length-2],L=F[F.length-1];break;default:R=F[F.length-2],k=F[F.length-1]}}}return O}function u(T,O,R,k,W,ie,$,F,V,X){function H(je,ye,be){return{x:je*Math.cos(be)-ye*Math.sin(be),y:je*Math.sin(be)+ye*Math.cos(be)}}var G,I=Math.PI,B=120*I/180,K=I/180*(+W||0),Z=[],oe=(X?(ce=X[0],G=X[1],se=X[2],he=X[3]):(T=(te=H(T,O,-K)).x,O=te.y,1<(oe=(x=(T-(F=(te=H(F,V,-K)).x))/2)*x/(R*R)+(te=(O-(V=te.y))/2)*te/(k*k))&&(R*=oe=Math.sqrt(oe),k*=oe),oe=R*R,de=k*k,se=(ie=(ie===$?-1:1)*Math.sqrt(Math.abs((oe*de-oe*te*te-de*x*x)/(oe*te*te+de*x*x))))*R*te/k+(T+F)/2,he=ie*-k*x/R+(O+V)/2,ce=Math.asin(((O-he)/k).toFixed(9)),G=Math.asin(((V-he)/k).toFixed(9)),(ce=T<se?I-ce:ce)<0&&(ce=2*I+ce),(G=F<se?I-G:G)<0&&(G=2*I+G),$&&G<ce&&(ce-=2*I),!$&&ce<G&&(G-=2*I)),G-ce),x=(Math.abs(oe)>B&&(de=G,te=F,ie=V,G=ce+B*($&&ce<G?1:-1),Z=u(F=se+R*Math.cos(G),V=he+k*Math.sin(G),R,k,W,0,$,te,ie,[G,de,se,he])),oe=G-ce,Math.cos(ce)),I=Math.sin(ce),B=Math.cos(G),W=Math.sin(G),$=Math.tan(oe/4),te=4/3*R*$,ie=4/3*k*$,de=[T,O],se=[T+te*I,O-ie*x],he=[F+te*W,V-ie*B],ce=[F,V];if(se[0]=2*de[0]-se[0],se[1]=2*de[1]-se[1],X)return[se,he,ce].concat(Z);for(var ee=[],ue=0,me=(Z=[se,he,ce].concat(Z).join().split(",")).length;ue<me;ue++)ee[ue]=ue%2?H(Z[ue-1],Z[ue],K).y:H(Z[ue],Z[ue+1],K).x;return ee}function p(T,O){for(var R=[],k=0,D=T.length;k<D-2*!O;k+=2){var L=[{x:+T[k-2],y:+T[k-1]},{x:+T[k],y:+T[k+1]},{x:+T[k+2],y:+T[k+3]},{x:+T[k+4],y:+T[k+5]}];O?k?D-4===k?L[3]={x:+T[0],y:+T[1]}:D-2===k&&(L[2]={x:+T[0],y:+T[1]},L[3]={x:+T[2],y:+T[3]}):L[0]={x:+T[D-2],y:+T[D-1]}:D-4===k?L[3]=L[2]:k||(L[0]={x:+T[k],y:+T[k+1]}),R.push(["C",(-L[0].x+6*L[1].x+L[2].x)/6,(-L[0].y+6*L[1].y+L[2].y)/6,(L[1].x+6*L[2].x-L[3].x)/6,(L[1].y+6*L[2].y-L[3].y)/6,L[2].x,L[2].y])}return R}function g(T,O,R,k){return[T,O,R,k,R,k]}function S(T,O,R,k,D,L){return[1/3*T+2/3*R,1/3*O+2/3*k,1/3*D+2/3*R,1/3*L+2/3*k,D,L]}function P(T,O,R,k,D,L,U,F,V){for(var X=(V=1<(V=V??1)?1:V<0?0:V)/2,H=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],G=0,K=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Z=0;Z<12;Z++){var x=X*H[Z]+X,oe=E(x,T,R,D,U),x=E(x,O,k,L,F);G+=K[Z]*Math.sqrt(oe*oe+x*x)}return X*G}function E(T,O,R,k,D){return T*(T*(-3*O+9*R-9*k+3*D)+6*O-12*R+6*k)-3*O+3*R}y.default.Font=function(){function T(k){if(!(this instanceof T))throw new TypeError("Cannot call a class as a function");this.parent=k,this.cache={},this.font=void 0}var O,R;return O=T,(R=[{key:"textBounds",value:function(k){var D=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,L=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,X=3<arguments.length?arguments[3]:void 0,U=4<arguments.length?arguments[4]:void 0,F=U&&U.renderer&&U.renderer._pInst||this.parent,V=F._renderer.drawingContext,X=(V.textAlign||l.LEFT,V.textBaseline||l.BASELINE,X||F._renderer._textSize);if(!te){for(var H=[],G=[],K=[],Z=(K[0]=[],[]),oe=this._scale(X),x=F._renderer.textLeading(),I=0,B=(this.font.forEachGlyph(k,D,L,X,U,function(se,he,ce,ee){var ue=se.getMetrics();se.index===0?K[I+=1]=[]:(K[I].push(he+ue.xMin*oe),K[I].push(he+ue.xMax*oe),Z.push(ce+I*x+-ue.yMin*oe),Z.push(ce+I*x+-ue.yMax*oe))}),0<K[I].length&&(H[I]=Math.min.apply(null,K[I]),G[I]=Math.max.apply(null,K[I])),0),W=0;W<=I;W++){H[W]=Math.min.apply(null,K[W]),G[W]=Math.max.apply(null,K[W]);var $=G[W]-H[W];B<$&&(B=$)}var V=Math.min.apply(null,H),te={x:V,y:L=Math.min.apply(null,Z),h:Math.max.apply(null,Z)-L,w:B,advance:V-D},X=this._handleAlignment(F._renderer,k,te.x,te.y,te.w+te.advance);te.x=X.x,te.y=X.y}return te}},{key:"textToPoints",value:function(k,D,L,U,F){var V=D,X=[],H=k.split(/\r?\n|\r|\n/g);U=U||this.parent._renderer._textSize;for(var G,K,Z,oe=0;oe<H.length;oe++){var x=0;D=V;for(var I=(I=H[oe]).replace("	","  "),B=this._getGlyphs(I),W=0;W<B.length;W++){if(K=I,!((Z=B)[G=W].name&&Z[G].name==="space"||K.length===Z.length&&K[G]===" "))for(var $=function(se){for(var he,ce=[],ee=0;ee<se.length;ee++)se[ee].type==="M"&&(he&&ce.push(he),he=[]),he.push(function(ue){var me=[ue.type];return ue.type==="M"||ue.type==="L"?me.push(ue.x,ue.y):ue.type==="C"?me.push(ue.x1,ue.y1,ue.x2,ue.y2,ue.x,ue.y):ue.type==="Q"&&me.push(ue.x1,ue.y1,ue.x,ue.y),me}(se[ee]));return ce.push(he),ce}(B[W].getPath(D,L,U).commands),te=0;te<$.length;te++)for(var ie=function(se,he){for(var he=function(ye,be){if(v(ye)!=="object")ye=be;else for(var Se in be)ye[Se]===void 0&&(ye[Se]=be[Se]);return ye}(he,{sampleFactor:.1,simplifyThreshold:0}),ce=c(se,0,1),ee=ce/(ce*he.sampleFactor),ue=[],me=0;me<ce;me+=ee)ue.push(c(se,me));return he.simplifyThreshold&&function(je){for(var ye=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,be=0,Se=je.length-1;3<je.length&&0<=Se;--Se)i(n(je,Se-1),n(je,Se),n(je,Se+1),ye)&&(je.splice(Se%je.length,1),be++)}(ue,he.simplifyThreshold),ue}($[te],F),de=0;de<ie.length;de++)ie[de].x+=x,X.push(ie[de]);x+=B[W].advanceWidth*this._scale(U)}L+=this.parent._renderer._textLeading}return X}},{key:"_getGlyphs",value:function(k){return this.font.stringToGlyphs(k)}},{key:"_getPath",value:function(k,V,L,U){var F=(U&&U.renderer&&U.renderer._pInst||this.parent)._renderer,V=this._handleAlignment(F,k,V,L);return this.font.getPath(k,V.x,V.y,F._textSize,U)}},{key:"_getPathData",value:function(k,D,L,U){var F=3;return typeof k=="string"&&2<arguments.length?k=this._getPath(k,D,L,U):v(D)==="object"&&(U=D),U&&typeof U.decimals=="number"&&(F=U.decimals),k.toPathData(F)}},{key:"_getSVG",value:function(k,D,L,U){var F=3;return typeof k=="string"&&2<arguments.length?k=this._getPath(k,D,L,U):v(D)==="object"&&(U=D),U&&(typeof U.decimals=="number"&&(F=U.decimals),typeof U.strokeWidth=="number"&&(k.strokeWidth=U.strokeWidth),U.fill!==void 0&&(k.fill=U.fill),U.stroke!==void 0&&(k.stroke=U.stroke)),k.toSVG(F)}},{key:"_renderPath",value:function(X,G,K,U){var F=U&&U.renderer||this.parent._renderer,V=F.drawingContext,X=(v(X)==="object"&&X.commands?X:this._getPath(X,G,K,U)).commands,H=(V.beginPath(),!0),G=!1,K=void 0;try{for(var Z,oe=X[Symbol.iterator]();!(H=(Z=oe.next()).done);H=!0){var x=Z.value;x.type==="M"?V.moveTo(x.x,x.y):x.type==="L"?V.lineTo(x.x,x.y):x.type==="C"?V.bezierCurveTo(x.x1,x.y1,x.x2,x.y2,x.x,x.y):x.type==="Q"?V.quadraticCurveTo(x.x1,x.y1,x.x,x.y):x.type==="Z"&&V.closePath()}}catch(I){G=!0,K=I}finally{try{H||oe.return==null||oe.return()}finally{if(G)throw K}}return F._doStroke&&F._strokeSet&&!F._clipping&&V.stroke(),F._doFill&&!F._clipping&&(F._fillSet||F._setFill(l._DEFAULT_TEXT_FILL),V.fill()),this}},{key:"_textWidth",value:function(k,D){return this.font.getAdvanceWidth(k,D)}},{key:"_textAscent",value:function(k){return this.font.ascender*this._scale(k)}},{key:"_textDescent",value:function(k){return-this.font.descender*this._scale(k)}},{key:"_scale",value:function(k){return 1/this.font.unitsPerEm*(k||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(k,D,L,U,F){var V=k._textSize;switch(F===void 0&&(F=this._textWidth(D,V)),k._textAlign){case l.CENTER:L-=F/2;break;case l.RIGHT:L-=F}switch(k._textBaseline){case l.TOP:U+=this._textAscent(V);break;case l.CENTER:U+=this._textAscent(V)/2;break;case l.BOTTOM:U-=this._textDescent(V)}return{x:L,y:U}}}])&&m(O.prototype,R),T}(),t=y.default,j.default=t},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],319:[function(t,M,j){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.append=function(h,y){return h.push(y),h},t.default.prototype.arrayCopy=function(h,y,l,d,v){var m,n;h=v!==void 0?(n=Math.min(v,h.length),m=d,h.slice(y,n+y)):(n=l!==void 0?(n=l,Math.min(n,h.length)):h.length,l=y,h.slice(m=0,n)),Array.prototype.splice.apply(l,[m,n].concat(h))},t.default.prototype.concat=function(h,y){return h.concat(y)},t.default.prototype.reverse=function(h){return h.reverse()},t.default.prototype.shorten=function(h){return h.pop(),h},t.default.prototype.shuffle=function(h,y){for(var l,d,v=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(h),m=(h=y||v?h:h.slice()).length;1<m;)l=this.random(0,1)*m|0,d=h[--m],h[m]=h[l],h[l]=d;return h},t.default.prototype.sort=function(h,d){var l=d?h.slice(0,Math.min(d,h.length)):h,d=d?h.slice(Math.min(d,h.length)):[];return(l=typeof l[0]=="string"?l.sort():l.sort(function(v,m){return v-m})).concat(d)},t.default.prototype.splice=function(h,y,l){return Array.prototype.splice.apply(h,[l,0].concat(y)),h},t.default.prototype.subset=function(h,y,l){return l!==void 0?h.slice(y,y+l):h.slice(y,h.length)},t=t.default,j.default=t},{"../core/main":280,"core-js/modules/es.array-buffer.constructor":151,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.to-string":187}],320:[function(t,M,j){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};h.default.prototype.float=function(y){return y instanceof Array?y.map(parseFloat):parseFloat(y)},h.default.prototype.int=function(y){var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return y===1/0||y==="Infinity"?1/0:y===-1/0||y==="-Infinity"?-1/0:typeof y=="string"?parseInt(y,l):typeof y=="number"?0|y:typeof y=="boolean"?y?1:0:y instanceof Array?y.map(function(d){return h.default.prototype.int(d,l)}):void 0},h.default.prototype.str=function(y){return y instanceof Array?y.map(h.default.prototype.str):String(y)},h.default.prototype.boolean=function(y){return typeof y=="number"?y!==0:typeof y=="string"?y.toLowerCase()==="true":typeof y=="boolean"?y:y instanceof Array?y.map(h.default.prototype.boolean):void 0},h.default.prototype.byte=function(y){return y=h.default.prototype.int(y,10),typeof y=="number"?(y+128)%256-128:y instanceof Array?y.map(h.default.prototype.byte):void 0},h.default.prototype.char=function(y){return typeof y!="number"||isNaN(y)?y instanceof Array?y.map(h.default.prototype.char):typeof y=="string"?h.default.prototype.char(parseInt(y,10)):void 0:String.fromCharCode(y)},h.default.prototype.unchar=function(y){return typeof y=="string"&&y.length===1?y.charCodeAt(0):y instanceof Array?y.map(h.default.prototype.unchar):void 0},h.default.prototype.hex=function(y,l){if(l=l??8,y instanceof Array)return y.map(function(v){return h.default.prototype.hex(v,l)});if(y===1/0||y===-1/0)return(y===1/0?"F":"0").repeat(l);if(typeof y=="number"){y<0&&(y=4294967295+y+1);for(var d=Number(y).toString(16).toUpperCase();d.length<l;)d="0".concat(d);return d=d.length>=l?d.substring(d.length-l,d.length):d}},h.default.prototype.unhex=function(y){return y instanceof Array?y.map(h.default.prototype.unhex):parseInt("0x".concat(y),16)},t=h.default,j.default=t},{"../core/main":280,"core-js/modules/es.array.map":167,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.repeat":200}],321:[function(t,M,j){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(n=t("../core/main"))&&n.__esModule?n:{default:n};function y(i,s){return function(a){if(Array.isArray(a))return a}(i)||function(a,c){if(Symbol.iterator in Object(a)||Object.prototype.toString.call(a)==="[object Arguments]"){var r=[],u=!0,p=!1,g=void 0;try{for(var S,P=a[Symbol.iterator]();!(u=(S=P.next()).done)&&(r.push(S.value),!c||r.length!==c);u=!0);}catch(E){p=!0,g=E}finally{try{u||P.return==null||P.return()}finally{if(p)throw g}}return r}}(i,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(i,s,a){var r=y(i.toString().split("."),2),c=r[0],r=r[1];return a===void 0?(c=c.padStart(s,"0"),r?c+"."+r:c):(c=(i=y(i.toFixed(a).toString().split("."),2))[0],r=i[1],c=c.padStart(s,"0"),r===void 0?c:c+"."+r)}function d(r,s){var a=(r=r.toString()).indexOf("."),c=a!==-1?r.substring(a):"",r=(r=a!==-1?r.substring(0,a):r).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(s===0)c="";else if(s!==void 0)if(s>c.length)for(var u=s-(c+=a===-1?".":"").length+1,p=0;p<u;p++)c+="0";else c=c.substring(0,s+1);return r+c}function v(i){return 0<parseFloat(i)?"+".concat(i.toString()):i.toString()}function m(i){return 0<=parseFloat(i)?" ".concat(i.toString()):i.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),h.default.prototype.join=function(i,s){return h.default._validateParameters("join",arguments),i.join(s)},h.default.prototype.match=function(i,s){return h.default._validateParameters("match",arguments),i.match(s)},h.default.prototype.matchAll=function(i,s){h.default._validateParameters("matchAll",arguments);for(var a=new RegExp(s,"g"),c=a.exec(i),r=[];c!==null;)r.push(c),c=a.exec(i);return r},h.default.prototype.nf=function(i,s,a){return h.default._validateParameters("nf",arguments),i instanceof Array?i.map(function(c){return l(c,s,a)}):Object.prototype.toString.call(i)==="[object Arguments]"?i.length===3?this.nf(i[0],i[1],i[2]):i.length===2?this.nf(i[0],i[1]):this.nf(i[0]):l(i,s,a)},h.default.prototype.nfc=function(i,s){return h.default._validateParameters("nfc",arguments),i instanceof Array?i.map(function(a){return d(a,s)}):d(i,s)},h.default.prototype.nfp=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];h.default._validateParameters("nfp",s);var c=h.default.prototype.nf.apply(this,s);return c instanceof Array?c.map(v):v(c)},h.default.prototype.nfs=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];h.default._validateParameters("nfs",s);var c=h.default.prototype.nf.apply(this,s);return c instanceof Array?c.map(m):m(c)},h.default.prototype.split=function(i,s){return h.default._validateParameters("split",arguments),i.split(s)},h.default.prototype.splitTokens=function(i,s){var a,c;return h.default._validateParameters("splitTokens",arguments),c=s!==void 0?(c=/\]/g.exec(s=s),(a=/\[/g.exec(s))&&c?(s=s.slice(0,c.index)+s.slice(c.index+1),a=/\[/g.exec(s),s=s.slice(0,a.index)+s.slice(a.index+1),new RegExp("[\\[".concat(s,"\\]]"),"g")):c?(s=s.slice(0,c.index)+s.slice(c.index+1),new RegExp("[".concat(s,"\\]]"),"g")):a?(s=s.slice(0,a.index)+s.slice(a.index+1),new RegExp("[".concat(s,"\\[]"),"g")):new RegExp("[".concat(s,"]"),"g")):/\s/g,i.split(c).filter(function(r){return r})},h.default.prototype.trim=function(i){return h.default._validateParameters("trim",arguments),i instanceof Array?i.map(this.trim):i.trim()};var n=h.default;j.default=n},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.pad-start":199,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],322:[function(t,M,j){Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.day=function(){return new Date().getDate()},t.default.prototype.hour=function(){return new Date().getHours()},t.default.prototype.minute=function(){return new Date().getMinutes()},t.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},t.default.prototype.month=function(){return new Date().getMonth()+1},t.default.prototype.second=function(){return new Date().getSeconds()},t.default.prototype.year=function(){return new Date().getFullYear()},t=t.default,j.default=t},{"../core/main":280}],323:[function(t,M,j){function h(i){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(i)}function y(i){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(s){return h(s)}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":h(s)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(n=t("../core/main"))&&n.__esModule?n:{default:n},d=(t("./p5.Geometry"),function(i){if(i&&i.__esModule)return i;if(i===null||y(i)!=="object"&&typeof i!="function")return{default:i};var s=v();if(s&&s.has(i))return s.get(i);var a,c={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in i){var u;Object.prototype.hasOwnProperty.call(i,a)&&((u=r?Object.getOwnPropertyDescriptor(i,a):null)&&(u.get||u.set)?Object.defineProperty(c,a,u):c[a]=i[a])}return c.default=i,s&&s.set(i,c),c}(t("../core/constants")));function v(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,v=function(){return i},i)}l.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},l.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},l.default.prototype.buildGeometry=function(i){return this._renderer.buildGeometry(i)},l.default.prototype.freeGeometry=function(i){this._renderer._freeBuffers(i.gid)},l.default.prototype.plane=function(){var i,s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:s,c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,u=(this._assert3d("plane"),l.default._validateParameters("plane",arguments),"plane|".concat(c,"|").concat(r));return this._renderer.geometryInHash(u)||((i=new l.default.Geometry(c,r,function(){for(var p,g,S=0;S<=this.detailY;S++)for(var P=S/this.detailY,E=0;E<=this.detailX;E++)p=E/this.detailX,g=new l.default.Vector(p-.5,P-.5,0),this.vertices.push(g),this.uvs.push(p,P)})).computeFaces().computeNormals(),c<=1&&r<=1?i._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(u,i)),this._renderer.drawBuffersScaled(u,s,a,1),this},l.default.prototype.box=function(i,s,a,c,r){this._assert3d("box"),l.default._validateParameters("box",arguments),i===void 0&&(i=50),s===void 0&&(s=i),a===void 0&&(a=s);var u,p=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,p=(r===void 0&&(r=p?1:4),"box|".concat(c=c===void 0?p?1:4:c,"|").concat(r));return this._renderer.geometryInHash(p)||((u=new l.default.Geometry(c,r,function(){var g=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(S,P){for(var P=4*P,E=0;E<4;E++){var T=S[E],T=new l.default.Vector((2*(1&T)-1)/2,((2&T)-1)/2,((4&T)/2-1)/2);g.vertices.push(T),g.uvs.push(1&E,(2&E)/2)}g.faces.push([P,1+P,2+P]),g.faces.push([2+P,1+P,3+P])})})).computeNormals(),c<=4&&r<=4?u._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(p,u)),this._renderer.drawBuffersScaled(p,i,s,a),this},l.default.prototype.sphere=function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),l.default._validateParameters("sphere",arguments),this.ellipsoid(i,i,i,s,a),this};function m(i,s,a,c,r,u,p){i=i<=0?1:i,s=s<0?0:s,a=a<=0?i:a,c=c<3?3:c;for(var g,S,P=(u=u===void 0||u)?-2:0,E=(r=r<1?1:r)+((p=p===void 0?s!==0:p)?2:0),T=Math.atan2(i-s,a),O=Math.sin(T),R=Math.cos(T),k=P;k<=E;++k){var D=k/r,L=a*D,U=void 0,U=k<0?(D=L=0,i):r<k?(L=a,D=1,s):i+(s-i)*D;for(k!==-2&&k!==r+2||(U=0),L-=a/2,g=0;g<c;++g){var F=g/(c-1),X=2*Math.PI*F,V=Math.sin(X),X=Math.cos(X),H=(this.vertices.push(new l.default.Vector(V*U,L,X*U)),void 0),H=k<0?new l.default.Vector(0,-1,0):r<k&&s?new l.default.Vector(0,1,0):new l.default.Vector(V*R,O,X*R);this.vertexNormals.push(H),this.uvs.push(F,D)}}var G=0;if(u){for(S=0;S<c;++S)this.faces.push([G+S,G+c+(S+1)%c,G+c+S]);G+=2*c}for(k=0;k<r;++k){for(g=0;g<c;++g){var K=(g+1)%c;this.faces.push([G+g,G+K,G+c+K]),this.faces.push([G+g,G+c+K,G+c+g])}G+=c}if(p)for(G+=c,g=0;g<c;++g)this.faces.push([G+g,G+(g+1)%c,G+c])}l.default.prototype.cylinder=function(){var i,s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:s,c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,u=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],p=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],g=(this._assert3d("cylinder"),l.default._validateParameters("cylinder",arguments),"cylinder|".concat(c,"|").concat(r,"|").concat(u,"|").concat(p));return this._renderer.geometryInHash(g)||(i=new l.default.Geometry(c,r),m.call(i,1,1,1,c,r,u,p),c<=24&&r<=16?i._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(g,i)),this._renderer.drawBuffersScaled(g,s,a,s),this},l.default.prototype.cone=function(){var i,s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:s,c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,u=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],p=(this._assert3d("cone"),l.default._validateParameters("cone",arguments),"cone|".concat(c,"|").concat(r,"|").concat(u));return this._renderer.geometryInHash(p)||(i=new l.default.Geometry(c,r),m.call(i,1,0,1,c,r,u,!1),c<=24&&r<=16?i._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(p,i)),this._renderer.drawBuffersScaled(p,s,a,s),this},l.default.prototype.ellipsoid=function(){var i,s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:s,c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:s,r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,u=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,p=(this._assert3d("ellipsoid"),l.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(r,"|").concat(u));return this._renderer.geometryInHash(p)||((i=new l.default.Geometry(r,u,function(){for(var g=0;g<=this.detailY;g++)for(var S=g/this.detailY,P=Math.PI*S-Math.PI/2,E=Math.cos(P),T=Math.sin(P),O=0;O<=this.detailX;O++){var R=O/this.detailX,D=2*Math.PI*R,k=Math.cos(D),D=Math.sin(D),D=new l.default.Vector(E*D,T,E*k);this.vertices.push(D),this.vertexNormals.push(D),this.uvs.push(R,S)}})).computeFaces(),r<=24&&u<=24?i._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(p,i)),this._renderer.drawBuffersScaled(p,s,a,c),this},l.default.prototype.torus=function(i,p,a,c){if(this._assert3d("torus"),l.default._validateParameters("torus",arguments),i===void 0)i=50;else if(!i)return;if(p===void 0)p=10;else if(!p)return;a===void 0&&(a=24),c===void 0&&(c=16);var r,u=(p/i).toPrecision(4),p="torus|".concat(u,"|").concat(a,"|").concat(c);return this._renderer.geometryInHash(p)||((r=new l.default.Geometry(a,c,function(){for(var g=0;g<=this.detailY;g++)for(var S=g/this.detailY,P=2*Math.PI*S,E=Math.cos(P),T=Math.sin(P),O=1+u*E,R=0;R<=this.detailX;R++){var k=R/this.detailX,D=2*Math.PI*k,U=Math.cos(D),D=Math.sin(D),L=new l.default.Vector(O*U,O*D,u*T),U=new l.default.Vector(E*U,E*D,T);this.vertices.push(L),this.vertexNormals.push(U),this.uvs.push(k,S)}})).computeFaces(),a<=24&&c<=16?r._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(p,r)),this._renderer.drawBuffersScaled(p,i,i,i),this},l.default.RendererGL.prototype.point=function(i,s){var a=[];return a.push(new l.default.Vector(i,s,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(a,this.immediateMode.buffers.point),this},l.default.RendererGL.prototype.triangle=function(p){var s=p[0],a=p[1],c=p[2],r=p[3],u=p[4],p=p[5],g=(this.geometryInHash("tri")||((g=new l.default.Geometry(1,1,function(){var E=[];E.push(new l.default.Vector(0,0,0)),E.push(new l.default.Vector(1,0,0)),E.push(new l.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=E,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),g.computeNormals(),this.createBuffers("tri",g)),this.uMVMatrix.copy());try{var S=Math.sign(s*r-c*a+c*p-u*r+u*a-s*p),P=new l.default.Matrix([c-s,r-a,0,0,u-s,p-a,0,0,0,0,S,0,s,a,0,1]).mult(this.uMVMatrix);this.uMVMatrix=P,this.drawBuffers("tri")}finally{this.uMVMatrix=g}return this},l.default.RendererGL.prototype.ellipse=function(i){this.arc(i[0],i[1],i[2],i[3],0,d.TWO_PI,d.OPEN,i[4])},l.default.RendererGL.prototype.arc=function(){var i,s=arguments.length<=0?void 0:arguments[0],a=arguments.length<=1?void 0:arguments[1],c=arguments.length<=2?void 0:arguments[2],r=arguments.length<=3?void 0:arguments[3],u=arguments.length<=4?void 0:arguments[4],p=arguments.length<=5?void 0:arguments[5],g=arguments.length<=6?void 0:arguments[6],S=(arguments.length<=7?void 0:arguments[7])||25,P=(Math.abs(p-u)>=d.TWO_PI?"".concat(E="ellipse","|"):"".concat(E="arc","|").concat(u,"|").concat(p,"|").concat(g,"|")).concat(S,"|"),E=(this.geometryInHash(P)||((i=new l.default.Geometry(S,1,function(){if(u.toFixed(10)!==p.toFixed(10)){g!==d.PIE&&g!==void 0||(this.vertices.push(new l.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var T=0;T<=S;T++){var R=(p-u)*(T/S)+u,O=.5+Math.cos(R)/2,R=.5+Math.sin(R)/2;this.vertices.push(new l.default.Vector(O,R,0)),this.uvs.push([O,R]),T<S-1&&(this.faces.push([0,T+1,T+2]),this.edges.push([T+1,T+2]))}switch(g){case d.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case d.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case d.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),S<=50?i._edgesToVertices(i):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(E," with more than 50 detail")),this.createBuffers(P,i)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([s,a,0]),this.uMVMatrix.scale(c,r,1),this.drawBuffers(P)}finally{this.uMVMatrix=E}return this},l.default.RendererGL.prototype.rect=function(i){var s=i[0],a=i[1],c=i[2],r=i[3];if(i[4]===void 0){var g=this._pInst._glAttributes.perPixelLighting,u=i[4]||(g?1:24),p=i[5]||(g?1:16),g="rect|".concat(u,"|").concat(p),S=(this.geometryInHash(g)||((S=new l.default.Geometry(u,p,function(){for(var H=0;H<=this.detailY;H++)for(var G=H/this.detailY,K=0;K<=this.detailX;K++){var Z=K/this.detailX,oe=new l.default.Vector(Z,G,0);this.vertices.push(oe),this.uvs.push(Z,G)}0<u&&0<p&&(this.edges=[[0,u],[u,(u+1)*(p+1)-1],[(u+1)*(p+1)-1,(u+1)*p],[(u+1)*p,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(g,S)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([s,a,0]),this.uMVMatrix.scale(c,r,1),this.drawBuffers(g)}finally{this.uMVMatrix=S}}else{var g=i[4],S=i[5]===void 0?g:i[5],P=i[6]===void 0?S:i[6],i=i[7]===void 0?P:i[7],D=c,E=r,R=((D+=s)<s&&(R=s,s=D,D=R),(E+=a)<a&&(R=a,a=E,E=R),Math.min((D-s)/2,(E-a)/2)),T=(R<g&&(g=R),R<S&&(S=R),R<P&&(P=R),R<i&&(i=R),s),O=a,R=D,s=E,k=(this.beginShape(),S!==0?(this.vertex(R-S,O),this.quadraticVertex(R,O,R,O+S)):this.vertex(R,O),P!==0?(this.vertex(R,s-P),this.quadraticVertex(R,s,R-P,s)):this.vertex(R,s),i!==0?(this.vertex(T+i,s),this.quadraticVertex(T,s,T,s-i)):this.vertex(T,s),g!==0?(this.vertex(T,O+g),this.quadraticVertex(T,O,T+g,O)):this.vertex(T,O),!(this.immediateMode.geometry.uvs.length=0)),a=!1,D=void 0;try{for(var L,U=this.immediateMode.geometry.vertices[Symbol.iterator]();!(k=(L=U.next()).done);k=!0){var F=L.value,V=(F.x-T)/c,X=(F.y-O)/r;this.immediateMode.geometry.uvs.push(V,X)}}catch(x){a=!0,D=x}finally{try{k||U.return==null||U.return()}finally{if(a)throw D}}this.endShape(d.CLOSE)}return this},l.default.RendererGL.prototype.quad=function(i,s,a,c,r,u,p,g,S,P,E,T){var O=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,R=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,k="quad|".concat(i,"|").concat(s,"|").concat(a,"|").concat(c,"|").concat(r,"|").concat(u,"|").concat(p,"|").concat(g,"|").concat(S,"|").concat(P,"|").concat(E,"|").concat(T,"|").concat(O,"|").concat(R);if(!this.geometryInHash(k)){var D=new l.default.Geometry(O,R,function(){for(var K=1/(this.detailX-1),Z=1/(this.detailY-1),oe=0;oe<this.detailY;oe++)for(var x=0;x<this.detailX;x++){var I=x*K,B=oe*Z;this.vertices.push(new l.default.Vector((1-I)*((1-B)*i+B*P)+I*((1-B)*c+B*p),(1-I)*((1-B)*s+B*E)+I*((1-B)*r+B*g),(1-I)*((1-B)*a+B*T)+I*((1-B)*u+B*S))),this.uvs.push([I,B])}});D.faces=[];for(var L=0;L<R-1;L++)for(var U=0;U<O-1;U++){var F=U+L*O,V=U+1+(L+1)*O,X=U+(L+1)*O;D.faces.push([F,U+1+L*O,V]),D.faces.push([F,V,X])}D.computeNormals();for(var H=[D.edges.length=0,2,3,1],G=0;G<H.length;G++)D.edges.push([H[G],H[(G+1)%H.length]]);D._edgesToVertices(),this.createBuffers(k,D)}return this.drawBuffers(k),this},l.default.RendererGL.prototype.bezier=function(i,s,a,c,r,u,p,g,S,P,E,T){arguments.length===8&&(E=g,P=p,g=u,p=r,r=c,c=a,a=u=S=T=0);var O=this._pInst._bezierDetail||20;this.beginShape();for(var R=0;R<=O;R++){var k=Math.pow(1-R/O,3),D=R/O*3*Math.pow(1-R/O,2),L=3*Math.pow(R/O,2)*(1-R/O),U=Math.pow(R/O,3);this.vertex(i*k+c*D+p*L+P*U,s*k+r*D+g*L+E*U,a*k+u*D+S*L+T*U)}return this.endShape(),this},l.default.RendererGL.prototype.curve=function(i,s,a,c,r,u,p,g,S,P,E,T){arguments.length===8&&(P=p,E=g,p=r,g=c,r=c=a,a=u=S=T=0);var O=this._pInst._curveDetail;this.beginShape();for(var R=0;R<=O;R++){var k=.5*Math.pow(R/O,3),D=.5*Math.pow(R/O,2),L=R/O*.5;this.vertex(k*(3*c-i-3*p+P)+D*(2*i-5*c+4*p-P)+L*(-i+p)+2*c*.5,k*(3*r-s-3*g+E)+D*(2*s-5*r+4*g-E)+L*(-s+g)+2*r*.5,k*(3*u-a-3*S+T)+D*(2*a-5*u+4*S-T)+L*(-a+S)+2*u*.5)}return this.endShape(),this},l.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(d.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(d.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},l.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var i,s,a,c,r,u,p=[],g=[],S=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var P=1/this._lutBezierDetail,E=0,T=1,O=0;E<1;){if(u=parseFloat(E.toFixed(6)),this._lookUpTableBezier[O]=this._bezierCoefficients(u),T.toFixed(6)===P.toFixed(6)){u=parseFloat(T.toFixed(6))+parseFloat(E.toFixed(6)),++O,this._lookUpTableBezier[O]=this._bezierCoefficients(u);break}E+=P,T-=P,++O}}for(var R=this._lookUpTableBezier.length,k=[],D=0;D<4;D++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[3]=this.curFillColor.slice();var L=[];for(D=0;D<4;D++)L.push([]);if(L[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),L[3]=this.curStrokeColor.slice(),S===6){this.isBezier=!0;var p=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],g=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],U=Math.hypot(p[0]-p[1],g[0]-g[1]),V=Math.hypot(p[1]-p[2],g[1]-g[2]),F=Math.hypot(p[2]-p[3],g[2]-g[3]),V=U+V+F;for(U/=V,F/=V,r=0;r<4;r++)k[1].push(k[0][r]*(1-U)+k[3][r]*U),k[2].push(k[0][r]*F+k[3][r]*(1-F)),L[1].push(L[0][r]*(1-U)+L[3][r]*U),L[2].push(L[0][r]*F+L[3][r]*(1-F));for(c=0;c<R;c++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],D=i=s=0;D<4;D++){for(r=0;r<4;r++)this.curFillColor[r]+=this._lookUpTableBezier[c][D]*k[D][r],this.curStrokeColor[r]+=this._lookUpTableBezier[c][D]*L[D][r];i+=p[D]*this._lookUpTableBezier[c][D],s+=g[D]*this._lookUpTableBezier[c][D]}this.vertex(i,s)}this.curFillColor=k[3],this.curStrokeColor=L[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(S===9){this.isBezier=!0,p=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],g=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var X=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],H=Math.hypot(p[0]-p[1],g[0]-g[1],X[0]-X[1]),V=Math.hypot(p[1]-p[2],g[1]-g[2],X[1]-X[2]),G=Math.hypot(p[2]-p[3],g[2]-g[3],X[2]-X[3]),S=H+V+G;for(H/=S,G/=S,r=0;r<4;r++)k[1].push(k[0][r]*(1-H)+k[3][r]*H),k[2].push(k[0][r]*G+k[3][r]*(1-G)),L[1].push(L[0][r]*(1-H)+L[3][r]*H),L[2].push(L[0][r]*G+L[3][r]*(1-G));for(c=0;c<R;c++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],D=i=s=a=0;D<4;D++){for(r=0;r<4;r++)this.curFillColor[r]+=this._lookUpTableBezier[c][D]*k[D][r],this.curStrokeColor[r]+=this._lookUpTableBezier[c][D]*L[D][r];i+=p[D]*this._lookUpTableBezier[c][D],s+=g[D]*this._lookUpTableBezier[c][D],a+=X[D]*this._lookUpTableBezier[c][D]}this.vertex(i,s,a)}this.curFillColor=k[3],this.curStrokeColor=L[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},l.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var i,s,a,c,r,u,p=[],g=[],S=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var P=1/this._lutQuadraticDetail,E=0,T=1,O=0;E<1;){if(u=parseFloat(E.toFixed(6)),this._lookUpTableQuadratic[O]=this._quadraticCoefficients(u),T.toFixed(6)===P.toFixed(6)){u=parseFloat(T.toFixed(6))+parseFloat(E.toFixed(6)),++O,this._lookUpTableQuadratic[O]=this._quadraticCoefficients(u);break}E+=P,T-=P,++O}}for(var R=this._lookUpTableQuadratic.length,k=[],D=0;D<3;D++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[2]=this.curFillColor.slice();var L=[];for(D=0;D<3;D++)L.push([]);if(L[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),L[2]=this.curStrokeColor.slice(),S===4){this.isQuadratic=!0;var p=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],g=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],U=Math.hypot(p[0]-p[1],g[0]-g[1]);for(U/=U+Math.hypot(p[1]-p[2],g[1]-g[2]),r=0;r<4;r++)k[1].push(k[0][r]*(1-U)+k[2][r]*U),L[1].push(L[0][r]*(1-U)+L[2][r]*U);for(c=0;c<R;c++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],D=i=s=0;D<3;D++){for(r=0;r<4;r++)this.curFillColor[r]+=this._lookUpTableQuadratic[c][D]*k[D][r],this.curStrokeColor[r]+=this._lookUpTableQuadratic[c][D]*L[D][r];i+=p[D]*this._lookUpTableQuadratic[c][D],s+=g[D]*this._lookUpTableQuadratic[c][D]}this.vertex(i,s)}this.curFillColor=k[2],this.curStrokeColor=L[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(S===6){this.isQuadratic=!0,p=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],g=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var F=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],V=Math.hypot(p[0]-p[1],g[0]-g[1],F[0]-F[1]);for(V/=V+Math.hypot(p[1]-p[2],g[1]-g[2],F[1]-F[2]),r=0;r<4;r++)k[1].push(k[0][r]*(1-V)+k[2][r]*V),L[1].push(L[0][r]*(1-V)+L[2][r]*V);for(c=0;c<R;c++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],D=i=s=a=0;D<3;D++){for(r=0;r<4;r++)this.curFillColor[r]+=this._lookUpTableQuadratic[c][D]*k[D][r],this.curStrokeColor[r]+=this._lookUpTableQuadratic[c][D]*L[D][r];i+=p[D]*this._lookUpTableQuadratic[c][D],s+=g[D]*this._lookUpTableQuadratic[c][D],a+=F[D]*this._lookUpTableQuadratic[c][D]}this.vertex(i,s,a)}this.curFillColor=k[2],this.curStrokeColor=L[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},l.default.RendererGL.prototype.curveVertex=function(){var i,s,a,c,r,u,p=[],g=[],S=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var P=1/this._lutBezierDetail,E=0,T=1,O=0;E<1;){if(u=parseFloat(E.toFixed(6)),this._lookUpTableBezier[O]=this._bezierCoefficients(u),T.toFixed(6)===P.toFixed(6)){u=parseFloat(T.toFixed(6))+parseFloat(E.toFixed(6)),++O,this._lookUpTableBezier[O]=this._bezierCoefficients(u);break}E+=P,T-=P,++O}}var R=this._lookUpTableBezier.length;if(S===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,p=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),g=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),r=0;r<R;r++)s=p[0]*this._lookUpTableBezier[r][0]+p[1]*this._lookUpTableBezier[r][1]+p[2]*this._lookUpTableBezier[r][2]+p[3]*this._lookUpTableBezier[r][3],a=g[0]*this._lookUpTableBezier[r][0]+g[1]*this._lookUpTableBezier[r][1]+g[2]*this._lookUpTableBezier[r][2]+g[3]*this._lookUpTableBezier[r][3],this.vertex(s,a);for(r=0;r<S;r++)this.immediateMode._curveVertex.shift()}}else if(S===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,p=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),g=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),i=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),r=0;r<R;r++)s=p[0]*this._lookUpTableBezier[r][0]+p[1]*this._lookUpTableBezier[r][1]+p[2]*this._lookUpTableBezier[r][2]+p[3]*this._lookUpTableBezier[r][3],a=g[0]*this._lookUpTableBezier[r][0]+g[1]*this._lookUpTableBezier[r][1]+g[2]*this._lookUpTableBezier[r][2]+g[3]*this._lookUpTableBezier[r][3],c=i[0]*this._lookUpTableBezier[r][0]+i[1]*this._lookUpTableBezier[r][1]+i[2]*this._lookUpTableBezier[r][2]+i[3]*this._lookUpTableBezier[r][3],this.vertex(s,a,c);for(r=0;r<S;r++)this.immediateMode._curveVertex.shift()}},l.default.RendererGL.prototype.image=function(i,T,a,O,r,u,p,g,S){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(i),this._pInst.textureMode(d.NORMAL);var P=0,E=(T<=i.width&&(P=T/i.width),1),T=(T+O<=i.width&&(E=(T+O)/i.width),0),O=(a<=i.height&&(T=a/i.height),1);a+r<=i.height&&(O=(a+r)/i.height),this.beginShape(),this.vertex(u,p,0,P,T),this.vertex(u+g,p,0,E,T),this.vertex(u+g,p+S,0,E,O),this.vertex(u,p+S,0,P,O),this.endShape(d.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(d.REMOVE)};var n=l.default;j.default=n},{"../core/constants":269,"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],324:[function(t,M,j){function h(s){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(s)}function y(s){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(a){return h(a)}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":h(a)})(s)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(i=t("../core/main"))&&i.__esModule?i:{default:i},d=function(s){if(s&&s.__esModule)return s;if(s===null||y(s)!=="object"&&typeof s!="function")return{default:s};var a=v();if(a&&a.has(s))return a.get(s);var c,r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var p;Object.prototype.hasOwnProperty.call(s,c)&&((p=u?Object.getOwnPropertyDescriptor(s,c):null)&&(p.get||p.set)?Object.defineProperty(r,c,p):r[c]=s[c])}return r.default=s,a&&a.set(s,r),r}(t("../core/constants"));function v(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,v=function(){return s},s)}function m(s){return function(a){if(Array.isArray(a)){for(var c=0,r=new Array(a.length);c<a.length;c++)r[c]=a[c];return r}}(s)||function(a){if(Symbol.iterator in Object(a)||Object.prototype.toString.call(a)==="[object Arguments]")return Array.from(a)}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(s,a){for(var c=0;c<a.length;c++){var r=a[c];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}var i=function(){function s(r){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");(this.renderer=r)._pInst.push(),this.identityMatrix=new l.default.Matrix,r.uMVMatrix=new l.default.Matrix,this.geometry=new l.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(s.nextGeometryId),s.nextGeometryId++,this.hasTransform=!1}var a,c;return a=s,(c=[{key:"transformVertices",value:function(r){var u=this;return this.hasTransform?r.map(function(p){return u.renderer.uMVMatrix.multiplyPoint(p)}):r}},{key:"transformNormals",value:function(r){var u=this;return this.hasTransform?r.map(function(p){return u.renderer.uNMatrix.multiplyVec3(p)}):r}},{key:"addGeometry",value:function(r){for(var u,p=this,g=(this.hasTransform=!this.renderer.uMVMatrix.mat4.every(function(P,E){return P===p.identityMatrix.mat4[E]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uMVMatrix),this.geometry.vertices.length),S=((u=this.geometry.vertices).push.apply(u,m(this.transformVertices(r.vertices))),(u=this.geometry.vertexNormals).push.apply(u,m(this.transformNormals(r.vertexNormals))),(u=this.geometry.uvs).push.apply(u,m(r.uvs)),this.renderer._doFill&&(u=this.geometry.faces).push.apply(u,m(r.faces.map(function(P){return P.map(function(E){return E+g})}))),this.renderer._doStroke&&(u=this.geometry.edges).push.apply(u,m(r.edges.map(function(P){return P.map(function(E){return E+g})}))),m(r.vertexColors));S.length<4*r.vertices.length;)S.push.apply(S,m(this.renderer.curFillColor));(u=this.geometry.vertexColors).push.apply(u,m(S))}},{key:"addImmediate",value:function(){var r=this.renderer.immediateMode.geometry,u=this.renderer.immediateMode.shapeMode,p=[];if(this.renderer._doFill)if(u===d.TRIANGLE_STRIP||u===d.QUAD_STRIP)for(var g=2;g<r.vertices.length;g++)g%2==0?p.push([g,g-1,g-2]):p.push([g,g-2,g-1]);else if(u===d.TRIANGLE_FAN)for(var S=2;S<r.vertices.length;S++)p.push([0,S-1,S]);else for(var P=0;P<r.vertices.length;P+=3)p.push([P,P+1,P+2]);this.addGeometry(Object.assign({},r,{faces:p}))}},{key:"addRetained",value:function(r){this.addGeometry(r.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&n(a.prototype,c),s}();i.nextGeometryId=0,j.default=i},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],325:[function(t,M,j){function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var y=(m=t("../core/main"))&&m.__esModule?m:{default:m},l=function(n){if(n&&n.__esModule)return n;if(n===null||v(n)!=="object"&&typeof n!="function")return{default:n};var i=d();if(i&&i.has(n))return i.get(n);var s,a={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in n){var r;Object.prototype.hasOwnProperty.call(n,s)&&((r=c?Object.getOwnPropertyDescriptor(n,s):null)&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=n[s])}return a.default=n,i&&i.set(n,a),a}(t("../core/constants"));function d(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,d=function(){return n},n)}function v(n){return(v=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(i){return h(i)}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":h(i)})(n)}y.default.prototype.orbitControl=function(n,i,s,S){var c=this,r=(this._assert3d("orbitControl"),y.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);n===void 0&&(n=1),i===void 0&&(i=n),s===void 0&&(s=1),v(S)!=="object"&&(S={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var E=S.disableTouchActions;this.touchActionsDisabled===!0||E!==void 0&&!E||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var u,p,g,E=S.freeRotation,S=E!==void 0&&E,P=[],E=(this.touches.forEach(function(U){c._renderer.prevTouches.forEach(function(F){U.id===F.id&&(F={x:U.x,y:U.y,px:F.x,py:F.y},P.push(F))})}),this._renderer.prevTouches=this.touches,0),T=0,O=0,R=0,k=0,D=this.height<this.width?this.height:this.width,L=!1;return 0<P.length?(L=0<P[0].x&&P[0].x<this.width&&0<P[0].y&&P[0].y<this.height,P.length===1?(T=-n*((u=P[0]).x-u.px)/D,O=i*(u.y-u.py)/D):(u=P[0],p=P[1],E=-(Math.hypot(u.x-p.x,u.y-p.y)-Math.hypot(u.px-p.px,u.py-p.py))*s*4e-4,R=.5*(u.x+p.x)-.5*(u.px+p.px),k=.5*(u.y+p.y)-.5*(u.py+p.py)),0<this.touches.length?L&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(L=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(E=Math.sign(this._mouseWheelDeltaY)*s,E*=.01,this._mouseWheelDeltaY=0,L&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(T=-n*this.movedX/D,O=i*this.movedY/D):this.mouseButton===this.RIGHT&&(R=this.movedX,k=this.movedY*r.yScale),L&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),E!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=E),.001<Math.abs(this._renderer.zoomVelocity)?(S?r._orbitFree(0,0,this._renderer.zoomVelocity):r._orbit(0,0,this._renderer.zoomVelocity),r.projMatrix.mat4[15]!==0&&(r.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),r.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=r.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=r.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,T===0&&O===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*T,.6*O),1e-6<this._renderer.rotateVelocity.magSq()?(S?r._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):r._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),R===0&&k===0||!this._renderer.executeRotateAndMove||(u=2*R/this.width,p=2*-k/this.height,this._renderer.moveVelocity.add(.15*u,.15*p)),1e-6<this._renderer.moveVelocity.magSq()?(s=r._getLocalAxes(),n=r.eyeX-r.centerX,i=r.eyeY-r.centerY,D=r.eyeZ-r.centerZ,L=Math.sqrt(n*n+i*i+D*D),E=new y.default.Vector(r.centerX,r.centerY,r.centerZ),E=r.cameraMatrix.multiplyPoint(E),(E=this._renderer.uPMatrix.multiplyAndNormalizePoint(E)).x-=this._renderer.moveVelocity.x,E.y-=this._renderer.moveVelocity.y,O=(T=this._renderer.uPMatrix.mat4)[15]===0?(g=(T[8]+E.x)/T[0]*L,(T[9]+E.y)/T[5]*L):(g=(E.x-T[12])/T[0],(E.y-T[13])/T[5]),r.setPosition(r.eyeX+g*s.x[0]+O*s.y[0],r.eyeY+g*s.x[1]+O*s.y[1],r.eyeZ+g*s.x[2]+O*s.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},y.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];y.default._validateParameters("debugMode",i);for(var a=this._registeredMethods.post.length-1;0<=a;a--)this._registeredMethods.post[a].toString()!==this._grid().toString()&&this._registeredMethods.post[a].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(a,1);i[0]===l.GRID?this.registerMethod("post",this._grid(i[1],i[2],i[3],i[4],i[5])):i[0]===l.AXES?this.registerMethod("post",this._axesIcon(i[1],i[2],i[3],i[4])):(this.registerMethod("post",this._grid(i[0],i[1],i[2],i[3],i[4])),this.registerMethod("post",this._axesIcon(i[5],i[6],i[7],i[8])))},y.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var n=this._registeredMethods.post.length-1;0<=n;n--)this._registeredMethods.post[n].toString()!==this._grid().toString()&&this._registeredMethods.post[n].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(n,1)},y.default.prototype._grid=function(n,i,s,a,c){n===void 0&&(n=this.width/2),i===void 0&&(i=Math.round(n/30)<4?4:Math.round(n/30)),s===void 0&&(s=0),a===void 0&&(a=0),c===void 0&&(c=0);var r=n/i,u=n/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix);for(var p=0;p<=i;p++)this.beginShape(this.LINES),this.vertex(-u+s,a,p*r-u+c),this.vertex(u+s,a,p*r-u+c),this.endShape();for(var g=0;g<=i;g++)this.beginShape(this.LINES),this.vertex(g*r-u+s,a,-u+c),this.vertex(g*r-u+s,a,u+c),this.endShape();this.pop()}},y.default.prototype._axesIcon=function(n,i,s,a){return n===void 0&&(n=40<this.width/20?this.width/20:40),i===void 0&&(i=-this.width/4),s===void 0&&(s=i),a===void 0&&(a=i),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(i,s,a),this.vertex(i+n,s,a),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(i,s,a),this.vertex(i,s+n,a),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(i,s,a),this.vertex(i,s,a+n),this.endShape(),this.pop()}};var m=y.default;j.default=m},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],326:[function(t,M,j){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};h.default.prototype.ambientLight=function(y,l,d,v){this._assert3d("ambientLight"),h.default._validateParameters("ambientLight",arguments);var m=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(m._array[0],m._array[1],m._array[2]),this._renderer._enableLighting=!0,this},h.default.prototype.specularColor=function(y,l,d){this._assert3d("specularColor"),h.default._validateParameters("specularColor",arguments);var v=this.color.apply(this,arguments);return this._renderer.specularColors=[v._array[0],v._array[1],v._array[2]],this},h.default.prototype.directionalLight=function(y,c,a,v,m,n){this._assert3d("directionalLight"),h.default._validateParameters("directionalLight",arguments),y=y instanceof h.default.Color?y:this.color(y,c,a);var i,s,c=arguments[arguments.length-1],a=typeof c=="number"?(i=arguments[arguments.length-3],s=arguments[arguments.length-2],arguments[arguments.length-1]):(i=c.x,s=c.y,c.z),c=Math.sqrt(i*i+s*s+a*a);return this._renderer.directionalLightDirections.push(i/c,s/c,a/c),this._renderer.directionalLightDiffuseColors.push(y._array[0],y._array[1],y._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},h.default.prototype.pointLight=function(y,a,c,v,m,n){this._assert3d("pointLight"),h.default._validateParameters("pointLight",arguments),y=y instanceof h.default.Color?y:this.color(y,a,c);var i,s,a=arguments[arguments.length-1],c=typeof a=="number"?(i=arguments[arguments.length-3],s=arguments[arguments.length-2],arguments[arguments.length-1]):(i=a.x,s=a.y,a.z);return this._renderer.pointLightPositions.push(i,s,c),this._renderer.pointLightDiffuseColors.push(y._array[0],y._array[1],y._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},h.default.prototype.imageLight=function(y){this._renderer.activeImageLight=y,this._renderer._enableLighting=!0},h.default.prototype.panorama=function(y){this.filter(this._renderer._getSphereMapping(y))},h.default.prototype.lights=function(){this._assert3d("lights");var y=this.color("rgb(128,128,128)");return this.ambientLight(y),this.directionalLight(y,0,0,-1),this},h.default.prototype.lightFalloff=function(y,l,d){return this._assert3d("lightFalloff"),h.default._validateParameters("lightFalloff",arguments),y<0&&(y=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),l<0&&(l=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),d<0&&(d=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),y===0&&l===0&&d===0&&(y=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=y,this._renderer.linearAttenuation=l,this._renderer.quadraticAttenuation=d,this},h.default.prototype.spotLight=function(y,l,d,v,m,n,i,s,a,c,r){this._assert3d("spotLight"),h.default._validateParameters("spotLight",arguments);var u,p,g,S=arguments.length;switch(S){case 11:case 10:u=this.color(y,l,d),p=new h.default.Vector(v,m,n),g=new h.default.Vector(i,s,a);break;case 9:y instanceof h.default.Color?(u=y,p=new h.default.Vector(l,d,v),g=new h.default.Vector(m,n,i),c=s,r=a):v instanceof h.default.Vector?(u=this.color(y,l,d),p=v,g=new h.default.Vector(m,n,i),c=s,r=a):i instanceof h.default.Vector?(u=this.color(y,l,d),p=new h.default.Vector(v,m,n),g=i,c=s,r=a):(u=this.color(y,l,d),p=new h.default.Vector(v,m,n),g=new h.default.Vector(i,s,a));break;case 8:c=(g=y instanceof h.default.Color?(u=y,p=new h.default.Vector(l,d,v),new h.default.Vector(m,n,i)):v instanceof h.default.Vector?(u=this.color(y,l,d),p=v,new h.default.Vector(m,n,i)):(u=this.color(y,l,d),p=new h.default.Vector(v,m,n),i),s);break;case 7:y instanceof h.default.Color&&l instanceof h.default.Vector?(u=y,p=l,g=new h.default.Vector(d,v,m),c=n,r=i):y instanceof h.default.Color&&m instanceof h.default.Vector?(u=y,p=new h.default.Vector(l,d,v),g=m,c=n,r=i):v instanceof h.default.Vector&&m instanceof h.default.Vector?(u=this.color(y,l,d),p=v,g=m,c=n,r=i):g=y instanceof h.default.Color?(u=y,p=new h.default.Vector(l,d,v),new h.default.Vector(m,n,i)):v instanceof h.default.Vector?(u=this.color(y,l,d),p=v,new h.default.Vector(m,n,i)):(u=this.color(y,l,d),p=new h.default.Vector(v,m,n),i);break;case 6:v instanceof h.default.Vector&&m instanceof h.default.Vector?(u=this.color(y,l,d),p=v,g=m,c=n):y instanceof h.default.Color&&m instanceof h.default.Vector?(u=y,p=new h.default.Vector(l,d,v),g=m,c=n):y instanceof h.default.Color&&l instanceof h.default.Vector&&(u=y,p=l,g=new h.default.Vector(d,v,m),c=n);break;case 5:y instanceof h.default.Color&&l instanceof h.default.Vector&&d instanceof h.default.Vector?(u=y,p=l,g=d,c=v,r=m):v instanceof h.default.Vector&&m instanceof h.default.Vector?(u=this.color(y,l,d),p=v,g=m):y instanceof h.default.Color&&m instanceof h.default.Vector?(u=y,p=new h.default.Vector(l,d,v),g=m):y instanceof h.default.Color&&l instanceof h.default.Vector&&(u=y,p=l,g=new h.default.Vector(d,v,m));break;case 4:u=y,p=l,g=d,c=v;break;case 3:u=y,p=l,g=d;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(S<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(u._array[0],u._array[1],u._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(p.x,p.y,p.z),g.normalize(),this._renderer.spotLightDirections.push(g.x,g.y,g.z),c===void 0&&(c=Math.PI/3),r!==void 0&&r<1?(r=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):r===void 0&&(r=100),c=this._renderer._pInst._toRadians(c),this._renderer.spotLightAngle.push(Math.cos(c)),this._renderer.spotLightConc.push(r),this._renderer._enableLighting=!0,this},h.default.prototype.noLights=function(){this._assert3d("noLights");for(var y=arguments.length,l=new Array(y),d=0;d<y;d++)l[d]=arguments[d];return h.default._validateParameters("noLights",l),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},t=h.default,j.default=t},{"../core/main":280,"core-js/modules/es.array.filter":156}],327:[function(t,M,j){function h(v){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var y=(d=t("../core/main"))&&d.__esModule?d:{default:d};function l(v){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(m){return h(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":h(m)})(v)}t("./p5.Geometry"),y.default.prototype.loadModel=function(v,m){y.default._validateParameters("loadModel",arguments);var n,i,s=!1,a=!1,c=!1,r=v.slice(-4),u=(m&&l(m)==="object"?(s=m.normalize||!1,n=m.successCallback,i=m.failureCallback,r=m.fileType||r,a=m.flipU||!1,c=m.flipV||!1):typeof m=="boolean"?(s=m,n=arguments[2],i=arguments[3],arguments[4]!==void 0&&(r=arguments[4])):(n=typeof m=="function"?m:void 0,i=arguments[2],arguments[3]!==void 0&&(r=arguments[3])),new y.default.Geometry),p=(u.gid="".concat(v,"|").concat(s),this);return r.match(/\.stl$/i)?this.httpDo(v,"GET","arrayBuffer",function(g){(function(S,P){if(function(E){for(var T=new DataView(E),O=[115,111,108,105,100],R=0;R<5;R++)if(function(k,D,L){for(var U=0,F=k.length;U<F;U++)if(k[U]!==D.getUint8(L+U,!1))return;return 1}(O,T,R))return;return 1}(P))(function(E,T){for(var O,R,k,D,L,U,F,V=new DataView(T),X=V.getUint32(80,!0),H=!1,G=0;G<70;G++)V.getUint32(G,!1)===1129270351&&V.getUint8(G+4)===82&&V.getUint8(G+5)===61&&(H=!0,D=[],L=V.getUint8(G+6)/255,U=V.getUint8(G+7)/255,F=V.getUint8(G+8)/255);for(var K=0;K<X;K++){for(var Z,oe=84+50*K,x=V.getFloat32(oe,!0),I=V.getFloat32(4+oe,!0),B=V.getFloat32(8+oe,!0),W=(H&&(Z=V.getUint16(48+oe,!0),k=32768&Z?(O=L,R=U,F):(O=(31&Z)/31,R=(Z>>5&31)/31,(Z>>10&31)/31)),new y.default.Vector(x,I,B)),$=1;$<=3;$++){var te=oe+12*$,te=new y.default.Vector(V.getFloat32(te,!0),V.getFloat32(4+te,!0),V.getFloat32(8+te,!0));E.vertices.push(te),E.vertexNormals.push(W),H&&D.push(O,R,k)}E.faces.push([3*K,3*K+1,3*K+2]),E.uvs.push([0,0],[0,0],[0,0])}})(S,P);else{if(P=new DataView(P),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");P=new TextDecoder("utf-8").decode(P).split(`
`),function(E,T){for(var O,R,k="",D=[],L=0;L<T.length;++L){for(var U=T[L].trim(),F=U.split(" "),V=0;V<F.length;++V)F[V]===""&&F.splice(V,1);if(F.length!==0)switch(k){case"":if(F[0]!=="solid")return console.error(U),console.error('Invalid state "'.concat(F[0],'", should be "solid"'));k="solid";break;case"solid":if(F[0]!=="facet"||F[1]!=="normal")return console.error(U),console.error('Invalid state "'.concat(F[0],'", should be "facet normal"'));O=new y.default.Vector(parseFloat(F[2]),parseFloat(F[3]),parseFloat(F[4])),E.vertexNormals.push(O,O,O),k="facet normal";break;case"facet normal":if(F[0]!=="outer"||F[1]!=="loop")return console.error(U),console.error('Invalid state "'.concat(F[0],'", should be "outer loop"'));k="vertex";break;case"vertex":if(F[0]==="vertex")R=new y.default.Vector(parseFloat(F[1]),parseFloat(F[2]),parseFloat(F[3])),E.vertices.push(R),E.uvs.push([0,0]),D.push(E.vertices.indexOf(R));else{if(F[0]!=="endloop")return console.error(U),console.error('Invalid state "'.concat(F[0],'", should be "vertex" or "endloop"'));E.faces.push(D),D=[],k="endloop"}break;case"endloop":if(F[0]!=="endfacet")return console.error(U),console.error('Invalid state "'.concat(F[0],'", should be "endfacet"'));k="endfacet";break;case"endfacet":if(F[0]!=="endsolid"){if(F[0]!=="facet"||F[1]!=="normal")return console.error(U),console.error('Invalid state "'.concat(F[0],'", should be "endsolid" or "facet normal"'));O=new y.default.Vector(parseFloat(F[2]),parseFloat(F[3]),parseFloat(F[4])),E.vertexNormals.push(O,O,O),k="facet normal"}break;default:console.error('Invalid state "'.concat(k,'"'))}}}(S,P)}})(u,g),s&&u.normalize(),a&&u.flipU(),c&&u.flipV(),p._decrementPreload(),typeof n=="function"&&n(u)},i):r.match(/\.obj$/i)?this.loadStrings(v,function(g){for(var S=u,P=g,E={v:[],vt:[],vn:[]},T={},O=0;O<P.length;++O){var R=P[O].trim().split(/\b\s+/);if(0<R.length){if(R[0]==="v"||R[0]==="vn"){var k=new y.default.Vector(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3]));E[R[0]].push(k)}else if(R[0]==="vt")k=[parseFloat(R[1]),1-parseFloat(R[2])],E[R[0]].push(k);else if(R[0]==="f")for(var D=3;D<R.length;++D){for(var L=[],U=[1,D-1,D],F=0;F<U.length;++F){var V=R[U[F]],X=0;if(T[V]!==void 0)X=T[V];else{for(var H=V.split("/"),G=0;G<H.length;G++)H[G]=parseInt(H[G])-1;X=T[V]=S.vertices.length,S.vertices.push(E.v[H[0]].copy()),E.vt[H[1]]?S.uvs.push(E.vt[H[1]].slice()):S.uvs.push([0,0]),E.vn[H[2]]&&S.vertexNormals.push(E.vn[H[2]].copy())}L.push(X)}L[0]!==L[1]&&L[0]!==L[2]&&L[1]!==L[2]&&S.faces.push(L)}}}S.vertexNormals.length===0&&S.computeNormals(),s&&u.normalize(),a&&u.flipU(),c&&u.flipV(),p._decrementPreload(),typeof n=="function"&&n(u)},i):(y.default._friendlyFileLoadError(3,v),i?i():y.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),u},y.default.prototype.model=function(v){this._assert3d("model"),y.default._validateParameters("model",arguments),0<v.vertices.length&&(this._renderer.geometryInHash(v.gid)||(v.edges.length===0&&v._makeTriangleEdges(),v._edgesToVertices(),this._renderer.createBuffers(v.gid,v)),this._renderer.drawBuffers(v.gid))};var d=y.default;j.default=d},{"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],328:[function(t,M,j){function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(n)}function y(n){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(i){return h(i)}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":h(i)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(m=t("../core/main"))&&m.__esModule?m:{default:m},d=function(n){if(n&&n.__esModule)return n;if(n===null||y(n)!=="object"&&typeof n!="function")return{default:n};var i=v();if(i&&i.has(n))return i.get(n);var s,a={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in n){var r;Object.prototype.hasOwnProperty.call(n,s)&&((r=c?Object.getOwnPropertyDescriptor(n,s):null)&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=n[s])}return a.default=n,i&&i.set(n,a),a}(t("../core/constants"));function v(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,v=function(){return n},n)}t("./p5.Texture"),l.default.prototype.loadShader=function(n,i,s,a){l.default._validateParameters("loadShader",arguments),a=a||console.error;function c(){u._decrementPreload(),s&&s(r)}var r=new l.default.Shader,u=this,p=!1,g=!1;return this.loadStrings(n,function(S){r._vertSrc=S.join(`
`),g=!0,p&&c()},a),this.loadStrings(i,function(S){r._fragSrc=S.join(`
`),p=!0,g&&c()},a),r},l.default.prototype.createShader=function(n,i){return l.default._validateParameters("createShader",arguments),new l.default.Shader(this._renderer,n,i)},l.default.prototype.createFilterShader=function(n){l.default._validateParameters("createFilterShader",arguments);var i=n.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,i=new l.default.Shader(this._renderer,i,n);return this._renderer.GL?i.ensureCompiledOnContext(this):i.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),i},l.default.prototype.shader=function(n){return this._assert3d("shader"),l.default._validateParameters("shader",arguments),n.ensureCompiledOnContext(this),n.isStrokeShader()?this._renderer.userStrokeShader=n:(this._renderer.userFillShader=n,this._renderer._useNormalMaterial=!1),this},l.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},l.default.prototype.texture=function(n){return this._assert3d("texture"),l.default._validateParameters("texture",arguments),n.gifProperties&&n._animateGif(this),this._renderer.drawMode=d.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=n,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.textureMode=function(n){n!==d.IMAGE&&n!==d.NORMAL?console.warn("You tried to set ".concat(n," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=n},l.default.prototype.textureWrap=function(n){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:n,s=(this._renderer.textureWrapX=n,this._renderer.textureWrapY=i,!0),a=!1,c=void 0;try{for(var r,u=this._renderer.textures.values()[Symbol.iterator]();!(s=(r=u.next()).done);s=!0)r.value.setWrapMode(n,i)}catch(p){a=!0,c=p}finally{try{s||u.return==null||u.return()}finally{if(a)throw c}}},l.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return l.default._validateParameters("normalMaterial",i),this._renderer.drawMode=d.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},l.default.prototype.ambientMaterial=function(n,i,s){this._assert3d("ambientMaterial"),l.default._validateParameters("ambientMaterial",arguments);var a=l.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=a._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.emissiveMaterial=function(n,i,s,a){this._assert3d("emissiveMaterial"),l.default._validateParameters("emissiveMaterial",arguments);var c=l.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=c._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},l.default.prototype.specularMaterial=function(n,i,s,a){this._assert3d("specularMaterial"),l.default._validateParameters("specularMaterial",arguments);var c=l.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=c._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},l.default.prototype.shininess=function(n){return this._assert3d("shininess"),l.default._validateParameters("shininess",arguments),this._renderer._useShininess=n=n<1?1:n,this},l.default.prototype.metalness=function(n){return this._assert3d("metalness"),n=1-Math.exp(-n/100),this._renderer._useMetalness=n,this},l.default.RendererGL.prototype._applyColorBlend=function(n,c){var s=this.GL,a=this.drawMode===d.TEXTURE,c=c||this.userFillShader||this.userStrokeShader||this.userPointShader||a||this.curBlendMode!==d.BLEND||n[n.length-1]<1||this._isErasing;return c!==this._isBlending&&(c||this.curBlendMode!==d.BLEND&&this.curBlendMode!==d.ADD?s.enable(s.BLEND):s.disable(s.BLEND),s.depthMask(!0),this._isBlending=c),this._applyBlendMode(),n},l.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var n=this.GL;switch(this.curBlendMode){case d.BLEND:n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case d.ADD:n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ONE);break;case d.REMOVE:n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ZERO,n.ONE_MINUS_SRC_ALPHA);break;case d.MULTIPLY:n.blendEquation(n.FUNC_ADD),n.blendFunc(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA);break;case d.SCREEN:n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_COLOR);break;case d.EXCLUSION:n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD),n.blendFuncSeparate(n.ONE_MINUS_DST_COLOR,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE);break;case d.REPLACE:n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO);break;case d.SUBTRACT:n.blendEquationSeparate(n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD),n.blendFuncSeparate(n.ONE,n.ONE,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case d.DARKEST:this.blendExt?(n.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,n.FUNC_ADD),n.blendFuncSeparate(n.ONE,n.ONE,n.ONE,n.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case d.LIGHTEST:this.blendExt?(n.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,n.FUNC_ADD),n.blendFuncSeparate(n.ONE,n.ONE,n.ONE,n.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var m=l.default;j.default=m},{"../core/constants":269,"../core/main":280,"./p5.Texture":339,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],329:[function(t,M,j){t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};function y(l,d){for(var v=0;v<d.length;v++){var m=d[v];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}h.default.prototype.camera=function(){var l;this._assert3d("camera");for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return h.default._validateParameters("camera",v),(l=this._renderer._curCamera).camera.apply(l,v),this},h.default.prototype.perspective=function(){var l;this._assert3d("perspective");for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return h.default._validateParameters("perspective",v),(l=this._renderer._curCamera).perspective.apply(l,v),this},h.default.prototype.ortho=function(){var l;this._assert3d("ortho");for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return h.default._validateParameters("ortho",v),(l=this._renderer._curCamera).ortho.apply(l,v),this},h.default.prototype.frustum=function(){var l;this._assert3d("frustum");for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return h.default._validateParameters("frustum",v),(l=this._renderer._curCamera).frustum.apply(l,v),this},h.default.prototype.createCamera=function(){this._assert3d("createCamera");var l=new h.default.Camera(this._renderer);return l._computeCameraDefaultSettings(),l._setDefaultCamera(),this._renderer._curCamera=l},h.default.Camera=function(){function l(m){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this._renderer=m,this.cameraType="default",this.cameraMatrix=new h.default.Matrix,this.projMatrix=new h.default.Matrix,this.yScale=1}var d,v;return d=l,(v=[{key:"perspective",value:function(a,n,i,s){this.cameraType=0<arguments.length?"custom":"default",a===void 0?(a=this.defaultCameraFOV,this.cameraFOV=a):this.cameraFOV=this._renderer._pInst._toRadians(a),n===void 0&&(n=this.defaultAspectRatio),i===void 0&&(i=this.defaultCameraNear),s===void 0&&(s=this.defaultCameraFar),i<=1e-4&&(i=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),s<i&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=n,this.cameraNear=i,this.cameraFar=s,this.projMatrix=h.default.Matrix.identity();var a=1/Math.tan(this.cameraFOV/2),c=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(a/n,0,0,0,0,-a*this.yScale,0,0,0,0,(s+i)*c,-1,0,0,2*s*i*c,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(E,P,i,s,a,c){E===void 0&&(E=-this._renderer.width/2),P===void 0&&(P=+this._renderer.width/2),i===void 0&&(i=-this._renderer.height/2),s===void 0&&(s=+this._renderer.height/2),a===void 0&&(a=0),c===void 0&&(c=Math.max(this._renderer.width,this._renderer.height)+800),this.cameraNear=a;var T=P-E,r=s-i,u=(this.cameraFar=c)-a,p=2/T,g=2/r*this.yScale,S=-2/u,P=-(P+E)/T,E=-(s+i)/r,T=-(c+a)/u;this.projMatrix=h.default.Matrix.identity(),this.projMatrix.set(p,0,0,0,0,-g,0,0,0,0,S,0,P,E,T,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(E,P,i,s,a,c){E===void 0&&(E=.05*-this._renderer.width),P===void 0&&(P=.05*+this._renderer.width),i===void 0&&(i=.05*+this._renderer.height),s===void 0&&(s=.05*-this._renderer.height),a===void 0&&(a=this.defaultCameraNear),c===void 0&&(c=this.defaultCameraFar),this.cameraNear=a;var T=P-E,r=s-i,u=(this.cameraFar=c)-a,p=2*a/T,g=2*a/r*this.yScale,S=-2*c*a/u,P=(P+E)/T,E=(s+i)/r,T=-(c+a)/u;this.projMatrix=h.default.Matrix.identity(),this.projMatrix.set(p,0,0,0,0,-g,0,0,P,E,T,-1,0,0,S,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(p,n,i,s){var a=this.centerX,c=this.centerY,r=this.centerZ,u=(a-=this.eyeX,c-=this.eyeY,r-=this.eyeZ,h.default.Matrix.identity(this._renderer._pInst)),p=(u.rotate(this._renderer._pInst._toRadians(p),n,i,s),[a*u.mat4[0]+c*u.mat4[4]+r*u.mat4[8],a*u.mat4[1]+c*u.mat4[5]+r*u.mat4[9],a*u.mat4[2]+c*u.mat4[6]+r*u.mat4[10]]);p[0]+=this.eyeX,p[1]+=this.eyeY,p[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,p[0],p[1],p[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(m){var n=this._getLocalAxes();this._rotateView(m,n.y[0],n.y[1],n.y[2])}},{key:"tilt",value:function(m){var n=this._getLocalAxes();this._rotateView(m,n.x[0],n.x[1],n.x[2])}},{key:"lookAt",value:function(m,n,i){this.camera(this.eyeX,this.eyeY,this.eyeZ,m,n,i,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(m,n,i,s,a,c,r,u,p){return m===void 0&&(m=this.defaultEyeX,n=this.defaultEyeY,i=this.defaultEyeZ,s=m,a=n,u=1,p=r=c=0),this.eyeX=m,this.eyeY=n,this.eyeZ=i,s!==void 0&&(this.centerX=s,this.centerY=a,this.centerZ=c),r!==void 0&&(this.upX=r,this.upY=u,this.upZ=p),s=this._getLocalAxes(),this.cameraMatrix.set(s.x[0],s.y[0],s.z[0],0,s.x[1],s.y[1],s.z[1],0,s.x[2],s.y[2],s.z[2],0,0,0,0,1),a=-m,this.cameraMatrix.translate([a,-n,-i]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(s,a,i){var c=this._getLocalAxes(),s=[c.x[0]*s,c.x[1]*s,c.x[2]*s],a=[c.y[0]*a,c.y[1]*a,c.y[2]*a],c=[c.z[0]*i,c.z[1]*i,c.z[2]*i];this.camera(this.eyeX+s[0]+a[0]+c[0],this.eyeY+s[1]+a[1]+c[1],this.eyeZ+s[2]+a[2]+c[2],this.centerX+s[0]+a[0]+c[0],this.centerY+s[1]+a[1]+c[1],this.centerZ+s[2]+a[2]+c[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(m,n,i){var s=m-this.eyeX,a=n-this.eyeY,c=i-this.eyeZ;this.camera(m,n,i,this.centerX+s,this.centerY+a,this.centerZ+c,this.upX,this.upY,this.upZ)}},{key:"set",value:function(m){for(var n=0,i=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale"];n<i.length;n++){var s=i[n];this[s]=m[s]}this.cameraMatrix=m.cameraMatrix.copy(),this.projMatrix=m.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(m,n,i){var s,a,c,r,u,p,g,S,P,E,T,O,R,k,D,L,U,F;i===0?this.set(m):i===1?this.set(n):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=m.projMatrix.mat4[0]*Math.pow(n.projMatrix.mat4[0]/m.projMatrix.mat4[0],i),this.projMatrix.mat4[5]=m.projMatrix.mat4[5]*Math.pow(n.projMatrix.mat4[5]/m.projMatrix.mat4[5],i),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),r=new h.default.Vector(m.eyeX,m.eyeY,m.eyeZ),u=new h.default.Vector(n.eyeX,n.eyeY,n.eyeZ),L=new h.default.Vector(m.centerX,m.centerY,m.centerZ),F=new h.default.Vector(n.centerX,n.centerY,n.centerZ),c=h.default.Vector.dist(r,L),s=h.default.Vector.dist(u,F),s=c*Math.pow(s/c,i),c=h.default.Vector.sub(r,u),a=1,1e-6<(U=(k=r.copy().sub(u).sub(L).add(F)).magSq())&&(a=h.default.Vector.dot(c,k)/U,a=Math.max(0,Math.min(a,1))),c=h.default.Vector.lerp(h.default.Vector.lerp(r,L,a),h.default.Vector.lerp(u,F,a),i),k=m.cameraMatrix.createSubMatrix3x3(),U=n.cameraMatrix.createSubMatrix3x3(),r=k.row(2),L=U.row(2),u=k.row(1),F=U.row(1),m=new h.default.Vector,n=new h.default.Vector,p=new h.default.Vector,g=new h.default.Vector,1-(S=.5*((k=(U=U.mult3x3(k.copy().transpose3x3())).diagonal())[0]+k[1]+k[2]-1))<1e-7?(m.set(h.default.Vector.lerp(r,L,i)).normalize(),p.set(m).mult(a*s).add(c),g.set(m).mult((a-1)*s).add(c),n.set(h.default.Vector.lerp(u,F,i)).normalize()):(L=1/(1-S),F=Math.max(k[0],k[1],k[2]),O=U.mat3[1]+U.mat3[3],R=U.mat3[2]+U.mat3[6],D=U.mat3[5]+U.mat3[7],F=F===k[0]?(E=.5*O*(L/=P=Math.sqrt((k[0]-S)*L)),T=.5*R*L,.5*(U.mat3[7]-U.mat3[5])/P):F===k[1]?(T=.5*D*(L/=E=Math.sqrt((k[1]-S)*L)),P=.5*O*L,.5*(U.mat3[2]-U.mat3[6])/E):(P=.5*R*(L/=T=Math.sqrt((k[2]-S)*L)),E=.5*D*L,.5*(U.mat3[3]-U.mat3[1])/T),O=i*Math.atan2(F,S),R=Math.cos(O),k=Math.sin(O),(F=new h.default.Matrix("mat3",[R+(D=1-R)*P*P,D*(L=P*E)+k*T,D*(U=T*P)-k*E,D*L-k*T,R+D*E*E,D*(i=E*T)+k*P,D*U+k*E,D*i-k*P,R+D*T*T])).multiplyVec3(r,m),p.set(m).mult(a*s).add(c),g.set(m).mult((a-1)*s).add(c),F.multiplyVec3(u,n)),this.camera(p.x,p.y,p.z,g.x,g.y,g.z,n.x,n.y,n.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var m=new h.default.Camera(this._renderer);return m.cameraFOV=this.cameraFOV,m.aspectRatio=this.aspectRatio,m.eyeX=this.eyeX,m.eyeY=this.eyeY,m.eyeZ=this.eyeZ,m.centerX=this.centerX,m.centerY=this.centerY,m.centerZ=this.centerZ,m.upX=this.upX,m.upY=this.upY,m.upZ=this.upZ,m.cameraNear=this.cameraNear,m.cameraFar=this.cameraFar,m.cameraType=this.cameraType,m.cameraMatrix=this.cameraMatrix.copy(),m.projMatrix=this.projMatrix.copy(),m.yScale=this.yScale,m}},{key:"_getLocalAxes",value:function(){var m=this.eyeX-this.centerX,n=this.eyeY-this.centerY,i=this.eyeZ-this.centerZ,r=Math.sqrt(m*m+n*n+i*i),r=(r!==0&&(m/=r,n/=r,i/=r),this.upX),s=(u=this.upY)*i-(p=this.upZ)*n,a=-r*i+p*m,c=r*n-u*m,r=n*c-i*a,u=-m*c+i*s,p=m*a-n*s,g=Math.sqrt(s*s+a*a+c*c),g=(g!==0&&(s/=g,a/=g,c/=g),Math.sqrt(r*r+u*u+p*p));return g!==0&&(r/=g,u/=g,p/=g),{x:[s,a,c],y:[r,u,p],z:[m,n,i]}}},{key:"_orbit",value:function(m,g,p){var a=this.eyeX-this.centerX,c=this.eyeY-this.centerY,r=this.eyeZ-this.centerZ,s=Math.hypot(a,c,r),a=new h.default.Vector(a,c,r).normalize(),c=new h.default.Vector(this.upX,this.upY,this.upZ).normalize(),r=h.default.Vector.cross(c,a).normalize(),u=h.default.Vector.cross(r,c),p=((s=(s*=Math.pow(10,p))<this.cameraNear?this.cameraNear:s)>this.cameraFar&&(s=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,h.default.Vector.dot(a,c))))+g),g=m;(p<=0||p>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),c.mult(Math.cos(p)),u.mult(Math.cos(g)*Math.sin(p)),r.mult(Math.sin(g)*Math.sin(p)),a.set(c).add(u).add(r),this.eyeX=s*a.x+this.centerX,this.eyeY=s*a.y+this.centerY,this.eyeZ=s*a.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(p,g,P){var a=this.eyeX-this.centerX,c=this.eyeY-this.centerY,r=this.eyeZ-this.centerZ,s=Math.hypot(a,c,r),a=new h.default.Vector(a,c,r).normalize(),c=new h.default.Vector(this.upX,this.upY,this.upZ),r=h.default.Vector.cross(c,a).normalize(),u=h.default.Vector.cross(a,r),E=Math.atan2(g,p),E=(u.mult(Math.sin(E)),r.mult(Math.cos(E)).add(u),Math.sqrt(p*p+g*g)),u=h.default.Vector.cross(a,r),p=((s=(s*=Math.pow(10,P))<this.cameraNear?this.cameraNear:s)>this.cameraFar&&(s=this.cameraFar),Math.cos(E)),g=Math.sin(E),P=c.dot(a),E=c.dot(r),S=P*p+E*g,P=-P*g+E*p,E=c.dot(u);c.x=S*a.x+P*r.x+E*u.x,c.y=S*a.y+P*r.y+E*u.y,c.z=S*a.z+P*r.z+E*u.z,r.mult(-g),a.mult(p).add(r).mult(s),this.camera(a.x+this.centerX,a.y+this.centerY,a.z+this.centerZ,this.centerX,this.centerY,this.centerZ,c.x,c.y,c.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&y(d.prototype,v),l}(),h.default.prototype.setCamera=function(l){this._renderer._curCamera=l,this._renderer.uPMatrix.set(l.projMatrix)},t=h.default.Camera,j.default=t},{"../core/main":280,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.string.sub":205}],330:[function(t,M,j){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function h(y,l){for(var d=0;d<l.length;d++){var v=l[d];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,v.key,v)}}t.default.DataArray=function(){function y(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,m=this,n=y;if(!(m instanceof n))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(v),this.initialLength=v}var l,d;return l=y,(d=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var v;this.length<this.data.length/2&&(v=1<<Math.ceil(Math.log2(this.length)),(v=new Float32Array(v)).set(this.data.subarray(0,this.length),0),this.data=v)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var v=arguments.length,m=new Array(v),n=0;n<v;n++)m[n]=arguments[n];this.ensureLength(this.length+m.length),this.data.set(m,this.length),this.length+=m.length}},{key:"slice",value:function(v,m){return this.data.slice(v,Math.min(m,this.length))}},{key:"subArray",value:function(v,m){return this.data.subarray(v,Math.min(m,this.length))}},{key:"ensureLength",value:function(v){for(;this.data.length<v;){var m=new Float32Array(2*this.data.length);m.set(this.data,0),this.data=m}}}])&&h(l.prototype,d),y}(),t=t.default.DataArray,j.default=t},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.log2":176,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],331:[function(O,M,j){function h(R){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(R)}function y(R){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(k){return h(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":h(k)})(R)}O("core-js/modules/es.symbol"),O("core-js/modules/es.symbol.description"),O("core-js/modules/es.symbol.iterator"),O("core-js/modules/es.array.fill"),O("core-js/modules/es.array.includes"),O("core-js/modules/es.array.iterator"),O("core-js/modules/es.object.get-own-property-descriptor"),O("core-js/modules/es.object.get-prototype-of"),O("core-js/modules/es.object.to-string"),O("core-js/modules/es.reflect.construct"),O("core-js/modules/es.reflect.get"),O("core-js/modules/es.regexp.to-string"),O("core-js/modules/es.string.includes"),O("core-js/modules/es.string.iterator"),O("core-js/modules/es.typed-array.float32-array"),O("core-js/modules/es.typed-array.uint8-array"),O("core-js/modules/es.typed-array.uint8-clamped-array"),O("core-js/modules/es.typed-array.copy-within"),O("core-js/modules/es.typed-array.every"),O("core-js/modules/es.typed-array.fill"),O("core-js/modules/es.typed-array.filter"),O("core-js/modules/es.typed-array.find"),O("core-js/modules/es.typed-array.find-index"),O("core-js/modules/es.typed-array.for-each"),O("core-js/modules/es.typed-array.includes"),O("core-js/modules/es.typed-array.index-of"),O("core-js/modules/es.typed-array.iterator"),O("core-js/modules/es.typed-array.join"),O("core-js/modules/es.typed-array.last-index-of"),O("core-js/modules/es.typed-array.map"),O("core-js/modules/es.typed-array.reduce"),O("core-js/modules/es.typed-array.reduce-right"),O("core-js/modules/es.typed-array.reverse"),O("core-js/modules/es.typed-array.set"),O("core-js/modules/es.typed-array.slice"),O("core-js/modules/es.typed-array.some"),O("core-js/modules/es.typed-array.sort"),O("core-js/modules/es.typed-array.subarray"),O("core-js/modules/es.typed-array.to-locale-string"),O("core-js/modules/es.typed-array.to-string"),O("core-js/modules/es.weak-map"),O("core-js/modules/web.dom-collections.iterator"),O("core-js/modules/es.array.fill"),O("core-js/modules/es.array.includes"),O("core-js/modules/es.array.iterator"),O("core-js/modules/es.object.get-prototype-of"),O("core-js/modules/es.object.to-string"),O("core-js/modules/es.string.includes"),O("core-js/modules/es.typed-array.float32-array"),O("core-js/modules/es.typed-array.uint8-array"),O("core-js/modules/es.typed-array.uint8-clamped-array"),O("core-js/modules/es.typed-array.copy-within"),O("core-js/modules/es.typed-array.every"),O("core-js/modules/es.typed-array.fill"),O("core-js/modules/es.typed-array.filter"),O("core-js/modules/es.typed-array.find"),O("core-js/modules/es.typed-array.find-index"),O("core-js/modules/es.typed-array.for-each"),O("core-js/modules/es.typed-array.includes"),O("core-js/modules/es.typed-array.index-of"),O("core-js/modules/es.typed-array.iterator"),O("core-js/modules/es.typed-array.join"),O("core-js/modules/es.typed-array.last-index-of"),O("core-js/modules/es.typed-array.map"),O("core-js/modules/es.typed-array.reduce"),O("core-js/modules/es.typed-array.reduce-right"),O("core-js/modules/es.typed-array.reverse"),O("core-js/modules/es.typed-array.set"),O("core-js/modules/es.typed-array.slice"),O("core-js/modules/es.typed-array.some"),O("core-js/modules/es.typed-array.sort"),O("core-js/modules/es.typed-array.subarray"),O("core-js/modules/es.typed-array.to-locale-string"),O("core-js/modules/es.typed-array.to-string"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(T=O("../core/main"))&&T.__esModule?T:{default:T},d=function(R){if(R&&R.__esModule)return R;if(R===null||y(R)!=="object"&&typeof R!="function")return{default:R};var k=n();if(k&&k.has(R))return k.get(R);var D,L={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(D in R){var F;Object.prototype.hasOwnProperty.call(R,D)&&((F=U?Object.getOwnPropertyDescriptor(R,D):null)&&(F.get||F.set)?Object.defineProperty(L,D,F):L[D]=R[D])}return L.default=R,k&&k.set(R,L),L}(O("../core/constants")),v=O("./p5.Texture"),m=O("./p5.RendererGL");function n(){var R;return typeof WeakMap!="function"?null:(R=new WeakMap,n=function(){return R},R)}function i(R,k){return function(D){if(Array.isArray(D))return D}(R)||function(D,L){if(Symbol.iterator in Object(D)||Object.prototype.toString.call(D)==="[object Arguments]"){var U=[],F=!0,V=!1,X=void 0;try{for(var H,G=D[Symbol.iterator]();!(F=(H=G.next()).done)&&(U.push(H.value),!L||U.length!==L);F=!0);}catch(K){V=!0,X=K}finally{try{F||G.return==null||G.return()}finally{if(V)throw X}}return U}}(R,k)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(R,k,D){return k in R?Object.defineProperty(R,k,{value:D,enumerable:!0,configurable:!0,writable:!0}):R[k]=D,R}function a(R,k){if(!(R instanceof k))throw new TypeError("Cannot call a class as a function")}function c(R,k){for(var D=0;D<k.length;D++){var L=k[D];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(R,L.key,L)}}function r(R,k,D){k&&c(R.prototype,k),D&&c(R,D)}function u(R,k,D){return(u=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(V,U,F){var V=function(X,H){for(;!Object.prototype.hasOwnProperty.call(X,H)&&(X=S(X))!==null;);return X}(V,U);if(V)return(V=Object.getOwnPropertyDescriptor(V,U)).get?V.get.call(F):V.value})(R,k,D||R)}function p(R,k){return(p=Object.setPrototypeOf||function(D,L){return D.__proto__=L,D})(R,k)}function g(R){return function(){var k,D=S(R),D=(k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=S(this).constructor,Reflect.construct(D,arguments,k)):D.apply(this,arguments),this);if(!k||y(k)!=="object"&&typeof k!="function"){if(D!==void 0)return D;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return k}}function S(R){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(R)}var P=function(R){var k=L;if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(R&&R.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),R&&p(k,R);var D=g(L);function L(U){var F;return a(this,L),(F=D.call(this,U.target._renderer)).fbo=U,F.yScale=-1,F}return r(L,[{key:"_computeCameraDefaultSettings",value:function(){u(S(L.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),L}(l.default.Camera),E=(l.default.FramebufferCamera=P,function(){function R(k,D){a(this,R),this.framebuffer=k,this.property=D}return r(R,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),R}()),T=(l.default.FramebufferTexture=E,function(){function R(U){var D=this,L=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},U=(a(this,R),this.target=U,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=L.format||d.UNSIGNED_BYTE,this.channels=L.channels||(U._renderer._pInst._glAttributes.alpha?d.RGBA:d.RGB),this.useDepth=L.depth===void 0||L.depth,this.depthFormat=L.depthFormat||d.FLOAT,this.textureFiltering=L.textureFiltering||d.LINEAR,L.antialias===void 0?this.antialiasSamples=U._renderer._pInst._glAttributes.antialias?2:0:typeof L.antialias=="number"?this.antialiasSamples=L.antialias:this.antialiasSamples=L.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&U.webglVersion!==d.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),L.width&&L.height?(this.width=L.width,this.height=L.height,this.autoSized=!1):(L.width===void 0!=(L.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=U.width,this.height=U.height,this.autoSized=!0),this.density=L.density||U.pixelDensity(),U._renderer.GL);if(this.gl=U,this._checkIfFormatsAvailable(),L.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(L.stencil===void 0||L.stencil),this.framebuffer=U.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=U.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures(),L=this.target._renderer._curCamera,this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=L,this.draw(function(){return D.target.clear()})}return r(R,[{key:"resize",value:function(k,D){this.autoSized=!1,this.width=k,this.height=D,this._handleResize()}},{key:"pixelDensity",value:function(k){if(!k)return this.density;this.autoSized=!1,this.density=k,this._handleResize()}},{key:"autoSized",value:function(k){if(k===void 0)return this.autoSized;this.autoSized=k,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var k=this.gl,k=(this.useDepth&&this.target.webglVersion===d.WEBGL&&!k.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===d.WEBGL&&this.depthFormat===d.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=d.UNSIGNED_INT),[d.UNSIGNED_BYTE,d.FLOAT,d.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.useDepth&&![d.UNSIGNED_INT,d.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=d.FLOAT),(0,v.checkWebGLCapabilities)(this.target._renderer));k.float||this.format!==d.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.useDepth&&!k.float&&this.depthFormat===d.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=d.UNSIGNED_INT),k.halfFloat||this.format!==d.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.channels===d.RGB&&[d.FLOAT,d.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=d.RGBA)}},{key:"_recreateTextures",value:function(){var k=this.gl,D=(this._updateSize(),k.getParameter(k.TEXTURE_BINDING_2D)),L=k.getParameter(k.FRAMEBUFFER_BINDING),U=k.createTexture();if(!U)throw new Error("Unable to create color texture");k.bindTexture(k.TEXTURE_2D,U);var F=this._glColorFormat();if(k.texImage2D(k.TEXTURE_2D,0,F.internalFormat,this.width*this.density,this.height*this.density,0,F.format,F.type,null),this.colorTexture=U,k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,U,0),this.useDepth){var U=k.createTexture();if(!U)throw new Error("Unable to create depth texture");var V=this._glDepthFormat();k.bindTexture(k.TEXTURE_2D,U),k.texImage2D(k.TEXTURE_2D,0,V.internalFormat,this.width*this.density,this.height*this.density,0,V.format,V.type,null),k.framebufferTexture2D(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.TEXTURE_2D,U,0),this.depthTexture=U}this.antialias&&(this.colorRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.colorRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),F.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(V=this._glDepthFormat(),this.depthRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.depthRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),V.internalFormat,this.width*this.density,this.height*this.density)),k.bindFramebuffer(k.FRAMEBUFFER,this.aaFramebuffer),k.framebufferRenderbuffer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&k.framebufferRenderbuffer(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new E(this,"depthTexture"),U=k.NEAREST,this.depthP5Texture=new l.default.Texture(this.target._renderer,this.depth,{minFilter:U,magFilter:U}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new E(this,"colorTexture"),F=this.textureFiltering===d.LINEAR?k.LINEAR:k.NEAREST,this.colorP5Texture=new l.default.Texture(this.target._renderer,this.color,{minFilter:F,magFilter:F}),this.target._renderer.textures.set(this.color,this.colorP5Texture),k.bindTexture(k.TEXTURE_2D,D),k.bindFramebuffer(k.FRAMEBUFFER,L)}},{key:"_glColorFormat",value:function(){var k,D,L=this.gl,U=this.format===d.FLOAT?L.FLOAT:this.format===d.HALF_FLOAT?this.target.webglVersion===d.WEBGL2?L.HALF_FLOAT:L.getExtension("OES_texture_half_float").HALF_FLOAT_OES:L.UNSIGNED_BYTE,F=this.channels===d.RGBA?L.RGBA:L.RGB;return{internalFormat:this.target.webglVersion===d.WEBGL2?(s(D={},L.FLOAT,s({},L.RGBA,L.RGBA32F)),s(D,L.HALF_FLOAT,s({},L.RGBA,L.RGBA16F)),s(D,L.UNSIGNED_BYTE,(s(k={},L.RGBA,L.RGBA8),s(k,L.RGB,L.RGB8),k)),D[U][F]):this.format===d.HALF_FLOAT?L.RGBA:F,format:F,type:U}}},{key:"_glDepthFormat",value:function(){var L=this.gl,k=this.useStencil?this.depthFormat===d.FLOAT?L.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===d.WEBGL2?L.UNSIGNED_INT_24_8:L.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===d.FLOAT?L.FLOAT:L.UNSIGNED_INT,D=this.useStencil?L.DEPTH_STENCIL:L.DEPTH_COMPONENT,L=this.useStencil?this.depthFormat===d.FLOAT?L.DEPTH32F_STENCIL8:this.target.webglVersion===d.WEBGL2?L.DEPTH24_STENCIL8:L.DEPTH_STENCIL:this.target.webglVersion===d.WEBGL2?this.depthFormat===d.FLOAT?L.DEPTH_COMPONENT32F:L.DEPTH_COMPONENT24:L.DEPTH_COMPONENT;return{internalFormat:L,format:D,type:k}}},{key:"_updateSize",value:function(){this.autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this.autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var U=this.color,k=this.depth,D=this.colorRenderbuffer,L=this.depthRenderbuffer,U=(this._deleteTexture(U),k&&this._deleteTexture(k),this.gl);D&&U.deleteRenderbuffer(D),L&&U.deleteRenderbuffer(L),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var k=new P(this);return k._computeCameraDefaultSettings(),k._setDefaultCamera(),this.target._renderer._curCamera=k}},{key:"_deleteTexture",value:function(k){this.gl.deleteTexture(k.rawTexture()),this.target._renderer.textures.delete(k)}},{key:"remove",value:function(){var k=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),k.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&k.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&k.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&k.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix)}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var k=this.gl,D=(k.bindFramebuffer(k.READ_FRAMEBUFFER,this.aaFramebuffer),k.bindFramebuffer(k.DRAW_FRAMEBUFFER,this.framebuffer),[[k.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&D.push([k.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var L=0,U=D;L<U.length;L++){var V=i(U[L],2),F=V[0],V=V[1];k.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,F,V)}}}},{key:"end",value:function(){var k=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(k.bindFramebuffer(k.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(k){this.begin(),k(),this.end()}},{key:"loadPixels",value:function(){var k=this.gl,D=this.target._renderer.activeFramebuffer(),L=(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,m.readPixelsWebGL)(this.pixels,k,this.framebuffer,0,0,this.width*this.density,this.height*this.density,L.format,L.type),D?k.bindFramebuffer(k.FRAMEBUFFER,D._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null)}},{key:"get",value:function(k,D,L,U){l.default._validateParameters("p5.Framebuffer.get",arguments);var F=this._glColorFormat();if(k===void 0&&D===void 0)D=k=0,L=this.width,U=this.height;else if(L===void 0&&U===void 0)return(k<0||D<0||k>=this.width||D>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),k=this.target.constrain(k,0,this.width-1),D=this.target.constrain(D,0,this.height-1)),(0,m.readPixelWebGL)(this.gl,this.framebuffer,k*this.density,D*this.density,F.format,F.type);k=this.target.constrain(k,0,this.width-1),D=this.target.constrain(D,0,this.height-1),L=this.target.constrain(L,1,this.width-k),U=this.target.constrain(U,1,this.height-D);for(var V=(0,m.readPixelsWebGL)(void 0,this.gl,this.framebuffer,k*this.density,D*this.density,L*this.density,U*this.density,F.format,F.type),X=new Uint8ClampedArray(L*U*this.density*this.density*4),H=(X.fill(255),F.type===this.gl.RGB?3:4),G=0;G<U*this.density;G++)for(var K=0;K<L*this.density;K++)for(var Z=0;Z<4;Z++){var oe,x=4*(G*L*this.density+K)+Z;Z<H&&(oe=H==4?x:(G*L*this.density+K)*H+Z,X[x]=V[oe])}return k=new l.default.Image(L*this.density,U*this.density),k.imageData=k.canvas.getContext("2d").createImageData(k.width,k.height),k.imageData.data.set(X),k.pixels=k.imageData.data,k.updatePixels(),this.density!==1&&k.resize(L,U),k}},{key:"updatePixels",value:function(){var k=this.gl,D=(this.colorP5Texture.bindTexture(),this._glColorFormat()),L=D.format===k.RGBA?4:3,L=this.width*this.height*this.density*this.density*L,U=D.type===k.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof U)||this.pixels.length!==L)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");k.texImage2D(k.TEXTURE_2D,0,D.internalFormat,this.width*this.density,this.height*this.density,0,D.format,D.type,this.pixels),this.colorP5Texture.unbindTexture(),U=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),this.end()):(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),U?k.bindFramebuffer(k.FRAMEBUFFER,U._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null))}}]),R}()),O=l.default.Framebuffer=T;j.default=O},{"../core/constants":269,"../core/main":280,"./p5.RendererGL":337,"./p5.Texture":339,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],332:[function(t,M,j){function h(s){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(s)}function y(s){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(a){return h(a)}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":h(a)})(s)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(i=t("../core/main"))&&i.__esModule?i:{default:i},d=function(s){if(s&&s.__esModule)return s;if(s===null||y(s)!=="object"&&typeof s!="function")return{default:s};var a=v();if(a&&a.has(s))return a.get(s);var c,r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var p;Object.prototype.hasOwnProperty.call(s,c)&&((p=u?Object.getOwnPropertyDescriptor(s,c):null)&&(p.get||p.set)?Object.defineProperty(r,c,p):r[c]=s[c])}return r.default=s,a&&a.set(s,r),r}(t("../core/constants"));function v(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,v=function(){return s},s)}function m(s){return function(a){if(Array.isArray(a)){for(var c=0,r=new Array(a.length);c<a.length;c++)r[c]=a[c];return r}}(s)||function(a){if(Symbol.iterator in Object(a)||Object.prototype.toString.call(a)==="[object Arguments]")return Array.from(a)}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(s,a){for(var c=0;c<a.length;c++){var r=a[c];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}l.default.Geometry=function(){function s(r,u,p){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.lineVertices=new l.default.DataArray,this.lineTangentsIn=new l.default.DataArray,this.lineTangentsOut=new l.default.DataArray,this.lineSides=new l.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new l.default.DataArray,this.detailX=r!==void 0?r:1,this.detailY=u!==void 0?u:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,p instanceof Function&&p.call(this)}var a,c;return a=s,(c=[{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var r=0;r<this.vertexColors.length;r+=4)if(this.vertexColors[r+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var r=0;r<this.lineVertexColors.length;r+=4)if(this.lineVertexColors[r+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(r,u){return u%2==0?1-r:r})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(r,u){return u%2==0?r:1-r})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var r,u,p,g=this.detailX+1,S=0;S<this.detailY;S++)for(var P=0;P<this.detailX;P++)u=(S+1)*g+P+1,this.faces.push([S*g+P,r=S*g+P+1,p=(S+1)*g+P]),this.faces.push([p,r,u]);return this}},{key:"_getFaceNormal",value:function(u){var u=this.faces[u],p=this.vertices[u[0]],S=this.vertices[u[1]],u=this.vertices[u[2]],S=l.default.Vector.sub(S,p),u=l.default.Vector.sub(u,p),p=l.default.Vector.cross(S,u),g=l.default.Vector.mag(p),S=g/(l.default.Vector.mag(S)*l.default.Vector.mag(u));return S===0||isNaN(S)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),p):(1<S&&(S=1),p.mult(Math.asin(S)/g))}},{key:"computeNormals",value:function(){var r,u=this,p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:d.FLAT,g=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,S=this.vertexNormals,P=this.vertices,E=this.faces;if(p===d.SMOOTH){for(var T={},O=[],R=Math.pow(10,g===void 0?3:g),k=function(V){return Math.round(V*R)/R},D=function(V){return"".concat(k(V.x),",").concat(k(V.y),",").concat(k(V.z))},L=0;L<P.length;L++){var U=P[L],F=D(U);T[F]===void 0&&(T[F]=O.length,O.push(U))}E.forEach(function(V){for(var X=0;X<3;++X){var H=V[X],H=P[H],H=D(H);V[X]=T[H]}}),this.edges.forEach(function(V){for(var X=0;X<2;++X){var H=V[X],H=P[H],H=D(H);V[X]=T[H]}}),this.vertices=P=O}for(r=S.length=0;r<P.length;++r)S.push(new l.default.Vector);for(E.forEach(function(V,X){for(var H=u._getFaceNormal(X),G=0;G<3;++G){var K=V[G];S[K].add(H)}}),r=0;r<P.length;++r)S[r].normalize();return this}},{key:"averageNormals",value:function(){for(var r=0;r<=this.detailY;r++){var u=this.detailX+1,p=l.default.Vector.add(this.vertexNormals[r*u],this.vertexNormals[r*u+this.detailX]),p=l.default.Vector.div(p,2);this.vertexNormals[r*u]=p,this.vertexNormals[r*u+this.detailX]=p}return this}},{key:"averagePoleNormals",value:function(){for(var r=new l.default.Vector(0,0,0),u=0;u<this.detailX;u++)r.add(this.vertexNormals[u]);for(var r=l.default.Vector.div(r,this.detailX),p=0;p<this.detailX;p++)this.vertexNormals[p]=r;r=new l.default.Vector(0,0,0);for(var g=this.vertices.length-1;g>this.vertices.length-1-this.detailX;g--)r.add(this.vertexNormals[g]);r=l.default.Vector.div(r,this.detailX);for(var S=this.vertices.length-1;S>this.vertices.length-1-this.detailX;S--)this.vertexNormals[S]=r;return this}},{key:"_makeTriangleEdges",value:function(){for(var r=this.edges.length=0;r<this.faces.length;r++)this.edges.push([this.faces[r][0],this.faces[r][1]]),this.edges.push([this.faces[r][1],this.faces[r][2]]),this.edges.push([this.faces[r][2],this.faces[r][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var r,u=new Map,p=new Set,g=0;g<this.edges.length;g++){var S,P=this.edges[g-1],E=this.edges[g],T=this.vertices[E[0]],O=this.vertices[E[1]],R=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*E[0],4*(E[0]+1)):[0,0,0,0],k=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*E[1],4*(E[1]+1)):[0,0,0,0],D=O.copy().sub(T).normalize(),L=0<D.magSq();L&&this._addSegment(T,O,R,k,D),0<g&&P[1]===E[0]?p.has(E[0])||(p.add(E[0]),u.delete(E[0]),r&&L&&D.dot(r)<1-1e-8&&this._addJoin(T,r,D,R)):(L&&!p.has(E[0])&&((S=u.get(E[0]))?(this._addJoin(T,S.dir,D,R),u.delete(E[0]),p.add(E[0])):u.set(E[0],{point:T,dir:D.copy().mult(-1),color:R})),r&&!p.has(P[1])&&((S=u.get(P[1]))?(this._addJoin(this.vertices[P[1]],r,S.dir.copy().mult(-1),R),u.delete(P[1]),p.add(P[1])):u.set(P[1],{point:this.vertices[P[1]],dir:r,color:R}),r=void 0)),g!==this.edges.length-1||p.has(E[1])||((T=u.get(E[1]))?(this._addJoin(O,D,T.dir.copy().mult(-1),k),u.delete(E[1]),p.add(E[1])):u.set(E[1],{point:O,dir:D,color:k})),L&&(r=D)}var U=!0,F=!1,V=void 0;try{for(var X,H=u.values()[Symbol.iterator]();!(U=(X=H.next()).done);U=!0){var G=X.value,K=G.point,Z=G.dir,oe=G.color;this._addCap(K,Z,oe)}}catch(x){F=!0,V=x}finally{try{U||H.return==null||H.return()}finally{if(F)throw V}}return this}},{key:"_addSegment",value:function(P,E,p,g,S){var P=P.array(),E=E.array(),T=S.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var O=0,R=[this.lineTangentsIn,this.lineTangentsOut];O<R.length;O++)for(var k=R[O],D=0;D<6;D++)k.push.apply(k,m(T));return(S=this.lineVertices).push.apply(S,m(P).concat(m(E),m(P),m(E),m(E),m(P))),(S=this.lineVertexColors).push.apply(S,m(p).concat(m(g),m(p),m(g),m(g),m(p))),this}},{key:"_addCap",value:function(r,u,p){for(var g,S=r.array(),P=u.array(),E=[0,0,0],T=0;T<6;T++)(g=this.lineVertices).push.apply(g,m(S)),(g=this.lineTangentsIn).push.apply(g,m(P)),(g=this.lineTangentsOut).push.apply(g,E),(g=this.lineVertexColors).push.apply(g,m(p));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(r,u,p,g){for(var S,P=r.array(),E=u.array(),T=p.array(),O=0;O<12;O++)(S=this.lineVertices).push.apply(S,m(P)),(S=this.lineTangentsIn).push.apply(S,m(E)),(S=this.lineTangentsOut).push.apply(S,m(T)),(S=this.lineVertexColors).push.apply(S,m(g));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var r=this.vertices[0].copy(),u=this.vertices[0].copy(),p=0;p<this.vertices.length;p++)r.x=Math.max(r.x,this.vertices[p].x),u.x=Math.min(u.x,this.vertices[p].x),r.y=Math.max(r.y,this.vertices[p].y),u.y=Math.min(u.y,this.vertices[p].y),r.z=Math.max(r.z,this.vertices[p].z),u.z=Math.min(u.z,this.vertices[p].z);for(var g=l.default.Vector.lerp(r,u,.5),S=l.default.Vector.sub(r,u),P=200/Math.max(Math.max(S.x,S.y),S.z),E=0;E<this.vertices.length;E++)this.vertices[E].sub(g),this.vertices[E].mult(P)}return this}}])&&n(a.prototype,c),s}();var i=l.default.Geometry;j.default=i},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.map":174,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],333:[function(v,M,j){v("core-js/modules/es.array.iterator"),v("core-js/modules/es.object.to-string"),v("core-js/modules/es.typed-array.float32-array"),v("core-js/modules/es.typed-array.copy-within"),v("core-js/modules/es.typed-array.every"),v("core-js/modules/es.typed-array.fill"),v("core-js/modules/es.typed-array.filter"),v("core-js/modules/es.typed-array.find"),v("core-js/modules/es.typed-array.find-index"),v("core-js/modules/es.typed-array.for-each"),v("core-js/modules/es.typed-array.includes"),v("core-js/modules/es.typed-array.index-of"),v("core-js/modules/es.typed-array.iterator"),v("core-js/modules/es.typed-array.join"),v("core-js/modules/es.typed-array.last-index-of"),v("core-js/modules/es.typed-array.map"),v("core-js/modules/es.typed-array.reduce"),v("core-js/modules/es.typed-array.reduce-right"),v("core-js/modules/es.typed-array.reverse"),v("core-js/modules/es.typed-array.set"),v("core-js/modules/es.typed-array.slice"),v("core-js/modules/es.typed-array.some"),v("core-js/modules/es.typed-array.sort"),v("core-js/modules/es.typed-array.subarray"),v("core-js/modules/es.typed-array.to-locale-string"),v("core-js/modules/es.typed-array.to-string"),v("core-js/modules/es.array.iterator"),v("core-js/modules/es.object.to-string"),v("core-js/modules/es.typed-array.float32-array"),v("core-js/modules/es.typed-array.copy-within"),v("core-js/modules/es.typed-array.every"),v("core-js/modules/es.typed-array.fill"),v("core-js/modules/es.typed-array.filter"),v("core-js/modules/es.typed-array.find"),v("core-js/modules/es.typed-array.find-index"),v("core-js/modules/es.typed-array.for-each"),v("core-js/modules/es.typed-array.includes"),v("core-js/modules/es.typed-array.index-of"),v("core-js/modules/es.typed-array.iterator"),v("core-js/modules/es.typed-array.join"),v("core-js/modules/es.typed-array.last-index-of"),v("core-js/modules/es.typed-array.map"),v("core-js/modules/es.typed-array.reduce"),v("core-js/modules/es.typed-array.reduce-right"),v("core-js/modules/es.typed-array.reverse"),v("core-js/modules/es.typed-array.set"),v("core-js/modules/es.typed-array.slice"),v("core-js/modules/es.typed-array.some"),v("core-js/modules/es.typed-array.sort"),v("core-js/modules/es.typed-array.subarray"),v("core-js/modules/es.typed-array.to-locale-string"),v("core-js/modules/es.typed-array.to-string"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(v=v("../core/main"))&&v.__esModule?v:{default:v};function y(m,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(m,s.key,s)}}var l=Array,d=function(m){return Array.isArray(m)},v=(typeof Float32Array<"u"&&(l=Float32Array,d=function(m){return Array.isArray(m)||m instanceof Float32Array}),h.default.Matrix=function(){function m(){var a=this,c=m;if(a instanceof c)return arguments.length&&((a=arguments.length-1)<0||arguments.length<=a?void 0:arguments[a])instanceof h.default&&(this.p5=(c=arguments.length-1)<0||arguments.length<=c?void 0:arguments[c]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new l([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new l([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var n,i,s;return n=m,s=[{key:"identity",value:function(a){return new h.default.Matrix(a)}}],(i=[{key:"set",value:function(a){var c=arguments;if(a instanceof h.default.Matrix?c=a.mat4:d(a)&&(c=a),c.length!==16)h.default._friendlyError("Expected 16 values but received ".concat(c.length,"."),"p5.Matrix.set");else for(var r=0;r<16;r++)this.mat4[r]=c[r];return this}},{key:"get",value:function(){return new h.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var a;return this.mat3!==void 0?((a=new h.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],a.mat3[1]=this.mat3[1],a.mat3[2]=this.mat3[2],a.mat3[3]=this.mat3[3],a.mat3[4]=this.mat3[4],a.mat3[5]=this.mat3[5],a.mat3[6]=this.mat3[6],a.mat3[7]=this.mat3[7],a.mat3[8]=this.mat3[8]):((a=new h.default.Matrix(this.p5)).mat4[0]=this.mat4[0],a.mat4[1]=this.mat4[1],a.mat4[2]=this.mat4[2],a.mat4[3]=this.mat4[3],a.mat4[4]=this.mat4[4],a.mat4[5]=this.mat4[5],a.mat4[6]=this.mat4[6],a.mat4[7]=this.mat4[7],a.mat4[8]=this.mat4[8],a.mat4[9]=this.mat4[9],a.mat4[10]=this.mat4[10],a.mat4[11]=this.mat4[11],a.mat4[12]=this.mat4[12],a.mat4[13]=this.mat4[13],a.mat4[14]=this.mat4[14],a.mat4[15]=this.mat4[15]),a}},{key:"transpose",value:function(a){var c,r,u,p,g,S;return a instanceof h.default.Matrix?(c=a.mat4[1],r=a.mat4[2],u=a.mat4[3],p=a.mat4[6],g=a.mat4[7],S=a.mat4[11],this.mat4[0]=a.mat4[0],this.mat4[1]=a.mat4[4],this.mat4[2]=a.mat4[8],this.mat4[3]=a.mat4[12],this.mat4[4]=c,this.mat4[5]=a.mat4[5],this.mat4[6]=a.mat4[9],this.mat4[7]=a.mat4[13],this.mat4[8]=r,this.mat4[9]=p,this.mat4[10]=a.mat4[10],this.mat4[11]=a.mat4[14],this.mat4[12]=u,this.mat4[13]=g,this.mat4[14]=S,this.mat4[15]=a.mat4[15]):d(a)&&(c=a[1],r=a[2],u=a[3],p=a[6],g=a[7],S=a[11],this.mat4[0]=a[0],this.mat4[1]=a[4],this.mat4[2]=a[8],this.mat4[3]=a[12],this.mat4[4]=c,this.mat4[5]=a[5],this.mat4[6]=a[9],this.mat4[7]=a[13],this.mat4[8]=r,this.mat4[9]=p,this.mat4[10]=a[10],this.mat4[11]=a[14],this.mat4[12]=u,this.mat4[13]=g,this.mat4[14]=S,this.mat4[15]=a[15]),this}},{key:"invert",value:function(V){V instanceof h.default.Matrix?(c=V.mat4[0],r=V.mat4[1],u=V.mat4[2],p=V.mat4[3],g=V.mat4[4],S=V.mat4[5],P=V.mat4[6],E=V.mat4[7],T=V.mat4[8],O=V.mat4[9],R=V.mat4[10],k=V.mat4[11],D=V.mat4[12],L=V.mat4[13],U=V.mat4[14],F=V.mat4[15]):d(V)&&(c=V[0],r=V[1],u=V[2],p=V[3],g=V[4],S=V[5],P=V[6],E=V[7],T=V[8],O=V[9],R=V[10],k=V[11],D=V[12],L=V[13],U=V[14],F=V[15]);var c,r,u,p,g,S,P,E,T,O,R,k,D,L,U,F,V=c*S-r*g,X=c*P-u*g,H=c*E-p*g,G=r*P-u*S,K=r*E-p*S,Z=u*E-p*P,oe=T*L-O*D,x=T*U-R*D,I=T*F-k*D,B=O*U-R*L,W=O*F-k*L,$=R*F-k*U,te=V*$-X*W+H*B+G*I-K*x+Z*oe;return te?(this.mat4[0]=(S*$-P*W+E*B)*(te=1/te),this.mat4[1]=(u*W-r*$-p*B)*te,this.mat4[2]=(L*Z-U*K+F*G)*te,this.mat4[3]=(R*K-O*Z-k*G)*te,this.mat4[4]=(P*I-g*$-E*x)*te,this.mat4[5]=(c*$-u*I+p*x)*te,this.mat4[6]=(U*H-D*Z-F*X)*te,this.mat4[7]=(T*Z-R*H+k*X)*te,this.mat4[8]=(g*W-S*I+E*oe)*te,this.mat4[9]=(r*I-c*W-p*oe)*te,this.mat4[10]=(D*K-L*H+F*V)*te,this.mat4[11]=(O*H-T*K-k*V)*te,this.mat4[12]=(S*x-g*B-P*oe)*te,this.mat4[13]=(c*B-r*x+u*oe)*te,this.mat4[14]=(L*X-D*G-U*V)*te,this.mat4[15]=(T*G-O*X+R*V)*te,this):null}},{key:"invert3x3",value:function(){var a=this.mat3[0],c=this.mat3[1],r=this.mat3[2],u=this.mat3[3],p=this.mat3[4],g=this.mat3[5],S=this.mat3[6],P=this.mat3[7],E=this.mat3[8],T=E*p-g*P,O=-E*u+g*S,R=P*u-p*S,k=a*T+c*O+r*R;return k?(this.mat3[0]=T*(k=1/k),this.mat3[1]=(-E*c+r*P)*k,this.mat3[2]=(g*c-r*p)*k,this.mat3[3]=O*k,this.mat3[4]=(E*a-r*S)*k,this.mat3[5]=(-g*a+r*u)*k,this.mat3[6]=R*k,this.mat3[7]=(-P*a+c*S)*k,this.mat3[8]=(p*a-c*u)*k,this):null}},{key:"transpose3x3",value:function(a){var c=(a=a===void 0?this.mat3:a)[1],r=a[2],u=a[5];return this.mat3[0]=a[0],this.mat3[1]=a[3],this.mat3[2]=a[6],this.mat3[3]=c,this.mat3[4]=a[4],this.mat3[5]=a[7],this.mat3[6]=r,this.mat3[7]=u,this.mat3[8]=a[8],this}},{key:"inverseTranspose",value:function(a){if(a=a.mat4,this.mat3===void 0?h.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=a[0],this.mat3[1]=a[1],this.mat3[2]=a[2],this.mat3[3]=a[4],this.mat3[4]=a[5],this.mat3[5]=a[6],this.mat3[6]=a[8],this.mat3[7]=a[9],this.mat3[8]=a[10]),a=this.invert3x3(),a)a.transpose3x3(this.mat3);else for(var c=0;c<9;c++)this.mat3[c]=0;return this}},{key:"determinant",value:function(){var a=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],c=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],r=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],u=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],p=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],g=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],S=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],P=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],E=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],T=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],O=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return a*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-c*O+r*T+u*E-p*P+g*S}},{key:"mult",value:function(r){var c;if(r===this||r===this.mat4)c=this.copy().mat4;else if(r instanceof h.default.Matrix)c=r.mat4;else if(d(r))c=r;else{if(arguments.length!==16)return;c=arguments}var r=this.mat4[0],u=this.mat4[1],p=this.mat4[2],g=this.mat4[3];return this.mat4[0]=r*c[0]+u*c[4]+p*c[8]+g*c[12],this.mat4[1]=r*c[1]+u*c[5]+p*c[9]+g*c[13],this.mat4[2]=r*c[2]+u*c[6]+p*c[10]+g*c[14],this.mat4[3]=r*c[3]+u*c[7]+p*c[11]+g*c[15],r=this.mat4[4],u=this.mat4[5],p=this.mat4[6],g=this.mat4[7],this.mat4[4]=r*c[0]+u*c[4]+p*c[8]+g*c[12],this.mat4[5]=r*c[1]+u*c[5]+p*c[9]+g*c[13],this.mat4[6]=r*c[2]+u*c[6]+p*c[10]+g*c[14],this.mat4[7]=r*c[3]+u*c[7]+p*c[11]+g*c[15],r=this.mat4[8],u=this.mat4[9],p=this.mat4[10],g=this.mat4[11],this.mat4[8]=r*c[0]+u*c[4]+p*c[8]+g*c[12],this.mat4[9]=r*c[1]+u*c[5]+p*c[9]+g*c[13],this.mat4[10]=r*c[2]+u*c[6]+p*c[10]+g*c[14],this.mat4[11]=r*c[3]+u*c[7]+p*c[11]+g*c[15],r=this.mat4[12],u=this.mat4[13],p=this.mat4[14],g=this.mat4[15],this.mat4[12]=r*c[0]+u*c[4]+p*c[8]+g*c[12],this.mat4[13]=r*c[1]+u*c[5]+p*c[9]+g*c[13],this.mat4[14]=r*c[2]+u*c[6]+p*c[10]+g*c[14],this.mat4[15]=r*c[3]+u*c[7]+p*c[11]+g*c[15],this}},{key:"apply",value:function(r){var c;if(r===this||r===this.mat4)c=this.copy().mat4;else if(r instanceof h.default.Matrix)c=r.mat4;else if(d(r))c=r;else{if(arguments.length!==16)return;c=arguments}var r=this.mat4,u=r[0],p=r[4],g=r[8],S=r[12],u=(r[0]=c[0]*u+c[1]*p+c[2]*g+c[3]*S,r[4]=c[4]*u+c[5]*p+c[6]*g+c[7]*S,r[8]=c[8]*u+c[9]*p+c[10]*g+c[11]*S,r[12]=c[12]*u+c[13]*p+c[14]*g+c[15]*S,r[1]),p=r[5],g=r[9],S=r[13],u=(r[1]=c[0]*u+c[1]*p+c[2]*g+c[3]*S,r[5]=c[4]*u+c[5]*p+c[6]*g+c[7]*S,r[9]=c[8]*u+c[9]*p+c[10]*g+c[11]*S,r[13]=c[12]*u+c[13]*p+c[14]*g+c[15]*S,r[2]),p=r[6],g=r[10],S=r[14],u=(r[2]=c[0]*u+c[1]*p+c[2]*g+c[3]*S,r[6]=c[4]*u+c[5]*p+c[6]*g+c[7]*S,r[10]=c[8]*u+c[9]*p+c[10]*g+c[11]*S,r[14]=c[12]*u+c[13]*p+c[14]*g+c[15]*S,r[3]),p=r[7],g=r[11],S=r[15];return r[3]=c[0]*u+c[1]*p+c[2]*g+c[3]*S,r[7]=c[4]*u+c[5]*p+c[6]*g+c[7]*S,r[11]=c[8]*u+c[9]*p+c[10]*g+c[11]*S,r[15]=c[12]*u+c[13]*p+c[14]*g+c[15]*S,this}},{key:"scale",value:function(a,c,r){return a instanceof h.default.Vector?(c=a.y,r=a.z,a=a.x):a instanceof Array&&(c=a[1],r=a[2],a=a[0]),this.mat4[0]*=a,this.mat4[1]*=a,this.mat4[2]*=a,this.mat4[3]*=a,this.mat4[4]*=c,this.mat4[5]*=c,this.mat4[6]*=c,this.mat4[7]*=c,this.mat4[8]*=r,this.mat4[9]*=r,this.mat4[10]*=r,this.mat4[11]*=r,this}},{key:"rotate",value:function(V,W,B,u){W instanceof h.default.Vector?(B=W.y,u=W.z,W=W.x):W instanceof Array&&(B=W[1],u=W[2],W=W[0]);var p=Math.sqrt(W*W+B*B+u*u),p=(W*=1/p,B*=1/p,u*=1/p,this.mat4[0]),g=this.mat4[1],S=this.mat4[2],P=this.mat4[3],E=this.mat4[4],T=this.mat4[5],O=this.mat4[6],R=this.mat4[7],k=this.mat4[8],D=this.mat4[9],L=this.mat4[10],U=this.mat4[11],F=Math.sin(V),V=Math.cos(V),X=1-V,H=W*W*X+V,G=B*W*X+u*F,K=u*W*X-B*F,Z=W*B*X-u*F,oe=B*B*X+V,x=u*B*X+W*F,I=W*u*X+B*F,B=B*u*X-W*F,W=u*u*X+V;return this.mat4[0]=p*H+E*G+k*K,this.mat4[1]=g*H+T*G+D*K,this.mat4[2]=S*H+O*G+L*K,this.mat4[3]=P*H+R*G+U*K,this.mat4[4]=p*Z+E*oe+k*x,this.mat4[5]=g*Z+T*oe+D*x,this.mat4[6]=S*Z+O*oe+L*x,this.mat4[7]=P*Z+R*oe+U*x,this.mat4[8]=p*I+E*B+k*W,this.mat4[9]=g*I+T*B+D*W,this.mat4[10]=S*I+O*B+L*W,this.mat4[11]=P*I+R*B+U*W,this}},{key:"translate",value:function(u){var c=u[0],r=u[1],u=u[2]||0;this.mat4[12]+=this.mat4[0]*c+this.mat4[4]*r+this.mat4[8]*u,this.mat4[13]+=this.mat4[1]*c+this.mat4[5]*r+this.mat4[9]*u,this.mat4[14]+=this.mat4[2]*c+this.mat4[6]*r+this.mat4[10]*u,this.mat4[15]+=this.mat4[3]*c+this.mat4[7]*r+this.mat4[11]*u}},{key:"rotateX",value:function(a){this.rotate(a,1,0,0)}},{key:"rotateY",value:function(a){this.rotate(a,0,1,0)}},{key:"rotateZ",value:function(a){this.rotate(a,0,0,1)}},{key:"perspective",value:function(p,c,r,u){var p=1/Math.tan(p/2),g=1/(r-u);return this.mat4[0]=p/c,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=p,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(u+r)*g,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*u*r*g,this.mat4[15]=0,this}},{key:"ortho",value:function(a,c,r,u,p,g){var S=1/(a-c),P=1/(r-u),E=1/(p-g);return this.mat4[0]=-2*S,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*P,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*E,this.mat4[11]=0,this.mat4[12]=(a+c)*S,this.mat4[13]=(u+r)*P,this.mat4[14]=(g+p)*E,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(a,c,r,u){var p=new Array(4),g=this.mat4;return p[0]=g[0]*a+g[4]*c+g[8]*r+g[12]*u,p[1]=g[1]*a+g[5]*c+g[9]*r+g[13]*u,p[2]=g[2]*a+g[6]*c+g[10]*r+g[14]*u,p[3]=g[3]*a+g[7]*c+g[11]*r+g[15]*u,p}},{key:"multiplyPoint",value:function(r){var u=r.x,c=r.y,r=r.z,u=this.multiplyVec4(u,c,r,1);return new h.default.Vector(u[0],u[1],u[2])}},{key:"multiplyAndNormalizePoint",value:function(r){var u=r.x,c=r.y,r=r.z,u=this.multiplyVec4(u,c,r,1);return u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],new h.default.Vector(u[0],u[1],u[2])}},{key:"multiplyDirection",value:function(r){var u=r.x,c=r.y,r=r.z,u=this.multiplyVec4(u,c,r,0);return new h.default.Vector(u[0],u[1],u[2])}},{key:"mult3x3",value:function(r){var c;if(r===this||r===this.mat3)c=this.copy().mat3;else if(r instanceof h.default.Matrix)c=r.mat3;else if(d(r))c=r;else{if(arguments.length!==9)return;c=arguments}var r=this.mat3[0],u=this.mat3[1],p=this.mat3[2];return this.mat3[0]=r*c[0]+u*c[3]+p*c[6],this.mat3[1]=r*c[1]+u*c[4]+p*c[7],this.mat3[2]=r*c[2]+u*c[5]+p*c[8],r=this.mat3[3],u=this.mat3[4],p=this.mat3[5],this.mat3[3]=r*c[0]+u*c[3]+p*c[6],this.mat3[4]=r*c[1]+u*c[4]+p*c[7],this.mat3[5]=r*c[2]+u*c[5]+p*c[8],r=this.mat3[6],u=this.mat3[7],p=this.mat3[8],this.mat3[6]=r*c[0]+u*c[3]+p*c[6],this.mat3[7]=r*c[1]+u*c[4]+p*c[7],this.mat3[8]=r*c[2]+u*c[5]+p*c[8],this}},{key:"column",value:function(a){return new h.default.Vector(this.mat3[3*a],this.mat3[3*a+1],this.mat3[3*a+2])}},{key:"row",value:function(a){return new h.default.Vector(this.mat3[a],this.mat3[a+3],this.mat3[a+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(a,c){return(c=c===void 0?a.copy():c).x=this.row(0).dot(a),c.y=this.row(1).dot(a),c.z=this.row(2).dot(a),c}},{key:"createSubMatrix3x3",value:function(){var a=new h.default.Matrix("mat3");return a.mat3[0]=this.mat4[0],a.mat3[1]=this.mat4[1],a.mat3[2]=this.mat4[2],a.mat3[3]=this.mat4[4],a.mat3[4]=this.mat4[5],a.mat3[5]=this.mat4[6],a.mat3[6]=this.mat4[8],a.mat3[7]=this.mat4[9],a.mat3[8]=this.mat4[10],a}}])&&y(n.prototype,i),s&&y(n,s),m}(),h.default.Matrix);j.default=v},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],334:[function(t,M,j){t("core-js/modules/es.array.map"),t("core-js/modules/es.array.map"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function h(y,l){for(var d=0;d<l.length;d++){var v=l[d];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,v.key,v)}}t.default.RenderBuffer=function(){function y(v,m,n,i,s,a){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");this.size=v,this.src=m,this.dst=n,this.attr=i,this._renderer=s,this.map=a}var l,d;return l=y,(d=[{key:"_prepareBuffer",value:function(v,m){var n,i,s,r=m.attributes,a=this._renderer.GL,c=v.model||v,r=r[this.attr];r&&(n=v[this.dst],0<(i=c[this.src]).length?((s=!n)&&(v[this.dst]=n=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,n),!s&&c.dirtyFlags[this.src]===!1||(s=(v=this.map)?v(i):i,this._renderer._bindBuffer(n,a.ARRAY_BUFFER,s),c.dirtyFlags[this.src]=!1),m.enableAttrib(r,this.size)):(v=r.location)!==-1&&this._renderer.registerEnabled.has(v)&&(a.disableVertexAttribArray(v),this._renderer.registerEnabled.delete(v)))}}])&&h(l.prototype,d),y}(),t=t.default.RenderBuffer,j.default=t},{"../core/main":280,"core-js/modules/es.array.map":167}],335:[function(t,M,j){function h(s){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(s)}function y(s){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(a){return h(a)}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":h(a)})(s)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(i=t("../core/main"))&&i.__esModule?i:{default:i},d=function(s){if(s&&s.__esModule)return s;if(s===null||y(s)!=="object"&&typeof s!="function")return{default:s};var a=v();if(a&&a.has(s))return a.get(s);var c,r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var p;Object.prototype.hasOwnProperty.call(s,c)&&((p=u?Object.getOwnPropertyDescriptor(s,c):null)&&(p.get||p.set)?Object.defineProperty(r,c,p):r[c]=s[c])}return r.default=s,a&&a.set(s,r),r}(t("../core/constants"));function v(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,v=function(){return s},s)}function m(s){return function(a){if(Array.isArray(a)){for(var c=0,r=new Array(a.length);c<a.length;c++)r[c]=a[c];return r}}(s)||function(a){if(Symbol.iterator in Object(a)||Object.prototype.toString.call(a)==="[object Arguments]")return Array.from(a)}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("./p5.RenderBuffer"),l.default.RendererGL.prototype.beginShape=function(s){return this.immediateMode.shapeMode=s!==void 0?s:d.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var n={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},i=(l.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==d.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},l.default.RendererGL.prototype.vertex=function(s,a){if(this.immediateMode.shapeMode===d.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var c in n){var r=n[c],c=this.immediateMode.geometry[c];c.push.apply(c,m(c.slice(c.length-3*r,c.length-2*r)).concat(m(c.slice(c.length-r,c.length))))}var u,p,g=u=p=0,S=(arguments.length===3?g=arguments[2]:arguments.length===4?(u=arguments[2],p=arguments[3]):arguments.length===5&&(g=arguments[2],u=arguments[3],p=arguments[4]),new l.default.Vector(s,a,g)),S=(this.immediateMode.geometry.vertices.push(S),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),S=(this.immediateMode.geometry.vertexColors.push(S[0],S[1],S[2],S[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(S[0],S[1],S[2],S[3]),this.textureMode!==d.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(u/=this._tex.width,p/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(u,p),this.immediateMode._bezierVertex[0]=s,this.immediateMode._bezierVertex[1]=a,this.immediateMode._bezierVertex[2]=g,this.immediateMode._quadraticVertex[0]=s,this.immediateMode._quadraticVertex[1]=a,this.immediateMode._quadraticVertex[2]=g,this},l.default.RendererGL.prototype.normal=function(s,a,c){return s instanceof l.default.Vector?this._currentNormal=s:this._currentNormal=new l.default.Vector(s,a,c),this},l.default.RendererGL.prototype.endShape=function(s,a,c,r,u,p){var g=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===d.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===d.TESS&&(this.immediateMode.shapeMode,d.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),this.isProcessingVertices=!1,this.immediateMode.shapeMode!==d.LINE_STRIP&&this.immediateMode.shapeMode!==d.LINES||(this.immediateMode.shapeMode=d.TRIANGLE_FAN),this.immediateMode.shapeMode===d.QUADS?this.immediateMode.shapeMode=d.TRIANGLES:this.immediateMode.shapeMode===d.QUAD_STRIP&&(this.immediateMode.shapeMode=d.TRIANGLE_STRIP),this._doFill&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(g),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},l.default.RendererGL.prototype._processVertices=function(s){var a;this.immediateMode.geometry.vertices.length!==0&&(a=this._doStroke,s=s===d.CLOSE,a&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,s),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),a=this.immediateMode.shapeMode===d.TESS,s=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||a||s)&&this.immediateMode.shapeMode!==d.LINES&&this._tesselateShape())},l.default.RendererGL.prototype._calculateEdges=function(s,a,c){var r=[],u=0,p=this.immediateMode.contourIndices.slice(),g=0;switch(s){case d.TRIANGLE_STRIP:for(u=0;u<a.length-2;u++)r.push([u,u+1]),r.push([u,u+2]);r.push([u,u+1]);break;case d.TRIANGLE_FAN:for(u=1;u<a.length-1;u++)r.push([0,u]),r.push([u,u+1]);r.push([0,a.length-1]);break;case d.TRIANGLES:for(u=0;u<a.length-2;u+=3)r.push([u,u+1]),r.push([u+1,u+2]),r.push([u+2,u]);break;case d.LINES:for(u=0;u<a.length-1;u+=2)r.push([u,u+1]);break;case d.QUADS:for(u=0;u<a.length-5;u+=6)r.push([u,u+1]),r.push([u+1,u+2]),r.push([u+3,u+5]),r.push([u+4,u+5]);break;case d.QUAD_STRIP:for(u=0;u<a.length-2;u+=2)r.push([u,u+1]),r.push([u,u+2]),r.push([u+1,u+3]);r.push([u,u+1]);break;default:for(u=0;u<a.length;u++)u+1<a.length&&u+1!==p[0]?r.push([u,u+1]):((c||g)&&r.push([u,g]),0<p.length&&(g=p.shift()))}return s!==d.TESS&&c&&r.push([a.length-1,0]),r},l.default.RendererGL.prototype._tesselateShape=function(){for(var s=this,a=(this.immediateMode.shapeMode=d.TRIANGLES,[[]]),c=0;c<this.immediateMode.geometry.vertices.length;c++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===c&&(this.immediateMode.contourIndices.shift(),a.push([])),a[a.length-1].push(this.immediateMode.geometry.vertices[c].x,this.immediateMode.geometry.vertices[c].y,this.immediateMode.geometry.vertices[c].z,this.immediateMode.geometry.uvs[2*c],this.immediateMode.geometry.uvs[2*c+1],this.immediateMode.geometry.vertexColors[4*c],this.immediateMode.geometry.vertexColors[4*c+1],this.immediateMode.geometry.vertexColors[4*c+2],this.immediateMode.geometry.vertexColors[4*c+3],this.immediateMode.geometry.vertexNormals[c].x,this.immediateMode.geometry.vertexNormals[c].y,this.immediateMode.geometry.vertexNormals[c].z);for(var r,u=this._triangulate(a),p=this.immediateMode.geometry.vertices,g=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),S=0,P=u.length;S<P;S+=l.default.RendererGL.prototype.tessyVertexSize)g.push.apply(g,m(u.slice(S+5,S+9))),this.normal.apply(this,m(u.slice(S+9,S+12))),this.vertex.apply(this,m(u.slice(S,S+5)));this.geometryBuilder&&(r=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(E){return E.map(function(T){if(!r.has(T)){var O=p[T],R=s.immediateMode.geometry.vertices.findIndex(function(X){return O.x===X.x&&O.y===X.y&&O.z===X.z});if(R===-1){for(var k=1/0,D=0,L=0;L<s.immediateMode.geometry.vertices.length;L++){var F=s.immediateMode.geometry.vertices[L],V=O.x-F.x,U=O.y-F.y,F=O.z-F.z,V=V*V+U*U+F*F;V<k&&(k=V,D=L)}R=D}r.set(T,R)}return r.get(T)})})),this.immediateMode.geometry.vertexColors=g},l.default.RendererGL.prototype._drawImmediateFill=function(){var s,a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,c=this.GL,r=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,s=this._getImmediateFillShader(),this._setFillUniforms(s),!0),u=!1,p=void 0;try{for(var g,S=this.immediateMode.buffers.fill[Symbol.iterator]();!(r=(g=S.next()).done);r=!0)g.value._prepareBuffer(this.immediateMode.geometry,s)}catch(P){u=!0,p=P}finally{try{r||S.return==null||S.return()}finally{if(u)throw p}}if(s.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),a===1)c.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{c.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,a)}catch{console.log("🌸 p5.js says: Instancing is only supported in WebGL2 mode")}s.unbindShader()},l.default.RendererGL.prototype._drawImmediateStroke=function(){var s=this.GL,a=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),c=(this._setStrokeUniforms(a),!0),r=!1,u=void 0;try{for(var p,g=this.immediateMode.buffers.stroke[Symbol.iterator]();!(c=(p=g.next()).done);c=!0)p.value._prepareBuffer(this.immediateMode.geometry,a)}catch(S){r=!0,u=S}finally{try{c||g.return==null||g.return()}finally{if(r)throw u}}a.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),s.drawArrays(s.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),a.unbindShader()},l.default.RendererGL);j.default=i},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.find-index":157,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.map":174,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],336:[function(t,M,j){function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(n)}function y(n){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(i){return h(i)}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":h(i)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var l=(m=t("../core/main"))&&m.__esModule?m:{default:m},d=(t("./p5.RendererGL"),t("./p5.RenderBuffer"),function(n){if(n&&n.__esModule)return n;if(n===null||y(n)!=="object"&&typeof n!="function")return{default:n};var i=v();if(i&&i.has(n))return i.get(n);var s,a={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in n){var r;Object.prototype.hasOwnProperty.call(n,s)&&((r=c?Object.getOwnPropertyDescriptor(n,s):null)&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=n[s])}return a.default=n,i&&i.set(n,a),a}(t("../core/constants")));function v(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,v=function(){return n},n)}l.default.RendererGL.prototype.freeGeometry=function(n){n.gid?this._freeBuffers(n.gid):console.warn("The model you passed to freeGeometry does not have an id!")},l.default.RendererGL.prototype._initBufferDefaults=function(n){var i;return this._freeBuffers(n),1e3<Object.keys(this.retainedMode.geometry).length&&(i=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(i)),this.retainedMode.geometry[n]={}},l.default.RendererGL.prototype._freeBuffers=function(n){var i,s=this.retainedMode.geometry[n];function a(c){var r=!0,u=!1,p=void 0;try{for(var g,S=c[Symbol.iterator]();!(r=(g=S.next()).done);r=!0){var P=g.value;s[P.dst]&&(i.deleteBuffer(s[P.dst]),s[P.dst]=null)}}catch(E){u=!0,p=E}finally{try{r||S.return==null||S.return()}finally{if(u)throw p}}}s&&(delete this.retainedMode.geometry[n],i=this.GL,s.indexBuffer&&i.deleteBuffer(s.indexBuffer),a(this.retainedMode.buffers.stroke),a(this.retainedMode.buffers.fill))},l.default.RendererGL.prototype.createBuffers=function(u,i){var s,a,c,r=this.GL,u=this._initBufferDefaults(u),p=(u.model=i,u.indexBuffer);return i.faces.length?(p=p||(u.indexBuffer=r.createBuffer()),c=(a=(s=l.default.RendererGL.prototype._flatten(i.faces)).some(function(g){return 65535<g}))?Uint32Array:Uint16Array,this._bindBuffer(p,r.ELEMENT_ARRAY_BUFFER,s,c),u.indexBufferType=a?r.UNSIGNED_INT:r.UNSIGNED_SHORT,u.vertexCount=3*i.faces.length):(p&&(r.deleteBuffer(p),u.indexBuffer=null),u.vertexCount=i.vertices?i.vertices.length:0),u.lineVertexCount=i.lineVertices?i.lineVertices.length/3:0,u},l.default.RendererGL.prototype.drawBuffers=function(n){var i=this.GL,s=this.retainedMode.geometry[n];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[n].vertexCount){this._useVertexColor=0<s.model.vertexColors.length;var a=this._getRetainedFillShader(),c=(this._setFillUniforms(a),!0),r=!1,u=void 0;try{for(var p,g=this.retainedMode.buffers.fill[Symbol.iterator]();!(c=(p=g.next()).done);c=!0)p.value._prepareBuffer(s,a)}catch(O){r=!0,u=O}finally{try{c||g.return==null||g.return()}finally{if(r)throw u}}a.disableRemainingAttributes(),s.indexBuffer&&this._bindBuffer(s.indexBuffer,i.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,s.model.hasFillTransparency()),this._drawElements(i.TRIANGLES,n),a.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<s.lineVertexCount){this._useLineColor=0<s.model.vertexStrokeColors.length;var S=this._getRetainedStrokeShader(),P=(this._setStrokeUniforms(S),!0),r=!1,u=void 0;try{for(var E,T=this.retainedMode.buffers.stroke[Symbol.iterator]();!(P=(E=T.next()).done);P=!0)E.value._prepareBuffer(s,S)}catch(k){r=!0,u=k}finally{try{P||T.return==null||T.return()}finally{if(r)throw u}}S.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,s.model.hasStrokeTransparency()),this._drawArrays(i.TRIANGLES,n),S.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(s),this},l.default.RendererGL.prototype.drawBuffersScaled=function(n,i,s,a){var c=this.uMVMatrix.copy();try{this.uMVMatrix.scale(i,s,a),this.drawBuffers(n)}finally{this.uMVMatrix=c}},l.default.RendererGL.prototype._drawArrays=function(n,i){return this.GL.drawArrays(n,0,this.retainedMode.geometry[i].lineVertexCount),this},l.default.RendererGL.prototype._drawElements=function(n,s){var s=this.retainedMode.geometry[s],a=this.GL;if(s.indexBuffer){if(this._pInst.webglVersion!==d.WEBGL2&&s.indexBufferType===a.UNSIGNED_INT&&!a.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");a.drawElements(a.TRIANGLES,s.vertexCount,s.indexBufferType,0)}else a.drawArrays(n||a.TRIANGLES,0,s.vertexCount)},l.default.RendererGL.prototype._drawPoints=function(n,i){var s=this.GL,a=this._getImmediatePointShader();this._setPointUniforms(a),this._bindBuffer(i,s.ARRAY_BUFFER,this._vToNArray(n),Float32Array,s.STATIC_DRAW),a.enableAttrib(a.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),s.drawArrays(s.Points,0,n.length),a.unbindShader()};var m=l.default.RendererGL;j.default=m},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"./p5.RendererGL":337,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],337:[function(L,M,j){function h(G){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K})(G)}function y(G){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(K){return h(K)}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":h(K)})(G)}L("core-js/modules/es.symbol"),L("core-js/modules/es.symbol.description"),L("core-js/modules/es.symbol.iterator"),L("core-js/modules/es.array.concat"),L("core-js/modules/es.array.copy-within"),L("core-js/modules/es.array.every"),L("core-js/modules/es.array.fill"),L("core-js/modules/es.array.flat"),L("core-js/modules/es.array.flat-map"),L("core-js/modules/es.array.from"),L("core-js/modules/es.array.includes"),L("core-js/modules/es.array.iterator"),L("core-js/modules/es.array.map"),L("core-js/modules/es.array.slice"),L("core-js/modules/es.array.some"),L("core-js/modules/es.array.unscopables.flat"),L("core-js/modules/es.array.unscopables.flat-map"),L("core-js/modules/es.map"),L("core-js/modules/es.object.assign"),L("core-js/modules/es.object.get-own-property-descriptor"),L("core-js/modules/es.object.get-prototype-of"),L("core-js/modules/es.object.to-string"),L("core-js/modules/es.reflect.construct"),L("core-js/modules/es.reflect.get"),L("core-js/modules/es.regexp.to-string"),L("core-js/modules/es.set"),L("core-js/modules/es.string.includes"),L("core-js/modules/es.string.iterator"),L("core-js/modules/es.typed-array.float32-array"),L("core-js/modules/es.typed-array.float64-array"),L("core-js/modules/es.typed-array.int16-array"),L("core-js/modules/es.typed-array.uint8-array"),L("core-js/modules/es.typed-array.uint16-array"),L("core-js/modules/es.typed-array.uint32-array"),L("core-js/modules/es.typed-array.copy-within"),L("core-js/modules/es.typed-array.every"),L("core-js/modules/es.typed-array.fill"),L("core-js/modules/es.typed-array.filter"),L("core-js/modules/es.typed-array.find"),L("core-js/modules/es.typed-array.find-index"),L("core-js/modules/es.typed-array.for-each"),L("core-js/modules/es.typed-array.includes"),L("core-js/modules/es.typed-array.index-of"),L("core-js/modules/es.typed-array.iterator"),L("core-js/modules/es.typed-array.join"),L("core-js/modules/es.typed-array.last-index-of"),L("core-js/modules/es.typed-array.map"),L("core-js/modules/es.typed-array.reduce"),L("core-js/modules/es.typed-array.reduce-right"),L("core-js/modules/es.typed-array.reverse"),L("core-js/modules/es.typed-array.set"),L("core-js/modules/es.typed-array.slice"),L("core-js/modules/es.typed-array.some"),L("core-js/modules/es.typed-array.sort"),L("core-js/modules/es.typed-array.subarray"),L("core-js/modules/es.typed-array.to-locale-string"),L("core-js/modules/es.typed-array.to-string"),L("core-js/modules/es.weak-map"),L("core-js/modules/web.dom-collections.iterator"),L("core-js/modules/es.symbol"),L("core-js/modules/es.symbol.description"),L("core-js/modules/es.symbol.iterator"),L("core-js/modules/es.array.concat"),L("core-js/modules/es.array.copy-within"),L("core-js/modules/es.array.every"),L("core-js/modules/es.array.fill"),L("core-js/modules/es.array.flat"),L("core-js/modules/es.array.flat-map"),L("core-js/modules/es.array.from"),L("core-js/modules/es.array.includes"),L("core-js/modules/es.array.iterator"),L("core-js/modules/es.array.map"),L("core-js/modules/es.array.slice"),L("core-js/modules/es.array.some"),L("core-js/modules/es.array.unscopables.flat"),L("core-js/modules/es.array.unscopables.flat-map"),L("core-js/modules/es.map"),L("core-js/modules/es.object.assign"),L("core-js/modules/es.object.to-string"),L("core-js/modules/es.set"),L("core-js/modules/es.string.includes"),L("core-js/modules/es.string.iterator"),L("core-js/modules/es.typed-array.float32-array"),L("core-js/modules/es.typed-array.float64-array"),L("core-js/modules/es.typed-array.int16-array"),L("core-js/modules/es.typed-array.uint8-array"),L("core-js/modules/es.typed-array.uint16-array"),L("core-js/modules/es.typed-array.uint32-array"),L("core-js/modules/es.typed-array.copy-within"),L("core-js/modules/es.typed-array.every"),L("core-js/modules/es.typed-array.fill"),L("core-js/modules/es.typed-array.filter"),L("core-js/modules/es.typed-array.find"),L("core-js/modules/es.typed-array.find-index"),L("core-js/modules/es.typed-array.for-each"),L("core-js/modules/es.typed-array.includes"),L("core-js/modules/es.typed-array.index-of"),L("core-js/modules/es.typed-array.iterator"),L("core-js/modules/es.typed-array.join"),L("core-js/modules/es.typed-array.last-index-of"),L("core-js/modules/es.typed-array.map"),L("core-js/modules/es.typed-array.reduce"),L("core-js/modules/es.typed-array.reduce-right"),L("core-js/modules/es.typed-array.reverse"),L("core-js/modules/es.typed-array.set"),L("core-js/modules/es.typed-array.slice"),L("core-js/modules/es.typed-array.some"),L("core-js/modules/es.typed-array.sort"),L("core-js/modules/es.typed-array.subarray"),L("core-js/modules/es.typed-array.to-locale-string"),L("core-js/modules/es.typed-array.to-string"),L("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.readPixelsWebGL=X,j.readPixelWebGL=H,j.default=void 0;var l=s(L("../core/main")),d=function(G){if(G&&G.__esModule)return G;if(G===null||y(G)!=="object"&&typeof G!="function")return{default:G};var K=i();if(K&&K.has(G))return K.get(G);var Z,oe={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Z in G){var I;Object.prototype.hasOwnProperty.call(G,Z)&&((I=x?Object.getOwnPropertyDescriptor(G,Z):null)&&(I.get||I.set)?Object.defineProperty(oe,Z,I):oe[Z]=G[Z])}return oe.default=G,K&&K.set(G,oe),oe}(L("../core/constants")),v=s(L("./GeometryBuilder")),m=s(L("libtess")),n=(L("./p5.Shader"),L("./p5.Camera"),L("../core/p5.Renderer"),L("./p5.Matrix"),L("./p5.Framebuffer"),L("path"),L("./p5.Texture"));function i(){var G;return typeof WeakMap!="function"?null:(G=new WeakMap,i=function(){return G},G)}function s(G){return G&&G.__esModule?G:{default:G}}function a(G){return function(K){if(Array.isArray(K)){for(var Z=0,oe=new Array(K.length);Z<K.length;Z++)oe[Z]=K[Z];return oe}}(G)||function(K){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]")return Array.from(K)}(G)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(G,K){for(var Z=0;Z<K.length;Z++){var oe=K[Z];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(G,oe.key,oe)}}function r(G,K,Z){return(r=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(B,x,I){var B=function(W,$){for(;!Object.prototype.hasOwnProperty.call(W,$)&&(W=S(W))!==null;);return W}(B,x);if(B)return(B=Object.getOwnPropertyDescriptor(B,x)).get?B.get.call(I):B.value})(G,K,Z||G)}function u(G,K){return(u=Object.setPrototypeOf||function(Z,oe){return Z.__proto__=oe,Z})(G,K)}function p(G){return function(){var K,Z,oe=S(G);return K=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(K=S(this).constructor,Reflect.construct(oe,arguments,K)):oe.apply(this,arguments),oe=this,!(Z=K)||y(Z)!=="object"&&typeof Z!="function"?g(oe):Z}}function g(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function S(G){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(K){return K.__proto__||Object.getPrototypeOf(K)})(G)}function P(G,K,Z){K in G?Object.defineProperty(G,K,{value:Z,enumerable:!0,configurable:!0,writable:!0}):G[K]=Z}function E(G,K){D+="#define STROKE_CAP_".concat(G," ").concat(K,`
`),R[d[G]]=K}function T(G,K){D+="#define STROKE_JOIN_".concat(G," ").concat(K,`
`),k[d[G]]=K}var O,R={},k={},D="",L=(E("ROUND",0),E("PROJECT",1),E("SQUARE",2),T("ROUND",0),T("MITER",1),T("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float metallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;
// roughness for use in calculateImageSpecular
uniform float levelOfDetail;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, uShininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse( vec3 vNormal, vec3 vViewPosition ){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular( vec3 vNormal, vec3 vViewPosition ){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, levelOfDetail);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition);
    totalSpecular += calculateImageSpecular(normal, modelPosition);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),U={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  OUT_COLOR = vec4(vVertexNormal, 1.0);
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:L+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:L+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  OUT_COLOR = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:D+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset;

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:D+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},F=U.sphereMappingFrag;for(O in U)U[O]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+U[O];P(L={},d.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),P(L,d.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),P(L,d.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),P(L,d.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),P(L,d.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),P(L,d.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),P(L,d.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),P(L,d.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var V=L;function X(G,K,de,oe,x,I,B,W,$,te){var ie=K.getParameter(K.FRAMEBUFFER_BINDING),de=(K.bindFramebuffer(K.FRAMEBUFFER,de),W===K.RGBA?4:3),se=I*B*de,he=$===K.UNSIGNED_BYTE?Uint8Array:Float32Array;if(G instanceof he&&G.length===se||(G=new he(se)),K.readPixels(oe,te?te-x-B:x,I,B,W,$,G),K.bindFramebuffer(K.FRAMEBUFFER,ie),te)for(var ce=Math.floor(B/2),ee=new he(I*de),ue=0;ue<ce;ue++){var me=ue*I*4,je=(B-ue-1)*I*4;ee.set(G.subarray(me,me+4*I)),G.copyWithin(me,je,je+4*I),G.set(ee,je)}return G}function H(G,$,Z,oe,x,I,B){var W=G.getParameter(G.FRAMEBUFFER_BINDING),$=(G.bindFramebuffer(G.FRAMEBUFFER,$),x===G.RGBA?4:3),$=new(I===G.UNSIGNED_BYTE?Uint8Array:Float32Array)($);return G.readPixels(Z,B?B-oe-1:oe,1,1,x,I,$),G.bindFramebuffer(G.FRAMEBUFFER,W),Array.from($)}l.default.prototype.setAttributes=function(G,K){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var Z=!0;if(K!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[G]!==K&&(this._glAttributes[G]=K,Z=!1)):G instanceof Object&&this._glAttributes!==G&&(this._glAttributes=G,Z=!1),this._renderer.isP3D&&!Z){if(!this._setupDone){for(var oe in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(oe))return void l.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},l.default.RendererGL=function(G){var K=oe;if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(G&&G.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),G&&u(K,G);var Z=p(oe);function oe(x,I,B,W){if(this instanceof oe)return(x=Z.call(this,x,I,B))._setAttributeDefaults(I),x._initContext(),x.isP3D=!0,x.geometryBuilder=void 0,x.GL=x.drawingContext,x._pInst._setProperty("drawingContext",x.drawingContext),x._isErasing=!1,x._clipDepths=[],x._isClipApplied=!1,x._stencilTestOn=!1,x._enableLighting=!1,x.ambientLightColors=[],x.mixedAmbientLight=[],x.mixedSpecularColor=[],x.specularColors=[1,1,1],x.directionalLightDirections=[],x.directionalLightDiffuseColors=[],x.directionalLightSpecularColors=[],x.pointLightPositions=[],x.pointLightDiffuseColors=[],x.pointLightSpecularColors=[],x.spotLightPositions=[],x.spotLightDirections=[],x.spotLightDiffuseColors=[],x.spotLightSpecularColors=[],x.spotLightAngle=[],x.spotLightConc=[],x.activeImageLight=null,x.diffusedTextures=new Map,x.specularTextures=new Map,x.drawMode=d.FILL,x.curFillColor=x._cachedFillStyle=[1,1,1,1],x.curAmbientColor=x._cachedFillStyle=[1,1,1,1],x.curSpecularColor=x._cachedFillStyle=[0,0,0,0],x.curEmissiveColor=x._cachedFillStyle=[0,0,0,0],x.curStrokeColor=x._cachedStrokeStyle=[0,0,0,1],x.curBlendMode=d.BLEND,x.preEraseBlend=void 0,x._cachedBlendMode=void 0,x.webglVersion===d.WEBGL2?x.blendExt=x.GL:x.blendExt=x.GL.getExtension("EXT_blend_minmax"),x._isBlending=!1,x._hasSetAmbient=!1,x._useSpecularMaterial=!1,x._useEmissiveMaterial=!1,x._useNormalMaterial=!1,x._useShininess=1,x._useMetalness=0,x._useLineColor=!1,x._useVertexColor=!1,x.registerEnabled=new Set,x._tint=[255,255,255,255],x.constantAttenuation=1,x.linearAttenuation=0,x.quadraticAttenuation=0,x.uMVMatrix=new l.default.Matrix,x.uPMatrix=new l.default.Matrix,x.uNMatrix=new l.default.Matrix("mat3"),x.curMatrix=new l.default.Matrix("mat3"),x._currentNormal=new l.default.Vector(0,0,1),x._curCamera=new l.default.Camera(g(x)),x._curCamera._computeCameraDefaultSettings(),x._curCamera._setDefaultCamera(),x.filterCamera=new l.default.Camera(g(x)),x.filterCamera._computeCameraDefaultSettings(),x.filterCamera._setDefaultCamera(),x.prevTouches=[],x.zoomVelocity=0,x.rotateVelocity=new l.default.Vector(0,0),x.moveVelocity=new l.default.Vector(0,0),x.executeZoom=!1,x.executeRotateAndMove=!1,x.specularShader=void 0,x.sphereMapping=void 0,x.diffusedShader=void 0,x._defaultLightShader=void 0,x._defaultImmediateModeShader=void 0,x._defaultNormalShader=void 0,x._defaultColorShader=void 0,x._defaultPointShader=void 0,x.userFillShader=void 0,x.userStrokeShader=void 0,x.userPointShader=void 0,x.retainedMode={geometry:{},buffers:{stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",g(x)),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",g(x)),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",g(x)),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",g(x)),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",g(x))],fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",g(x),x._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",g(x),x._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",g(x)),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",g(x)),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",g(x),x._flatten)],text:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",g(x),x._vToNArray),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",g(x),x._flatten)]}},x.immediateMode={geometry:new l.default.Geometry,shapeMode:d.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",g(x),x._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",g(x),x._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",g(x)),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",g(x)),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",g(x),x._flatten)],stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",g(x)),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",g(x)),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",g(x)),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",g(x)),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",g(x))],point:x.GL.createBuffer()}},x.pointSize=5,x.curStrokeWeight=1,x.curStrokeCap=d.ROUND,x.curStrokeJoin=d.ROUND,x.textures=new Map,x.framebuffers=new Set,x.activeFramebuffers=[],x.filterShader=void 0,x.filterLayer=void 0,x.filterLayerTemp=void 0,x.defaultFilterShaders={},x.textureMode=d.IMAGE,x.textureWrapX=d.CLAMP,x.textureWrapY=d.CLAMP,x._tex=null,x._curveTightness=6,x._lookUpTableBezier=[],x._lookUpTableQuadratic=[],x._lutBezierDetail=0,x._lutQuadraticDetail=0,x.isProcessingVertices=!1,x._tessy=x._initTessy(),x.fontInfos={},x._curShader=void 0,x;throw new TypeError("Cannot call a class as a function")}return K=oe,(G=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new v.default(this)}},{key:"endGeometry",value:function(){var x;if(this.geometryBuilder)return x=this.geometryBuilder.finish(),this.geometryBuilder=void 0,x;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(x){return this.beginGeometry(),x(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(x){var I={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};x._glAttributes===null?x._glAttributes=I:x._glAttributes=Object.assign(I,x._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?d.WEBGL2:d.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var x=this.drawingContext;x.enable(x.DEPTH_TEST),x.depthFunc(x.LEQUAL),x.viewport(0,0,x.drawingBufferWidth,x.drawingBufferHeight),x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_resetContext",value:function(x,I){var B,W=this.width,$=this.height,ie=this.canvas.id,te=this._pInst instanceof l.default.Graphics,ie=(te?((B=this._pInst).canvas.parentNode.removeChild(B.canvas),B.canvas=document.createElement("canvas"),(B._pInst._userNode||document.body).appendChild(B.canvas),l.default.Element.call(B,B.canvas,B._pInst),B.width=W,B.height=$):((B=this.canvas)&&B.parentNode.removeChild(B),(B=document.createElement("canvas")).id=ie,(this._pInst._userNode||document.body).appendChild(B),this._pInst.canvas=B,this.canvas=B),new l.default.RendererGL(this._pInst.canvas,this._pInst,!te));this._pInst._setProperty("_renderer",ie),ie.resize(W,$),ie._applyDefaults(),te||this._pInst._elements.push(ie),typeof I=="function"&&setTimeout(function(){I.apply(window._renderer,x)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var W=(W=this._pInst).color.apply(W,arguments),x=W.levels[0]/255,I=W.levels[1]/255,B=W.levels[2]/255,W=W.levels[3]/255;this.clear(x,I,B,W)}},{key:"fill",value:function(x,I,B,W){var $=l.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=$._array,this.drawMode=d.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(x,I,B,W){var $=l.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=$._array}},{key:"strokeCap",value:function(x){this.curStrokeCap=x}},{key:"strokeJoin",value:function(x){this.curStrokeJoin=x}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(x,I){x.width===I.width&&x.height===I.height||x.resize(I.width,I.height),x.pixelDensity()!==I.pixelDensity()&&x.pixelDensity(I.pixelDensity())}},{key:"filter",value:function(){var x,I,B=this,W=this.getFilterLayer(),$=void 0,te=void 0,ie=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(te=arguments.length<=0?void 0:arguments[0],P(x={},d.BLUR,3),P(x,d.POSTERIZE,4),P(x,d.THRESHOLD,.5),$=te in(x=x)&&(arguments.length<=1?void 0:arguments[1])===void 0?x[te]:arguments.length<=1?void 0:arguments[1],te in this.defaultFilterShaders||(this.defaultFilterShaders[te]=new l.default.Shader(W._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,V[te])),this.filterShader=this.defaultFilterShaders[te]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),de=(this.matchSize(W,ie),W.draw(function(){return B._pInst.clear()}),[1/(ie.width*ie.pixelDensity()),1/(ie.height*ie.pixelDensity())]);te===d.BLUR?(I=this.getFilterLayerTemp(),this.matchSize(I,ie),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(d.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",de),this.filterShader.setUniform("canvasSize",[ie.width,ie.height]),this.filterShader.setUniform("radius",Math.max(1,$)),I.draw(function(){B.filterShader.setUniform("direction",[1,0]),B.filterShader.setUniform("tex0",ie),B._pInst.clear(),B._pInst.shader(B.filterShader),B._pInst.noLights(),B._pInst.plane(ie.width,ie.height)}),W.draw(function(){B.filterShader.setUniform("direction",[0,1]),B.filterShader.setUniform("tex0",I),B._pInst.clear(),B._pInst.shader(B.filterShader),B._pInst.noLights(),B._pInst.plane(ie.width,ie.height)}),this._pInst.pop()):W.draw(function(){B._pInst.noStroke(),B._pInst.blendMode(d.BLEND),B._pInst.shader(B.filterShader),B.filterShader.setUniform("tex0",ie),B.filterShader.setUniform("texelSize",de),B.filterShader.setUniform("canvasSize",[ie.width,ie.height]),B.filterShader.setUniform("filterParameter",$),B._pInst.noLights(),B._pInst.plane(ie.width,ie.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(d.CORNER),this._pInst.blendMode(d.BLEND),ie.filterCamera._resize(),this._pInst.setCamera(ie.filterCamera),this._pInst.resetMatrix(),this._pInst.image(W,-ie.width/2,-ie.height/2,ie.width,ie.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(x){return x?this._pInst.pixelDensity(x):this._pInst.pixelDensity()}},{key:"blendMode",value:function(x){x===d.DARKEST||x===d.LIGHTEST||x===d.ADD||x===d.BLEND||x===d.SUBTRACT||x===d.SCREEN||x===d.EXCLUSION||x===d.REPLACE||x===d.MULTIPLY||x===d.REMOVE?this.curBlendMode=x:x!==d.BURN&&x!==d.OVERLAY&&x!==d.HARD_LIGHT&&x!==d.SOFT_LIGHT&&x!==d.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(x,I){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(d.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,x/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,I/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},x=(r(S(oe.prototype),"beginClip",this).call(this,x),this.drawTarget()._isClipApplied=!0,this.GL);x.clearStencil(0),x.clear(x.STENCIL_BUFFER_BIT),x.enable(x.STENCIL_TEST),this._stencilTestOn=!0,x.stencilFunc(x.ALWAYS,1,255),x.stencilOp(x.KEEP,x.KEEP,x.REPLACE),x.disable(x.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var x=this.GL;x.stencilOp(x.KEEP,x.KEEP,x.KEEP),x.stencilFunc(this._clipInvert?x.EQUAL:x.NOTEQUAL,0,255),x.enable(x.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),r(S(oe.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(x){this.curStrokeWeight!==x&&(this.pointSize=x,this.curStrokeWeight=x)}},{key:"_getPixel",value:function(x,I){var B=this.GL;return H(B,null,x,I,B.RGBA,B.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var x,I,B=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(x=this._pInst._pixelDensity,I=this.GL,B._setProperty("pixels",X(B.pixels,I,null,0,0,this.width*x,this.height*x,I.RGBA,I.UNSIGNED_BYTE,this.height*x)))}},{key:"updatePixels",value:function(){var x=this._getTempFramebuffer();x.pixels=this._pixelsState.pixels,x.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(d.CENTER),this._pInst.image(x,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:d.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:d.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(x){return this.retainedMode.geometry[x]!==void 0}},{key:"viewport",value:function(x,I){this._viewport=[0,0,x,I],this.GL.viewport(0,0,x,I)}},{key:"resize",value:function($,W){l.default.Renderer.prototype.resize.call(this,$,W),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var $=this._pixelsState,B=($.pixels!==void 0&&$._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),W=!1,$=void 0;try{for(var te,ie=this.framebuffers[Symbol.iterator]();!(B=(te=ie.next()).done);B=!0)te.value._canvasSizeChanged()}catch(de){W=!0,$=de}finally{try{B||ie.return==null||ie.return()}finally{if(W)throw $}}}},{key:"clear",value:function(){var x=(arguments.length<=0?void 0:arguments[0])||0,I=(arguments.length<=1?void 0:arguments[1])||0,B=(arguments.length<=2?void 0:arguments[2])||0,W=(arguments.length<=3?void 0:arguments[3])||0,$=this.activeFramebuffer();$&&$.format===d.UNSIGNED_BYTE&&!$.antialias&&W===0&&(W=1e-10),this.GL.clearColor(x*W,I*W,B*W,W),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(x,I,B,W,$,te){arguments.length===16?l.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([x,I,0,0,B,W,0,0,0,0,1,0,$,te,0,1])}},{key:"translate",value:function(x,I,B){return x instanceof l.default.Vector&&(B=x.z,I=x.y,x=x.x),this.uMVMatrix.translate([x,I,B]),this}},{key:"scale",value:function(x,I,B){return this.uMVMatrix.scale(x,I,B),this}},{key:"rotate",value:function(x,I){return I===void 0?this.rotateZ(x):(l.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(x){return this.rotate(x,1,0,0),this}},{key:"rotateY",value:function(x){return this.rotate(x,0,1,0),this}},{key:"rotateZ",value:function(x){return this.rotate(x,0,0,1),this}},{key:"push",value:function(){var x=l.default.Renderer.prototype.push.apply(this),I=x.properties;return I.uMVMatrix=this.uMVMatrix.copy(),I.uPMatrix=this.uPMatrix.copy(),I._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),I.ambientLightColors=this.ambientLightColors.slice(),I.specularColors=this.specularColors.slice(),I.directionalLightDirections=this.directionalLightDirections.slice(),I.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),I.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),I.pointLightPositions=this.pointLightPositions.slice(),I.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),I.pointLightSpecularColors=this.pointLightSpecularColors.slice(),I.spotLightPositions=this.spotLightPositions.slice(),I.spotLightDirections=this.spotLightDirections.slice(),I.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),I.spotLightSpecularColors=this.spotLightSpecularColors.slice(),I.spotLightAngle=this.spotLightAngle.slice(),I.spotLightConc=this.spotLightConc.slice(),I.userFillShader=this.userFillShader,I.userStrokeShader=this.userStrokeShader,I.userPointShader=this.userPointShader,I.pointSize=this.pointSize,I.curStrokeWeight=this.curStrokeWeight,I.curStrokeColor=this.curStrokeColor,I.curFillColor=this.curFillColor,I.curAmbientColor=this.curAmbientColor,I.curSpecularColor=this.curSpecularColor,I.curEmissiveColor=this.curEmissiveColor,I._hasSetAmbient=this._hasSetAmbient,I._useSpecularMaterial=this._useSpecularMaterial,I._useEmissiveMaterial=this._useEmissiveMaterial,I._useShininess=this._useShininess,I._useMetalness=this._useMetalness,I.constantAttenuation=this.constantAttenuation,I.linearAttenuation=this.linearAttenuation,I.quadraticAttenuation=this.quadraticAttenuation,I._enableLighting=this._enableLighting,I._useNormalMaterial=this._useNormalMaterial,I._tex=this._tex,I.drawMode=this.drawMode,I._currentNormal=this._currentNormal,I.curBlendMode=this.curBlendMode,I.activeImageLight=this.activeImageLight,x}},{key:"pop",value:function(){var x;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var I=arguments.length,B=new Array(I),W=0;W<I;W++)B[W]=arguments[W];(x=r(S(oe.prototype),"pop",this)).call.apply(x,[this].concat(B)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var x=this.drawTarget();x._isClipApplied!==this._stencilTestOn&&(x._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var x=this.userStrokeShader;return x&&x.isStrokeShader()?x:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(x){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(F)),this.uNMatrix.inverseTranspose(this.uMVMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",x),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var x=this.userFillShader;if(this._useNormalMaterial&&(!x||!x.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!x||!x.isLightShader())return this._getLightShader()}else if(this._tex){if(!x||!x.isTextureShader())return this._getLightShader()}else if(!x)return this._getImmediateModeShader();return x}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var x=this.userFillShader;if(this._enableLighting){if(!x||!x.isLightShader())return this._getLightShader()}else if(this._tex){if(!x||!x.isTextureShader())return this._getLightShader()}else if(!x)return this._getColorShader();return x}},{key:"_getImmediatePointShader",value:function(){var x=this.userPointShader;return x&&x.isPointShader()?x:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+U.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+U.phongFrag):this._defaultLightShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+U.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+U.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+U.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+U.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+U.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+U.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+U.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+U.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+U.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+U.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+U.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+U.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===d.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+U.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+U.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(x,I){var B="";return this.webglVersion===d.WEBGL2&&(B+=`#version 300 es
#define WEBGL2
`),x==="vert"?B+=`#define VERTEX_SHADER
`:x==="frag"&&(B+=`#define FRAGMENT_SHADER
`),I&&(B+="precision ".concat(I,` float;
`)),B}},{key:"_getEmptyTexture",value:function(){var x;return this._emptyTexture||((x=new l.default.Image(1,1)).set(0,0,255),this._emptyTexture=new l.default.Texture(this,x)),this._emptyTexture}},{key:"getTexture",value:function(x){x instanceof l.default.Framebuffer&&(x=x.color);var I=this.textures.get(x);return I||(I=new l.default.Texture(this,x),this.textures.set(x,I),I)}},{key:"getDiffusedTexture",value:function(x){var I,B,W=this;return this.diffusedTextures.get(x)!=null?this.diffusedTextures.get(x):(I=Math.floor(x.height/x.width*200),B=this._pInst.createFramebuffer({width:200,height:I,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(U.imageLightVert,U.imageLightDiffusedFrag)),B.draw(function(){W._pInst.shader(W.diffusedShader),W.diffusedShader.setUniform("environmentMap",x),W._pInst.noStroke(),W._pInst.rectMode(d.CENTER),W._pInst.noLights(),W._pInst.rect(0,0,200,I)}),this.diffusedTextures.set(x,B),B)}},{key:"getSpecularTexture",value:function(x){var I=this;if(this.specularTextures.get(x)!=null)return this.specularTextures.get(x);for(var B,W=[],$=this._pInst.createFramebuffer({width:512,height:512,density:1}),te=Math.log(512)/Math.log(2),ie=(this.specularShader||(this.specularShader=this._pInst.createShader(U.imageLightVert,U.imageLightSpecularFrag)),512);1<=ie;ie/=2)(function(de){$.resize(de,de);var se=1-Math.log(de)/Math.log(2)/te;$.draw(function(){I._pInst.shader(I.specularShader),I._pInst.clear(),I.specularShader.setUniform("environmentMap",x),I.specularShader.setUniform("roughness",se),I._pInst.noStroke(),I._pInst.noLights(),I._pInst.plane(de,de)}),W.push($.get().drawingContext.getImageData(0,0,de,de))})(ie);return $.remove(),B=new n.MipmapTexture(this,W,{}),this.specularTextures.set(x,B),B}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(x){return new l.default.Framebuffer(this,x)}},{key:"_setStrokeUniforms",value:function(x){x.bindShader(),x.setUniform("uUseLineColor",this._useLineColor),x.setUniform("uMaterialColor",this.curStrokeColor),x.setUniform("uStrokeWeight",this.curStrokeWeight),x.setUniform("uStrokeCap",R[this.curStrokeCap]),x.setUniform("uStrokeJoin",k[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(x){var I=this,B=(x.bindShader(),this.mixedSpecularColor=a(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(W,$){return I.curFillColor[$]*I._useMetalness+W*(1-I._useMetalness)})),x.setUniform("uUseVertexColor",this._useVertexColor),x.setUniform("uMaterialColor",this.curFillColor),x.setUniform("isTexture",!!this._tex),this._tex&&x.setUniform("uSampler",this._tex),x.setUniform("uTint",this._tint),x.setUniform("uHasSetAmbient",this._hasSetAmbient),x.setUniform("uAmbientMatColor",this.curAmbientColor),x.setUniform("uSpecularMatColor",this.mixedSpecularColor),x.setUniform("uEmissiveMatColor",this.curEmissiveColor),x.setUniform("uSpecular",this._useSpecularMaterial),x.setUniform("uEmissive",this._useEmissiveMaterial),x.setUniform("uShininess",this._useShininess),x.setUniform("metallic",this._useMetalness),this._setImageLightUniforms(x),x.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),B=(x.setUniform("uPointLightCount",B),x.setUniform("uPointLightLocation",this.pointLightPositions),x.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),x.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),B=(x.setUniform("uDirectionalLightCount",B),x.setUniform("uLightingDirection",this.directionalLightDirections),x.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),x.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),B=(this.mixedAmbientLight=a(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(W){return W-=I._useMetalness,Math.max(0,W)})),x.setUniform("uAmbientLightCount",B),x.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);x.setUniform("uSpotLightCount",B),x.setUniform("uSpotLightAngle",this.spotLightAngle),x.setUniform("uSpotLightConc",this.spotLightConc),x.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),x.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),x.setUniform("uSpotLightLocation",this.spotLightPositions),x.setUniform("uSpotLightDirection",this.spotLightDirections),x.setUniform("uConstantAttenuation",this.constantAttenuation),x.setUniform("uLinearAttenuation",this.linearAttenuation),x.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),x.bindTextures()}},{key:"_setImageLightUniforms",value:function(x){var I,B;x.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(I=this.getDiffusedTexture(this.activeImageLight),x.setUniform("environmentMapDiffused",I),I=this.getSpecularTexture(this.activeImageLight),B=20/this._useShininess,x.setUniform("levelOfDetail",8*B),x.setUniform("environmentMapSpecular",I))}},{key:"_setPointUniforms",value:function(x){x.bindShader(),x.setUniform("uMaterialColor",this.curStrokeColor),x.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(x,I,B,W,$){I=I||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(I,x),B!==void 0&&((x=B)instanceof l.default.DataArray?x=B.dataArray():x instanceof(W||Float32Array)||(x=new(W||Float32Array)(x)),this.GL.bufferData(I,x,$||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(x,I){return x.length===I.length&&x.every(function(B,W){return B===I[W]})}},{key:"_isTypedArray",value:function(x){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(I){return x instanceof I})}},{key:"_flatten",value:function(x){return x.flat()}},{key:"_vToNArray",value:function(x){return x.flatMap(function(I){return[I.x,I.y,I.z]})}},{key:"_bezierCoefficients",value:function(x){var I=x*x,B=1-x,W=B*B;return[W*B,3*W*x,3*B*I,I*x]}},{key:"_quadraticCoefficients",value:function(x){var I=1-x;return[I*I,2*I*x,x*x]}},{key:"_bezierToCatmull",value:function(x){return[x[1],x[1]+(x[2]-x[0])/this._curveTightness,x[2]-(x[3]-x[1])/this._curveTightness,x[2]]}},{key:"_initTessy",value:function(){var x=new m.default.GluTesselator;return x.gluTessCallback(m.default.gluEnum.GLU_TESS_VERTEX_DATA,function(I,B){var W=!0,$=!1,te=void 0;try{for(var ie,de=I[Symbol.iterator]();!(W=(ie=de.next()).done);W=!0){var se=ie.value;B.push(se)}}catch(he){$=!0,te=he}finally{try{W||de.return==null||de.return()}finally{if($)throw te}}}),x.gluTessCallback(m.default.gluEnum.GLU_TESS_BEGIN,function(I){I!==m.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(I))}),x.gluTessCallback(m.default.gluEnum.GLU_TESS_ERROR,function(I){console.log("error callback"),console.log("error number: ".concat(I))}),x.gluTessCallback(m.default.gluEnum.GLU_TESS_COMBINE,function(I,B,W){for(var $=new Array(l.default.RendererGL.prototype.tessyVertexSize).fill(0),te=0;te<W.length;te++)for(var ie=0;ie<$.length;ie++)W[te]!==0&&B[te]&&($[ie]+=B[te][ie]*W[te]);return $}),x.gluTessCallback(m.default.gluEnum.GLU_TESS_EDGE_FLAG,function(I){}),x.gluTessProperty(m.default.gluEnum.GLU_TESS_WINDING_RULE,m.default.windingRule.GLU_TESS_WINDING_NONZERO),x}},{key:"_triangulate",value:function(x){var I=x[0]?x[0][2]:void 0,B=!0,W=!0,se=!1,ce=void 0;try{for(var $,te=x[Symbol.iterator]();!(W=($=te.next()).done);W=!0)for(var ie=$.value,de=0;de<ie.length;de+=l.default.RendererGL.prototype.tessyVertexSize)if(ie[de+2]!==I){B=!1;break}}catch(Se){se=!0,ce=Se}finally{try{W||te.return==null||te.return()}finally{if(se)throw ce}}B?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var se=[],he=(this._tessy.gluTessBeginPolygon(se),!0),ce=!1,ee=void 0;try{for(var ue,me=x[Symbol.iterator]();!(he=(ue=me.next()).done);he=!0){var je=ue.value;this._tessy.gluTessBeginContour();for(var ye=0;ye<je.length;ye+=l.default.RendererGL.prototype.tessyVertexSize){var be=je.slice(ye,ye+l.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(be,be)}this._tessy.gluTessEndContour()}}catch(Se){ce=!0,ee=Se}finally{try{he||me.return==null||me.return()}finally{if(ce)throw ee}}return this._tessy.gluTessEndPolygon(),se}}])&&c(K.prototype,G),oe}(l.default.Renderer),l.default.prototype._assert3d=function(G){if(!this._renderer.isP3D)throw new Error("".concat(G,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},l.default.RendererGL.prototype.tessyVertexSize=12,L=l.default.RendererGL,j.default=L},{"../core/constants":269,"../core/main":280,"../core/p5.Renderer":283,"./GeometryBuilder":324,"./p5.Camera":329,"./p5.Framebuffer":331,"./p5.Matrix":333,"./p5.Shader":338,"./p5.Texture":339,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.every":154,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.flat-map":158,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.array.unscopables.flat-map":171,"core-js/modules/es.map":174,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.float64-array":217,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int16-array":221,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,libtess:252,path:255}],338:[function(t,M,j){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};function y(l,d){for(var v=0;v<d.length;v++){var m=d[v];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}h.default.Shader=function(){function l(m,n,i){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this._renderer=m,this._vertSrc=n,this._fragSrc=i,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var d,v;return d=l,(v=[{key:"init",value:function(){if(this._glProgram===0){var m=this._renderer.GL;if(this._vertShader=m.createShader(m.VERTEX_SHADER),m.shaderSource(this._vertShader,this._vertSrc),m.compileShader(this._vertShader),!m.getShaderParameter(this._vertShader,m.COMPILE_STATUS))return h.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(m.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=m.createShader(m.FRAGMENT_SHADER),m.shaderSource(this._fragShader,this._fragSrc),m.compileShader(this._fragShader),!m.getShaderParameter(this._fragShader,m.COMPILE_STATUS))return h.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(m.getShaderInfoLog(this._fragShader))),null;this._glProgram=m.createProgram(),m.attachShader(this._glProgram,this._vertShader),m.attachShader(this._glProgram,this._fragShader),m.linkProgram(this._glProgram),m.getProgramParameter(this._glProgram,m.LINK_STATUS)||h.default._friendlyError("Snap! Error linking shader program: ".concat(m.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"copyToContext",value:function(m){var n=new h.default.Shader(m._renderer,this._vertSrc,this._fragSrc);return n.ensureCompiledOnContext(m),n}},{key:"ensureCompiledOnContext",value:function(m){if(this._glProgram!==0&&this._renderer!==m._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=m._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var m=this._renderer.GL,n=m.getProgramParameter(this._glProgram,m.ACTIVE_ATTRIBUTES),i=0;i<n;++i){var s=m.getActiveAttrib(this._glProgram,i),a=s.name,c=m.getAttribLocation(this._glProgram,a),r={};r.name=a,r.location=c,r.index=i,r.type=s.type,r.size=s.size,this.attributes[a]=r}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var m=this._renderer.GL,n=m.getProgramParameter(this._glProgram,m.ACTIVE_UNIFORMS),i=0,s=0;s<n;++s){var a=m.getActiveUniform(this._glProgram,s),c={},r=(c.location=m.getUniformLocation(this._glProgram,a.name),c.size=a.size,a.name);1<a.size&&(r=r.substring(0,r.indexOf("[0]"))),c.name=r,c.type=a.type,c._cachedData=void 0,c.type===m.SAMPLER_2D&&(c.samplerIndex=i,i++,this.samplers.push(c)),c.isArray=1<a.size||c.type===m.FLOAT_MAT3||c.type===m.FLOAT_MAT4||c.type===m.FLOAT_VEC2||c.type===m.FLOAT_VEC3||c.type===m.FLOAT_VEC4||c.type===m.INT_VEC2||c.type===m.INT_VEC4||c.type===m.INT_VEC3,this.uniforms[r]=c}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var m=this._renderer.GL,n=!0,i=!1,s=void 0;try{for(var a,c=this.samplers[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var r=a.value,u=r.texture;u===void 0&&(u=this._renderer._getEmptyTexture()),m.activeTexture(m.TEXTURE0+r.samplerIndex),u.bindTexture(),u.update(),m.uniform1i(r.location,r.samplerIndex)}}catch(p){i=!0,s=p}finally{try{n||c.return==null||c.return()}finally{if(i)throw s}}}},{key:"updateTextures",value:function(){var m=!0,n=!1,i=void 0;try{for(var s,a=this.samplers[Symbol.iterator]();!(m=(s=a.next()).done);m=!0){var c=s.value.texture;c&&c.update()}}catch(r){n=!0,i=r}finally{try{m||a.return==null||a.return()}finally{if(n)throw i}}}},{key:"unbindTextures",value:function(){var m=!0,n=!1,i=void 0;try{for(var s,a=this.samplers[Symbol.iterator]();!(m=(s=a.next()).done);m=!0){var c=s.value;this.setUniform(c.name,this._renderer._getEmptyTexture())}}catch(r){n=!0,i=r}finally{try{m||a.return==null||a.return()}finally{if(n)throw i}}}},{key:"_setMatrixUniforms",value:function(){var m=this._renderer._curCamera.cameraMatrix,n=this._renderer.uPMatrix,i=this._renderer.uMVMatrix,s=i.copy();s.mult(n),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",m.mat4),this.setUniform("uProjectionMatrix",n.mat4),this.setUniform("uModelViewMatrix",i.mat4),this.setUniform("uModelViewProjectionMatrix",s.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer._curCamera.cameraMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var m=this._renderer.GL;return this._renderer._curShader!==this&&(m.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(m,n){var i=this.uniforms[m];if(i){var s=this._renderer.GL;if(i.isArray){if(i._cachedData&&this._renderer._arraysEqual(i._cachedData,n))return;i._cachedData=n.slice(0)}else{if(i._cachedData&&i._cachedData===n)return;Array.isArray(n)?i._cachedData=n.slice(0):i._cachedData=n}var a=i.location;switch(this.useProgram(),i.type){case s.BOOL:n===!0?s.uniform1i(a,1):s.uniform1i(a,0);break;case s.INT:1<i.size?n.length&&s.uniform1iv(a,n):s.uniform1i(a,n);break;case s.FLOAT:1<i.size?n.length&&s.uniform1fv(a,n):s.uniform1f(a,n);break;case s.FLOAT_MAT3:s.uniformMatrix3fv(a,!1,n);break;case s.FLOAT_MAT4:s.uniformMatrix4fv(a,!1,n);break;case s.FLOAT_VEC2:1<i.size?n.length&&s.uniform2fv(a,n):s.uniform2f(a,n[0],n[1]);break;case s.FLOAT_VEC3:1<i.size?n.length&&s.uniform3fv(a,n):s.uniform3f(a,n[0],n[1],n[2]);break;case s.FLOAT_VEC4:1<i.size?n.length&&s.uniform4fv(a,n):s.uniform4f(a,n[0],n[1],n[2],n[3]);break;case s.INT_VEC2:1<i.size?n.length&&s.uniform2iv(a,n):s.uniform2i(a,n[0],n[1]);break;case s.INT_VEC3:1<i.size?n.length&&s.uniform3iv(a,n):s.uniform3i(a,n[0],n[1],n[2]);break;case s.INT_VEC4:1<i.size?n.length&&s.uniform4iv(a,n):s.uniform4i(a,n[0],n[1],n[2],n[3]);break;case s.SAMPLER_2D:s.activeTexture(s.TEXTURE0+i.samplerIndex),i.texture=n instanceof h.default.Texture?n:this._renderer.getTexture(n),s.uniform1i(a,i.samplerIndex),i.texture.src.gifProperties&&i.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(m){return m!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(m,n,i,s,a,c){var r;return m&&(m=m.location)!==-1&&(r=this._renderer.GL,this._renderer.registerEnabled.has(m)||(r.enableVertexAttribArray(m),this._renderer.registerEnabled.add(m)),this._renderer.GL.vertexAttribPointer(m,n,i||r.FLOAT,s||!1,a||0,c||0)),this}},{key:"disableRemainingAttributes",value:function(){var m=this,n=!0,i=!1,s=void 0;try{for(var a,c=this._renderer.registerEnabled.values()[Symbol.iterator]();!(n=(a=c.next()).done);n=!0)(function(){var r=a.value;Object.keys(m.attributes).some(function(u){return m.attributes[u].location===r})||(m._renderer.GL.disableVertexAttribArray(r),m._renderer.registerEnabled.delete(r))})()}catch(r){i=!0,s=r}finally{try{n||c.return==null||c.return()}finally{if(i)throw s}}}}])&&y(d.prototype,v),l}(),t=h.default.Shader,j.default=t},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],339:[function(t,M,j){function h(p){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}function y(p){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(g){return h(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":h(g)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(j,"__esModule",{value:!0}),j.checkWebGLCapabilities=u,j.default=j.MipmapTexture=void 0;var l=(r=t("../core/main"))&&r.__esModule?r:{default:r},d=function(p){if(p&&p.__esModule)return p;if(p===null||y(p)!=="object"&&typeof p!="function")return{default:p};var g=v();if(g&&g.has(p))return g.get(p);var S,P={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in p){var T;Object.prototype.hasOwnProperty.call(p,S)&&((T=E?Object.getOwnPropertyDescriptor(p,S):null)&&(T.get||T.set)?Object.defineProperty(P,S,T):P[S]=p[S])}return P.default=p,g&&g.set(p,P),P}(t("../core/constants"));function v(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,v=function(){return p},p)}function m(p,g){return(m=Object.setPrototypeOf||function(S,P){return S.__proto__=P,S})(p,g)}function n(p){return function(){var g,S=i(p),S=(g=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(g=i(this).constructor,Reflect.construct(S,arguments,g)):S.apply(this,arguments),this);if(!g||y(g)!=="object"&&typeof g!="function"){if(S!==void 0)return S;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return g}}function i(p){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(p)}function s(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function a(p,g){for(var S=0;S<g.length;S++){var P=g[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(p,P.key,P)}}function c(p,g,S){g&&a(p.prototype,g),S&&a(p,S)}l.default.Texture=function(){function p(O,S,T){s(this,p),this._renderer=O;var E=this._renderer.GL,T=(T=T||{},this.src=S,this.glTex=void 0,this.glTarget=E.TEXTURE_2D,this.glFormat=T.format||E.RGBA,this.mipmaps=!1,this.glMinFilter=T.minFilter||E.LINEAR,this.glMagFilter=T.magFilter||E.LINEAR,this.glWrapS=T.wrapS||E.CLAMP_TO_EDGE,this.glWrapT=T.wrapT||E.CLAMP_TO_EDGE,this.glDataType=T.dataType||E.UNSIGNED_BYTE,u(O)),O=(this.glFormat!==E.HALF_FLOAT||T.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=E.FLOAT),this.glFormat!==E.HALF_FLOAT||this.glMinFilter!==E.LINEAR&&this.glMagFilter!==E.LINEAR||T.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===E.LINEAR&&(this.glMinFilter=E.NEAREST),this.glMagFilter===E.LINEAR&&(this.glMagFilter=E.NEAREST)),this.glFormat!==E.FLOAT||T.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=E.UNSIGNED_BYTE),this.glFormat!==E.FLOAT||this.glMinFilter!==E.LINEAR&&this.glMagFilter!==E.LINEAR||T.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===E.LINEAR&&(this.glMinFilter=E.NEAREST),this.glMagFilter===E.LINEAR&&(this.glMagFilter=E.NEAREST)),this.isSrcMediaElement=l.default.MediaElement!==void 0&&S instanceof l.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=l.default.Element!==void 0&&S instanceof l.default.Element&&!(S instanceof l.default.Graphics)&&!(S instanceof l.default.Renderer),this.isSrcP5Image=S instanceof l.default.Image,this.isSrcP5Graphics=S instanceof l.default.Graphics,this.isSrcP5Renderer=S instanceof l.default.Renderer,this.isImageData=typeof ImageData<"u"&&S instanceof ImageData,this.isFramebufferTexture=S instanceof l.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=O.width,this.height=O.height,this.init(O),this}return c(p,[{key:"_getTextureDataFromSource",value:function(){var g;return this.isFramebufferTexture?g=this.src.rawTexture():this.isSrcP5Image?g=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?g=this.src.elt:this.isImageData&&(g=this.src),g}},{key:"init",value:function(g){var S,P=this._renderer.GL;this.isFramebufferTexture||(this.glTex=P.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,this.glMagFilter),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(S=new Uint8Array([1,1,1,1]),P.texImage2D(this.glTarget,0,P.RGBA,1,1,0,this.glFormat,this.glDataType,S)):P.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,g))}},{key:"update",value:function(){var g,S,P,E=this.src;return E.width!==0&&E.height!==0&&!this.isFramebufferTexture&&(g=this._getTextureDataFromSource(),S=!1,P=this._renderer.GL,g.width!==this.width||g.height!==this.height?(S=!0,this.width=g.width||E.width,this.height=g.height||E.height,this.isSrcP5Image?E.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&E.setModified(!0)):this.isSrcP5Image?E.isModified()&&E.setModified(!(S=!0)):this.isSrcMediaElement?E.isModified()?E.setModified(!(S=!0)):E.loadedmetadata&&this._videoPrevUpdateTime!==E.time()&&(this._videoPrevUpdateTime=E.time(),S=!0):this.isImageData?E._dirty&&(S=!(E._dirty=!1)):S=!0,S&&(this.bindTexture(),P.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,g)),S)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(g,S){var P=this._renderer.GL;this.glMinFilter=this.glFilter(g),this.glMagFilter=this.glFilter(S),this.bindTexture(),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,this.glMinFilter),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(g){var S=this._renderer.GL;return g===d.NEAREST?S.NEAREST:S.LINEAR}},{key:"setWrapMode",value:function(g,S){function P(R){return(R&R-1)==0}var E=this._renderer.GL,O=this._getTextureDataFromSource(),O=O.naturalWidth&&O.naturalHeight?(T=O.naturalWidth,O.naturalHeight):(T=this.width,this.height),T=P(T),O=P(O);g===d.REPEAT?this._renderer.webglVersion===d.WEBGL2||T&&O?this.glWrapS=E.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=E.CLAMP_TO_EDGE):g===d.MIRROR?this._renderer.webglVersion===d.WEBGL2||T&&O?this.glWrapS=E.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=E.CLAMP_TO_EDGE):this.glWrapS=E.CLAMP_TO_EDGE,S===d.REPEAT?this._renderer.webglVersion===d.WEBGL2||T&&O?this.glWrapT=E.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=E.CLAMP_TO_EDGE):S===d.MIRROR?this._renderer.webglVersion===d.WEBGL2||T&&O?this.glWrapT=E.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=E.CLAMP_TO_EDGE):this.glWrapT=E.CLAMP_TO_EDGE,this.bindTexture(),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,this.glWrapS),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),p}();var r=function(p){var g=P;if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),p&&m(g,p);var S=n(P);function P(E,T,O){return s(this,P),T=(E=S.call(this,E,T,O))._renderer.GL,E.glMinFilter===T.LINEAR&&(E.glMinFilter=T.LINEAR_MIPMAP_LINEAR),E}return c(P,[{key:"glFilter",value:function(E){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(E){var T=this._renderer.GL;this.glTex=T.createTexture(),this.bindTexture();for(var O=0;O<E.length;O++)T.texImage2D(this.glTarget,O,this.glFormat,this.glFormat,this.glDataType,E[O]);this.glMinFilter=T.LINEAR_MIPMAP_LINEAR,T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,this.glMagFilter),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),P}(l.default.Texture);function u(E){var g=E.GL,E=E.webglVersion,S=E===d.WEBGL2?g.getExtension("EXT_color_buffer_float")&&g.getExtension("EXT_float_blend"):g.getExtension("OES_texture_float"),P=S&&g.getExtension("OES_texture_float_linear"),E=E===d.WEBGL2?g.getExtension("EXT_color_buffer_float"):g.getExtension("OES_texture_half_float");return{float:S,floatLinear:P,halfFloat:E,halfFloatLinear:E&&g.getExtension("OES_texture_half_float_linear")}}j.MipmapTexture=r,t=l.default.Texture,j.default=t},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],340:[function(t,M,j){function h(p){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}function y(p){return(y=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(g){return h(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":h(g)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var l,d=(l=t("../core/main"))&&l.__esModule?l:{default:l},v=function(p){if(p&&p.__esModule)return p;if(p===null||y(p)!=="object"&&typeof p!="function")return{default:p};var g=m();if(g&&g.has(p))return g.get(p);var S,P={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in p){var T;Object.prototype.hasOwnProperty.call(p,S)&&((T=E?Object.getOwnPropertyDescriptor(p,S):null)&&(T.get||T.set)?Object.defineProperty(P,S,T):P[S]=p[S])}return P.default=p,g&&g.set(p,P),P}(t("../core/constants"));function m(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,m=function(){return p},p)}function n(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function i(p,g){for(var S=0;S<g.length;S++){var P=g[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(p,P.key,P)}}function s(p,g,S){g&&i(p.prototype,g),S&&i(p,S)}t("./p5.Shader"),t("./p5.RendererGL.Retained"),d.default.RendererGL.prototype._applyTextProperties=function(){},d.default.RendererGL.prototype.textWidth=function(p){return this._isOpenType()?this._textFont._textWidth(p,this._textSize):0};var a=function(){function p(g,S){n(this,p),this.width=g,this.height=S,this.infos=[]}return s(p,[{key:"findImage",value:function(g){var S,P,E=this.width*this.height;if(E<g)throw new Error("font is too complex to render in 3D");for(var T=this.infos.length-1;0<=T;--T){var O=this.infos[T];if(O.index+g<E){P=(S=O).imageData;break}}if(!S){try{P=new ImageData(this.width,this.height)}catch{var R=document.getElementsByTagName("canvas")[0],k=!R,D=(R||((R=document.createElement("canvas")).style.display="none",document.body.appendChild(R)),R.getContext("2d"));D&&(P=D.createImageData(this.width,this.height)),k&&document.body.removeChild(R)}this.infos.push(S={index:0,imageData:P})}return D=S.index,S.index+=g,P._dirty=!0,{imageData:P,index:D}}}]),p}();function c(O,g,S,P,E){var T=O.imageData.data,O=4*O.index++;T[O++]=g,T[O++]=S,T[O++]=P,T[+O]=E}var r=Math.sqrt(3),u=function(){function p(g){n(this,p),this.font=g,this.strokeImageInfos=new a(64,64),this.colDimImageInfos=new a(64,64),this.rowDimImageInfos=new a(64,64),this.colCellImageInfos=new a(64,64),this.rowCellImageInfos=new a(64,64),this.glyphInfos={}}return s(p,[{key:"getGlyphInfo",value:function(g){var S=this.glyphInfos[g.index];if(!S){var P=g.getBoundingBox(),E=P.x1,T=P.y1,O=P.x2-E,R=P.y2-T,k=g.path.commands;if(O==0||R==0||!k.length)return this.glyphInfos[g.index]={};for(var D=[],L=[],U=[],F=8;0<=F;--F)U.push([]);for(F=8;0<=F;--F)L.push([]);var V,X,H,G,K=function(){function Ge(ze,qe,He,_e){n(this,Ge),this.p0=ze,this.c0=qe,this.c1=He,this.p1=_e}return s(Ge,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return d.default.Vector.sub(d.default.Vector.sub(this.p1,this.p0),d.default.Vector.mult(d.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(Le){var qe=d.default.Vector.lerp(this.p0,this.c0,Le),_e=d.default.Vector.lerp(this.c0,this.c1,Le),He=d.default.Vector.lerp(qe,_e,Le),_e=(this.c1=d.default.Vector.lerp(this.c1,this.p1,Le),this.c0=d.default.Vector.lerp(_e,this.c1,Le),d.default.Vector.lerp(He,this.c0,Le)),Le=new Ge(this.p0,qe,He,_e);return this.p0=_e,Le}},{key:"splitInflections",value:function(){var ze=d.default.Vector.sub(this.c0,this.p0),qe=d.default.Vector.sub(d.default.Vector.sub(this.c1,this.c0),ze),He=d.default.Vector.sub(d.default.Vector.sub(d.default.Vector.sub(this.p1,this.c1),ze),d.default.Vector.mult(qe,2)),_e=[],Le=qe.x*He.y-qe.y*He.x;return Le!==0&&0<=(ze=(He=ze.x*He.y-ze.y*He.x)*He-4*Le*(ze.x*qe.y-ze.y*qe.x))&&(Le<0&&(Le=-Le,He=-He),ze=(-He+(qe=Math.sqrt(ze)))/(2*Le),0<(He=(-He-qe)/(2*Le))&&He<1&&(_e.push(this.split(He)),ze=1-(1-ze)/(1-He)),0<ze&&ze<1&&_e.push(this.split(ze))),_e.push(this),_e}}]),Ge}(),Z=!0,oe=!1,x=void 0;try{for(var I,B=k[Symbol.iterator]();!(Z=(I=B.next()).done);Z=!0){var W=I.value,$=(W.x-E)/O,te=(W.y-T)/R;if(!Me(V,X,$,te)){switch(W.type){case"M":H=$,G=te;break;case"L":Fe(V,X,$,te);break;case"Q":var ie=(W.x1-E)/O,de=(W.y1-T)/R;be([V,$,ie],[X,te,de],{x:V,y:X,cx:ie,cy:de});break;case"Z":Me(V,X,H,G)?D.push({x:V,y:X}):(Fe(V,X,H,G),D.push({x:H,y:G}));break;case"C":for(var se=function(re,xe,Oe,He,_e,Le,Ee,Q){var re=new K(new d.default.Vector(re,xe),new d.default.Vector(Oe,He),new d.default.Vector(_e,Le),new d.default.Vector(Ee,Q)).splitInflections(),Y=[],ne=30/r,ge=!0,xe=!1,Oe=void 0;try{for(var Ue,Be=re[Symbol.iterator]();!(ge=(Ue=Be.next()).done);ge=!0){for(var Ve=Ue.value,Xe=[],st=void 0;!(.125<=(st=ne/Ve.quadError()));){var nt=Math.pow(st,.3333333333333333),Qe=Ve.split(nt),ot=Ve.split(1-nt/(1-nt));Y.push(Qe),Xe.push(Ve),Ve=ot}st<1&&Y.push(Ve.split(.5)),Y.push(Ve),Array.prototype.push.apply(Y,Xe.reverse())}}catch(rt){xe=!0,Oe=rt}finally{try{ge||Be.return==null||Be.return()}finally{if(xe)throw Oe}}return Y}(V,X,(W.x1-E)/O,(W.y1-T)/R,(W.x2-E)/O,(W.y2-T)/R,$,te),he=0;he<se.length;he++){var ce=se[he].toQuadratic();be([ce.x,ce.x1,ce.cx],[ce.y,ce.y1,ce.cy],ce)}break;default:throw new Error("unknown command type: ".concat(W.type))}V=$,X=te}}}catch(Ge){oe=!0,x=Ge}finally{try{Z||B.return==null||B.return()}finally{if(oe)throw x}}for(var ee=D.length,ue=this.strokeImageInfos.findImage(ee),me=ue.index,je=0;je<ee;++je){var ye=D[je];c(ue,Se(ye.x),Se(ye.y),Se(ye.cx),Se(ye.cy))}(S=this.glyphInfos[g.index]={glyph:g,uGlyphRect:[P.x1,-P.y1,P.x2,-P.y2],strokeImageInfo:ue,strokes:D,colInfo:Ze(U,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Ze(L,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[S.colInfo.dimOffset,S.rowInfo.dimOffset]}return S;function be(Ge,ze,qe){var He=D.length;function _e(Y,ne,ge){for(var xe=Y.length;0<xe--;){var Oe=Y[xe];Oe<ne&&(ne=Oe),ge<Oe&&(ge=Oe)}return{min:ne,max:ge}}D.push(qe);for(var qe=_e(Ge,1,0),Ge=Math.max(Math.floor(9*qe.min-.5),0),Le=Math.min(Math.ceil(9*qe.max+.5),9),Ee=Ge;Ee<Le;++Ee)U[Ee].push(He);for(var qe=_e(ze,1,0),Ge=Math.max(Math.floor(9*qe.min-.5),0),Q=Math.min(Math.ceil(9*qe.max+.5),9),re=Ge;re<Q;++re)L[re].push(He)}function Se(Ge){return(Ge=(qe=255)*Ge)<(ze=0)?ze:qe<Ge?qe:Ge;var ze,qe}function Fe(Ge,ze,qe,He){be([Ge,qe],[ze,He],{x:Ge,y:ze,cx:(Ge+qe)/2,cy:(ze+He)/2})}function Me(Ge,ze,qe,He){return Math.abs(qe-Ge)<1e-5&&Math.abs(He-ze)<1e-5}function Ze(Ge,ze,qe){for(var He=Ge.length,_e=ze.findImage(He),ze=_e.index,Le=0,Ee=0;Ee<He;++Ee)Le+=Ge[Ee].length;for(var Q=qe.findImage(Le),re=0;re<He;++re){var Y=Ge[re],ne=Y.length,ge=Q.index;c(_e,ge>>7,127&ge,ne>>7,127&ne);for(var xe=0;xe<ne;++xe){var Oe=Y[xe]+me;c(Q,Oe>>7,127&Oe,0,0)}}return{cellImageInfo:Q,dimOffset:ze,dimImageInfo:_e}}}}]),p}();d.default.RendererGL.prototype._renderText=function(p,g,S,P,E){if(this._textFont&&typeof this._textFont!="string"){if(!(E<=P)&&this._doFill){if(this._isOpenType()){p.push();var E=this._doStroke,T=this.drawMode,O=(this._doStroke=!1,this.drawMode=v.TEXTURE,this._textFont.font),R=(R=this._textFont._fontInfo)||(this._textFont._fontInfo=new u(O)),S=this._textFont._handleAlignment(this,g,S,P),P=this._textSize/O.unitsPerEm,k=(this.translate(S.x,S.y,0),this.scale(P,P,1),this.GL),S=!this._defaultFontShader,D=this._getFontShader(),L=(D.init(),D.bindShader(),S&&(D.setUniform("uGridImageSize",[64,64]),D.setUniform("uCellsImageSize",[64,64]),D.setUniform("uStrokeImageSize",[64,64]),D.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),U=(L||((P=this._textGeom=new d.default.Geometry(1,1,function(){for(var he=0;he<=1;he++)for(var ce=0;ce<=1;ce++)this.vertices.push(new d.default.Vector(ce,he,0)),this.uvs.push(ce,he)})).computeFaces().computeNormals(),L=this.createBuffers("glyph",P)),!0),S=!1,P=void 0;try{for(var F,V=this.retainedMode.buffers.text[Symbol.iterator]();!(U=(F=V.next()).done);U=!0)F.value._prepareBuffer(L,D)}catch(he){S=!0,P=he}finally{try{U||V.return==null||V.return()}finally{if(S)throw P}}this._bindBuffer(L.indexBuffer,k.ELEMENT_ARRAY_BUFFER),D.setUniform("uMaterialColor",this.curFillColor),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var X=0,H=null,G=O.stringToGlyphs(g),K=!0,Z=!1,oe=void 0;try{for(var x,I=G[Symbol.iterator]();!(K=(x=I.next()).done);K=!0){var B,W,$=x.value,te=(H&&(X+=O.getKerningValue(H,$)),R.getGlyphInfo($));te.uGlyphRect&&(B=te.rowInfo,W=te.colInfo,D.setUniform("uSamplerStrokes",te.strokeImageInfo.imageData),D.setUniform("uSamplerRowStrokes",B.cellImageInfo.imageData),D.setUniform("uSamplerRows",B.dimImageInfo.imageData),D.setUniform("uSamplerColStrokes",W.cellImageInfo.imageData),D.setUniform("uSamplerCols",W.dimImageInfo.imageData),D.setUniform("uGridOffset",te.uGridOffset),D.setUniform("uGlyphRect",te.uGlyphRect),D.setUniform("uGlyphOffset",X),D.bindTextures(),k.drawElements(k.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),X+=$.advanceWidth,H=$}}catch(he){Z=!0,oe=he}finally{try{K||I.return==null||I.return()}finally{if(Z)throw oe}}}finally{D.unbindShader(),this._doStroke=E,this.drawMode=T,k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),p.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return p}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":269,"../core/main":280,"./p5.RendererGL.Retained":336,"./p5.Shader":338,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}]},{},[264])(264)})})(pa);var dh=pa.exports;const Zn=ch(dh),hh="/dist/assets/GRADIENT_ARTIPHYS-4s08R83x.png",ph="/dist/assets/circleTex2-S-ROsv6M.png",fh="/dist/assets/circleTex3-D4JkO1DC.png",mh="/dist/assets/circleTex4-DPzM_rDN.png",yh="/dist/assets/ambient-BAD2k-Md.mp3";window.p5=Zn;let go,gh=[],ci,Gn,yn,vo,di,bo;const Yr=new oh,fr={grid_x:4,grid_y:100,column_splits:3,bgColor:"#000000",blend_modes:"source-over"},vh=_=>{_.preload=function(){go=_.loadImage(hh);let b=_.loadImage(ph),t=_.loadImage(fh),M=_.loadImage(mh);_.loadSound(yh),ci=[b,t,M],ih(gh,_),bh()},_.setup=function(){_.createCanvas(_.windowWidth,_.windowHeight),bo=_.createGraphics(_.windowWidth,_.windowHeight),vo=new ah(go),di=new uh(5,5,_),Gn=new Zn.AudioIn,Gn.start(),yn=new Zn.FFT(.9,128),yn.setInput(Gn)},_.draw=function(){_.push(),_.background(fr.bgColor);let b=yn.analyze();b=yn.logAverages(yn.getOctaveBands(3,15.625*1)),o(b),_.blendMode(fr.blend_modes),vo.update(_,fr.grid_x,fr.grid_y,ci,go,fr.column_splits,b),vo.draw(_),di.draw(bo)},_.mousePressed=function(){Gn.start(),_.userStartAudio()},_.windowResized=function(){_.resizeCanvas(windowWidth,windowHeight),bo=createGraphics(windowWidth,windowHeight)};function o(b){_.push(),_.noFill(),_.stroke(255);for(let t=0;t<10;t++){_.beginShape();for(let M=0;M<b.length;M++){let j=_.map(M,0,b.length,0,_.width),h=_.map(b[M],0,255,_.height,0);_.vertex(j,h-t*100)}_.endShape()}_.pop()}};function bh(){Yr.title="My controls",Yr.addBinding(fr,"grid_x",{step:1,min:2,max:10}),Yr.addBinding(fr,"grid_y",{step:1,min:2,max:100}),Yr.addBinding(fr,"blend_modes",{options:{DEFAULT:"source-over",ADD:"lighter",DARKEST:"darken",LIGHTEST:"lighten",MULTIPLY:"multiply",SCREEN:"screen",SUBTRACT:"subtract",OVERLAY:"overlay",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DODGE:"color-dodge",BURN:"color-burn",REPLACE:"copy"}}),Yr.addBinding(fr,"column_splits",{min:1,max:20,step:1}),Yr.addBinding(fr,"bgColor")}async function _h(){await Fa(()=>import("./p5.sound-Cmtu2auS.js").then(_=>_.p),__vite__mapDeps([]))}_h().then(()=>{new Zn(vh)});export{ch as g};
